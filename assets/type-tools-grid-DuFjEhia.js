var q0=Object.defineProperty;var c=(i,e)=>q0(i,"name",{value:e,configurable:!0});c(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}c(t,"getFetchOpts");function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}c(n,"processPreload")},"polyfill")();var ih=0,im=-3;function so(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}c(so,"Tree");function $0(i,e){this.source=i,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=e,this.destLen=0,this.ltree=new so,this.dtree=new so}c($0,"Data");var sm=new so,rm=new so,sh=new Uint8Array(30),rh=new Uint16Array(30),om=new Uint8Array(30),am=new Uint16Array(30),eB=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$d=new so,Dn=new Uint8Array(320);function lm(i,e,t,n){var s,r;for(s=0;s<t;++s)i[s]=0;for(s=0;s<30-t;++s)i[s+t]=s/t|0;for(r=n,s=0;s<30;++s)e[s]=r,r+=1<<i[s]}c(lm,"tinf_build_bits_base");function tB(i,e){var t;for(t=0;t<7;++t)i.table[t]=0;for(i.table[7]=24,i.table[8]=152,i.table[9]=112,t=0;t<24;++t)i.trans[t]=256+t;for(t=0;t<144;++t)i.trans[24+t]=t;for(t=0;t<8;++t)i.trans[168+t]=280+t;for(t=0;t<112;++t)i.trans[176+t]=144+t;for(t=0;t<5;++t)e.table[t]=0;for(e.table[5]=32,t=0;t<32;++t)e.trans[t]=t}c(tB,"tinf_build_fixed_trees");var eg=new Uint16Array(16);function Pc(i,e,t,n){var s,r;for(s=0;s<16;++s)i.table[s]=0;for(s=0;s<n;++s)i.table[e[t+s]]++;for(i.table[0]=0,r=0,s=0;s<16;++s)eg[s]=r,r+=i.table[s];for(s=0;s<n;++s)e[t+s]&&(i.trans[eg[e[t+s]]++]=s)}c(Pc,"tinf_build_tree");function nB(i){i.bitcount--||(i.tag=i.source[i.sourceIndex++],i.bitcount=7);var e=i.tag&1;return i.tag>>>=1,e}c(nB,"tinf_getbit");function xn(i,e,t){if(!e)return t;for(;i.bitcount<24;)i.tag|=i.source[i.sourceIndex++]<<i.bitcount,i.bitcount+=8;var n=i.tag&65535>>>16-e;return i.tag>>>=e,i.bitcount-=e,n+t}c(xn,"tinf_read_bits");function $A(i,e){for(;i.bitcount<24;)i.tag|=i.source[i.sourceIndex++]<<i.bitcount,i.bitcount+=8;var t=0,n=0,s=0,r=i.tag;do n=2*n+(r&1),r>>>=1,++s,t+=e.table[s],n-=e.table[s];while(n>=0);return i.tag=r,i.bitcount-=s,e.trans[t+n]}c($A,"tinf_decode_symbol");function iB(i,e,t){var n,s,r,o,a,l;for(n=xn(i,5,257),s=xn(i,5,1),r=xn(i,4,4),o=0;o<19;++o)Dn[o]=0;for(o=0;o<r;++o){var A=xn(i,3,0);Dn[eB[o]]=A}for(Pc($d,Dn,0,19),a=0;a<n+s;){var u=$A(i,$d);switch(u){case 16:var h=Dn[a-1];for(l=xn(i,2,3);l;--l)Dn[a++]=h;break;case 17:for(l=xn(i,3,3);l;--l)Dn[a++]=0;break;case 18:for(l=xn(i,7,11);l;--l)Dn[a++]=0;break;default:Dn[a++]=u;break}}Pc(e,Dn,0,n),Pc(t,Dn,n,s)}c(iB,"tinf_decode_trees");function tg(i,e,t){for(;;){var n=$A(i,e);if(n===256)return ih;if(n<256)i.dest[i.destLen++]=n;else{var s,r,o,a;for(n-=257,s=xn(i,sh[n],rh[n]),r=$A(i,t),o=i.destLen-xn(i,om[r],am[r]),a=o;a<o+s;++a)i.dest[i.destLen++]=i.dest[a]}}}c(tg,"tinf_inflate_block_data");function sB(i){for(var e,t,n;i.bitcount>8;)i.sourceIndex--,i.bitcount-=8;if(e=i.source[i.sourceIndex+1],e=256*e+i.source[i.sourceIndex],t=i.source[i.sourceIndex+3],t=256*t+i.source[i.sourceIndex+2],e!==(~t&65535))return im;for(i.sourceIndex+=4,n=e;n;--n)i.dest[i.destLen++]=i.source[i.sourceIndex++];return i.bitcount=0,ih}c(sB,"tinf_inflate_uncompressed_block");function cm(i,e){var t=new $0(i,e),n,s,r;do{switch(n=nB(t),s=xn(t,2,0),s){case 0:r=sB(t);break;case 1:r=tg(t,sm,rm);break;case 2:iB(t,t.ltree,t.dtree),r=tg(t,t.ltree,t.dtree);break;default:r=im}if(r!==ih)throw new Error("Data error")}while(!n);return t.destLen<t.dest.length?typeof t.dest.slice=="function"?t.dest.slice(0,t.destLen):t.dest.subarray(0,t.destLen):t.dest}c(cm,"tinf_uncompress");tB(sm,rm);lm(sh,rh,4,3);lm(om,am,2,1);sh[28]=0;rh[28]=258;function Ls(i,e,t,n,s){return Math.pow(1-s,3)*i+3*Math.pow(1-s,2)*s*e+3*(1-s)*Math.pow(s,2)*t+Math.pow(s,3)*n}c(Ls,"derive");function Ss(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}c(Ss,"BoundingBox");Ss.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)};Ss.prototype.addPoint=function(i,e){typeof i=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=i,this.x2=i),i<this.x1&&(this.x1=i),i>this.x2&&(this.x2=i)),typeof e=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))};Ss.prototype.addX=function(i){this.addPoint(i,null)};Ss.prototype.addY=function(i){this.addPoint(null,i)};Ss.prototype.addBezier=function(i,e,t,n,s,r,o,a){const l=[i,e],A=[t,n],u=[s,r],h=[o,a];this.addPoint(i,e),this.addPoint(o,a);for(let d=0;d<=1;d++){const g=6*l[d]-12*A[d]+6*u[d],p=-3*l[d]+9*A[d]-9*u[d]+3*h[d],f=3*A[d]-3*l[d];if(p===0){if(g===0)continue;const G=-f/g;0<G&&G<1&&(d===0&&this.addX(Ls(l[d],A[d],u[d],h[d],G)),d===1&&this.addY(Ls(l[d],A[d],u[d],h[d],G)));continue}const m=Math.pow(g,2)-4*f*p;if(m<0)continue;const y=(-g+Math.sqrt(m))/(2*p);0<y&&y<1&&(d===0&&this.addX(Ls(l[d],A[d],u[d],h[d],y)),d===1&&this.addY(Ls(l[d],A[d],u[d],h[d],y)));const v=(-g-Math.sqrt(m))/(2*p);0<v&&v<1&&(d===0&&this.addX(Ls(l[d],A[d],u[d],h[d],v)),d===1&&this.addY(Ls(l[d],A[d],u[d],h[d],v)))}};Ss.prototype.addQuad=function(i,e,t,n,s,r){const o=i+.6666666666666666*(t-i),a=e+2/3*(n-e),l=o+1/3*(s-i),A=a+1/3*(r-e);this.addBezier(i,e,o,a,l,A,s,r)};var Am=Ss;function ft(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}c(ft,"Path$1");var Wr={};function um(i,e){const t=Math.floor(i),n=i-t;if(Wr[e]||(Wr[e]={}),Wr[e][n]!==void 0){const r=Wr[e][n];return t+r}const s=+(Math.round(n+"e+"+e)+"e-"+e);return Wr[e][n]=s,t+s}c(um,"roundDecimal");function hm(i){let e=[[]],t=0,n=0;for(let s=0;s<i.length;s+=1){const r=e[e.length-1],o=i[s],a=r[0],l=r[1],A=r[r.length-1],u=i[s+1];r.push(o),o.type==="M"?(t=o.x,n=o.y):o.type==="L"&&(!u||u.command==="Z")?Math.abs(o.x-t)>1||Math.abs(o.y-n)>1||r.pop():o.type==="L"&&A&&A.x===o.x&&A.y===o.y?r.pop():o.type==="Z"&&(a&&l&&A&&a.type==="M"&&l.type==="L"&&A.type==="L"&&A.x===a.x&&A.y===a.y&&(r.shift(),r[0].type="M"),s+1<i.length&&e.push([]))}return i=[].concat.apply([],e),i}c(hm,"optimizeCommands");function rB(i){return Object.assign({},{decimalPlaces:2,optimize:!0,flipY:!0,flipYBase:void 0,scale:1,x:0,y:0},i)}c(rB,"createSVGParsingOptions");function oB(i){return parseInt(i)===i&&(i={decimalPlaces:i,flipY:!1}),Object.assign({},{decimalPlaces:2,optimize:!0,flipY:!0,flipYBase:void 0},i)}c(oB,"createSVGOutputOptions");ft.prototype.fromSVG=function(i,e={}){typeof SVGPathElement<"u"&&i instanceof SVGPathElement&&(i=i.getAttribute("d")),e=rB(e),this.commands=[];const t="0123456789",n="MmLlQqCcZzHhVv",s="SsTtAa",r="-+";let o={},a=[""],l=!1;function A(p){return p.filter(f=>f.length).map(f=>{let m=parseFloat(f);return(e.decimalPlaces||e.decimalPlaces===0)&&(m=um(m,e.decimalPlaces)),m})}c(A,"parseBuffer2");function u(p){if(!this.commands.length)return p;const f=this.commands[this.commands.length-1];for(let m=0;m<p.length;m++)p[m]+=f[m&1?"y":"x"];return p}c(u,"makeRelative");function h(){if(o.type===void 0)return;const p=o.type.toUpperCase(),f=p!=="Z"&&o.type.toUpperCase()!==o.type;let m=A(a);if(a=[""],!m.length&&p!=="Z")return;f&&p!=="H"&&p!=="V"&&(m=u.apply(this,[m]));const y=this.commands.length&&this.commands[this.commands.length-1].x||0,v=this.commands.length&&this.commands[this.commands.length-1].y||0;switch(p){case"M":this.moveTo(...m);break;case"L":this.lineTo(...m);break;case"V":for(let G=0;G<m.length;G++){let R=0;f&&(R=this.commands.length&&this.commands[this.commands.length-1].y||0),this.lineTo(y,m[G]+R)}break;case"H":for(let G=0;G<m.length;G++){let R=0;f&&(R=this.commands.length&&this.commands[this.commands.length-1].x||0),this.lineTo(m[G]+R,v)}break;case"C":this.bezierCurveTo(...m);break;case"Q":this.quadraticCurveTo(...m);break;case"Z":(this.commands.length<1||this.commands[this.commands.length-1].type!=="Z")&&this.close();break}if(this.commands.length)for(const G in this.commands[this.commands.length-1])this.commands[this.commands.length-1][G]===void 0&&(this.commands[this.commands.length-1][G]=0)}c(h,"applyCommand");for(let p=0;p<i.length;p++){const f=i.charAt(p),m=a[a.length-1];if(t.indexOf(f)>-1)a[a.length-1]+=f;else if(r.indexOf(f)>-1)if(!o.type&&!this.commands.length&&(o.type="L"),f==="-")!o.type||m.indexOf("-")>0?l=!0:m.length?a.push("-"):a[a.length-1]=f;else if(!o.type||m.length>0)l=!0;else continue;else if(n.indexOf(f)>-1)o.type?(h.apply(this),o={type:f}):o.type=f;else{if(s.indexOf(f)>-1)throw new Error("Unsupported path command: "+f+". Currently supported commands are "+n.split("").join(", ")+".");` ,	
\r\f\v`.indexOf(f)>-1?a.push(""):f==="."?!o.type||m.indexOf(f)>-1?l=!0:a[a.length-1]+=f:l=!0}if(l)throw new Error("Unexpected character: "+f+" at offset "+p)}h.apply(this),e.optimize&&(this.commands=hm(this.commands));const d=e.flipY;let g=e.flipYBase;if(d===!0&&e.flipYBase===void 0){const p=this.getBoundingBox();g=p.y1+p.y2}for(const p in this.commands){const f=this.commands[p];for(const m in f)["x","x1","x2"].includes(m)?this.commands[p][m]=e.x+f[m]*e.scale:["y","y1","y2"].includes(m)&&(this.commands[p][m]=e.y+(d?g-f[m]:f[m])*e.scale)}return this};ft.fromSVG=function(i,e){return new ft().fromSVG(i,e)};ft.prototype.moveTo=function(i,e){this.commands.push({type:"M",x:i,y:e})};ft.prototype.lineTo=function(i,e){this.commands.push({type:"L",x:i,y:e})};ft.prototype.curveTo=ft.prototype.bezierCurveTo=function(i,e,t,n,s,r){this.commands.push({type:"C",x1:i,y1:e,x2:t,y2:n,x:s,y:r})};ft.prototype.quadTo=ft.prototype.quadraticCurveTo=function(i,e,t,n){this.commands.push({type:"Q",x1:i,y1:e,x:t,y:n})};ft.prototype.close=ft.prototype.closePath=function(){this.commands.push({type:"Z"})};ft.prototype.extend=function(i){if(i.commands)i=i.commands;else if(i instanceof Am){const e=i;this.moveTo(e.x1,e.y1),this.lineTo(e.x2,e.y1),this.lineTo(e.x2,e.y2),this.lineTo(e.x1,e.y2),this.close();return}Array.prototype.push.apply(this.commands,i)};ft.prototype.getBoundingBox=function(){const i=new Am;let e=0,t=0,n=0,s=0;for(let r=0;r<this.commands.length;r++){const o=this.commands[r];switch(o.type){case"M":i.addPoint(o.x,o.y),e=n=o.x,t=s=o.y;break;case"L":i.addPoint(o.x,o.y),n=o.x,s=o.y;break;case"Q":i.addQuad(n,s,o.x1,o.y1,o.x,o.y),n=o.x,s=o.y;break;case"C":i.addBezier(n,s,o.x1,o.y1,o.x2,o.y2,o.x,o.y),n=o.x,s=o.y;break;case"Z":n=e,s=t;break;default:throw new Error("Unexpected path command "+o.type)}}return i.isEmpty()&&i.addPoint(0,0),i};ft.prototype.draw=function(i){const e=this._layers;if(e&&e.length){for(let n=0;n<e.length;n++)this.draw.call(e[n],i);return}const t=this._image;if(t){i.drawImage(t.image,t.x,t.y,t.width,t.height);return}i.beginPath();for(let n=0;n<this.commands.length;n+=1){const s=this.commands[n];s.type==="M"?i.moveTo(s.x,s.y):s.type==="L"?i.lineTo(s.x,s.y):s.type==="C"?i.bezierCurveTo(s.x1,s.y1,s.x2,s.y2,s.x,s.y):s.type==="Q"?i.quadraticCurveTo(s.x1,s.y1,s.x,s.y):s.type==="Z"&&this.stroke&&this.strokeWidth&&i.closePath()}this.fill&&(i.fillStyle=this.fill,i.fill()),this.stroke&&(i.strokeStyle=this.stroke,i.lineWidth=this.strokeWidth,i.stroke())};ft.prototype.toPathData=function(i){i=oB(i);function e(a){const l=um(a,i.decimalPlaces);return Math.round(a)===l?""+l:l.toFixed(i.decimalPlaces)}c(e,"floatToString");function t(){let a="";for(let l=0;l<arguments.length;l+=1){const A=arguments[l];A>=0&&l>0&&(a+=" "),a+=e(A)}return a}c(t,"packValues");let n=this.commands;i.optimize&&(n=JSON.parse(JSON.stringify(this.commands)),n=hm(n));const s=i.flipY;let r=i.flipYBase;if(s===!0&&r===void 0){const a=new ft;a.extend(n);const l=a.getBoundingBox();r=l.y1+l.y2}let o="";for(let a=0;a<n.length;a+=1){const l=n[a];l.type==="M"?o+="M"+t(l.x,s?r-l.y:l.y):l.type==="L"?o+="L"+t(l.x,s?r-l.y:l.y):l.type==="C"?o+="C"+t(l.x1,s?r-l.y1:l.y1,l.x2,s?r-l.y2:l.y2,l.x,s?r-l.y:l.y):l.type==="Q"?o+="Q"+t(l.x1,s?r-l.y1:l.y1,l.x,s?r-l.y:l.y):l.type==="Z"&&(o+="Z")}return o};ft.prototype.toSVG=function(i,e){this._layers&&this._layers.length&&console.warn("toSVG() does not support colr font layers yet"),this._image&&console.warn("toSVG() does not support SVG glyphs yet"),e||(e=this.toPathData(i));let t='<path d="';return t+=e,t+='"',this.fill!==void 0&&this.fill!=="black"&&(this.fill===null?t+=' fill="none"':t+=' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+="/>",t};ft.prototype.toDOMElement=function(i,e){this._layers&&this._layers.length&&console.warn("toDOMElement() does not support colr font layers yet"),e||(e=this.toPathData(i));const t=e,n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",t),this.fill!==void 0&&this.fill!=="black"&&(this.fill===null?n.setAttribute("fill","none"):n.setAttribute("fill",this.fill)),this.stroke&&(n.setAttribute("stroke",this.stroke),n.setAttribute("stroke-width",this.strokeWidth)),n};var or=ft;function dm(i){throw new Error(i)}c(dm,"fail");function ng(i,e){i||dm(e)}c(ng,"argument");var ge={fail:dm,argument:ng,assert:ng},ig=32768,sg=2147483648,aB=-32768,lB=32767+1/65536,ar={},X={},be={};function Yn(i){return function(){return i}}c(Yn,"constant");X.BYTE=function(i){return ge.argument(i>=0&&i<=255,"Byte value should be between 0 and 255."),[i]};be.BYTE=Yn(1);X.CHAR=function(i){return[i.charCodeAt(0)]};be.CHAR=Yn(1);X.CHARARRAY=function(i){(i===null||typeof i>"u")&&(i="",console.warn("CHARARRAY with undefined or null value encountered and treated as an empty string. This is probably caused by a missing glyph name."));const e=[];for(let t=0;t<i.length;t+=1)e[t]=i.charCodeAt(t);return e};be.CHARARRAY=function(i){return typeof i>"u"?0:i.length};X.USHORT=function(i){return[i>>8&255,i&255]};be.USHORT=Yn(2);X.SHORT=function(i){return i>=ig&&(i=-(2*ig-i)),[i>>8&255,i&255]};be.SHORT=Yn(2);X.UINT24=function(i){return[i>>16&255,i>>8&255,i&255]};be.UINT24=Yn(3);X.ULONG=function(i){return[i>>24&255,i>>16&255,i>>8&255,i&255]};be.ULONG=Yn(4);X.LONG=function(i){return i>=sg&&(i=-(2*sg-i)),[i>>24&255,i>>16&255,i>>8&255,i&255]};be.LONG=Yn(4);X.FLOAT=function(i){if(i>lB||i<aB)throw new Error(`Value ${i} is outside the range of representable values in 16.16 format`);const e=Math.round(i*65536)<<0;return X.ULONG(e)};be.FLOAT=be.ULONG;X.FIXED=X.ULONG;be.FIXED=be.ULONG;X.FWORD=X.SHORT;be.FWORD=be.SHORT;X.UFWORD=X.USHORT;be.UFWORD=be.USHORT;X.F2DOT14=function(i){return X.USHORT(i*16384)};be.F2DOT14=be.USHORT;X.LONGDATETIME=function(i){return[0,0,0,0,i>>24&255,i>>16&255,i>>8&255,i&255]};be.LONGDATETIME=Yn(8);X.TAG=function(i){return ge.argument(i.length===4,"Tag should be exactly 4 ASCII characters."),[i.charCodeAt(0),i.charCodeAt(1),i.charCodeAt(2),i.charCodeAt(3)]};be.TAG=Yn(4);X.Card8=X.BYTE;be.Card8=be.BYTE;X.Card16=X.USHORT;be.Card16=be.USHORT;X.OffSize=X.BYTE;be.OffSize=be.BYTE;X.SID=X.USHORT;be.SID=be.USHORT;X.NUMBER=function(i){return i>=-107&&i<=107?[i+139]:i>=108&&i<=1131?(i=i-108,[(i>>8)+247,i&255]):i>=-1131&&i<=-108?(i=-i-108,[(i>>8)+251,i&255]):i>=-32768&&i<=32767?X.NUMBER16(i):X.NUMBER32(i)};be.NUMBER=function(i){return X.NUMBER(i).length};X.NUMBER16=function(i){return[28,i>>8&255,i&255]};be.NUMBER16=Yn(3);X.NUMBER32=function(i){return[29,i>>24&255,i>>16&255,i>>8&255,i&255]};be.NUMBER32=Yn(5);X.REAL=function(i){let e=i.toString();const t=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(e);if(t){const r=parseFloat("1e"+((t[2]?+t[2]:0)+t[1].length));e=(Math.round(i*r)/r).toString()}let n="";for(let r=0,o=e.length;r<o;r+=1){const a=e[r];a==="e"?n+=e[++r]==="-"?"c":"b":a==="."?n+="a":a==="-"?n+="e":n+=a}n+=n.length&1?"f":"ff";const s=[30];for(let r=0,o=n.length;r<o;r+=2)s.push(parseInt(n.substr(r,2),16));return s};be.REAL=function(i){return X.REAL(i).length};X.NAME=X.CHARARRAY;be.NAME=be.CHARARRAY;X.STRING=X.CHARARRAY;be.STRING=be.CHARARRAY;ar.UTF8=function(i,e,t){const n=[],s=t;for(let r=0;r<s;r++,e+=1)n[r]=i.getUint8(e);return String.fromCharCode.apply(null,n)};ar.UTF16=function(i,e,t){const n=[],s=t/2;for(let r=0;r<s;r++,e+=2)n[r]=i.getUint16(e);return String.fromCharCode.apply(null,n)};X.UTF16=function(i){const e=[];for(let t=0;t<i.length;t+=1){const n=i.charCodeAt(t);e[e.length]=n>>8&255,e[e.length]=n&255}return e};be.UTF16=function(i){return i.length*2};var Ua={"x-mac-croatian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ","x-mac-cyrillic":"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю","x-mac-gaelic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæøṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ","x-mac-greek":"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ­","x-mac-icelandic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-inuit":"ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł","x-mac-ce":"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ",macintosh:"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-romanian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-turkish":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ"};ar.MACSTRING=function(i,e,t,n){const s=Ua[n];if(s===void 0)return;let r="";for(let o=0;o<t;o++){const a=i.getUint8(e+o);a<=127?r+=String.fromCharCode(a):r+=s[a&127]}return r};var Ba=typeof WeakMap=="function"&&new WeakMap,va,cB=c(function(i){if(!va){va={};for(let s in Ua)va[s]=new String(s)}const e=va[i];if(e===void 0)return;if(Ba){const s=Ba.get(e);if(s!==void 0)return s}const t=Ua[i];if(t===void 0)return;const n={};for(let s=0;s<t.length;s++)n[t.charCodeAt(s)]=s+128;return Ba&&Ba.set(e,n),n},"getMacEncodingTable");X.MACSTRING=function(i,e){const t=cB(e);if(t===void 0)return;const n=[];for(let s=0;s<i.length;s++){let r=i.charCodeAt(s);if(r>=128&&(r=t[r],r===void 0))return;n[s]=r}return n};be.MACSTRING=function(i,e){const t=X.MACSTRING(i,e);return t!==void 0?t.length:0};function eu(i){return i>=-128&&i<=127}c(eu,"isByteEncodable");function AB(i,e,t){let n=0;const s=i.length;for(;e<s&&n<64&&i[e]===0;)++e,++n;return t.push(128|n-1),e}c(AB,"encodeVarDeltaRunAsZeroes");function uB(i,e,t){let n=0;const s=i.length;let r=e;for(;r<s&&n<64;){const o=i[r];if(!eu(o)||o===0&&r+1<s&&i[r+1]===0)break;++r,++n}t.push(n-1);for(let o=e;o<r;++o)t.push(i[o]+256&255);return r}c(uB,"encodeVarDeltaRunAsBytes");function hB(i,e,t){let n=0;const s=i.length;let r=e;for(;r<s&&n<64;){const o=i[r];if(o===0||eu(o)&&r+1<s&&eu(i[r+1]))break;++r,++n}t.push(64|n-1);for(let o=e;o<r;++o){const a=i[o];t.push(a+65536>>8&255,a+256&255)}return r}c(hB,"encodeVarDeltaRunAsWords");X.VARDELTAS=function(i){let e=0;const t=[];for(;e<i.length;){const n=i[e];n===0?e=AB(i,e,t):n>=-128&&n<=127?e=uB(i,e,t):e=hB(i,e,t)}return t};X.INDEX=function(i){let e=1;const t=[e],n=[];for(let a=0;a<i.length;a+=1){const l=X.OBJECT(i[a]);Array.prototype.push.apply(n,l),e+=l.length,t.push(e)}if(n.length===0)return[0,0];const s=[],r=1+Math.floor(Math.log(e)/Math.log(2))/8|0,o=[void 0,X.BYTE,X.USHORT,X.UINT24,X.ULONG][r];for(let a=0;a<t.length;a+=1){const l=o(t[a]);Array.prototype.push.apply(s,l)}return Array.prototype.concat(X.Card16(i.length),X.OffSize(r),s,n)};be.INDEX=function(i){return X.INDEX(i).length};X.DICT=function(i){let e=[];const t=Object.keys(i),n=t.length;for(let s=0;s<n;s+=1){const r=parseInt(t[s],0),o=i[r],a=X.OPERAND(o.value,o.type),l=X.OPERATOR(r);for(let A=0;A<a.length;A++)e.push(a[A]);for(let A=0;A<l.length;A++)e.push(l[A])}return e};be.DICT=function(i){return X.DICT(i).length};X.OPERATOR=function(i){return i<1200?[i]:[12,i-1200]};X.OPERAND=function(i,e){let t=[];if(Array.isArray(e))for(let n=0;n<e.length;n+=1){ge.argument(i.length===e.length,"Not enough arguments given for type"+e);const s=X.OPERAND(i[n],e[n]);for(let r=0;r<s.length;r++)t.push(s[r])}else if(e==="SID"){const n=X.NUMBER(i);for(let s=0;s<n.length;s++)t.push(n[s])}else if(e==="offset"){const n=X.NUMBER32(i);for(let s=0;s<n.length;s++)t.push(n[s])}else if(e==="number"){const n=X.NUMBER(i);for(let s=0;s<n.length;s++)t.push(n[s])}else if(e==="real"){const n=X.REAL(i);for(let s=0;s<n.length;s++)t.push(n[s])}else throw new Error("Unknown operand type "+e);return t};X.OP=X.BYTE;be.OP=be.BYTE;var Ga=typeof WeakMap=="function"&&new WeakMap;X.CHARSTRING=function(i){if(Ga){const n=Ga.get(i);if(n!==void 0)return n}let e=[];const t=i.length;for(let n=0;n<t;n+=1){const s=i[n],r=X[s.type](s.value);for(let o=0;o<r.length;o++)e.push(r[o])}return Ga&&Ga.set(i,e),e};be.CHARSTRING=function(i){return X.CHARSTRING(i).length};X.OBJECT=function(i){const e=X[i.type];return ge.argument(e!==void 0,"No encoding function for type "+i.type),e(i.value)};be.OBJECT=function(i){const e=be[i.type];return ge.argument(e!==void 0,"No sizeOf function for type "+i.type),e(i.value)};X.TABLE=function(i){let e=[];const t=(i.fields||[]).length,n=[],s=[];for(let r=0;r<t;r+=1){const o=i.fields[r],a=X[o.type];ge.argument(a!==void 0,"No encoding function for field type "+o.type+" ("+o.name+")");let l=i[o.name];l===void 0&&(l=o.value);const A=a(l);if(o.type==="TABLE")l.fields!==null&&(s.push(e.length),n.push(A)),e.push(0,0);else for(let u=0;u<A.length;u++)e.push(A[u])}for(let r=0;r<n.length;r+=1){const o=s[r],a=e.length;ge.argument(a<65536,"Table "+i.tableName+" too big."),e[o]=a>>8,e[o+1]=a&255;for(let l=0;l<n[r].length;l++)e.push(n[r][l])}return e};be.TABLE=function(i){let e=0;const t=(i.fields||[]).length;for(let n=0;n<t;n+=1){const s=i.fields[n],r=be[s.type];ge.argument(r!==void 0,"No sizeOf function for field type "+s.type+" ("+s.name+")");let o=i[s.name];o===void 0&&(o=s.value),e+=r(o),s.type==="TABLE"&&(e+=2)}return e};X.RECORD=X.TABLE;be.RECORD=be.TABLE;X.LITERAL=function(i){return i};be.LITERAL=function(i){return i.length};function ht(i,e,t){if(e&&e.length)for(let n=0;n<e.length;n+=1){const s=e[n];this[s.name]=s.value}if(this.tableName=i,this.fields=e,t){const n=Object.keys(t);for(let s=0;s<n.length;s+=1){const r=n[s],o=t[r];this[r]!==void 0&&(this[r]=o)}}}c(ht,"Table");ht.prototype.encode=function(){return X.TABLE(this)};ht.prototype.sizeOf=function(){return be.TABLE(this)};function lr(i,e,t){t===void 0&&(t=e.length);const n=new Array(e.length+1);n[0]={name:i+"Count",type:"USHORT",value:t};for(let s=0;s<e.length;s++)n[s+1]={name:i+s,type:"USHORT",value:e[s]};return n}c(lr,"ushortList");function tu(i,e,t){const n=e.length,s=new Array(n+1);s[0]={name:i+"Count",type:"USHORT",value:n};for(let r=0;r<n;r++)s[r+1]={name:i+r,type:"TABLE",value:t(e[r],r)};return s}c(tu,"tableList");function cr(i,e,t){const n=e.length;let s=[];s[0]={name:i+"Count",type:"USHORT",value:n};for(let r=0;r<n;r++)s=s.concat(t(e[r],r));return s}c(cr,"recordList");function Ka(i){i.format===1?ht.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(lr("glyph",i.glyphs))):i.format===2?ht.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:2}].concat(cr("rangeRecord",i.ranges,function(e,t){return[{name:"startGlyphID"+t,type:"USHORT",value:e.start},{name:"endGlyphID"+t,type:"USHORT",value:e.end},{name:"startCoverageIndex"+t,type:"USHORT",value:e.index}]}))):ge.assert(!1,"Coverage format must be 1 or 2.")}c(Ka,"Coverage");Ka.prototype=Object.create(ht.prototype);Ka.prototype.constructor=Ka;function ja(i){ht.call(this,"scriptListTable",cr("scriptRecord",i,function(e,t){const n=e.script;let s=n.defaultLangSys;return ge.assert(!!s,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+t,type:"TAG",value:e.tag},{name:"script"+t,type:"TABLE",value:new ht("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new ht("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:s.reqFeatureIndex}].concat(lr("featureIndex",s.featureIndexes)))}].concat(cr("langSys",n.langSysRecords,function(r,o){const a=r.langSys;return[{name:"langSysTag"+o,type:"TAG",value:r.tag},{name:"langSys"+o,type:"TABLE",value:new ht("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:a.reqFeatureIndex}].concat(lr("featureIndex",a.featureIndexes)))}]})))}]}))}c(ja,"ScriptList");ja.prototype=Object.create(ht.prototype);ja.prototype.constructor=ja;function qa(i){ht.call(this,"featureListTable",cr("featureRecord",i,function(e,t){const n=e.feature;return[{name:"featureTag"+t,type:"TAG",value:e.tag},{name:"feature"+t,type:"TABLE",value:new ht("featureTable",[{name:"featureParams",type:"USHORT",value:n.featureParams}].concat(lr("lookupListIndex",n.lookupListIndexes)))}]}))}c(qa,"FeatureList");qa.prototype=Object.create(ht.prototype);qa.prototype.constructor=qa;function $a(i,e){ht.call(this,"lookupListTable",tu("lookup",i,function(t){let n=e[t.lookupType];return ge.assert(!!n,"Unable to write GSUB lookup type "+t.lookupType+" tables."),new ht("lookupTable",[{name:"lookupType",type:"USHORT",value:t.lookupType},{name:"lookupFlag",type:"USHORT",value:t.lookupFlag}].concat(tu("subtable",t.subtables,n)))}))}c($a,"LookupList");$a.prototype=Object.create(ht.prototype);$a.prototype.constructor=$a;function el(i){i.format===1?ht.call(this,"classDefTable",[{name:"classFormat",type:"USHORT",value:1},{name:"startGlyphID",type:"USHORT",value:i.startGlyph}].concat(lr("glyph",i.classes))):i.format===2?ht.call(this,"classDefTable",[{name:"classFormat",type:"USHORT",value:2}].concat(cr("rangeRecord",i.ranges,function(e,t){return[{name:"startGlyphID"+t,type:"USHORT",value:e.start},{name:"endGlyphID"+t,type:"USHORT",value:e.end},{name:"class"+t,type:"USHORT",value:e.classId}]}))):ge.assert(!1,"Class format must be 1 or 2.")}c(el,"ClassDef");el.prototype=Object.create(ht.prototype);el.prototype.constructor=el;var x={Table:ht,Record:ht,Coverage:Ka,ClassDef:el,ScriptList:ja,FeatureList:qa,LookupList:$a,ushortList:lr,tableList:tu,recordList:cr};function rg(i,e){return i.getUint8(e)}c(rg,"getByte");function tl(i,e){return i.getUint16(e,!1)}c(tl,"getUShort");function dB(i,e){return i.getInt16(e,!1)}c(dB,"getShort");function oh(i,e){const t=i.getUint16(e,!1),n=i.getUint8(e+2,!1);return t*Math.pow(2,8)+n}c(oh,"getUInt24");function ah(i,e){return i.getUint32(e,!1)}c(ah,"getULong");function gB(i,e){return i.getInt32(e,!1)}c(gB,"getLong");function gm(i,e){const t=i.getInt16(e,!1),n=i.getUint16(e+2,!1);return t+n/65535}c(gm,"getFixed");function pB(i,e){let t="";for(let n=e;n<e+4;n+=1)t+=String.fromCharCode(i.getInt8(n));return t}c(pB,"getTag");function fB(i,e,t){let n=0;for(let s=0;s<t;s+=1)n<<=8,n+=i.getUint8(e+s);return n}c(fB,"getOffset");function mB(i,e,t){const n=[];for(let s=e;s<t;s+=1)n.push(i.getUint8(s));return n}c(mB,"getBytes");function CB(i){let e="";for(let t=0;t<i.length;t+=1)e+=String.fromCharCode(i[t]);return e}c(CB,"bytesToString");var IB={byte:1,uShort:2,f2dot14:2,short:2,uInt24:3,uLong:4,fixed:4,longDateTime:8,tag:4},xt={LONG_WORDS:32768,WORD_DELTA_COUNT_MASK:32767,SHARED_POINT_NUMBERS:32768,COUNT_MASK:4095,EMBEDDED_PEAK_TUPLE:32768,INTERMEDIATE_REGION:16384,PRIVATE_POINT_NUMBERS:8192,TUPLE_INDEX_MASK:4095,POINTS_ARE_WORDS:128,POINT_RUN_COUNT_MASK:127,DELTAS_ARE_ZERO:128,DELTAS_ARE_WORDS:64,DELTA_RUN_COUNT_MASK:63,INNER_INDEX_BIT_COUNT_MASK:15,MAP_ENTRY_SIZE_MASK:48};function B(i,e){this.data=i,this.offset=e,this.relativeOffset=0}c(B,"Parser");B.prototype.parseByte=function(){const i=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,i};B.prototype.parseChar=function(){const i=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,i};B.prototype.parseCard8=B.prototype.parseByte;B.prototype.parseUShort=function(){const i=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,i};B.prototype.parseCard16=B.prototype.parseUShort;B.prototype.parseSID=B.prototype.parseUShort;B.prototype.parseOffset16=B.prototype.parseUShort;B.prototype.parseShort=function(){const i=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,i};B.prototype.parseF2Dot14=function(){const i=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,i};B.prototype.parseUInt24=function(){const i=oh(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=3,i};B.prototype.parseULong=function(){const i=ah(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,i};B.prototype.parseLong=function(){const i=gB(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,i};B.prototype.parseOffset32=B.prototype.parseULong;B.prototype.parseFixed=function(){const i=gm(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,i};B.prototype.parseString=function(i){const e=this.data,t=this.offset+this.relativeOffset;let n="";this.relativeOffset+=i;for(let s=0;s<i;s++)n+=String.fromCharCode(e.getUint8(t+s));return n};B.prototype.parseTag=function(){return this.parseString(4)};B.prototype.parseLongDateTime=function(){let i=ah(this.data,this.offset+this.relativeOffset+4);return i-=2082844800,this.relativeOffset+=8,i};B.prototype.parseVersion=function(i){const e=tl(this.data,this.offset+this.relativeOffset),t=tl(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,i===void 0&&(i=4096),e+t/i/10};B.prototype.skip=function(i,e){e===void 0&&(e=1),this.relativeOffset+=IB[i]*e};B.prototype.parseULongList=function(i){i===void 0&&(i=this.parseULong());const e=new Array(i),t=this.data;let n=this.offset+this.relativeOffset;for(let s=0;s<i;s++)e[s]=t.getUint32(n),n+=4;return this.relativeOffset+=i*4,e};B.prototype.parseOffset16List=B.prototype.parseUShortList=function(i){i===void 0&&(i=this.parseUShort());const e=new Array(i),t=this.data;let n=this.offset+this.relativeOffset;for(let s=0;s<i;s++)e[s]=t.getUint16(n),n+=2;return this.relativeOffset+=i*2,e};B.prototype.parseShortList=function(i){const e=new Array(i),t=this.data;let n=this.offset+this.relativeOffset;for(let s=0;s<i;s++)e[s]=t.getInt16(n),n+=2;return this.relativeOffset+=i*2,e};B.prototype.parseUInt24List=function(i){i===void 0&&(i=this.parseUShort());const e=new Array(i),t=this.data;let n=this.offset+this.relativeOffset;for(let s=0;s<i;s++)e[s]=oh(t,n),n+=3;return this.relativeOffset+=i*3,e};B.prototype.parseByteList=function(i){const e=new Array(i),t=this.data;let n=this.offset+this.relativeOffset;for(let s=0;s<i;s++)e[s]=t.getUint8(n++);return this.relativeOffset+=i,e};B.prototype.parseList=function(i,e){e||(e=i,i=this.parseUShort());const t=new Array(i);for(let n=0;n<i;n++)t[n]=e.call(this);return t};B.prototype.parseList32=function(i,e){e||(e=i,i=this.parseULong());const t=new Array(i);for(let n=0;n<i;n++)t[n]=e.call(this);return t};B.prototype.parseRecordList=function(i,e){e||(e=i,i=this.parseUShort());const t=new Array(i),n=Object.keys(e);for(let s=0;s<i;s++){const r={};for(let o=0;o<n.length;o++){const a=n[o],l=e[a];r[a]=l.call(this)}t[s]=r}return t};B.prototype.parseRecordList32=function(i,e){e||(e=i,i=this.parseULong());const t=new Array(i),n=Object.keys(e);for(let s=0;s<i;s++){const r={};for(let o=0;o<n.length;o++){const a=n[o],l=e[a];r[a]=l.call(this)}t[s]=r}return t};B.prototype.parseTupleRecords=function(i,e){let t=[];for(let n=0;n<i;n++){let s=[];for(let r=0;r<e;r++)s.push(this.parseF2Dot14());t.push(s)}return t};B.prototype.parseStruct=function(i){if(typeof i=="function")return i.call(this);{const e=Object.keys(i),t={};for(let n=0;n<e.length;n++){const s=e[n],r=i[s];t[s]=r.call(this)}return t}};B.prototype.parseValueRecord=function(i){if(i===void 0&&(i=this.parseUShort()),i===0)return;const e={};return i&1&&(e.xPlacement=this.parseShort()),i&2&&(e.yPlacement=this.parseShort()),i&4&&(e.xAdvance=this.parseShort()),i&8&&(e.yAdvance=this.parseShort()),i&16&&(e.xPlaDevice=void 0,this.parseShort()),i&32&&(e.yPlaDevice=void 0,this.parseShort()),i&64&&(e.xAdvDevice=void 0,this.parseShort()),i&128&&(e.yAdvDevice=void 0,this.parseShort()),e};B.prototype.parseValueRecordList=function(){const i=this.parseUShort(),e=this.parseUShort(),t=new Array(e);for(let n=0;n<e;n++)t[n]=this.parseValueRecord(i);return t};B.prototype.parsePointer=function(i,e=!1){const t=this.parseOffset16();if(t>0){const n=this.offset+t,s=new B(this.data,n).parseStruct(i);return e&&(s.tableOffset=n),s}};B.prototype.parsePointer32=function(i){const e=this.parseOffset32();if(e>0)return new B(this.data,this.offset+e).parseStruct(i)};B.prototype.parseListOfLists=function(i){const e=this.parseOffset16List(),t=e.length,n=this.relativeOffset,s=new Array(t);for(let r=0;r<t;r++){const o=e[r];if(o===0){s[r]=void 0;continue}if(this.relativeOffset=o,i){const a=this.parseOffset16List(),l=new Array(a.length);for(let A=0;A<a.length;A++)this.relativeOffset=o+a[A],l[A]=i.call(this);s[r]=l}else s[r]=this.parseUShortList()}return this.relativeOffset=n,s};B.prototype.parseCoverage=function(){const i=this.offset+this.relativeOffset,e=this.parseUShort(),t=this.parseUShort();if(e===1)return{format:1,glyphs:this.parseUShortList(t)};if(e===2){const n=new Array(t);for(let s=0;s<t;s++)n[s]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:n}}throw new Error("0x"+i.toString(16)+": Coverage format must be 1 or 2.")};B.prototype.parseClassDef=function(){const i=this.offset+this.relativeOffset,e=this.parseUShort();return e===1?{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()}:e===2?{format:2,ranges:this.parseRecordList({start:B.uShort,end:B.uShort,classId:B.uShort})}:(console.warn(`0x${i.toString(16)}: This font file uses an invalid ClassDef format of ${e}. It might be corrupted and should be reacquired if it doesn't display as intended.`),{format:e})};B.list=function(i,e){return function(){return this.parseList(i,e)}};B.list32=function(i,e){return function(){return this.parseList32(i,e)}};B.recordList=function(i,e){return function(){return this.parseRecordList(i,e)}};B.recordList32=function(i,e){return function(){return this.parseRecordList32(i,e)}};B.pointer=function(i,e=!1){return function(){return this.parsePointer(i,e)}};B.pointer32=function(i){return function(){return this.parsePointer32(i)}};B.tag=B.prototype.parseTag;B.byte=B.prototype.parseByte;B.uShort=B.offset16=B.prototype.parseUShort;B.uShortList=B.prototype.parseUShortList;B.uInt24=B.prototype.parseUInt24;B.uLong=B.offset32=B.prototype.parseULong;B.uLongList=B.prototype.parseULongList;B.fixed=B.prototype.parseFixed;B.f2Dot14=B.prototype.parseF2Dot14;B.uInt24List=B.prototype.parseUInt24List;B.struct=B.prototype.parseStruct;B.coverage=B.prototype.parseCoverage;B.classDef=B.prototype.parseClassDef;var og={reserved:B.uShort,reqFeatureIndex:B.uShort,featureIndexes:B.uShortList};B.prototype.parseScriptList=function(){return this.parsePointer(B.recordList({tag:B.tag,script:B.pointer({defaultLangSys:B.pointer(og),langSysRecords:B.recordList({tag:B.tag,langSys:B.pointer(og)})})}))||[]};B.prototype.parseFeatureList=function(){return this.parsePointer(B.recordList({tag:B.tag,feature:B.pointer({featureParams:B.offset16,lookupListIndexes:B.uShortList},!0)}))||[]};B.prototype.parseStylisticSetFeatureParams=function(){return this.parsePointer({version:B.uShort,uiNameId:B.uShort})||[]};B.prototype.parseCharacterVariantFeatureParams=function(){return this.parsePointer({format:B.uShort,featUiLabelNameId:B.uShort,featUiTooltipTextNameId:B.uShort,sampleTextNameId:B.uShort,numNamedParameters:B.uShort,firstParamUiLabelNameId:B.uShort,characters:B.uInt24List})||[]};B.prototype.parseLookupList=function(i){return this.parsePointer(B.list(B.pointer(function(){const e=this.parseUShort();ge.argument(1<=e&&e<=9,"GPOS/GSUB lookup type "+e+" unknown.");const t=this.parseUShort(),n=t&16;return{lookupType:e,lookupFlag:t,subtables:this.parseList(B.pointer(i[e])),markFilteringSet:n?this.parseUShort():void 0}})))||[]};B.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){const i=this.parseUShort(),e=this.parseUShort();return ge.argument(i===1&&e<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:B.offset32,featureTableSubstitutionOffset:B.offset32})})||[]};B.prototype.parseVariationStore=function(){const i=this.relativeOffset,e=this.parseUShort(),t={itemVariationStore:this.parseItemVariationStore()};return this.relativeOffset=i+e+2,t};B.prototype.parseItemVariationStore=function(){const i=this.relativeOffset,e={format:this.parseUShort(),variationRegions:[],itemVariationSubtables:[]},t=this.parseOffset32(),n=this.parseUShort(),s=this.parseULongList(n);this.relativeOffset=i+t,e.variationRegions=this.parseVariationRegionList();for(let r=0;r<n;r++){const o=s[r];this.relativeOffset=i+o,e.itemVariationSubtables.push(this.parseItemVariationSubtable())}return e};B.prototype.parseVariationRegionList=function(){const i=this.parseUShort(),e=this.parseUShort();return this.parseRecordList(e,{regionAxes:B.recordList(i,{startCoord:B.f2Dot14,peakCoord:B.f2Dot14,endCoord:B.f2Dot14})})};B.prototype.parseItemVariationSubtable=function(){const i=this.parseUShort(),e=this.parseUShort(),t=this.parseUShortList(),n=t.length;return{regionIndexes:t,deltaSets:i&&n?this.parseDeltaSets(i,e,n):[]}};B.prototype.parseDeltaSetIndexMap=function(){const i=this.parseByte(),e=this.parseByte(),t=[];let n=0;switch(i){case 0:n=this.parseUShort();break;case 1:n=this.parseULong();break;default:console.error(`unsupported DeltaSetIndexMap format ${i}`)}if(!n)return{format:i,entryFormat:e};const s=(e&xt.INNER_INDEX_BIT_COUNT_MASK)+1,r=((e&xt.MAP_ENTRY_SIZE_MASK)>>4)+1;for(let o=0;o<n;o++){let a;if(r===1)a=this.parseByte();else if(r===2)a=this.parseUShort();else if(r===3)a=this.parseUInt24();else if(r===4)a=this.getULong();else throw new Error(`Invalid entry size of ${r}`);const l=a>>s,A=a&(1<<s)-1;t.push({outerIndex:l,innerIndex:A})}return{format:i,entryFormat:e,map:t}};B.prototype.parseDeltaSets=function(i,e,t){const n=Array.from({length:i},()=>[]),s=e&xt.LONG_WORDS,r=e&xt.WORD_DELTA_COUNT_MASK;if(r>t)throw Error("wordCount must be less than or equal to regionIndexCount");const o=(s?this.parseLong:this.parseShort).bind(this),a=(s?this.parseShort:this.parseChar).bind(this);for(let l=0;l<i;l++)for(let A=0;A<t;A++)A<r?n[l].push(o()):n[l].push(a());return n};B.prototype.parseTupleVariationStoreList=function(i,e,t){const n=this.parseUShort(),r=this.parseUShort()&1,o=this.parseOffset32(),a=(r?this.parseULong:this.parseUShort).bind(this),l={};let A=a();r||(A*=2);let u;for(let h=0;h<n;h++){u=a(),r||(u*=2);const d=u-A;l[h]=d?this.parseTupleVariationStore(o+A,i,e,t,h):void 0,A=u}return l};B.prototype.parseTupleVariationStore=function(i,e,t,n,s){const r=this.relativeOffset;this.relativeOffset=i,t==="cvar"&&(this.relativeOffset+=4);const o=this.parseUShort(),a=!!(o&xt.SHARED_POINT_NUMBERS),l=o&xt.COUNT_MASK;let A=this.parseOffset16();const u=[];let h=[];for(let p=0;p<l;p++){const f=this.parseTupleVariationHeader(e,t);u.push(f)}this.relativeOffset!==i+A&&(console.warn(`Unexpected offset after parsing tuple variation headers! Expected ${i+A}, actually ${this.relativeOffset}`),this.relativeOffset=i+A),a&&(h=this.parsePackedPointNumbers());let d=this.relativeOffset;for(let p=0;p<l;p++){const f=u[p];f.privatePoints=[],this.relativeOffset=d,t==="cvar"&&!f.peakTuple&&console.warn("An embedded peak tuple is required in TupleVariationHeaders for the cvar table."),f.flags.privatePointNumbers&&(f.privatePoints=this.parsePackedPointNumbers()),delete f.flags;const m=this.offset,y=this.relativeOffset,v=c(G=>{let R,Q;const S=c(()=>{let M=0;if(t==="gvar"){if(M=f.privatePoints.length||h.length,!M){const V=n.get(s);V.path,M=V.points.length,M+=4}}else t==="cvar"&&(M=n.length);this.offset=m,this.relativeOffset=y,R=this.parsePackedDeltas(M),t==="gvar"&&(Q=this.parsePackedDeltas(M))},"parseDeltas");return{configurable:!0,get:c(function(){return R===void 0&&S(),G==="deltasY"?Q:R},"get"),set:c(function(M){R===void 0&&S(),G==="deltasY"?Q=M:R=M},"set")}},"defineDeltas");Object.defineProperty(f,"deltas",v.call(this,"deltas")),t==="gvar"&&Object.defineProperty(f,"deltasY",v.call(this,"deltasY")),d+=f.variationDataSize,delete f.variationDataSize}this.relativeOffset=r;const g={headers:u};return g.sharedPoints=h,g};B.prototype.parseTupleVariationHeader=function(i,e){const t=this.parseUShort(),n=this.parseUShort(),s=!!(n&xt.EMBEDDED_PEAK_TUPLE),r=!!(n&xt.INTERMEDIATE_REGION),o=!!(n&xt.PRIVATE_POINT_NUMBERS),a=s?void 0:n&xt.TUPLE_INDEX_MASK,l=s?this.parseTupleRecords(1,i)[0]:void 0,A=r?this.parseTupleRecords(1,i)[0]:void 0,u=r?this.parseTupleRecords(1,i)[0]:void 0,h={variationDataSize:t,peakTuple:l,intermediateStartTuple:A,intermediateEndTuple:u,flags:{embeddedPeakTuple:s,intermediateRegion:r,privatePointNumbers:o}};return e==="gvar"&&(h.sharedTupleRecordsIndex=a),h};B.prototype.parsePackedPointNumbers=function(){const i=this.parseByte(),e=[];let t=i;if(i>=128){const s=this.parseByte();t=(i&xt.POINT_RUN_COUNT_MASK)<<8|s}let n=0;for(;e.length<t;){const s=this.parseByte(),r=!!(s&xt.POINTS_ARE_WORDS);let o=(s&xt.POINT_RUN_COUNT_MASK)+1;for(let a=0;a<o&&e.length<t;a++){let l;r?l=this.parseUShort():l=this.parseByte(),n=n+l,e.push(n)}}return e};B.prototype.parsePackedDeltas=function(i){const e=[];for(;e.length<i;){const t=this.parseByte(),n=!!(t&xt.DELTAS_ARE_ZERO),s=!!(t&xt.DELTAS_ARE_WORDS),r=(t&xt.DELTA_RUN_COUNT_MASK)+1;for(let o=0;o<r&&e.length<i;o++)n?e.push(0):s?e.push(this.parseShort()):e.push(this.parseChar())}return e};var te={getByte:rg,getCard8:rg,getUShort:tl,getCard16:tl,getShort:dB,getUInt24:oh,getULong:ah,getFixed:gm,getTag:pB,getOffset:fB,getBytes:mB,bytesToString:CB,Parser:B},nl=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],pm={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},yB={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},fm={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function bB(i,e,t){switch(i){case 0:if(e===65535)return"und";if(t)return t[e];break;case 1:return pm[e];case 3:return fm[e]}}c(bB,"getLanguageCode");var nu="utf-16",EB={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},BB={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function lh(i,e,t){switch(i){case 0:return nu;case 1:return BB[t]||EB[e];case 3:if(e===1||e===10)return nu;break}}c(lh,"getEncoding");var mm={0:"unicode",1:"macintosh",2:"reserved",3:"windows"};function vB(i){return mm[i]}c(vB,"getPlatform");function GB(i,e,t){const n={},s=new te.Parser(i,e),r=s.parseUShort(),o=s.parseUShort(),a=s.offset+s.parseUShort();for(let l=0;l<o;l++){const A=s.parseUShort(),u=s.parseUShort(),h=s.parseUShort(),d=s.parseUShort(),g=nl[d]||d,p=s.parseUShort(),f=s.parseUShort(),m=bB(A,h,t),y=lh(A,u,h),v=vB(A);if(y!==void 0&&m!==void 0&&v!==void 0){let G;if(y===nu?G=ar.UTF16(i,a+f,p):G=ar.MACSTRING(i,a+f,p,y),G){let R=n[v];R===void 0&&(R=n[v]={});let Q=R[g];Q===void 0&&(Q=R[g]={}),Q[m]=G}}}return r===1&&s.parseUShort(),n}c(GB,"parseNameTable");function Ra(i){const e={};for(let t in i)e[i[t]]=parseInt(t);return e}c(Ra,"reverseDict");function ag(i,e,t,n,s,r){return new x.Record("NameRecord",[{name:"platformID",type:"USHORT",value:i},{name:"encodingID",type:"USHORT",value:e},{name:"languageID",type:"USHORT",value:t},{name:"nameID",type:"USHORT",value:n},{name:"length",type:"USHORT",value:s},{name:"offset",type:"USHORT",value:r}])}c(ag,"makeNameRecord");function RB(i,e){const t=i.length,n=e.length-t+1;e:for(let s=0;s<n;s++)for(;s<n;s++){for(let r=0;r<t;r++)if(e[s+r]!==i[r])continue e;return s}return-1}c(RB,"findSubArray");function lg(i,e){let t=RB(i,e);if(t<0){t=e.length;let n=0;const s=i.length;for(;n<s;++n)e.push(i[n])}return t}c(lg,"addStringToPool");function SB(i,e){const t=Ra(mm),n=Ra(pm),s=Ra(fm),r=[],o=[];for(let l in i){let A;const u=[],h={},d=Ra(nl),g=t[l];for(let p in i[l]){let f=d[p];if(f===void 0&&(f=p),A=parseInt(f),isNaN(A))throw new Error('Name table entry "'+p+'" does not exist, see nameTableNames for complete list.');h[A]=i[l][p],u.push(A)}for(let p=0;p<u.length;p++){A=u[p];const f=h[A];for(let m in f){const y=f[m];if(g===1||g===0){let v=n[m],G=yB[v];const R=lh(g,G,v);let Q=X.MACSTRING(y,R);if(g===0&&(v=e.indexOf(m),v<0&&(v=e.length,e.push(m)),G=4,Q=X.UTF16(y)),Q!==void 0){const S=lg(Q,o);r.push(ag(g,G,v,A,Q.length,S))}}if(g===3){const v=s[m];if(v!==void 0){const G=X.UTF16(y),R=lg(G,o);r.push(ag(3,1,v,A,G.length,R))}}}}}r.sort(function(l,A){return l.platformID-A.platformID||l.encodingID-A.encodingID||l.languageID-A.languageID||l.nameID-A.nameID});const a=new x.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:r.length},{name:"stringOffset",type:"USHORT",value:6+r.length*12}]);for(let l=0;l<r.length;l++)a.fields.push({name:"record_"+l,type:"RECORD",value:r[l]});return a.fields.push({name:"strings",type:"LITERAL",value:o}),a}c(SB,"makeNameTable");function il(i,e,t=[]){if(e<256&&e in nl){if(t.length&&!t.includes(parseInt(e)))return;e=nl[e]}for(let n in i)for(let s in i[n])if(s===e||parseInt(s)===e)return i[n][s]}c(il,"getNameByID");var Cm={parse:GB,make:SB,getNameByID:il};function NB(i,e,t,n){i.length=e.parseUShort(),i.language=e.parseUShort()-1;const s=e.parseByteList(i.length),r=Object.assign({},s),o=lh(t,n,i.language),a=Ua[o];for(let l=0;l<a.length;l++)r[a.charCodeAt(l)]=s[128+l];i.glyphIndexMap=r}c(NB,"parseCmapTableFormat0");function QB(i,e,t){e.parseUShort(),i.length=e.parseULong(),i.language=e.parseULong();let n;i.groupCount=n=e.parseULong(),i.glyphIndexMap={};for(let s=0;s<n;s+=1){const r=e.parseULong(),o=e.parseULong();let a=e.parseULong();for(let l=r;l<=o;l+=1)i.glyphIndexMap[l]=a,t===12&&a++}}c(QB,"parseCmapTableFormat12or13");function wB(i,e,t,n,s){i.length=e.parseUShort(),i.language=e.parseUShort();let r;i.segCount=r=e.parseUShort()>>1,e.skip("uShort",3),i.glyphIndexMap={};const o=new te.Parser(t,n+s+14),a=new te.Parser(t,n+s+16+r*2),l=new te.Parser(t,n+s+16+r*4),A=new te.Parser(t,n+s+16+r*6);let u=n+s+16+r*8;for(let h=0;h<r-1;h+=1){let d;const g=o.parseUShort(),p=a.parseUShort(),f=l.parseShort(),m=A.parseUShort();for(let y=p;y<=g;y+=1)m!==0?(u=A.offset+A.relativeOffset-2,u+=m,u+=(y-p)*2,d=te.getUShort(t,u),d!==0&&(d=d+f&65535)):d=y+f&65535,i.glyphIndexMap[y]=d}}c(wB,"parseCmapTableFormat4");function ZB(i,e){const t={};e.skip("uLong");const n=e.parseULong();for(let s=0;s<n;s+=1){const r=e.parseUInt24(),o={varSelector:r},a=e.parseOffset32(),l=e.parseOffset32(),A=e.relativeOffset;a&&(e.relativeOffset=a,o.defaultUVS=e.parseStruct({ranges:c(function(){return e.parseRecordList32({startUnicodeValue:e.parseUInt24,additionalCount:e.parseByte})},"ranges")})),l&&(e.relativeOffset=l,o.nonDefaultUVS=e.parseStruct({uvsMappings:c(function(){const u={},h=e.parseRecordList32({unicodeValue:e.parseUInt24,glyphID:e.parseUShort});for(let d=0;d<h.length;d+=1)u[h[d].unicodeValue]=h[d];return u},"uvsMappings")})),t[r]=o,e.relativeOffset=A}i.varSelectorList=t}c(ZB,"parseCmapTableFormat14");function kB(i,e){const t={};t.version=te.getUShort(i,e),ge.argument(t.version===0,"cmap table version should be 0."),t.numTables=te.getUShort(i,e+2);let n=null,s=-1,r=-1,o=null,a=null;const l=[0,1,2,3,4,6],A=[0,1,10];for(let h=t.numTables-1;h>=0;h-=1)if(o=te.getUShort(i,e+4+h*8),a=te.getUShort(i,e+4+h*8+2),o===3&&A.includes(a)||o===0&&l.includes(a)||o===1&&a===0){if(r>0)continue;if(r=te.getULong(i,e+4+h*8+4),n)break}else if(o===0&&a===5){if(s=te.getULong(i,e+4+h*8+4),n=new te.Parser(i,e+s),n.parseUShort()!==14)s=-1,n=null;else if(r>0)break}if(r===-1)throw new Error("No valid cmap sub-tables found.");const u=new te.Parser(i,e+r);if(t.format=u.parseUShort(),t.format===0)NB(t,u,o,a);else if(t.format===12||t.format===13)QB(t,u,t.format);else if(t.format===4)wB(t,u,i,e,r);else throw new Error("Only format 0 (platformId 1, encodingId 0), 4, 12 and 14 cmap tables are supported (found format "+t.format+", platformId "+o+", encodingId "+a+").");return n&&ZB(t,n),t}c(kB,"parseCmapTable");function _B(i,e,t){i.segments.push({end:e,start:e,delta:-(e-t),offset:0,glyphIndex:t})}c(_B,"addSegment");function YB(i){i.segments.push({end:65535,start:65535,delta:1,offset:0})}c(YB,"addTerminatorSegment");function WB(i){let e=!0,t;for(t=i.length-1;t>0;t-=1)if(i.get(t).unicode>65535){console.log("Adding CMAP format 12 (needed!)"),e=!1;break}let n=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:e?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:e?12:20}];e||n.push({name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}),n.push({name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0});const s=new x.Table("cmap",n);for(s.segments=[],t=0;t<i.length;t+=1){const g=i.get(t);for(let p=0;p<g.unicodes.length;p+=1)_B(s,g.unicodes[p],t)}s.segments.sort(function(g,p){return g.start-p.start}),YB(s);const r=s.segments.length;let o=0,a=[],l=[],A=[],u=[],h=[],d=[];for(t=0;t<r;t+=1){const g=s.segments[t];g.end<=65535&&g.start<=65535?(a.push({name:"end_"+t,type:"USHORT",value:g.end}),l.push({name:"start_"+t,type:"USHORT",value:g.start}),A.push({name:"idDelta_"+t,type:"SHORT",value:g.delta}),u.push({name:"idRangeOffset_"+t,type:"USHORT",value:g.offset}),g.glyphId!==void 0&&h.push({name:"glyph_"+t,type:"USHORT",value:g.glyphId})):o+=1,!e&&g.glyphIndex!==void 0&&(d.push({name:"cmap12Start_"+t,type:"ULONG",value:g.start}),d.push({name:"cmap12End_"+t,type:"ULONG",value:g.end}),d.push({name:"cmap12Glyph_"+t,type:"ULONG",value:g.glyphIndex}))}s.segCountX2=(r-o)*2,s.searchRange=Math.pow(2,Math.floor(Math.log(r-o)/Math.log(2)))*2,s.entrySelector=Math.log(s.searchRange/2)/Math.log(2),s.rangeShift=s.segCountX2-s.searchRange;for(let g=0;g<a.length;g++)s.fields.push(a[g]);s.fields.push({name:"reservedPad",type:"USHORT",value:0});for(let g=0;g<l.length;g++)s.fields.push(l[g]);for(let g=0;g<A.length;g++)s.fields.push(A[g]);for(let g=0;g<u.length;g++)s.fields.push(u[g]);for(let g=0;g<h.length;g++)s.fields.push(h[g]);if(s.cmap4Length=14+a.length*2+2+l.length*2+A.length*2+u.length*2+h.length*2,!e){const g=16+d.length*4;s.cmap12Offset=12+2*2+4+s.cmap4Length,s.fields.push({name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:g},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:d.length/3});for(let p=0;p<d.length;p++)s.fields.push(d[p])}return s}c(WB,"makeCmapTable");var Im={parse:kB,make:WB},Fa=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],DB=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron"],TB=[".notdef","space","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],FB=[".notdef","space","dollaroldstyle","dollarsuperior","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","hyphensuperior","colonmonetary","onefitted","rupiah","centoldstyle","figuredash","hypheninferior","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior"],iu=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],xB=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],is=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function ym(i){this.font=i}c(ym,"DefaultEncoding");ym.prototype.charToGlyphIndex=function(i){const e=i.codePointAt(0),t=this.font.glyphs;if(t)for(let n=0;n<t.length;n+=1){const s=t.get(n);for(let r=0;r<s.unicodes.length;r+=1)if(s.unicodes[r]===e)return n}return null};function bm(i){this.cmap=i}c(bm,"CmapEncoding");bm.prototype.charToGlyphIndex=function(i){return this.cmap.glyphIndexMap[i.codePointAt(0)]||0};function Em(i,e){this.encoding=i,this.charset=e}c(Em,"CffEncoding");Em.prototype.charToGlyphIndex=function(i){const e=i.codePointAt(0),t=this.encoding[e];return this.charset.indexOf(t)};function ch(i){switch(i.version){case 1:this.names=is.slice();break;case 2:this.names=new Array(i.numberOfGlyphs);for(let e=0;e<i.numberOfGlyphs;e++)i.glyphNameIndex[e]<is.length?this.names[e]=is[i.glyphNameIndex[e]]:this.names[e]=i.names[i.glyphNameIndex[e]-is.length];break;case 2.5:this.names=new Array(i.numberOfGlyphs);for(let e=0;e<i.numberOfGlyphs;e++)this.names[e]=is[e+i.glyphNameIndex[e]];break;case 3:this.names=[];break;default:this.names=[];break}}c(ch,"GlyphNames");ch.prototype.nameToGlyphIndex=function(i){return this.names.indexOf(i)};ch.prototype.glyphIndexToName=function(i){return this.names[i]};function LB(i){let e;const t=i.tables.cmap.glyphIndexMap,n=Object.keys(t);for(let s=0;s<n.length;s+=1){const r=n[s],o=t[r];e=i.glyphs.get(o),e.addUnicode(parseInt(r))}for(let s=0;s<i.glyphs.length;s+=1)e=i.glyphs.get(s),i.cffEncoding?e.name=i.cffEncoding.charset[s]:i.glyphNames.names&&(e.name=i.glyphNames.glyphIndexToName(s))}c(LB,"addGlyphNamesAll");function MB(i){i._IndexToUnicodeMap={};const e=i.tables.cmap.glyphIndexMap,t=Object.keys(e);for(let n=0;n<t.length;n+=1){const s=t[n];let r=e[s];i._IndexToUnicodeMap[r]===void 0?i._IndexToUnicodeMap[r]={unicodes:[parseInt(s)]}:i._IndexToUnicodeMap[r].unicodes.push(parseInt(s))}}c(MB,"addGlyphNamesToUnicodeMap");function VB(i,e){e.lowMemory?MB(i):LB(i)}c(VB,"addGlyphNames");function OB(i,e,t,n,s){i.beginPath(),i.moveTo(e,t),i.lineTo(n,s),i.stroke()}c(OB,"line");var ts={line:OB};function PB(i,e){const t=new B(i,e),n=t.parseShort();n!==0&&console.warn("Only CPALv0 is currently fully supported.");const s=t.parseShort(),r=t.parseShort(),o=t.parseShort(),a=t.parseOffset32(),l=t.parseUShortList(r);t.relativeOffset=a;const A=t.parseULongList(o);return t.relativeOffset=a,{version:n,numPaletteEntries:s,colorRecords:A,colorRecordIndices:l}}c(PB,"parseCpalTable");function HB({version:i=0,numPaletteEntries:e=0,colorRecords:t=[],colorRecordIndices:n=[0]}){return ge.argument(i===0,"Only CPALv0 are supported."),ge.argument(t.length,"No colorRecords given."),ge.argument(n.length,"No colorRecordIndices given."),n.length>1&&ge.argument(e,"Can't infer numPaletteEntries on multiple colorRecordIndices"),new x.Table("CPAL",[{name:"version",type:"USHORT",value:i},{name:"numPaletteEntries",type:"USHORT",value:e||t.length},{name:"numPalettes",type:"USHORT",value:n.length},{name:"numColorRecords",type:"USHORT",value:t.length},{name:"colorRecordsArrayOffset",type:"ULONG",value:12+2*n.length},...n.map((s,r)=>({name:"colorRecordIndices_"+r,type:"USHORT",value:s})),...t.map((s,r)=>({name:"colorRecords_"+r,type:"ULONG",value:s}))])}c(HB,"makeCpalTable");function Bm(i){var e=(i&4278190080)>>24,t=(i&16711680)>>16,n=(i&65280)>>8,s=i&255;return e=e+256&255,t=t+256&255,n=n+256&255,s=(s+256&255)/255,{b:e,g:t,r:n,a:s}}c(Bm,"parseCPALColor");function Ah(i,e,t=0,n="hexa"){if(e==65535)return"currentColor";const s=i&&i.tables&&i.tables.cpal;if(!s)return"currentColor";if(t>s.colorRecordIndices.length-1)throw new Error(`Palette index out of range (colorRecordIndices.length: ${s.colorRecordIndices.length}, index: ${e})`);if(e>s.numPaletteEntries)throw new Error(`Color index out of range (numPaletteEntries: ${s.numPaletteEntries}, index: ${e})`);const r=s.colorRecordIndices[t]+e;if(r>s.colorRecords)throw new Error(`Color index out of range (colorRecords.length: ${s.colorRecords.length}, lookupIndex: ${r})`);const o=Bm(s.colorRecords[r]);return n==="bgra"?o:Ar(o,n)}c(Ah,"getPaletteColor");function Gn(i){return("0"+parseInt(i).toString(16)).slice(-2)}c(Gn,"toHex");function XB(i){const e=i.r/255,t=i.g/255,n=i.b/255,s=Math.max(e,t,n),r=Math.min(e,t,n);let o,a,l=(s+r)/2;if(s===r)o=a=0;else{const A=s-r;switch(a=l>.5?A/(2-s-r):A/(s+r),s){case e:o=(t-n)/A+(t<n?6:0);break;case t:o=(n-e)/A+2;break;case n:o=(e-t)/A+4;break}o/=6}return{h:o*360,s:a*100,l:l*100}}c(XB,"rgbToHSL");function zB(i){let{h:e,s:t,l:n,a:s}=i;e=e%360,t/=100,n/=100;const r=(1-Math.abs(2*n-1))*t,o=r*(1-Math.abs(e/60%2-1)),a=n-r/2;let l=0,A=0,u=0;return 0<=e&&e<60?(l=r,A=o,u=0):60<=e&&e<120?(l=o,A=r,u=0):120<=e&&e<180?(l=0,A=r,u=o):180<=e&&e<240?(l=0,A=o,u=r):240<=e&&e<300?(l=o,A=0,u=r):300<=e&&e<=360&&(l=r,A=0,u=o),{r:Math.round((l+a)*255),g:Math.round((A+a)*255),b:Math.round((u+a)*255),a:s}}c(zB,"hslToRGB");function vm(i){return parseInt(`0x${Gn(i.b)}${Gn(i.g)}${Gn(i.r)}${Gn(i.a*255)}`,16)}c(vm,"bgraToRaw");function sl(i,e="hexa"){const t=e=="raw"||e=="cpal",n=Number.isInteger(i);let s=!0;if(n&&t||i==="currentColor")return i;if(typeof i=="object"){if(e=="bgra")return i;if(t)return vm(i)}else if(!n&&/^#([a-f0-9]{3}|[a-f0-9]{4}|[a-f0-9]{6}|[a-f0-9]{8})$/i.test(i.trim())){switch(i=i.trim().substring(1),i.length){case 3:i={r:parseInt(i[0].repeat(2),16),g:parseInt(i[1].repeat(2),16),b:parseInt(i[2].repeat(2),16),a:1};break;case 4:i={r:parseInt(i[0].repeat(2),16),g:parseInt(i[1].repeat(2),16),b:parseInt(i[2].repeat(2),16),a:parseInt(i[3].repeat(2),16)/255};break;case 6:i={r:parseInt(i[0]+i[1],16),g:parseInt(i[2]+i[3],16),b:parseInt(i[4]+i[5],16),a:1};break;case 8:i={r:parseInt(i[0]+i[1],16),g:parseInt(i[2]+i[3],16),b:parseInt(i[4]+i[5],16),a:parseInt(i[6]+i[7],16)/255};break}if(e=="bgra")return i}else if(typeof document<"u"&&/^[a-z]+$/i.test(i)){const r=document.createElement("canvas").getContext("2d");r.fillStyle=i;const o=Ar(r.fillStyle,"hexa");o==="#000000ff"&&i.toLowerCase()!=="black"?s=!1:i=o}else{i=i.trim();const r=/rgba?\(\s*(?:(\d*\.\d+)(%?)|(\d+)(%?))\s*(?:,|\s*)\s*(?:(\d*\.\d+)(%?)|(\d+)(%?))\s*(?:,|\s*)\s*(?:(\d*\.\d+)(%?)|(\d+)(%?))\s*(?:(?:,|\s|\/)\s*(?:(0*(?:\.\d+)?()|0*1(?:\.0+)?())|(?:\.\d+)|(\d+)(%)|(\d*\.\d+)(%)))?\s*\)/;if(r.test(i)){const o=i.match(r).filter(a=>typeof a<"u");i={r:Math.round(parseFloat(o[1])/(o[2]?100/255:1)),g:Math.round(parseFloat(o[3])/(o[4]?100/255:1)),b:Math.round(parseFloat(o[5])/(o[6]?100/255:1)),a:o[7]?parseFloat(o[7])/(o[8]?100:1):1}}else{const o=/hsla?\(\s*(?:(\d*\.\d+|\d+)(deg|turn|))\s*(?:,|\s*)\s*(?:(\d*\.\d+)%?|(\d+)%?)\s*(?:,|\s*)\s*(?:(\d*\.\d+)%?|(\d+)%?)\s*(?:(?:,|\s|\/)\s*(?:(0*(?:\.\d+)?()|0*1(?:\.0+)?())|(?:\.\d+)|(\d+)(%)|(\d*\.\d+)(%)))?\s*\)/;if(o.test(i)){const a=i.match(o).filter(l=>typeof l<"u");i=zB({h:parseFloat(a[1])*(a[2]==="turn"?360:1),s:parseFloat(a[3]),l:parseFloat(a[4]),a:a[5]?parseFloat(a[5])/(a[6]?100:1):1})}else s=!1}}if(!s)throw new Error(`Invalid color format: ${i}`);return Ar(i,e)}c(sl,"parseColor");function Ar(i,e="hexa"){if(i==="currentColor")return i;if(Number.isInteger(i)){if(e=="raw"||e=="cpal")return i;i=Bm(i)}else typeof i!="object"&&(i=sl(i,"bgra"));let t=["hsl","hsla"].includes(e)?XB(i):null;switch(e){case"rgba":return`rgba(${i.r}, ${i.g}, ${i.b}, ${parseFloat(i.a.toFixed(3))})`;case"rgb":return`rgb(${i.r}, ${i.g}, ${i.b})`;case"hex":case"hex6":case"hex-6":return`#${Gn(i.r)}${Gn(i.g)}${Gn(i.b)}`;case"hexa":case"hex8":case"hex-8":return`#${Gn(i.r)}${Gn(i.g)}${Gn(i.b)}${Gn(i.a*255)}`;case"hsl":return`hsl(${t.h.toFixed(2)}, ${t.s.toFixed(2)}%, ${t.l.toFixed(2)}%)`;case"hsla":return`hsla(${t.h.toFixed(2)}, ${t.s.toFixed(2)}%, ${t.l.toFixed(2)}%, ${parseFloat(i.a.toFixed(3))})`;case"bgra":return i;case"raw":case"cpal":return vm(i);default:throw new Error("Unknown color format: "+e)}}c(Ar,"formatColor");var Gm={parse:PB,make:HB,getPaletteColor:Ah,parseColor:sl,formatColor:Ar};function JB(i,e){let t=e||new or;return{configurable:!0,get:c(function(){return typeof t=="function"&&(t=t()),t},"get"),set:c(function(n){t=n},"set")}}c(JB,"getPathDefinition");function Ot(i){this.bindConstructorValues(i)}c(Ot,"Glyph");Ot.prototype.bindConstructorValues=function(i){if(this.index=i.index||0,i.name===".notdef"?i.unicode=void 0:i.name===".null"&&(i.unicode=0),i.unicode===0&&i.name!==".null")throw new Error('The unicode value "0" is reserved for the glyph name ".null" and cannot be used by any other glyph.');this.name=i.name||null,this.unicode=i.unicode,this.unicodes=i.unicodes||(i.unicode!==void 0?[i.unicode]:[]),"xMin"in i&&(this.xMin=i.xMin),"yMin"in i&&(this.yMin=i.yMin),"xMax"in i&&(this.xMax=i.xMax),"yMax"in i&&(this.yMax=i.yMax),"advanceWidth"in i&&(this.advanceWidth=i.advanceWidth),"leftSideBearing"in i&&(this.leftSideBearing=i.leftSideBearing),"points"in i&&(this.points=i.points),Object.defineProperty(this,"path",JB(this,i.path))};Ot.prototype.addUnicode=function(i){this.unicodes.length===0&&(this.unicode=i),this.unicodes.push(i)};Ot.prototype.getBoundingBox=function(){return this.path.getBoundingBox()};Ot.prototype.getPath=function(i,e,t,n,s){i=i!==void 0?i:0,e=e!==void 0?e:0,t=t!==void 0?t:72,n=Object.assign({},s&&s.defaultRenderOptions,n);let r,o,a=n.xScale,l=n.yScale;const A=1/(this.path.unitsPerEm||1e3)*t;let u=this;s&&s.variation&&(u=s.variation.getTransform(this,n.variation),r=u.path.commands),n.hinting&&s&&s.hinting&&(o=u.path&&s.hinting.exec(u,t,n)),o?(r=s.hinting.getCommands(o),i=Math.round(i),e=Math.round(e),a=l=1):(r=u.path.commands,a===void 0&&(a=A),l===void 0&&(l=A));const h=new or;if(n.drawSVG){const d=this.getSvgImage(s);if(d){const g=new or;return g._image={image:d.image,x:i+d.leftSideBearing*A,y:e-d.baseline*A,width:d.image.width*A,height:d.image.height*A},h._layers=[g],h}}if(n.drawLayers){const d=this.getLayers(s);if(d&&d.length){h._layers=[];for(let g=0;g<d.length;g+=1){const p=d[g];let f=Ah(s,p.paletteIndex,n.usePalette);f==="currentColor"?f=n.fill||"black":f=Ar(f,n.colorFormat||"rgba"),n=Object.assign({},n,{fill:f}),h._layers.push(this.getPath.call(p.glyph,i,e,t,n,s))}return h}}h.fill=n.fill||this.path.fill,h.stroke=this.path.stroke,h.strokeWidth=this.path.strokeWidth*A;for(let d=0;d<r.length;d+=1){const g=r[d];g.type==="M"?h.moveTo(i+g.x*a,e+-g.y*l):g.type==="L"?h.lineTo(i+g.x*a,e+-g.y*l):g.type==="Q"?h.quadraticCurveTo(i+g.x1*a,e+-g.y1*l,i+g.x*a,e+-g.y*l):g.type==="C"?h.curveTo(i+g.x1*a,e+-g.y1*l,i+g.x2*a,e+-g.y2*l,i+g.x*a,e+-g.y*l):g.type==="Z"&&h.stroke&&h.strokeWidth&&h.closePath()}return h};Ot.prototype.getLayers=function(i){if(!i)throw Error("The font object is required to read the colr/cpal tables in order to get the layers.");return i.layers.get(this.index)};Ot.prototype.getSvgImage=function(i){if(!i)throw Error("The font object is required to read the svg table in order to get the image.");return i.svgImages.get(this.index)};Ot.prototype.getContours=function(i=null){if(this.points===void 0&&!i)return[];const e=[];let t=[],n=i||this.points;for(let s=0;s<n.length;s+=1){const r=n[s];t.push(r),r.lastPointOfContour&&(e.push(t),t=[])}return ge.argument(t.length===0,"There are still points left in the current contour."),e};Ot.prototype.getMetrics=function(){const i=this.path.commands,e=[],t=[];for(let s=0;s<i.length;s+=1){const r=i[s];r.type!=="Z"&&(e.push(r.x),t.push(r.y)),(r.type==="Q"||r.type==="C")&&(e.push(r.x1),t.push(r.y1)),r.type==="C"&&(e.push(r.x2),t.push(r.y2))}const n={xMin:Math.min.apply(null,e),yMin:Math.min.apply(null,t),xMax:Math.max.apply(null,e),yMax:Math.max.apply(null,t),leftSideBearing:this.leftSideBearing};return isFinite(n.xMin)||(n.xMin=0),isFinite(n.xMax)||(n.xMax=this.advanceWidth),isFinite(n.yMin)||(n.yMin=0),isFinite(n.yMax)||(n.yMax=0),n.rightSideBearing=this.advanceWidth-n.leftSideBearing-(n.xMax-n.xMin),n};Ot.prototype.draw=function(i,e,t,n,s,r){s=Object.assign({},r.defaultRenderOptions,s),this.getPath(e,t,n,s,r).draw(i)};Ot.prototype.drawPoints=function(i,e,t,n,s,r){if(s=Object.assign({},r&&r.defaultRenderOptions,s),s.drawLayers){const d=this.getLayers(r);if(d&&d.length){for(let g=0;g<d.length;g+=1)d[g].glyph.index!==this.index&&this.drawPoints.call(d[g].glyph,i,e,t,n);return}}function o(d,g,p,f){i.beginPath();for(let m=0;m<d.length;m+=1)i.moveTo(g+d[m].x*f,p+d[m].y*f),i.arc(g+d[m].x*f,p+d[m].y*f,2,0,Math.PI*2,!1);i.fill()}c(o,"drawCircles"),e=e!==void 0?e:0,t=t!==void 0?t:0,n=n!==void 0?n:24;const a=1/this.path.unitsPerEm*n,l=[],A=[];let h=this.path.commands;r&&r.variation&&(h=r.variation.getTransform(this,s.variation).path.commands);for(let d=0;d<h.length;d+=1){const g=h[d];g.x!==void 0&&l.push({x:g.x,y:-g.y}),g.x1!==void 0&&A.push({x:g.x1,y:-g.y1}),g.x2!==void 0&&A.push({x:g.x2,y:-g.y2})}i.fillStyle="blue",o(l,e,t,a),i.fillStyle="red",o(A,e,t,a)};Ot.prototype.drawMetrics=function(i,e,t,n){let s;e=e!==void 0?e:0,t=t!==void 0?t:0,n=n!==void 0?n:24,s=1/this.path.unitsPerEm*n,i.lineWidth=1,i.strokeStyle="black",ts.line(i,e,-1e4,e,1e4),ts.line(i,-1e4,t,1e4,t);const r=this.xMin||0;let o=this.yMin||0;const a=this.xMax||0;let l=this.yMax||0;const A=this.advanceWidth||0;i.strokeStyle="blue",ts.line(i,e+r*s,-1e4,e+r*s,1e4),ts.line(i,e+a*s,-1e4,e+a*s,1e4),ts.line(i,-1e4,t+-o*s,1e4,t+-o*s),ts.line(i,-1e4,t+-l*s,1e4,t+-l*s),i.strokeStyle="green",ts.line(i,e+A*s,-1e4,e+A*s,1e4)};Ot.prototype.toPathData=function(i,e){i=Object.assign({},{variation:e&&e.defaultRenderOptions.variation},i);let t=this;e&&e.variation&&(t=e.variation.getTransform(this,i.variation));let n=t.points&&i.pointsTransform?i.pointsTransform(t.points):t.path;return i.pathTramsform&&(n=i.pathTramsform(n)),n.toPathData(i)};Ot.prototype.fromSVG=function(i,e={}){return this.path.fromSVG(i,e)};Ot.prototype.toSVG=function(i,e){const t=this.toPathData.apply(this,[i,e]);return this.path.toSVG(i,t)};Ot.prototype.toDOMElement=function(i,e){i=Object.assign({},{variation:e&&e.defaultRenderOptions.variation},i);let t=this.path;return e&&e.variation&&(t=e.variation.getTransform(this,i.variation).path),t.toDOMElement(i)};var ro=Ot;function Ms(i,e,t){Object.defineProperty(i,e,{get:c(function(){return typeof i[t]>"u"&&i.path,i[t]},"get"),set:c(function(n){i[t]=n},"set"),enumerable:!0,configurable:!0})}c(Ms,"defineDependentProperty");function xl(i,e){if(this.font=i,this.glyphs={},Array.isArray(e))for(let t=0;t<e.length;t++){const n=e[t];n.path.unitsPerEm=i.unitsPerEm,this.glyphs[t]=n}this.length=e&&e.length||0}c(xl,"GlyphSet");typeof Symbol<"u"&&Symbol.iterator&&(xl.prototype[Symbol.iterator]=function(){let i=-1;return{next:function(){i++;const e=i>=this.length-1;return{value:this.get(i),done:e}}.bind(this)}});xl.prototype.get=function(i){if(this.font._push&&this.glyphs[i]===void 0){this.font._push(i),typeof this.glyphs[i]=="function"&&(this.glyphs[i]=this.glyphs[i]());let e=this.glyphs[i],t=this.font._IndexToUnicodeMap[i];if(t)for(let n=0;n<t.unicodes.length;n++)e.addUnicode(t.unicodes[n]);this.font.cffEncoding?e.name=this.font.cffEncoding.charset[i]:this.font.glyphNames.names&&(e.name=this.font.glyphNames.glyphIndexToName(i)),this.glyphs[i].advanceWidth=this.font._hmtxTableData[i].advanceWidth,this.glyphs[i].leftSideBearing=this.font._hmtxTableData[i].leftSideBearing}else typeof this.glyphs[i]=="function"&&(this.glyphs[i]=this.glyphs[i]());return this.glyphs[i]};xl.prototype.push=function(i,e){this.glyphs[i]=e,this.length++};function UB(i,e){return new ro({index:e,font:i})}c(UB,"glyphLoader");function KB(i,e,t,n,s,r){return function(){const o=new ro({index:e,font:i});return o.path=function(){t(o,n,s);const a=r(i.glyphs,o);return a.unitsPerEm=i.unitsPerEm,a},Ms(o,"numberOfContours","_numberOfContours"),Ms(o,"xMin","_xMin"),Ms(o,"xMax","_xMax"),Ms(o,"yMin","_yMin"),Ms(o,"yMax","_yMax"),Ms(o,"points","_points"),o}}c(KB,"ttfGlyphLoader");function jB(i,e,t,n,s){return function(){const r=new ro({index:e,font:i});return r.path=function(){const o=t(i,r,n,s);return o.unitsPerEm=i.unitsPerEm,o},r}}c(jB,"cffGlyphLoader");var On={GlyphSet:xl,glyphLoader:UB,ttfGlyphLoader:KB,cffGlyphLoader:jB};function Rm(i,e){if(i===e)return!0;if(Array.isArray(i)&&Array.isArray(e)){if(i.length!==e.length)return!1;for(let t=0;t<i.length;t+=1)if(!Rm(i[t],e[t]))return!1;return!0}else return!1}c(Rm,"equals");function rl(i){let e;return i.length<1240?e=107:i.length<33900?e=1131:e=32768,e}c(rl,"calcCFFSubroutineBias");function Tn(i,e,t,n){const s=[],r=[],o=n>1?te.getULong(i,e):te.getCard16(i,e),a=n>1?4:2;let l,A;if(o!==0){const u=te.getByte(i,e+a);l=e+(o+1)*u+a;let h=e+a+1;for(let d=0;d<o+1;d+=1)s.push(te.getOffset(i,h,u)),h+=u;A=l+s[o]}else A=e+a;for(let u=0;u<s.length-1;u+=1){let h=te.getBytes(i,l+s[u],l+s[u+1]);t&&(h=t(h,i,e,n)),r.push(h)}return{objects:r,startOffset:e,endOffset:A}}c(Tn,"parseCFFIndex");function qB(i,e,t){const n=[],s=t>1?te.getULong(i,e):te.getCard16(i,e),r=t>1?4:2;let o,a;if(s!==0){const l=te.getByte(i,e+r);o=e+(s+1)*l+r;let A=e+r+1;for(let u=0;u<s+1;u+=1)n.push(te.getOffset(i,A,l)),A+=l;a=o+n[s]}else a=e+r;return{offsets:n,startOffset:e,endOffset:a}}c(qB,"parseCFFIndexLowMemory");function $B(i,e,t,n,s,r){const o=r>1?te.getULong(t,n):te.getCard16(t,n),a=r>1?4:2;let l=0;if(o!==0){const u=te.getByte(t,n+a);l=n+(o+1)*u+a}return te.getBytes(t,l+e[i],l+e[i+1])}c($B,"getCffIndexObject");function ev(i){let e="";const n=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];for(;;){const s=i.parseByte(),r=s>>4,o=s&15;if(r===15||(e+=n[r],o===15))break;e+=n[o]}return parseFloat(e)}c(ev,"parseFloatOperand");function tv(i,e){let t,n,s,r;if(e===28)return t=i.parseByte(),n=i.parseByte(),t<<8|n;if(e===29)return t=i.parseByte(),n=i.parseByte(),s=i.parseByte(),r=i.parseByte(),t<<24|n<<16|s<<8|r;if(e===30)return ev(i);if(e>=32&&e<=246)return e-139;if(e>=247&&e<=250)return t=i.parseByte(),(e-247)*256+t+108;if(e>=251&&e<=254)return t=i.parseByte(),-(e-251)*256-t-108;throw new Error("Invalid b0 "+e)}c(tv,"parseOperand");function nv(i){const e={};for(let t=0;t<i.length;t+=1){const n=i[t][0],s=i[t][1];let r;if(s.length===1?r=s[0]:r=s,Object.prototype.hasOwnProperty.call(e,n)&&!isNaN(e[n]))throw new Error("Object "+e+" already has key "+n);e[n]=r}return e}c(nv,"entriesToObject");function uh(i,e,t,n){e=e!==void 0?e:0;const s=new te.Parser(i,e),r=[];let o=[];t=t!==void 0?t:i.byteLength;let a=n<2?22:28;for(;s.relativeOffset<t;){let l=s.parseByte();if(l<a){if(l===12&&(l=1200+s.parseByte()),n>1&&l===23){hv(o);continue}r.push([l,o]),o=[]}else o.push(tv(s,l))}return nv(r)}c(uh,"parseCFFDict");function Jr(i,e){return e<=390?e=Fa[e]:i?e=i[e-391]:e=void 0,e}c(Jr,"getCFFString");function hh(i,e,t){const n={};let s;for(let r=0;r<e.length;r+=1){const o=e[r];if(Array.isArray(o.type)){const a=[];a.length=o.type.length;for(let l=0;l<o.type.length;l++)s=i[o.op]!==void 0?i[o.op][l]:void 0,s===void 0&&(s=o.value!==void 0&&o.value[l]!==void 0?o.value[l]:null),o.type[l]==="SID"&&(s=Jr(t,s)),a[l]=s;n[o.name]=a}else s=i[o.op],s===void 0&&(s=o.value!==void 0?o.value:null),o.type==="SID"&&(s=Jr(t,s)),n[o.name]=s}return n}c(hh,"interpretDict");function iv(i,e){const t={};if(t.formatMajor=te.getCard8(i,e),t.formatMinor=te.getCard8(i,e+1),t.formatMajor>2)throw new Error(`Unsupported CFF table version ${t.formatMajor}.${t.formatMinor}`);return t.size=te.getCard8(i,e+2),t.formatMajor<2?(t.offsetSize=te.getCard8(i,e+3),t.startOffset=e,t.endOffset=e+4):(t.topDictLength=te.getCard16(i,e+3),t.endOffset=e+8),t}c(iv,"parseCFFHeader");var Sm=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],sv=[{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"charStrings",op:17,type:"offset"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"vstore",op:24,type:"offset"}],Nm=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}],rv=[{name:"blueValues",op:6,type:"delta"},{name:"otherBlues",op:7,type:"delta"},{name:"familyBlues",op:7,type:"delta"},{name:"familyBlues",op:8,type:"delta"},{name:"familyOtherBlues",op:9,type:"delta"},{name:"blueScale",op:1209,type:"number",value:.039625},{name:"blueShift",op:1210,type:"number",value:7},{name:"blueFuzz",op:1211,type:"number",value:1},{name:"stdHW",op:10,type:"number"},{name:"stdVW",op:11,type:"number"},{name:"stemSnapH",op:1212,type:"number"},{name:"stemSnapV",op:1213,type:"number"},{name:"languageGroup",op:1217,type:"number",value:0},{name:"expansionFactor",op:1218,type:"number",value:.06},{name:"vsindex",op:22,type:"number",value:0},{name:"subrs",op:19,type:"offset"}],ov=[{name:"private",op:18,type:["number","offset"],value:[0,0]}];function av(i,e,t,n){const s=uh(i,e,i.byteLength,n);return hh(s,n>1?sv:Sm,t)}c(av,"parseCFFTopDict");function dh(i,e,t,n,s){const r=uh(i,e,t,s);return hh(r,s>1?rv:Nm,n)}c(dh,"parseCFFPrivateDict");function lv(i,e,t){const n=uh(i,e,void 0,t);return hh(n,ov)}c(lv,"parseFontDict");function cv(i,e,t){const n=[];for(let s=0;s<t.length;s++){const r=new DataView(new Uint8Array(t[s]).buffer),o=lv(r,0,2),a=o.private[0],l=o.private[1];if(a!==0&&l!==0){const A=dh(i,l+e,a,[],2);if(A.subrs){const u=l+A.subrs,h=Tn(i,u+e,void 0,2);o._subrs=h.objects,o._subrsBias=rl(o._subrs)}o._privateDict=A}n.push(o)}return n}c(cv,"gatherCFF2FontDicts");function Hc(i,e,t,n,s){const r=[];for(let o=0;o<t.length;o+=1){const a=new DataView(new Uint8Array(t[o]).buffer),l=av(a,0,n,s);l._subrs=[],l._subrsBias=0,l._defaultWidthX=0,l._nominalWidthX=0;const A=s<2?l.private[0]:0,u=s<2?l.private[1]:0;if(A!==0&&u!==0){const h=dh(i,u+e,A,n,s);if(l._defaultWidthX=h.defaultWidthX,l._nominalWidthX=h.nominalWidthX,h.subrs!==0){const d=u+h.subrs,g=Tn(i,d+e,void 0,s);l._subrs=g.objects,l._subrsBias=rl(l._subrs)}l._privateDict=h}r.push(l)}return r}c(Hc,"gatherCFFTopDicts");function Av(i,e,t,n,s){let r,o;const a=new te.Parser(i,e);t-=1;const l=[".notdef"],A=a.parseCard8();if(A===0)for(let u=0;u<t;u+=1)r=a.parseSID(),s?l.push(r):l.push(Jr(n,r)||r);else if(A===1)for(;l.length<=t;){r=a.parseSID(),o=a.parseCard8();for(let u=0;u<=o;u+=1)s?l.push("cid"+("00000"+r).slice(-5)):l.push(Jr(n,r)||r),r+=1}else if(A===2)for(;l.length<=t;){r=a.parseSID(),o=a.parseCard16();for(let u=0;u<=o;u+=1)s?l.push("cid"+("00000"+r).slice(-5)):l.push(Jr(n,r)||r),r+=1}else throw new Error("Unknown charset format "+A);return l}c(Av,"parseCFFCharset");function uv(i,e){let t;const n={},s=new te.Parser(i,e),r=s.parseCard8();if(r===0){const o=s.parseCard8();for(let a=0;a<o;a+=1)t=s.parseCard8(),n[t]=a}else if(r===1){const o=s.parseCard8();t=1;for(let a=0;a<o;a+=1){const l=s.parseCard8(),A=s.parseCard8();for(let u=l;u<=l+A;u+=1)n[u]=t,t+=1}}else throw new Error("Unknown encoding format "+r);return n}c(uv,"parseCFFEncoding");function hv(i){let e=i.pop();for(;i.length>e;)i.pop()}c(hv,"parseBlend");function Qm(i,e){const t=i.tables.cff&&i.tables.cff.topDict&&i.tables.cff.topDict.paintType||0;return t===2&&(e.fill=null,e.stroke="black",e.strokeWidth=i.tables.cff.topDict.strokeWidth||0),t}c(Qm,"applyPaintType");function su(i,e,t,n,s){let r,o,a,l;const A=new or,u=[];let h=0,d=!1,g=!1,p=0,f=0,m,y,v,G,R=0,Q=[],S;const M=i.tables.cff2||i.tables.cff;if(v=M.topDict._defaultWidthX,G=M.topDict._nominalWidthX,s=s||i.variation&&i.variation.get(),e.getBlendPath||(e.getBlendPath=function(Ie){return su(i,e,t,n,Ie)}),i.isCIDFont||n>1){const Ie=M.topDict._fdSelect?M.topDict._fdSelect[e.index]:0,H=M.topDict._fdArray[Ie];m=H._subrs,y=H._subrsBias,n>1?(Q=M.topDict._vstore.itemVariationStore,R=H._privateDict.vsindex):(v=H._defaultWidthX,G=H._nominalWidthX)}else m=M.topDict._subrs,y=M.topDict._subrsBias;const V=Qm(i,A);let K=v;function j(Ie,H){g&&V!==2&&A.closePath(),A.moveTo(Ie,H),g=!0}c(j,"newContour");function Ce(){let Ie;Ie=(u.length&1)!==0,Ie&&!d&&(K=u.shift()+G),h+=u.length>>1,u.length=0,d=!0}c(Ce,"parseStems");function Ge(Ie){let H,Ae,ne,De,O,L,T,he,W,z,ie,ee,J=0;for(;J<Ie.length;){let et=Ie[J];switch(J+=1,et){case 1:Ce();break;case 3:Ce();break;case 4:u.length>1&&!d&&(K=u.shift()+G,d=!0),f+=u.pop(),j(p,f);break;case 5:for(;u.length>0;)p+=u.shift(),f+=u.shift(),A.lineTo(p,f);break;case 6:for(;u.length>0&&(p+=u.shift(),A.lineTo(p,f),u.length!==0);)f+=u.shift(),A.lineTo(p,f);break;case 7:for(;u.length>0&&(f+=u.shift(),A.lineTo(p,f),u.length!==0);)p+=u.shift(),A.lineTo(p,f);break;case 8:for(;u.length>0;)r=p+u.shift(),o=f+u.shift(),a=r+u.shift(),l=o+u.shift(),p=a+u.shift(),f=l+u.shift(),A.curveTo(r,o,a,l,p,f);break;case 10:O=u.pop()+y,L=m[O],L&&Ge(L);break;case 11:if(n>1){console.error("CFF CharString operator return (11) is not supported in CFF2");break}return;case 12:switch(et=Ie[J],J+=1,et){case 35:r=p+u.shift(),o=f+u.shift(),a=r+u.shift(),l=o+u.shift(),T=a+u.shift(),he=l+u.shift(),W=T+u.shift(),z=he+u.shift(),ie=W+u.shift(),ee=z+u.shift(),p=ie+u.shift(),f=ee+u.shift(),u.shift(),A.curveTo(r,o,a,l,T,he),A.curveTo(W,z,ie,ee,p,f);break;case 34:r=p+u.shift(),o=f,a=r+u.shift(),l=o+u.shift(),T=a+u.shift(),he=l,W=T+u.shift(),z=l,ie=W+u.shift(),ee=f,p=ie+u.shift(),A.curveTo(r,o,a,l,T,he),A.curveTo(W,z,ie,ee,p,f);break;case 36:r=p+u.shift(),o=f+u.shift(),a=r+u.shift(),l=o+u.shift(),T=a+u.shift(),he=l,W=T+u.shift(),z=l,ie=W+u.shift(),ee=z+u.shift(),p=ie+u.shift(),A.curveTo(r,o,a,l,T,he),A.curveTo(W,z,ie,ee,p,f);break;case 37:r=p+u.shift(),o=f+u.shift(),a=r+u.shift(),l=o+u.shift(),T=a+u.shift(),he=l+u.shift(),W=T+u.shift(),z=he+u.shift(),ie=W+u.shift(),ee=z+u.shift(),Math.abs(ie-p)>Math.abs(ee-f)?p=ie+u.shift():f=ee+u.shift(),A.curveTo(r,o,a,l,T,he),A.curveTo(W,z,ie,ee,p,f);break;default:console.log("Glyph "+e.index+": unknown operator 1200"+et),u.length=0}break;case 14:if(n>1){console.error("CFF CharString operator endchar (14) is not supported in CFF2");break}if(u.length>=4){const nt=iu[u.pop()],Ct=iu[u.pop()],ct=u.pop(),pt=u.pop();if(nt&&Ct){e.isComposite=!0,e.components=[];const It=i.cffEncoding.charset.indexOf(nt),At=i.cffEncoding.charset.indexOf(Ct);e.components.push({glyphIndex:At,dx:0,dy:0}),e.components.push({glyphIndex:It,dx:pt,dy:ct}),A.extend(i.glyphs.get(At).path);const Xt=i.glyphs.get(It),zt=JSON.parse(JSON.stringify(Xt.path.commands));for(let jn=0;jn<zt.length;jn+=1){const Dt=zt[jn];Dt.type!=="Z"&&(Dt.x+=pt,Dt.y+=ct),(Dt.type==="Q"||Dt.type==="C")&&(Dt.x1+=pt,Dt.y1+=ct),Dt.type==="C"&&(Dt.x2+=pt,Dt.y2+=ct)}A.extend(zt)}}else u.length>0&&!d&&(K=u.shift()+G,d=!0);g&&V!==2&&(A.closePath(),g=!1);break;case 15:if(n<2){console.error("CFF2 CharString operator vsindex (15) is not supported in CFF");break}R=u.pop();break;case 16:if(n<2){console.error("CFF2 CharString operator blend (16) is not supported in CFF");break}S||(S=i.variation&&s&&i.variation.process.getBlendVector(Q,R,s));var ve=u.pop(),Re=S?S.length:Q.itemVariationSubtables[R].regionIndexes.length,We=ve*Re,He=u.length-We,Ke=He-ve;if(S)for(let nt=0;nt<ve;nt++){var $e=u[Ke+nt];for(let Ct=0;Ct<Re;Ct++)$e+=S[Ct]*u[He++];u[Ke+nt]=$e}for(;We--;)u.pop();break;case 18:Ce();break;case 19:case 20:Ce(),J+=h+7>>3;break;case 21:u.length>2&&!d&&(K=u.shift()+G,d=!0),f+=u.pop(),p+=u.pop(),j(p,f);break;case 22:u.length>1&&!d&&(K=u.shift()+G,d=!0),p+=u.pop(),j(p,f);break;case 23:Ce();break;case 24:for(;u.length>2;)r=p+u.shift(),o=f+u.shift(),a=r+u.shift(),l=o+u.shift(),p=a+u.shift(),f=l+u.shift(),A.curveTo(r,o,a,l,p,f);p+=u.shift(),f+=u.shift(),A.lineTo(p,f);break;case 25:for(;u.length>6;)p+=u.shift(),f+=u.shift(),A.lineTo(p,f);r=p+u.shift(),o=f+u.shift(),a=r+u.shift(),l=o+u.shift(),p=a+u.shift(),f=l+u.shift(),A.curveTo(r,o,a,l,p,f);break;case 26:for(u.length&1&&(p+=u.shift());u.length>0;)r=p,o=f+u.shift(),a=r+u.shift(),l=o+u.shift(),p=a,f=l+u.shift(),A.curveTo(r,o,a,l,p,f);break;case 27:for(u.length&1&&(f+=u.shift());u.length>0;)r=p+u.shift(),o=f,a=r+u.shift(),l=o+u.shift(),p=a+u.shift(),f=l,A.curveTo(r,o,a,l,p,f);break;case 28:H=Ie[J],Ae=Ie[J+1],u.push((H<<24|Ae<<16)>>16),J+=2;break;case 29:O=u.pop()+i.gsubrsBias,L=i.gsubrs[O],L&&Ge(L);break;case 30:for(;u.length>0&&(r=p,o=f+u.shift(),a=r+u.shift(),l=o+u.shift(),p=a+u.shift(),f=l+(u.length===1?u.shift():0),A.curveTo(r,o,a,l,p,f),u.length!==0);)r=p+u.shift(),o=f,a=r+u.shift(),l=o+u.shift(),f=l+u.shift(),p=a+(u.length===1?u.shift():0),A.curveTo(r,o,a,l,p,f);break;case 31:for(;u.length>0&&(r=p+u.shift(),o=f,a=r+u.shift(),l=o+u.shift(),f=l+u.shift(),p=a+(u.length===1?u.shift():0),A.curveTo(r,o,a,l,p,f),u.length!==0);)r=p,o=f+u.shift(),a=r+u.shift(),l=o+u.shift(),p=a+u.shift(),f=l+(u.length===1?u.shift():0),A.curveTo(r,o,a,l,p,f);break;default:et<32?console.log("Glyph "+e.index+": unknown operator "+et):et<247?u.push(et-139):et<251?(H=Ie[J],J+=1,u.push((et-247)*256+H+108)):et<255?(H=Ie[J],J+=1,u.push(-(et-251)*256-H-108)):(H=Ie[J],Ae=Ie[J+1],ne=Ie[J+2],De=Ie[J+3],J+=4,u.push((H<<24|Ae<<16|ne<<8|De)/65536))}}}return c(Ge,"parse"),Ge(t),i.variation&&s&&(A.commands=A.commands.map(Ie=>{const H=Object.keys(Ie);for(let Ae=0;Ae<H.length;Ae++){const ne=H[Ae];ne!=="type"&&(Ie[ne]=Math.round(Ie[ne]))}return Ie})),d&&(e.advanceWidth=K),A}c(su,"parseCFFCharstring");function cg(i,e,t,n,s){const r=[];let o;const a=new te.Parser(i,e),l=a.parseCard8();if(l===0)for(let A=0;A<t;A++){if(o=a.parseCard8(),o>=n)throw new Error("CFF table CID Font FDSelect has bad FD index value "+o+" (FD count "+n+")");r.push(o)}else if(l===3||s>1&&l===4){const A=l===4?a.parseULong():a.parseCard16();let u=l===4?a.parseULong():a.parseCard16();if(u!==0)throw new Error(`CFF Table CID Font FDSelect format ${l} range has bad initial GID ${u}`);let h;for(let d=0;d<A;d++){if(o=l===4?a.parseUShort():a.parseCard8(),h=l===4?a.parseULong():a.parseCard16(),o>=n)throw new Error("CFF table CID Font FDSelect has bad FD index value "+o+" (FD count "+n+")");if(h>t)throw new Error(`CFF Table CID Font FDSelect format ${s} range has bad GID ${h}`);for(;u<h;u++)r.push(o);u=h}if(h!==t)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final (Sentinal) GID "+h)}else throw new Error("CFF Table CID Font FDSelect table has unsupported format "+l);return r}c(cg,"parseCFFFDSelect");function dv(i,e,t,n){let s;const r=iv(i,e);r.formatMajor===2?s=t.tables.cff2={}:s=t.tables.cff={};const o=r.formatMajor>1?null:Tn(i,r.endOffset,te.bytesToString),a=r.formatMajor>1?null:Tn(i,o.endOffset),l=r.formatMajor>1?null:Tn(i,a.endOffset,te.bytesToString),A=Tn(i,r.formatMajor>1?e+r.size+r.topDictLength:l.endOffset,void 0,r.formatMajor);t.gsubrs=A.objects,t.gsubrsBias=rl(t.gsubrs);let u;if(r.formatMajor>1){const d=e+r.size,g=te.getBytes(i,d,d+r.topDictLength);u=Hc(i,0,[g],void 0,r.formatMajor)[0]}else{const d=Hc(i,e,a.objects,l.objects,r.formatMajor);if(d.length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+d.length);u=d[0]}if(s.topDict=u,u._privateDict&&(t.defaultWidthX=u._privateDict.defaultWidthX,t.nominalWidthX=u._privateDict.nominalWidthX),r.formatMajor<2&&u.ros[0]!==void 0&&u.ros[1]!==void 0&&(t.isCIDFont=!0),r.formatMajor>1){let d=u.fdArray,g=u.fdSelect;if(!d)throw new Error("This is a CFF2 font, but FDArray information is missing");const p=Tn(i,e+d,null,r.formatMajor),f=cv(i,e,p.objects);u._fdArray=f,g&&(u._fdSelect=cg(i,e+g,t.numGlyphs,f.length,r.formatMajor))}else if(t.isCIDFont){let d=u.fdArray,g=u.fdSelect;if(d===0||g===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");d+=e;const p=Tn(i,d),f=Hc(i,e,p.objects,l.objects,r.formatMajor);u._fdArray=f,g+=e,u._fdSelect=cg(i,g,t.numGlyphs,f.length,r.formatMajor)}if(r.formatMajor<2){const d=e+u.private[1],g=dh(i,d,u.private[0],l.objects,r.formatMajor);if(t.defaultWidthX=g.defaultWidthX,t.nominalWidthX=g.nominalWidthX,g.subrs!==0){const p=d+g.subrs,f=Tn(i,p);t.subrs=f.objects,t.subrsBias=rl(t.subrs)}else t.subrs=[],t.subrsBias=0}let h;if(n.lowMemory?(h=qB(i,e+u.charStrings,r.formatMajor),t.nGlyphs=h.offsets.length-(r.formatMajor>1?1:0)):(h=Tn(i,e+u.charStrings,null,r.formatMajor),t.nGlyphs=h.objects.length),r.formatMajor>1&&t.tables.maxp&&t.nGlyphs!==t.tables.maxp.numGlyphs&&console.error(`Glyph count in the CFF2 table (${t.nGlyphs}) must correspond to the glyph count in the maxp table (${t.tables.maxp.numGlyphs})`),r.formatMajor<2){let d=[],g=[];u.charset===0?d=DB:u.charset===1?d=TB:u.charset===2?d=FB:d=Av(i,e+u.charset,t.nGlyphs,l.objects,t.isCIDFont),u.encoding===0?g=iu:u.encoding===1?g=xB:g=uv(i,e+u.encoding),t.cffEncoding=new Em(g,d),t.encoding=t.encoding||t.cffEncoding}if(t.glyphs=new On.GlyphSet(t),n.lowMemory)t._push=function(d){const g=$B(d,h.offsets,i,e+u.charStrings,void 0,r.formatMajor);t.glyphs.push(d,On.cffGlyphLoader(t,d,su,g,r.formatMajor))};else for(let d=0;d<t.nGlyphs;d+=1){const g=h.objects[d];t.glyphs.push(d,On.cffGlyphLoader(t,d,su,g,r.formatMajor))}if(u.vstore){const d=new te.Parser(i,e+u.vstore);u._vstore=d.parseVariationStore()}}c(dv,"parseCFFTable");function wm(i,e){let t,n=Fa.indexOf(i);return n>=0&&(t=n),n=e.indexOf(i),n>=0?t=n+Fa.length:(t=Fa.length+e.length,e.push(i)),t}c(wm,"encodeString");function gv(){return new x.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}c(gv,"makeHeader");function pv(i){const e=new x.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);e.names=[];for(let t=0;t<i.length;t+=1)e.names.push({name:"name_"+t,type:"NAME",value:i[t]});return e}c(pv,"makeNameIndex");function Zm(i,e,t){const n={};for(let s=0;s<i.length;s+=1){const r=i[s];let o=e[r.name];o!==void 0&&!Rm(o,r.value)&&(r.type==="SID"&&(o=wm(o,t)),n[r.op]={name:r.name,type:r.type,value:o})}return n}c(Zm,"makeDict");function Ag(i,e,t){const n=new x.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=Zm(Sm,i,e),n}c(Ag,"makeTopDict");function ug(i){const e=new x.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return e.topDicts=[{name:"topDict_0",type:"TABLE",value:i}],e}c(ug,"makeTopDictIndex");function fv(i){const e=new x.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);e.strings=[];for(let t=0;t<i.length;t+=1)e.strings.push({name:"string_"+t,type:"STRING",value:i[t]});return e}c(fv,"makeStringIndex");function mv(){return new x.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}c(mv,"makeGlobalSubrIndex");function Cv(i,e){const t=new x.Record("Charsets",[{name:"format",type:"Card8",value:0}]);for(let n=0;n<i.length;n+=1){const s=i[n],r=wm(s,e);t.fields.push({name:"glyph_"+n,type:"SID",value:r})}return t}c(Cv,"makeCharsets");function Iv(i,e){const t=[],n=i.path;t.push({name:"width",type:"NUMBER",value:i.advanceWidth});let s=0,r=0;for(let o=0;o<n.commands.length;o+=1){let a,l,A=n.commands[o];if(A.type==="Q"){const u=.3333333333333333,h=2/3;A={type:"C",x:A.x,y:A.y,x1:Math.round(u*s+h*A.x1),y1:Math.round(u*r+h*A.y1),x2:Math.round(u*A.x+h*A.x1),y2:Math.round(u*A.y+h*A.y1)}}if(A.type==="M")a=Math.round(A.x-s),l=Math.round(A.y-r),t.push({name:"dx",type:"NUMBER",value:a}),t.push({name:"dy",type:"NUMBER",value:l}),t.push({name:"rmoveto",type:"OP",value:21}),s=Math.round(A.x),r=Math.round(A.y);else if(A.type==="L")a=Math.round(A.x-s),l=Math.round(A.y-r),t.push({name:"dx",type:"NUMBER",value:a}),t.push({name:"dy",type:"NUMBER",value:l}),t.push({name:"rlineto",type:"OP",value:5}),s=Math.round(A.x),r=Math.round(A.y);else if(A.type==="C"){const u=Math.round(A.x1-s),h=Math.round(A.y1-r),d=Math.round(A.x2-A.x1),g=Math.round(A.y2-A.y1);a=Math.round(A.x-A.x2),l=Math.round(A.y-A.y2),t.push({name:"dx1",type:"NUMBER",value:u}),t.push({name:"dy1",type:"NUMBER",value:h}),t.push({name:"dx2",type:"NUMBER",value:d}),t.push({name:"dy2",type:"NUMBER",value:g}),t.push({name:"dx",type:"NUMBER",value:a}),t.push({name:"dy",type:"NUMBER",value:l}),t.push({name:"rrcurveto",type:"OP",value:8}),s=Math.round(A.x),r=Math.round(A.y)}}return t.push({name:"endchar",type:"OP",value:14}),t}c(Iv,"glyphToOps");function yv(i,e){const t=new x.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]);for(let n=0;n<i.length;n+=1){const s=i.get(n),r=Iv(s);t.charStrings.push({name:s.name,type:"CHARSTRING",value:r})}return t}c(yv,"makeCharStringsIndex");function bv(i,e,t){const n=new x.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=Zm(Nm,i,e),n}c(bv,"makePrivateDict");function Ev(i,e){const t=new x.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),n=1/e.unitsPerEm,s={version:e.version,fullName:e.fullName,familyName:e.familyName,weight:e.weightName,fontBBox:e.fontBBox||[0,0,0,0],fontMatrix:[n,0,0,n,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},r=e&&e.topDict||{};r.paintType&&(s.paintType=r.paintType,s.strokeWidth=r.strokeWidth||0);const o={},a=[];let l;for(let d=1;d<i.length;d+=1)l=i.get(d),a.push(l.name);const A=[];t.header=gv(),t.nameIndex=pv([e.postScriptName]);let u=Ag(s,A);t.topDictIndex=ug(u),t.globalSubrIndex=mv(),t.charsets=Cv(a,A),t.charStringsIndex=yv(i),t.privateDict=bv(o,A),t.stringIndex=fv(A);const h=t.header.sizeOf()+t.nameIndex.sizeOf()+t.topDictIndex.sizeOf()+t.stringIndex.sizeOf()+t.globalSubrIndex.sizeOf();return s.charset=h,s.encoding=0,s.charStrings=s.charset+t.charsets.sizeOf(),s.private[1]=s.charStrings+t.charStringsIndex.sizeOf(),u=Ag(s,A),t.topDictIndex=ug(u),t}c(Ev,"makeCFFTable");var ru={parse:dv,make:Ev};function Bv(i,e){const t={},n=new te.Parser(i,e);return t.version=n.parseVersion(),t.fontRevision=Math.round(n.parseFixed()*1e3)/1e3,t.checkSumAdjustment=n.parseULong(),t.magicNumber=n.parseULong(),ge.argument(t.magicNumber===1594834165,"Font header has wrong magic number."),t.flags=n.parseUShort(),t.unitsPerEm=n.parseUShort(),t.created=n.parseLongDateTime(),t.modified=n.parseLongDateTime(),t.xMin=n.parseShort(),t.yMin=n.parseShort(),t.xMax=n.parseShort(),t.yMax=n.parseShort(),t.macStyle=n.parseUShort(),t.lowestRecPPEM=n.parseUShort(),t.fontDirectionHint=n.parseShort(),t.indexToLocFormat=n.parseShort(),t.glyphDataFormat=n.parseShort(),t}c(Bv,"parseHeadTable");function vv(i){const e=Math.round(new Date().getTime()/1e3)+2082844800;let t=e,n=i.macStyle||0;return i.createdTimestamp&&(t=i.createdTimestamp+2082844800),new x.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:t},{name:"modified",type:"LONGDATETIME",value:e},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:n},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],i)}c(vv,"makeHeadTable");var km={parse:Bv,make:vv};function Gv(i,e){const t={},n=new te.Parser(i,e);return t.version=n.parseVersion(),t.ascender=n.parseShort(),t.descender=n.parseShort(),t.lineGap=n.parseShort(),t.advanceWidthMax=n.parseUShort(),t.minLeftSideBearing=n.parseShort(),t.minRightSideBearing=n.parseShort(),t.xMaxExtent=n.parseShort(),t.caretSlopeRise=n.parseShort(),t.caretSlopeRun=n.parseShort(),t.caretOffset=n.parseShort(),n.relativeOffset+=8,t.metricDataFormat=n.parseShort(),t.numberOfHMetrics=n.parseUShort(),t}c(Gv,"parseHheaTable");function Rv(i){return new x.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],i)}c(Rv,"makeHheaTable");var _m={parse:Gv,make:Rv};function Sv(i,e,t,n,s){let r,o;const a=new te.Parser(i,e);for(let l=0;l<n;l+=1){l<t&&(r=a.parseUShort(),o=a.parseShort());const A=s.get(l);A.advanceWidth=r,A.leftSideBearing=o}}c(Sv,"parseHmtxTableAll");function Nv(i,e,t,n,s){i._hmtxTableData={};let r,o;const a=new te.Parser(e,t);for(let l=0;l<s;l+=1)l<n&&(r=a.parseUShort(),o=a.parseShort()),i._hmtxTableData[l]={advanceWidth:r,leftSideBearing:o}}c(Nv,"parseHmtxTableOnLowMemory");function Qv(i,e,t,n,s,r,o){o.lowMemory?Nv(i,e,t,n,s):Sv(e,t,n,s,r)}c(Qv,"parseHmtxTable");function wv(i){const e=new x.Table("hmtx",[]);for(let t=0;t<i.length;t+=1){const n=i.get(t),s=n.advanceWidth||0,r=n.leftSideBearing||0;e.fields.push({name:"advanceWidth_"+t,type:"USHORT",value:s}),e.fields.push({name:"leftSideBearing_"+t,type:"SHORT",value:r})}return e}c(wv,"makeHmtxTable");var Ym={parse:Qv,make:wv};function Zv(i){const e=new x.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:i.length}]);let t="";const n=12+i.length*4;for(let s=0;s<i.length;++s){let r=t.indexOf(i[s]);r<0&&(r=t.length,t+=i[s]),e.fields.push({name:"offset "+s,type:"USHORT",value:n+r}),e.fields.push({name:"length "+s,type:"USHORT",value:i[s].length})}return e.fields.push({name:"stringPool",type:"CHARARRAY",value:t}),e}c(Zv,"makeLtagTable");function kv(i,e){const t=new te.Parser(i,e),n=t.parseULong();ge.argument(n===1,"Unsupported ltag table version."),t.skip("uLong",1);const s=t.parseULong(),r=[];for(let o=0;o<s;o++){let a="";const l=e+t.parseUShort(),A=t.parseUShort();for(let u=l;u<l+A;++u)a+=String.fromCharCode(i.getInt8(u));r.push(a)}return r}c(kv,"parseLtagTable");var Wm={make:Zv,parse:kv};function _v(i,e){const t={},n=new te.Parser(i,e);return t.version=n.parseVersion(),t.numGlyphs=n.parseUShort(),t.version===1&&(t.maxPoints=n.parseUShort(),t.maxContours=n.parseUShort(),t.maxCompositePoints=n.parseUShort(),t.maxCompositeContours=n.parseUShort(),t.maxZones=n.parseUShort(),t.maxTwilightPoints=n.parseUShort(),t.maxStorage=n.parseUShort(),t.maxFunctionDefs=n.parseUShort(),t.maxInstructionDefs=n.parseUShort(),t.maxStackElements=n.parseUShort(),t.maxSizeOfInstructions=n.parseUShort(),t.maxComponentElements=n.parseUShort(),t.maxComponentDepth=n.parseUShort()),t}c(_v,"parseMaxpTable");function Yv(i){return new x.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:i}])}c(Yv,"makeMaxpTable");var Dm={parse:_v,make:Yv},ou=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];function Wv(i){for(let e=0;e<ou.length;e+=1){const t=ou[e];if(i>=t.begin&&i<t.end)return e}return-1}c(Wv,"getUnicodeRange");function Dv(i,e){const t={},n=new te.Parser(i,e);t.version=n.parseUShort(),t.xAvgCharWidth=n.parseShort(),t.usWeightClass=n.parseUShort(),t.usWidthClass=n.parseUShort(),t.fsType=n.parseUShort(),t.ySubscriptXSize=n.parseShort(),t.ySubscriptYSize=n.parseShort(),t.ySubscriptXOffset=n.parseShort(),t.ySubscriptYOffset=n.parseShort(),t.ySuperscriptXSize=n.parseShort(),t.ySuperscriptYSize=n.parseShort(),t.ySuperscriptXOffset=n.parseShort(),t.ySuperscriptYOffset=n.parseShort(),t.yStrikeoutSize=n.parseShort(),t.yStrikeoutPosition=n.parseShort(),t.sFamilyClass=n.parseShort(),t.panose=[];for(let s=0;s<10;s++)t.panose[s]=n.parseByte();return t.ulUnicodeRange1=n.parseULong(),t.ulUnicodeRange2=n.parseULong(),t.ulUnicodeRange3=n.parseULong(),t.ulUnicodeRange4=n.parseULong(),t.achVendID=String.fromCharCode(n.parseByte(),n.parseByte(),n.parseByte(),n.parseByte()),t.fsSelection=n.parseUShort(),t.usFirstCharIndex=n.parseUShort(),t.usLastCharIndex=n.parseUShort(),t.sTypoAscender=n.parseShort(),t.sTypoDescender=n.parseShort(),t.sTypoLineGap=n.parseShort(),t.usWinAscent=n.parseUShort(),t.usWinDescent=n.parseUShort(),t.version>=1&&(t.ulCodePageRange1=n.parseULong(),t.ulCodePageRange2=n.parseULong()),t.version>=2&&(t.sxHeight=n.parseShort(),t.sCapHeight=n.parseShort(),t.usDefaultChar=n.parseUShort(),t.usBreakChar=n.parseUShort(),t.usMaxContent=n.parseUShort()),t}c(Dv,"parseOS2Table");function Tv(i){return new x.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],i)}c(Tv,"makeOS2Table");var au={parse:Dv,make:Tv,unicodeRanges:ou,getUnicodeRange:Wv};function Fv(i,e){const t={},n=new te.Parser(i,e);switch(t.version=n.parseVersion(),t.italicAngle=n.parseFixed(),t.underlinePosition=n.parseShort(),t.underlineThickness=n.parseShort(),t.isFixedPitch=n.parseULong(),t.minMemType42=n.parseULong(),t.maxMemType42=n.parseULong(),t.minMemType1=n.parseULong(),t.maxMemType1=n.parseULong(),t.version){case 1:t.names=is.slice();break;case 2:t.numberOfGlyphs=n.parseUShort(),t.glyphNameIndex=new Array(t.numberOfGlyphs);for(let s=0;s<t.numberOfGlyphs;s++)t.glyphNameIndex[s]=n.parseUShort();t.names=[];for(let s=0;s<t.numberOfGlyphs;s++)if(t.glyphNameIndex[s]>=is.length){const r=n.parseChar();t.names.push(n.parseString(r))}break;case 2.5:t.numberOfGlyphs=n.parseUShort(),t.offset=new Array(t.numberOfGlyphs);for(let s=0;s<t.numberOfGlyphs;s++)t.offset[s]=n.parseChar();break}return t}c(Fv,"parsePostTable");function xv(i){const{italicAngle:e=Math.round((i.italicAngle||0)*65536),underlinePosition:t=0,underlineThickness:n=0,isFixedPitch:s=0,minMemType42:r=0,maxMemType42:o=0,minMemType1:a=0,maxMemType1:l=0}=i.tables.post||{};return new x.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:e},{name:"underlinePosition",type:"FWORD",value:t},{name:"underlineThickness",type:"FWORD",value:n},{name:"isFixedPitch",type:"ULONG",value:s},{name:"minMemType42",type:"ULONG",value:r},{name:"maxMemType42",type:"ULONG",value:o},{name:"minMemType1",type:"ULONG",value:a},{name:"maxMemType1",type:"ULONG",value:l}])}c(xv,"makePostTable");var Tm={parse:Fv,make:xv},Qn=new Array(9);Qn[1]=c(function(){const e=this.offset+this.relativeOffset,t=this.parseUShort();if(t===1)return{substFormat:1,coverage:this.parsePointer(B.coverage),deltaGlyphId:this.parseShort()};if(t===2)return{substFormat:2,coverage:this.parsePointer(B.coverage),substitute:this.parseOffset16List()};ge.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")},"parseLookup1");Qn[2]=c(function(){const e=this.parseUShort();return ge.argument(e===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(B.coverage),sequences:this.parseListOfLists()}},"parseLookup2");Qn[3]=c(function(){const e=this.parseUShort();return ge.argument(e===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(B.coverage),alternateSets:this.parseListOfLists()}},"parseLookup3");Qn[4]=c(function(){const e=this.parseUShort();return ge.argument(e===1,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(B.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},"parseLookup4");var Us={sequenceIndex:B.uShort,lookupListIndex:B.uShort};Qn[5]=c(function(){const e=this.offset+this.relativeOffset,t=this.parseUShort();if(t===1)return{substFormat:t,coverage:this.parsePointer(B.coverage),ruleSets:this.parseListOfLists(function(){const n=this.parseUShort(),s=this.parseUShort();return{input:this.parseUShortList(n-1),lookupRecords:this.parseRecordList(s,Us)}})};if(t===2)return{substFormat:t,coverage:this.parsePointer(B.coverage),classDef:this.parsePointer(B.classDef),classSets:this.parseListOfLists(function(){const n=this.parseUShort(),s=this.parseUShort();return{classes:this.parseUShortList(n-1),lookupRecords:this.parseRecordList(s,Us)}})};if(t===3){const n=this.parseUShort(),s=this.parseUShort();return{substFormat:t,coverages:this.parseList(n,B.pointer(B.coverage)),lookupRecords:this.parseRecordList(s,Us)}}ge.assert(!1,"0x"+e.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},"parseLookup5");Qn[6]=c(function(){const e=this.offset+this.relativeOffset,t=this.parseUShort();if(t===1)return{substFormat:1,coverage:this.parsePointer(B.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Us)}})};if(t===2)return{substFormat:2,coverage:this.parsePointer(B.coverage),backtrackClassDef:this.parsePointer(B.classDef),inputClassDef:this.parsePointer(B.classDef),lookaheadClassDef:this.parsePointer(B.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Us)}})};if(t===3)return{substFormat:3,backtrackCoverage:this.parseList(B.pointer(B.coverage)),inputCoverage:this.parseList(B.pointer(B.coverage)),lookaheadCoverage:this.parseList(B.pointer(B.coverage)),lookupRecords:this.parseRecordList(Us)};ge.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},"parseLookup6");Qn[7]=c(function(){const e=this.parseUShort();ge.argument(e===1,"GSUB Extension Substitution subtable identifier-format must be 1");const t=this.parseUShort(),n=new B(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:t,extension:Qn[t].call(n)}},"parseLookup7");Qn[8]=c(function(){const e=this.parseUShort();return ge.argument(e===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(B.coverage),backtrackCoverage:this.parseList(B.pointer(B.coverage)),lookaheadCoverage:this.parseList(B.pointer(B.coverage)),substitutes:this.parseUShortList()}},"parseLookup8");function Lv(i,e){e=e||0;const t=new B(i,e),n=t.parseVersion(1);ge.argument(n===1||n===1.1,"Unsupported GSUB table version.");let s;n===1?s={version:n,scripts:t.parseScriptList(),features:t.parseFeatureList(),lookups:t.parseLookupList(Qn)}:s={version:n,scripts:t.parseScriptList(),features:t.parseFeatureList(),lookups:t.parseLookupList(Qn),variations:t.parseFeatureVariationsList()};for(const r in s.features){if(!Object.hasOwn(s.features,r))continue;const o=s.features[r];if(o.tag.match(/ss(?:0[1-9]|1\d|20)/)){const a=new B(i,o.feature.tableOffset);o.feature.featureParamsTable=a.parseStylisticSetFeatureParams()}else if(o.tag.match(/cv(?:0[1-9]|[1-9]\d)/)){const a=new B(i,o.feature.tableOffset);o.feature.featureParamsTable=a.parseCharacterVariantFeatureParams()}delete o.feature.tableOffset}return s}c(Lv,"parseGsubTable");var Ns=new Array(9);Ns[1]=c(function(e){if(e.substFormat===1)return new x.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new x.Coverage(e.coverage)},{name:"deltaGlyphID",type:"SHORT",value:e.deltaGlyphId}]);if(e.substFormat===2)return new x.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new x.Coverage(e.coverage)}].concat(x.ushortList("substitute",e.substitute)));ge.fail("Lookup type 1 substFormat must be 1 or 2.")},"makeLookup1");Ns[2]=c(function(e){return ge.assert(e.substFormat===1,"Lookup type 2 substFormat must be 1."),new x.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new x.Coverage(e.coverage)}].concat(x.tableList("seqSet",e.sequences,function(t){return new x.Table("sequenceSetTable",x.ushortList("sequence",t))})))},"makeLookup2");Ns[3]=c(function(e){return ge.assert(e.substFormat===1,"Lookup type 3 substFormat must be 1."),new x.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new x.Coverage(e.coverage)}].concat(x.tableList("altSet",e.alternateSets,function(t){return new x.Table("alternateSetTable",x.ushortList("alternate",t))})))},"makeLookup3");Ns[4]=c(function(e){return ge.assert(e.substFormat===1,"Lookup type 4 substFormat must be 1."),new x.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new x.Coverage(e.coverage)}].concat(x.tableList("ligSet",e.ligatureSets,function(t){return new x.Table("ligatureSetTable",x.tableList("ligature",t,function(n){return new x.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:n.ligGlyph}].concat(x.ushortList("component",n.components,n.components.length+1)))}))})))},"makeLookup4");Ns[5]=c(function(e){if(e.substFormat===1)return new x.Table("contextualSubstitutionTable",[{name:"substFormat",type:"USHORT",value:e.substFormat},{name:"coverage",type:"TABLE",value:new x.Coverage(e.coverage)}].concat(x.tableList("sequenceRuleSet",e.ruleSets,function(t){return t?new x.Table("sequenceRuleSetTable",x.tableList("sequenceRule",t,function(n){let s=x.ushortList("seqLookup",[],n.lookupRecords.length).concat(x.ushortList("inputSequence",n.input,n.input.length+1));[s[0],s[1]]=[s[1],s[0]];for(let r=0;r<n.lookupRecords.length;r++){const o=n.lookupRecords[r];s=s.concat({name:"sequenceIndex"+r,type:"USHORT",value:o.sequenceIndex}).concat({name:"lookupListIndex"+r,type:"USHORT",value:o.lookupListIndex})}return new x.Table("sequenceRuleTable",s)})):new x.Table("NULL",null)})));if(e.substFormat===2)return new x.Table("contextualSubstitutionTable",[{name:"substFormat",type:"USHORT",value:e.substFormat},{name:"coverage",type:"TABLE",value:new x.Coverage(e.coverage)},{name:"classDef",type:"TABLE",value:new x.ClassDef(e.classDef)}].concat(x.tableList("classSeqRuleSet",e.classSets,function(t){return t?new x.Table("classSeqRuleSetTable",x.tableList("classSeqRule",t,function(n){let s=x.ushortList("classes",n.classes,n.classes.length+1).concat(x.ushortList("seqLookupCount",[],n.lookupRecords.length));for(let r=0;r<n.lookupRecords.length;r++){const o=n.lookupRecords[r];s=s.concat({name:"sequenceIndex"+r,type:"USHORT",value:o.sequenceIndex}).concat({name:"lookupListIndex"+r,type:"USHORT",value:o.lookupListIndex})}return new x.Table("classSeqRuleTable",s)})):new x.Table("NULL",null)})));if(e.substFormat===3){let t=[{name:"substFormat",type:"USHORT",value:e.substFormat}];t.push({name:"inputGlyphCount",type:"USHORT",value:e.coverages.length}),t.push({name:"substitutionCount",type:"USHORT",value:e.lookupRecords.length});for(let s=0;s<e.coverages.length;s++){const r=e.coverages[s];t.push({name:"inputCoverage"+s,type:"TABLE",value:new x.Coverage(r)})}for(let s=0;s<e.lookupRecords.length;s++){const r=e.lookupRecords[s];t=t.concat({name:"sequenceIndex"+s,type:"USHORT",value:r.sequenceIndex}).concat({name:"lookupListIndex"+s,type:"USHORT",value:r.lookupListIndex})}return new x.Table("contextualSubstitutionTable",t)}ge.assert(!1,"lookup type 5 format must be 1, 2 or 3.")},"makeLookup5");Ns[6]=c(function(e){if(e.substFormat===1)return new x.Table("chainContextTable",[{name:"substFormat",type:"USHORT",value:e.substFormat},{name:"coverage",type:"TABLE",value:new x.Coverage(e.coverage)}].concat(x.tableList("chainRuleSet",e.chainRuleSets,function(n){return new x.Table("chainRuleSetTable",x.tableList("chainRule",n,function(s){let r=x.ushortList("backtrackGlyph",s.backtrack,s.backtrack.length).concat(x.ushortList("inputGlyph",s.input,s.input.length+1)).concat(x.ushortList("lookaheadGlyph",s.lookahead,s.lookahead.length)).concat(x.ushortList("substitution",[],s.lookupRecords.length));for(let o=0;o<s.lookupRecords.length;o++){const a=s.lookupRecords[o];r=r.concat({name:"sequenceIndex"+o,type:"USHORT",value:a.sequenceIndex}).concat({name:"lookupListIndex"+o,type:"USHORT",value:a.lookupListIndex})}return new x.Table("chainRuleTable",r)}))})));if(e.substFormat===2)ge.assert(!1,"lookup type 6 format 2 is not yet supported.");else if(e.substFormat===3){let t=[{name:"substFormat",type:"USHORT",value:e.substFormat}];t.push({name:"backtrackGlyphCount",type:"USHORT",value:e.backtrackCoverage.length});for(let s=0;s<e.backtrackCoverage.length;s++){const r=e.backtrackCoverage[s];t.push({name:"backtrackCoverage"+s,type:"TABLE",value:new x.Coverage(r)})}t.push({name:"inputGlyphCount",type:"USHORT",value:e.inputCoverage.length});for(let s=0;s<e.inputCoverage.length;s++){const r=e.inputCoverage[s];t.push({name:"inputCoverage"+s,type:"TABLE",value:new x.Coverage(r)})}t.push({name:"lookaheadGlyphCount",type:"USHORT",value:e.lookaheadCoverage.length});for(let s=0;s<e.lookaheadCoverage.length;s++){const r=e.lookaheadCoverage[s];t.push({name:"lookaheadCoverage"+s,type:"TABLE",value:new x.Coverage(r)})}t.push({name:"substitutionCount",type:"USHORT",value:e.lookupRecords.length});for(let s=0;s<e.lookupRecords.length;s++){const r=e.lookupRecords[s];t=t.concat({name:"sequenceIndex"+s,type:"USHORT",value:r.sequenceIndex}).concat({name:"lookupListIndex"+s,type:"USHORT",value:r.lookupListIndex})}return new x.Table("chainContextTable",t)}ge.assert(!1,"lookup type 6 format must be 1, 2 or 3.")},"makeLookup6");function Mv(i){return new x.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new x.ScriptList(i.scripts)},{name:"features",type:"TABLE",value:new x.FeatureList(i.features)},{name:"lookups",type:"TABLE",value:new x.LookupList(i.lookups,Ns)}])}c(Mv,"makeGsubTable");var Fm={parse:Lv,make:Mv};function Vv(i,e){const t=new te.Parser(i,e),n=t.parseULong();ge.argument(n===1,"Unsupported META table version."),t.parseULong(),t.parseULong();const s=t.parseULong(),r={};for(let o=0;o<s;o++){const a=t.parseTag(),l=t.parseULong(),A=t.parseULong();if(a==="appl"||a==="bild")continue;const u=ar.UTF8(i,e+l,A);r[a]=u}return r}c(Vv,"parseMetaTable");function Ov(i){const e=Object.keys(i).length;let t="";const n=16+e*12,s=new x.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:n},{name:"numTags",type:"ULONG",value:e}]);for(let r in i){const o=t.length;t+=i[r],s.fields.push({name:"tag "+r,type:"TAG",value:r}),s.fields.push({name:"offset "+r,type:"ULONG",value:n+o}),s.fields.push({name:"length "+r,type:"ULONG",value:i[r].length})}return s.fields.push({name:"stringPool",type:"CHARARRAY",value:t}),s}c(Ov,"makeMetaTable");var xm={parse:Vv,make:Ov};function Pv(i,e){const t=new B(i,e),n=t.parseUShort();n!==0&&console.warn("Only COLRv0 is currently fully supported. A subset of color glyphs might be available in this font if provided in the v0 format.");const s=t.parseUShort(),r=t.parseOffset32(),o=t.parseOffset32(),a=t.parseUShort();t.relativeOffset=r;const l=t.parseRecordList(s,{glyphID:B.uShort,firstLayerIndex:B.uShort,numLayers:B.uShort});t.relativeOffset=o;const A=t.parseRecordList(a,{glyphID:B.uShort,paletteIndex:B.uShort});return{version:n,baseGlyphRecords:l,layerRecords:A}}c(Pv,"parseColrTable");function Hv({version:i=0,baseGlyphRecords:e=[],layerRecords:t=[]}){ge.argument(i===0,"Only COLRv0 supported.");const n=14,s=n+e.length*6;return new x.Table("COLR",[{name:"version",type:"USHORT",value:i},{name:"numBaseGlyphRecords",type:"USHORT",value:e.length},{name:"baseGlyphRecordsOffset",type:"ULONG",value:n},{name:"layerRecordsOffset",type:"ULONG",value:s},{name:"numLayerRecords",type:"USHORT",value:t.length},...e.map((r,o)=>[{name:"glyphID_"+o,type:"USHORT",value:r.glyphID},{name:"firstLayerIndex_"+o,type:"USHORT",value:r.firstLayerIndex},{name:"numLayers_"+o,type:"USHORT",value:r.numLayers}]).flat(),...t.map((r,o)=>[{name:"LayerGlyphID_"+o,type:"USHORT",value:r.glyphID},{name:"paletteIndex_"+o,type:"USHORT",value:r.paletteIndex}]).flat()])}c(Hv,"makeColrTable");var Lm={parse:Pv,make:Hv};function Xv(i,e){return[{name:"tag_"+i,type:"TAG",value:e.tag},{name:"minValue_"+i,type:"FIXED",value:e.minValue<<16},{name:"defaultValue_"+i,type:"FIXED",value:e.defaultValue<<16},{name:"maxValue_"+i,type:"FIXED",value:e.maxValue<<16},{name:"flags_"+i,type:"USHORT",value:0},{name:"nameID_"+i,type:"USHORT",value:e.axisNameID}]}c(Xv,"makeFvarAxis");function zv(i,e,t){const n={},s=new te.Parser(i,e);n.tag=s.parseTag(),n.minValue=s.parseFixed(),n.defaultValue=s.parseFixed(),n.maxValue=s.parseFixed(),s.skip("uShort",1);const r=s.parseUShort();return n.axisNameID=r,n.name=il(t,r),n}c(zv,"parseFvarAxis");function Jv(i,e,t,n={}){const s=[{name:"nameID_"+i,type:"USHORT",value:e.subfamilyNameID},{name:"flags_"+i,type:"USHORT",value:0}];for(let r=0;r<t.length;++r){const o=t[r].tag;s.push({name:"axis_"+i+" "+o,type:"FIXED",value:e.coordinates[o]<<16})}return n&&n.postScriptNameID&&s.push({name:"postScriptNameID_",type:"USHORT",value:e.postScriptNameID!==void 0?e.postScriptNameID:65535}),s}c(Jv,"makeFvarInstance");function Uv(i,e,t,n,s){const r={},o=new te.Parser(i,e),a=o.parseUShort();r.subfamilyNameID=a,r.name=il(n,a,[2,17]),o.skip("uShort",1),r.coordinates={};for(let A=0;A<t.length;++A)r.coordinates[t[A].tag]=o.parseFixed();if(o.relativeOffset===s)return r.postScriptNameID=void 0,r.postScriptName=void 0,r;const l=o.parseUShort();return r.postScriptNameID=l==65535?void 0:l,r.postScriptName=r.postScriptNameID!==void 0?il(n,l,[6]):"",r}c(Uv,"parseFvarInstance");function Kv(i,e){const t=new x.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:i.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:i.instances.length},{name:"instanceSize",type:"USHORT",value:4+i.axes.length*4}]);t.offsetToData=t.sizeOf();for(let s=0;s<i.axes.length;s++)t.fields=t.fields.concat(Xv(s,i.axes[s]));const n={};for(let s=0;s<i.instances.length;s++)if(i.instances[s].postScriptNameID!==void 0){t.instanceSize+=2,n.postScriptNameID=!0;break}for(let s=0;s<i.instances.length;s++)t.fields=t.fields.concat(Jv(s,i.instances[s],i.axes,n));return t}c(Kv,"makeFvarTable");function jv(i,e,t){const n=new te.Parser(i,e),s=n.parseULong();ge.argument(s===65536,"Unsupported fvar table version.");const r=n.parseOffset16();n.skip("uShort",1);const o=n.parseUShort(),a=n.parseUShort(),l=n.parseUShort(),A=n.parseUShort(),u=[];for(let g=0;g<o;g++)u.push(zv(i,e+r+g*a,t));const h=[],d=e+r+o*a;for(let g=0;g<l;g++)h.push(Uv(i,d+g*A,u,t,A));return{axes:u,instances:h}}c(jv,"parseFvarTable");var Mm={make:Kv,parse:jv},qv={tag:B.tag,nameID:B.uShort,ordering:B.uShort},No=new Array(5);No[1]=c(function(){return{axisIndex:this.parseUShort(),flags:this.parseUShort(),valueNameID:this.parseUShort(),value:this.parseFixed()}},"axisValueParser1");No[2]=c(function(){return{axisIndex:this.parseUShort(),flags:this.parseUShort(),valueNameID:this.parseUShort(),nominalValue:this.parseFixed(),rangeMinValue:this.parseFixed(),rangeMaxValue:this.parseFixed()}},"axisValueParser2");No[3]=c(function(){return{axisIndex:this.parseUShort(),flags:this.parseUShort(),valueNameID:this.parseUShort(),value:this.parseFixed(),linkedValue:this.parseFixed()}},"axisValueParser3");No[4]=c(function(){const e=this.parseUShort();return{flags:this.parseUShort(),valueNameID:this.parseUShort(),axisValues:this.parseList(e,function(){return{axisIndex:this.parseUShort(),value:this.parseFixed()}})}},"axisValueParser4");function $v(){const i=this.parseUShort(),e=No[i],t={format:i};return e===void 0?(console.warn(`Unknown axis value table format ${i}`),t):Object.assign(t,this.parseStruct(e.bind(this)))}c($v,"parseSTATAxisValue");function e2(i,e,t){e||(e=0);const n=new te.Parser(i,e),s=n.parseUShort(),r=n.parseUShort();s!==1&&console.warn(`Unsupported STAT table version ${s}.${r}`);const o=[s,r],a=n.parseUShort(),l=n.parseUShort(),A=n.parseOffset32(),u=n.parseUShort(),h=n.parseOffset32(),d=s>1||r>0?n.parseUShort():void 0;t!==void 0&&ge.argument(l>=t.axes.length,"STAT axis count must be greater than or equal to fvar axis count"),u>0&&ge.argument(l>=0,"STAT axis count must be greater than 0 if STAT axis value count is greater than 0");const g=[];for(let m=0;m<l;m++)n.offset=e+A,n.relativeOffset=m*a,g.push(n.parseStruct(qv));n.offset=e,n.relativeOffset=h;const p=n.parseUShortList(u),f=[];for(let m=0;m<u;m++)n.offset=e+h,n.relativeOffset=p[m],f.push($v.apply(n));return{version:o,axes:g,values:f,elidedFallbackNameID:d}}c(e2,"parseSTATTable");var Qo=new Array(5);Qo[1]=c(function(e,t){return[{name:`format${e}`,type:"USHORT",value:1},{name:`axisIndex${e}`,type:"USHORT",value:t.axisIndex},{name:`flags${e}`,type:"USHORT",value:t.flags},{name:`valueNameID${e}`,type:"USHORT",value:t.valueNameID},{name:`value${e}`,type:"FLOAT",value:t.value}]},"axisValueMaker1");Qo[2]=c(function(e,t){return[{name:`format${e}`,type:"USHORT",value:2},{name:`axisIndex${e}`,type:"USHORT",value:t.axisIndex},{name:`flags${e}`,type:"USHORT",value:t.flags},{name:`valueNameID${e}`,type:"USHORT",value:t.valueNameID},{name:`nominalValue${e}`,type:"FLOAT",value:t.nominalValue},{name:`rangeMinValue${e}`,type:"FLOAT",value:t.rangeMinValue},{name:`rangeMaxValue${e}`,type:"FLOAT",value:t.rangeMaxValue}]},"axisValueMaker2");Qo[3]=c(function(e,t){return[{name:`format${e}`,type:"USHORT",value:3},{name:`axisIndex${e}`,type:"USHORT",value:t.axisIndex},{name:`flags${e}`,type:"USHORT",value:t.flags},{name:`valueNameID${e}`,type:"USHORT",value:t.valueNameID},{name:`value${e}`,type:"FLOAT",value:t.value},{name:`linkedValue${e}`,type:"FLOAT",value:t.linkedValue}]},"axisValueMaker3");Qo[4]=c(function(e,t){let n=[{name:`format${e}`,type:"USHORT",value:4},{name:`axisCount${e}`,type:"USHORT",value:t.axisValues.length},{name:`flags${e}`,type:"USHORT",value:t.flags},{name:`valueNameID${e}`,type:"USHORT",value:t.valueNameID}];for(let s=0;s<t.axisValues.length;s++)n=n.concat([{name:`format${e}axisIndex${s}`,type:"USHORT",value:t.axisValues[s].axisIndex},{name:`format${e}value${s}`,type:"FLOAT",value:t.axisValues[s].value}]);return n},"axisValueMaker4");function t2(i,e){return new x.Record("axisRecord_"+i,[{name:"axisTag_"+i,type:"TAG",value:e.tag},{name:"axisNameID_"+i,type:"USHORT",value:e.nameID},{name:"axisOrdering_"+i,type:"USHORT",value:e.ordering}])}c(t2,"makeSTATAxisRecord");function n2(i,e){const t=e.format,n=Qo[t];ge.argument(n!==void 0,`Unknown axis value table format ${t}`);const s=n(i,e);return new x.Table("axisValueTable_"+i,s)}c(n2,"makeSTATValueTable");function i2(i){const e=new x.Table("STAT",[{name:"majorVersion",type:"USHORT",value:1},{name:"minorVersion",type:"USHORT",value:2},{name:"designAxisSize",type:"USHORT",value:8},{name:"designAxisCount",type:"USHORT",value:i.axes.length},{name:"designAxesOffset",type:"ULONG",value:0},{name:"axisValueCount",type:"USHORT",value:i.values.length},{name:"offsetToAxisValueOffsets",type:"ULONG",value:0},{name:"elidedFallbackNameID",type:"USHORT",value:i.elidedFallbackNameID}]);e.designAxesOffset=e.offsetToAxisValueOffsets=e.sizeOf();for(let r=0;r<i.axes.length;r++){const o=t2(r,i.axes[r]);e.offsetToAxisValueOffsets+=o.sizeOf(),e.fields=e.fields.concat(o.fields)}const t=[];let n=[],s=i.values.length*2;for(let r=0;r<i.values.length;r++){const o=n2(r,i.values[r]);t.push({name:"offset_"+r,type:"USHORT",value:s}),s+=o.sizeOf(),n=n.concat(o.fields)}return e.fields=e.fields.concat(t),e.fields=e.fields.concat(n),e}c(i2,"makeSTATTable");var Vm={make:i2,parse:e2};function s2(i,e){return new x.Record("axisValueMap_"+i,[{name:"fromCoordinate_"+i,type:"F2DOT14",value:e.fromCoordinate},{name:"toCoordinate_"+i,type:"F2DOT14",value:e.toCoordinate}])}c(s2,"makeAvarAxisValueMap");function r2(i,e){const t=new x.Record("segmentMap_"+i,[{name:"positionMapCount_"+i,type:"USHORT",value:e.axisValueMaps.length}]);let n=[];for(let s=0;s<e.axisValueMaps.length;s++){const r=s2(`${i}_${s}`,e.axisValueMaps[s]);n=n.concat(r.fields)}return t.fields=t.fields.concat(n),t}c(r2,"makeAvarSegmentMap");function o2(i,e){ge.argument(i.axisSegmentMaps.length===e.axes.length,"avar axis count must correspond to fvar axis count");const t=new x.Table("avar",[{name:"majorVersion",type:"USHORT",value:1},{name:"minorVersion",type:"USHORT",value:0},{name:"reserved",type:"USHORT",value:0},{name:"axisCount",type:"USHORT",value:i.axisSegmentMaps.length}]);for(let n=0;n<i.axisSegmentMaps.length;n++){const s=r2(n,i.axisSegmentMaps[n]);t.fields=t.fields.concat(s.fields)}return t}c(o2,"makeAvarTable");function a2(i,e,t){e||(e=0);const n=new B(i,e),s=n.parseUShort(),r=n.parseUShort();s!==1&&console.warn(`Unsupported avar table version ${s}.${r}`),n.skip("uShort",1);const o=n.parseUShort();ge.argument(o===t.axes.length,"avar axis count must correspond to fvar axis count");const a=[];for(let l=0;l<o;l++){const A=[],u=n.parseUShort();for(let h=0;h<u;h++){const d=n.parseF2Dot14(),g=n.parseF2Dot14();A.push({fromCoordinate:d,toCoordinate:g})}a.push({axisValueMaps:A})}return{version:[s,r],axisSegmentMaps:a}}c(a2,"parseAvarTable");var Om={make:o2,parse:a2};function l2(i,e,t,n){const s=new te.Parser(i,e),r=s.parseTupleVariationStore(s.relativeOffset,t.axes.length,"cvar",n),o=s.parseUShort(),a=s.parseUShort();return o!==1&&console.warn(`Unsupported cvar table version ${o}.${a}`),{version:[o,a],...r}}c(l2,"parseCvarTable");function c2(){console.warn("Writing of cvar tables is not yet supported.")}c(c2,"makeCvarTable");var Pm={make:c2,parse:l2};function A2(i,e,t,n){const s=new te.Parser(i,e),r=s.parseUShort(),o=s.parseUShort();r!==1&&console.warn(`Unsupported gvar table version ${r}.${o}`);const a=s.parseUShort();a!==t.axes.length&&console.warn(`axisCount ${a} in gvar table does not match the number of axes ${t.axes.length} in the fvar table!`);const l=s.parseUShort(),A=s.parsePointer32(function(){return this.parseTupleRecords(l,a)}),u=s.parseTupleVariationStoreList(a,"gvar",n);return{version:[r,o],sharedTuples:A,glyphVariations:u}}c(A2,"parseGvarTable");function u2(){console.warn("Writing of gvar tables is not yet supported.")}c(u2,"makeGvarTable");var Hm={make:u2,parse:A2};function h2(i,e){const t={},n=new te.Parser(i,e);t.version=n.parseUShort(),ge.argument(t.version<=1,"Unsupported gasp table version."),t.numRanges=n.parseUShort(),t.gaspRanges=[];for(let s=0;s<t.numRanges;s++)t.gaspRanges[s]={rangeMaxPPEM:n.parseUShort(),rangeGaspBehavior:n.parseUShort()};return t}c(h2,"parseGaspTable");function d2(i){const e=new x.Table("gasp",[{name:"version",type:"USHORT",value:1},{name:"numRanges",type:"USHORT",value:i.numRanges}]);for(let t in i.gaspRanges)e.fields.push({name:"rangeMaxPPEM",type:"USHORT",value:i.gaspRanges[t].rangeMaxPPEM}),e.fields.push({name:"rangeGaspBehavior",type:"USHORT",value:i.gaspRanges[t].rangeGaspBehavior});return e}c(d2,"makeGaspTable");var Xm={parse:h2,make:d2};function g2(i,e){const t=new Map,n=i.buffer,s=new B(i,e);if(s.parseUShort()!==0)return t;s.relativeOffset=s.parseOffset32();const o=i.byteOffset+e+s.relativeOffset,a=s.parseUShort(),l=new Map;for(let A=0;A<a;A++){const u=s.parseUShort(),h=s.parseUShort(),d=o+s.parseOffset32(),g=s.parseULong();let p=l.get(d);p===void 0&&(p=new Uint8Array(n,d,g),l.set(d,p));for(let f=u;f<=h;f++)t.set(f,p)}return t}c(g2,"parseSvgTable");function p2(i){const e=Array.from(i.keys()).sort(),t=[],n=[],s=new Map;let r=0,o={endGlyphID:null};for(let d=0,g=e.length;d<g;d++){const p=e[d],f=i.get(p);let m=s.get(f);m===void 0&&(m=r,n.push(f),s.set(f,m),r+=f.byteLength),p-1===o.endGlyphID&&m===o.svgDocOffset?o.endGlyphID=p:(o={startGlyphID:p,endGlyphID:p,svgDocOffset:m,svgDocLength:f.byteLength},t.push(o))}const a=t.length,l=n.length,A=2+a*12,u=new Array(4+a*4+l);let h=0;u[h++]={name:"version",type:"USHORT",value:0},u[h++]={name:"svgDocumentListOffset",type:"ULONG",value:10},u[h++]={name:"reserved",type:"ULONG",value:0},u[h++]={name:"numEntries",type:"USHORT",value:a};for(let d=0;d<a;d++){const g="documentRecord_"+d,{startGlyphID:p,endGlyphID:f,svgDocOffset:m,svgDocLength:y}=t[d];u[h++]={name:g+"_startGlyphID",type:"USHORT",value:p},u[h++]={name:g+"_endGlyphID",type:"USHORT",value:f},u[h++]={name:g+"_svgDocOffset",type:"ULONG",value:A+m},u[h++]={name:g+"_svgDocLength",type:"ULONG",value:y}}for(let d=0;d<l;d++)u[h++]={name:"svgDoc_"+d,type:"LITERAL",value:n[d]};return new x.Table("SVG ",u)}c(p2,"makeSvgTable");var zm={make:p2,parse:g2};function hg(i){return Math.log(i)/Math.log(2)|0}c(hg,"log2");function gh(i){for(;i.length%4!==0;)i.push(0);let e=0;for(let t=0;t<i.length;t+=4)e+=(i[t]<<24)+(i[t+1]<<16)+(i[t+2]<<8)+i[t+3];return e%=Math.pow(2,32),e}c(gh,"computeCheckSum");function dg(i,e,t,n){return new x.Record("Table Record",[{name:"tag",type:"TAG",value:i!==void 0?i:""},{name:"checkSum",type:"ULONG",value:e!==void 0?e:0},{name:"offset",type:"ULONG",value:t!==void 0?t:0},{name:"length",type:"ULONG",value:n!==void 0?n:0}])}c(dg,"makeTableRecord");function Jm(i){const e=new x.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);e.tables=i,e.numTables=i.length;const t=Math.pow(2,hg(e.numTables));e.searchRange=16*t,e.entrySelector=hg(t),e.rangeShift=e.numTables*16-e.searchRange;const n=[],s=[];let r=e.sizeOf()+dg().sizeOf()*e.numTables;for(;r%4!==0;)r+=1,s.push({name:"padding",type:"BYTE",value:0});for(let o=0;o<i.length;o+=1){const a=i[o];ge.argument(a.tableName.length===4,"Table name"+a.tableName+" is invalid.");const l=a.sizeOf(),A=dg(a.tableName,gh(a.encode()),r,l);for(n.push({name:A.tag+" Table Record",type:"RECORD",value:A}),s.push({name:a.tableName+" table",type:"RECORD",value:a}),r+=l,ge.argument(!isNaN(r),"Something went wrong calculating the offset.");r%4!==0;)r+=1,s.push({name:"padding",type:"BYTE",value:0})}return n.sort(function(o,a){return o.value.tag>a.value.tag?1:-1}),e.fields=e.fields.concat(n),e.fields=e.fields.concat(s),e}c(Jm,"makeSfntTable");function gg(i,e,t){for(let n=0;n<e.length;n+=1){const s=i.charToGlyphIndex(e[n]);if(s>0)return i.glyphs.get(s).getMetrics()}return t}c(gg,"metricsForChar");function f2(i){let e=0;for(let t=0;t<i.length;t+=1)e+=i[t];return e/i.length}c(f2,"average");function m2(i){const e=[],t=[],n=[],s=[],r=[],o=[],a=[];let l,A=0,u=0,h=0,d=0,g=0;for(let Re=0;Re<i.glyphs.length;Re+=1){const We=i.glyphs.get(Re),He=We.unicode|0;if(isNaN(We.advanceWidth))throw new Error("Glyph "+We.name+" ("+Re+"): advanceWidth is not a number.");(l>He||l===void 0)&&He>0&&(l=He),A<He&&(A=He);const Ke=au.getUnicodeRange(He);if(Ke<32)u|=1<<Ke;else if(Ke<64)h|=1<<Ke-32;else if(Ke<96)d|=1<<Ke-64;else if(Ke<123)g|=1<<Ke-96;else throw new Error("Unicode ranges bits > 123 are reserved for internal usage");if(We.name===".notdef")continue;const $e=We.getMetrics();e.push($e.xMin),t.push($e.yMin),n.push($e.xMax),s.push($e.yMax),o.push($e.leftSideBearing),a.push($e.rightSideBearing),r.push(We.advanceWidth)}const p={xMin:Math.min.apply(null,e),yMin:Math.min.apply(null,t),xMax:Math.max.apply(null,n),yMax:Math.max.apply(null,s),advanceWidthMax:Math.max.apply(null,r),advanceWidthAvg:f2(r),minLeftSideBearing:Math.min.apply(null,o),maxLeftSideBearing:Math.max.apply(null,o),minRightSideBearing:Math.min.apply(null,a)};p.ascender=i.ascender,p.descender=i.descender;let f=0;i.weightClass>=600&&(f|=i.macStyleValues.BOLD),i.italicAngle<0&&(f|=i.macStyleValues.ITALIC);const m=km.make({flags:3,unitsPerEm:i.unitsPerEm,xMin:p.xMin,yMin:p.yMin,xMax:p.xMax,yMax:p.yMax,lowestRecPPEM:3,macStyle:f,createdTimestamp:i.createdTimestamp}),y=_m.make({ascender:p.ascender,descender:p.descender,advanceWidthMax:p.advanceWidthMax,minLeftSideBearing:p.minLeftSideBearing,minRightSideBearing:p.minRightSideBearing,xMaxExtent:p.maxLeftSideBearing+(p.xMax-p.xMin),numberOfHMetrics:i.glyphs.length}),v=Dm.make(i.glyphs.length),G=au.make(Object.assign({xAvgCharWidth:Math.round(p.advanceWidthAvg),usFirstCharIndex:l,usLastCharIndex:A,ulUnicodeRange1:u,ulUnicodeRange2:h,ulUnicodeRange3:d,ulUnicodeRange4:g,sTypoAscender:p.ascender,sTypoDescender:p.descender,sTypoLineGap:0,usWinAscent:p.yMax,usWinDescent:Math.abs(p.yMin),ulCodePageRange1:1,sxHeight:gg(i,"xyvw",{yMax:Math.round(p.ascender/2)}).yMax,sCapHeight:gg(i,"HIKLEFJMNTZBDPRAGOQSUVWXY",p).yMax,usDefaultChar:i.hasChar(" ")?32:0,usBreakChar:i.hasChar(" ")?32:0},i.tables.os2)),R=Ym.make(i.glyphs),Q=Im.make(i.glyphs),S=i.getEnglishName("fontFamily"),M=i.getEnglishName("fontSubfamily"),V=S+" "+M;let K=i.getEnglishName("postScriptName");K||(K=S.replace(/\s/g,"")+"-"+M);const j={};for(let Re in i.names)j[Re]=i.names[Re];j.unicode=j.unicode||{},j.macintosh=j.macintosh||{},j.windows=j.windows||{};const Ce=i.names.unicode||{},Ge=i.names.macintosh||{},Ie=i.names.windows||{};for(const Re in j){if(j[Re]=j[Re]||{},!j[Re].uniqueID){const We=i.getEnglishName("manufacturer")||"";j[Re].uniqueID={en:`${We}: ${V}`}}j[Re].postScriptName||(j[Re].postScriptName={en:K})}j.unicode.preferredFamily||(j.unicode.preferredFamily=Ce.fontFamily||Ge.fontFamily||Ie.fontFamily),j.macintosh.preferredFamily||(j.macintosh.preferredFamily=Ge.fontFamily||Ce.fontFamily||Ie.fontFamily),j.windows.preferredFamily||(j.windows.preferredFamily=Ie.fontFamily||Ce.fontFamily||Ge.fontFamily),j.unicode.preferredSubfamily||(j.unicode.preferredSubfamily=Ce.fontSubfamily||Ge.fontSubfamily||Ie.fontSubfamily),j.macintosh.preferredSubfamily||(j.macintosh.preferredSubfamily=Ge.fontSubfamily||Ce.fontSubfamily||Ie.fontSubfamily),j.windows.preferredSubfamily||(j.windows.preferredSubfamily=Ie.fontSubfamily||Ce.fontSubfamily||Ge.fontSubfamily);const H=[],Ae=Cm.make(j,H),ne=H.length>0?Wm.make(H):void 0,De=Tm.make(i),O=ru.make(i.glyphs,{version:i.getEnglishName("version"),fullName:V,familyName:S,weightName:M,postScriptName:K,unitsPerEm:i.unitsPerEm,fontBBox:[0,p.yMin,p.ascender,p.advanceWidthMax],topDict:i.tables.cff&&i.tables.cff.topDict||{}}),L=i.metas&&Object.keys(i.metas).length>0?xm.make(i.metas):void 0,T=[m,y,v,G,Ae,Q,De,O,R];ne&&T.push(ne);const he={gsub:Fm,cpal:Gm,colr:Lm,stat:Vm,avar:Om,cvar:Pm,fvar:Mm,gvar:Hm,gasp:Xm,svg:zm},W={avar:[i.tables.fvar],fvar:[i.names]};for(let Re in he){const We=i.tables[Re];if(We){const He=he[Re].make.call(i,We,...W[Re]||[]);He&&T.push(He)}}L&&T.push(L);const z=Jm(T),ie=z.encode(),ee=gh(ie),J=z.fields;let ve=!1;for(let Re=0;Re<J.length;Re+=1)if(J[Re].name==="head table"){J[Re].value.checkSumAdjustment=2981146554-ee,ve=!0;break}if(!ve)throw new Error("Could not find head table with checkSum to adjust.");return z}c(m2,"fontToSfntTable");var C2={make:Jm,fontToTable:m2,computeCheckSum:gh};function Xc(i,e){let t=0,n=i.length-1;for(;t<=n;){const s=t+n>>>1,r=i[s].tag;if(r===e)return s;r<e?t=s+1:n=s-1}return-t-1}c(Xc,"searchTag");function pg(i,e){let t=0,n=i.length-1;for(;t<=n;){const s=t+n>>>1,r=i[s];if(r===e)return s;r<e?t=s+1:n=s-1}return-t-1}c(pg,"binSearch");function fg(i,e){let t,n=0,s=i.length-1;for(;n<=s;){const r=n+s>>>1;t=i[r];const o=t.start;if(o===e)return t;o<e?n=r+1:s=r-1}if(n>0)return t=i[n-1],e>t.end?0:t}c(fg,"searchRange");function Um(i,e){this.font=i,this.tableName=e}c(Um,"Layout");Um.prototype={searchTag:Xc,binSearch:pg,getTable:c(function(i){let e=this.font.tables[this.tableName];return!e&&i&&(e=this.font.tables[this.tableName]=this.createDefaultTable()),e},"getTable"),getScriptNames:c(function(){let i=this.getTable();return i?i.scripts.map(function(e){return e.tag}):[]},"getScriptNames"),getDefaultScriptName:c(function(){let i=this.getTable();if(!i)return;let e=!1;for(let t=0;t<i.scripts.length;t++){const n=i.scripts[t].tag;if(n==="DFLT")return n;n==="latn"&&(e=!0)}if(e)return"latn"},"getDefaultScriptName"),getScriptTable:c(function(i,e){const t=this.getTable(e);if(t){i=i||"DFLT";const n=t.scripts,s=Xc(t.scripts,i);if(s>=0)return n[s].script;if(e){const r={tag:i,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return n.splice(-1-s,0,r),r.script}}},"getScriptTable"),getLangSysTable:c(function(i,e,t){const n=this.getScriptTable(i,t);if(n){if(!e||e==="dflt"||e==="DFLT")return n.defaultLangSys;const s=Xc(n.langSysRecords,e);if(s>=0)return n.langSysRecords[s].langSys;if(t){const r={tag:e,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return n.langSysRecords.splice(-1-s,0,r),r.langSys}}},"getLangSysTable"),getFeatureTable:c(function(i,e,t,n){const s=this.getLangSysTable(i,e,n);if(s){let r;const o=s.featureIndexes,a=this.font.tables[this.tableName].features;for(let l=0;l<o.length;l++)if(r=a[o[l]],r.tag===t)return r.feature;if(n){const l=a.length;return ge.assert(l===0||t>=a[l-1].tag,"Features must be added in alphabetical order."),r={tag:t,feature:{params:0,lookupListIndexes:[]}},a.push(r),o.push(l),r.feature}}},"getFeatureTable"),getLookupTables:c(function(i,e,t,n,s){const r=this.getFeatureTable(i,e,t,s),o=[];if(r){let a;const l=r.lookupListIndexes,A=this.font.tables[this.tableName].lookups;for(let u=0;u<l.length;u++)a=A[l[u]],a.lookupType===n&&o.push(a);if(o.length===0&&s){a={lookupType:n,lookupFlag:0,subtables:[],markFilteringSet:void 0};const u=A.length;return A.push(a),l.push(u),[a]}}return o},"getLookupTables"),getGlyphClass:c(function(i,e){switch(i.format){case 1:return i.startGlyph<=e&&e<i.startGlyph+i.classes.length?i.classes[e-i.startGlyph]:0;case 2:{const t=fg(i.ranges,e);return t?t.classId:0}}},"getGlyphClass"),getCoverageIndex:c(function(i,e){switch(i.format){case 1:{const t=pg(i.glyphs,e);return t>=0?t:-1}case 2:{const t=fg(i.ranges,e);return t?t.index+e-t.start:-1}}},"getCoverageIndex"),expandCoverage:c(function(i){if(i.format===1)return i.glyphs;{const e=[],t=i.ranges;for(let n=0;n<t.length;n++){const s=t[n],r=s.start,o=s.end;for(let a=r;a<=o;a++)e.push(a)}return e}},"expandCoverage")};var Ll=Um;function wo(i){Ll.call(this,i,"gpos")}c(wo,"Position");wo.prototype=Ll.prototype;wo.prototype.init=function(){const i=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(i)};wo.prototype.getKerningValue=function(i,e,t){for(let n=0;n<i.length;n++){const s=i[n].subtables;for(let r=0;r<s.length;r++){const o=s[r],a=this.getCoverageIndex(o.coverage,e);if(!(a<0))switch(o.posFormat){case 1:{let l=o.pairSets[a];for(let A=0;A<l.length;A++){let u=l[A];if(u.secondGlyph===t)return u.value1&&u.value1.xAdvance||0}break}case 2:{const l=this.getGlyphClass(o.classDef1,e),A=this.getGlyphClass(o.classDef2,t),u=o.classRecords[l][A];return u.value1&&u.value1.xAdvance||0}}}}return 0};wo.prototype.getKerningTables=function(i,e){if(this.font.tables.gpos)return this.getLookupTables(i,e,"kern",2)};var I2=wo;function y2(i,e){const t=i.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(i[n]!==e[n])return!1;return!0}c(y2,"arraysEqual");function b2(i,e,t){let n=0,s=i.length-1,r=null;for(;n<=s;){const o=Math.floor((n+s)/2),a=i[o],l=a[e];if(l<t)n=o+1;else if(l>t)s=o-1;else{r=a;break}}return r}c(b2,"binarySearch$1");function E2(i,e,t){let n=0,s=i.length-1;for(;n<=s;){const r=Math.floor((n+s)/2),o=i[r];if(o[e]<t)n=r+1;else if(o[e]>t)s=r-1;else return r}return-1}c(E2,"binarySearchIndex");function B2(i,e,t){let n=0,s=i.length;const r=c((o,a)=>o[e]-a[e],"compare");for(;n<s;){const o=n+s>>>1;r(i[o],t)<0?n=o+1:s=o}return i.splice(n,0,t),n}c(B2,"binarySearchInsert");function Km(i){return i[0]===31&&i[1]===139&&i[2]===8}c(Km,"isGzip");function v2(i){const e=new DataView(i.buffer,i.byteOffset,i.byteLength);let t=10;const n=i.byteLength-8,s=e.getInt8(3);if(s&4&&(t+=2+e.getUint16(t,!0)),s&8)for(;t<n&&i[t++]!==0;);if(s&16)for(;t<n&&i[t++]!==0;);if(s&2&&(t+=2),t>=n)throw new Error("Can't find compressed blocks");const r=e.getUint32(e.byteLength-4,!0);return cm(i.subarray(t,n),new Uint8Array(r))}c(v2,"unGzip");function mg(i){return{x:i.x,y:i.y,onCurve:i.onCurve,lastPointOfContour:i.lastPointOfContour}}c(mg,"copyPoint");function G2(i){return{glyphIndex:i.glyphIndex,xScale:i.xScale,scale01:i.scale01,scale10:i.scale10,yScale:i.yScale,dx:i.dx,dy:i.dy}}c(G2,"copyComponent");function un(i){Ll.call(this,i,"gsub")}c(un,"Substitution");function ph(i,e,t){const n=i.subtables;for(let s=0;s<n.length;s++){const r=n[s];if(r.substFormat===e)return r}if(t)return n.push(t),t}c(ph,"getSubstFormat");un.prototype=Ll.prototype;un.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}};un.prototype.getSingle=function(i,e,t){const n=[],s=this.getLookupTables(e,t,i,1);for(let r=0;r<s.length;r++){const o=s[r].subtables;for(let a=0;a<o.length;a++){const l=o[a],A=this.expandCoverage(l.coverage);let u;if(l.substFormat===1){const h=l.deltaGlyphId;for(u=0;u<A.length;u++){const d=A[u];n.push({sub:d,by:d+h})}}else{const h=l.substitute;for(u=0;u<A.length;u++)n.push({sub:A[u],by:h[u]})}}}return n};un.prototype.getMultiple=function(i,e,t){const n=[],s=this.getLookupTables(e,t,i,2);for(let r=0;r<s.length;r++){const o=s[r].subtables;for(let a=0;a<o.length;a++){const l=o[a],A=this.expandCoverage(l.coverage);let u;for(u=0;u<A.length;u++){const h=A[u],d=l.sequences[u];n.push({sub:h,by:d})}}}return n};un.prototype.getAlternates=function(i,e,t){const n=[],s=this.getLookupTables(e,t,i,3);for(let r=0;r<s.length;r++){const o=s[r].subtables;for(let a=0;a<o.length;a++){const l=o[a],A=this.expandCoverage(l.coverage),u=l.alternateSets;for(let h=0;h<A.length;h++)n.push({sub:A[h],by:u[h]})}}return n};un.prototype.getLigatures=function(i,e,t){const n=[],s=this.getLookupTables(e,t,i,4);for(let r=0;r<s.length;r++){const o=s[r].subtables;for(let a=0;a<o.length;a++){const l=o[a],A=this.expandCoverage(l.coverage),u=l.ligatureSets;for(let h=0;h<A.length;h++){const d=A[h],g=u[h];for(let p=0;p<g.length;p++){const f=g[p];n.push({sub:[d].concat(f.components),by:f.ligGlyph})}}}}return n};un.prototype.addSingle=function(i,e,t,n){const s=this.getLookupTables(t,n,i,1,!0)[0],r=ph(s,2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});ge.assert(r.coverage.format===1,"Single: unable to modify coverage table format "+r.coverage.format);const o=e.sub;let a=this.binSearch(r.coverage.glyphs,o);a<0&&(a=-1-a,r.coverage.glyphs.splice(a,0,o),r.substitute.splice(a,0,0)),r.substitute[a]=e.by};un.prototype.addMultiple=function(i,e,t,n){ge.assert(e.by instanceof Array&&e.by.length>1,'Multiple: "by" must be an array of two or more ids');const s=this.getLookupTables(t,n,i,2,!0)[0],r=ph(s,1,{substFormat:1,coverage:{format:1,glyphs:[]},sequences:[]});ge.assert(r.coverage.format===1,"Multiple: unable to modify coverage table format "+r.coverage.format);const o=e.sub;let a=this.binSearch(r.coverage.glyphs,o);a<0&&(a=-1-a,r.coverage.glyphs.splice(a,0,o),r.sequences.splice(a,0,0)),r.sequences[a]=e.by};un.prototype.addAlternate=function(i,e,t,n){const s=this.getLookupTables(t,n,i,3,!0)[0],r=ph(s,1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});ge.assert(r.coverage.format===1,"Alternate: unable to modify coverage table format "+r.coverage.format);const o=e.sub;let a=this.binSearch(r.coverage.glyphs,o);a<0&&(a=-1-a,r.coverage.glyphs.splice(a,0,o),r.alternateSets.splice(a,0,0)),r.alternateSets[a]=e.by};un.prototype.addLigature=function(i,e,t,n){const s=this.getLookupTables(t,n,i,4,!0)[0];let r=s.subtables[0];r||(r={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},s.subtables[0]=r),ge.assert(r.coverage.format===1,"Ligature: unable to modify coverage table format "+r.coverage.format);const o=e.sub[0],a=e.sub.slice(1),l={ligGlyph:e.by,components:a};let A=this.binSearch(r.coverage.glyphs,o);if(A>=0){const u=r.ligatureSets[A];for(let h=0;h<u.length;h++)if(y2(u[h].components,a))return;u.push(l)}else A=-1-A,r.coverage.glyphs.splice(A,0,o),r.ligatureSets.splice(A,0,[l])};un.prototype.getFeature=function(i,e,t){if(/ss\d\d/.test(i))return this.getSingle(i,e,t);switch(i){case"aalt":case"salt":return this.getSingle(i,e,t).concat(this.getAlternates(i,e,t));case"dlig":case"liga":case"rlig":return this.getLigatures(i,e,t);case"ccmp":return this.getMultiple(i,e,t).concat(this.getLigatures(i,e,t));case"stch":return this.getMultiple(i,e,t)}};un.prototype.add=function(i,e,t,n){if(/ss\d\d/.test(i))return this.addSingle(i,e,t,n);switch(i){case"aalt":case"salt":return typeof e.by=="number"?this.addSingle(i,e,t,n):this.addAlternate(i,e,t,n);case"dlig":case"liga":case"rlig":return this.addLigature(i,e,t,n);case"ccmp":return e.by instanceof Array?this.addMultiple(i,e,t,n):this.addLigature(i,e,t,n)}};var R2=un,jm=class{static{c(this,"PaletteManager")}constructor(i){this.defaultValue=255,this.font=i}cpal(){return this.font.tables&&this.font.tables.cpal?this.font.tables.cpal:!1}getAll(i){const e=[],t=this.cpal();if(!t)return e;for(let n=0;n<t.colorRecordIndices.length;n++){const s=t.colorRecordIndices[n],r=[];for(let o=s;o<s+t.numPaletteEntries;o++)r.push(Ar(t.colorRecords[o],i||"hexa"));e.push(r)}return e}toCPALcolor(i){return Array.isArray(i)?i.map(e=>sl(e,"raw")):sl(i,"raw")}fillPalette(i,e=[],t=this.cpal().numPaletteEntries){return i=Number.isInteger(i)?this.get(i,"raw"):i,Object.assign(Array(t).fill(this.defaultValue),this.toCPALcolor(i).concat(this.toCPALcolor(e)))}extend(i){if(this.ensureCPAL(Array(i).fill(this.defaultValue)))return;const e=this.cpal(),t=e.numPaletteEntries+i,n=this.getAll().map(s=>this.fillPalette(s,[],t));e.numPaletteEntries=t,e.colorRecords=this.toCPALcolor(n.flat()),this.updateIndices()}get(i,e="hexa"){return this.getAll(e)[i]||null}getColor(i,e=0,t="hexa"){return Ah(this.font,i,e,t)}setColor(i,e,t=0){i=parseInt(i),t=parseInt(t);let n=this.getAll("raw"),s=n[t];if(!s)throw Error(`paletteIndex ${t} out of range`);const r=this.cpal(),o=r.numPaletteEntries;Array.isArray(e)||(e=[e]),e.length+i>o&&(this.extend(e.length+i-o),n=this.getAll("raw"),s=n[t]);for(let a=0;a<e.length;a++)s[a+i]=this.toCPALcolor(e[a]);r.colorRecords=n.flat(),this.updateIndices()}add(i){if(this.ensureCPAL(i))return;const e=this.cpal(),t=e.numPaletteEntries;i&&i.length?(i=this.toCPALcolor(i),i.length>t?this.extend(i.length-t):i.length<t&&(i=this.fillPalette(i)),e.colorRecordIndices.push(e.colorRecords.length),e.colorRecords.push(...i)):(e.colorRecordIndices.push(e.colorRecords.length),e.colorRecords.push(...Array(t).fill(this.defaultValue)))}delete(i){const e=this.getAll("raw");delete e[i];const t=this.cpal();t.colorRecordIndices.pop(),t.colorRecords=e.flat()}deleteColor(i,e){if(i===e)throw Error("replacementIndex cannot be the same as colorIndex");const t=this.cpal(),n=this.getAll("raw"),s=[];if(e>t.numPaletteEntries-1)throw Error(`Replacement index out of range: numPaletteEntries after deletion: ${t.numPaletteEntries-1}, replacementIndex: ${e})`);for(let a=0;a<n.length;a++){const A=n[a].filter((u,h)=>h!==i);s.push(A)}const r=this.font.tables.colr;if(r){const a=r.layerRecords;for(let l=0;l<a.length;l++){const A=a[l].paletteIndex;if(A>i)a[l].paletteIndex-=1;else if(A===i){let u=0;for(let h=0;h<n.length;h++)if(e>i&&e<=i+n[h].length){u++;break}a[l].paletteIndex=e-u}}this.font.tables.colr={...r,layerRecords:a}}const o=s.flat();for(let a=0;a<n.length;a++)t.colorRecordIndices[a]-=a;t.numPaletteEntries=Math.max(0,t.numPaletteEntries-1),t.colorRecords=this.toCPALcolor(o)}ensureCPAL(i){return this.cpal()?!1:(!i||!i.length?i=[this.defaultValue]:i=this.toCPALcolor(i),this.font.tables.cpal={version:0,numPaletteEntries:i.length,colorRecords:i,colorRecordIndices:[0]},!0)}updateIndices(){const i=this.cpal(),e=Math.ceil(i.colorRecords.length/i.numPaletteEntries);i.colorRecordIndices=[];for(let t=0;t<e;t++)i.colorRecordIndices.push(t*i.numPaletteEntries)}},S2=class{static{c(this,"LayerManager")}constructor(i){this.font=i}ensureCOLR(){return this.font.tables.colr||(this.font.tables.colr={version:0,baseGlyphRecords:[],layerRecords:[]}),this.font}get(i){const e=this.font,t=[],n=e.tables.colr,s=e.tables.cpal;if(!n||!s)return t;const r=b2(n.baseGlyphRecords,"glyphID",i);if(!r)return t;const o=r.firstLayerIndex,a=r.numLayers;for(let l=0;l<a;l++){const A=n.layerRecords[o+l];t.push({glyph:e.glyphs.get(A.glyphID),paletteIndex:A.paletteIndex})}return t}add(i,e,t){const n=this.get(i);e=Array.isArray(e)?e:[e],t===void 0||t===1/0||t>n.length?t=n.length:t<0&&(t=n.length+1+t%(n.length+1),t>=n.length+1&&(t-=n.length+1));const s=[];for(let r=0;r<t;r++){const o=Number.isInteger(n[r].glyph)?n[r].glyph:n[r].glyph.index;s.push({glyphID:o,paletteIndex:n[r].paletteIndex})}for(const r of e){const o=Number.isInteger(r.glyph)?r.glyph:r.glyph.index;s.push({glyphID:o,paletteIndex:r.paletteIndex})}for(let r=t;r<n.length;r++){const o=Number.isInteger(n[r].glyph)?n[r].glyph:n[r].glyph.index;s.push({glyphID:o,paletteIndex:n[r].paletteIndex})}this.updateColrTable(i,s)}setPaletteIndex(i,e,t){let n=this.get(i);n[e]?(n=n.map((s,r)=>({glyphID:s.glyph.index,paletteIndex:r===e?t:s.paletteIndex})),this.updateColrTable(i,n)):console.error("Invalid layer index")}remove(i,e,t=e){let n=this.get(i);n=n.map(s=>({glyphID:s.glyph.index,paletteIndex:s.paletteIndex})),n.splice(e,t-e+1),this.updateColrTable(i,n)}updateColrTable(i,e){this.ensureCOLR();const n=this.font.tables.colr;let s=E2(n.baseGlyphRecords,"glyphID",i);if(s===-1){const u={glyphID:i,firstLayerIndex:n.layerRecords.length,numLayers:0};s=B2(n.baseGlyphRecords,"glyphID",u)}const o=n.baseGlyphRecords[s],a=o.numLayers,l=e.length,A=l-a;if(A>0){const u=e.slice(a).map(h=>({glyphID:h.glyphID,paletteIndex:h.paletteIndex}));n.layerRecords.splice(o.firstLayerIndex+a,0,...u)}else A<0&&n.layerRecords.splice(o.firstLayerIndex+l,-A);for(let u=0;u<Math.min(a,l);u++)n.layerRecords[o.firstLayerIndex+u]={glyphID:e[u].glyphID,paletteIndex:e[u].paletteIndex};if(o.numLayers=l,A!==0)for(let u=0;u<n.baseGlyphRecords.length;u++){const h=n.baseGlyphRecords[u];u===s||h.firstLayerIndex<o.firstLayerIndex||(n.baseGlyphRecords[u].firstLayerIndex+=A)}}},N2=class{static{c(this,"SVGImageManager")}constructor(i){this.font=i,this.cache=new WeakMap}get(i){const e=this.getOrCreateSvgImageCacheEntry(i);return e&&e.image}getAsync(i){const e=this.getOrCreateSvgImageCacheEntry(i);return e&&e.promise}getOrCreateSvgImageCacheEntry(i){const e=this.font.tables.svg;if(e===void 0)return;const t=e.get(i);if(t===void 0)return;let n=this.cache.get(t);n===void 0&&(n=Q2(t),this.cache.set(t,n));let s=n.images.get(i);return s===void 0&&(s=w2(this.font,n.template,i),s.promise.then(r=>{if(s.image=r,typeof this.font.onGlyphUpdated=="function")try{this.font.onGlyphUpdated(i)}catch(o){console.error("font.onGlyphUpdated",i,o)}}),n.images.set(i,s)),s}};function Q2(i){return{template:Z2(i).then(Y2),images:new Map}}c(Q2,"createSvgDocCacheEntry");function w2(i,e,t){return{promise:e.then(n=>{let s;typeof n=="string"?s=n:(n[4]=t,s=n.join(""));const r=W2(s,i.unitsPerEm);return r.image.decode().then(()=>r)}),image:void 0}}c(w2,"createSvgImageCacheEntry");var Z2=typeof DecompressionStream=="function"?_2:k2;function k2(i){try{return Promise.resolve(new TextDecoder().decode(Km(i)?v2(i):i))}catch(e){return Promise.reject(e)}}c(k2,"decodeSvgDocumentWithTinyInflate");function _2(i){if(Km(i))return new Response(new Response(i).body.pipeThrough(new DecompressionStream("gzip"))).text();try{return Promise.resolve(new TextDecoder().decode(i))}catch(e){return Promise.reject(e)}}c(_2,"decodeSvgDocumentWithDecompressionStream");function Y2(i){const e=i.indexOf("<svg"),t=i.indexOf(">",e+4)+1;if(/ id=['"]glyph\d+['"]/.test(i.substring(e,t)))return i;const n=i.lastIndexOf("</svg>");return[i.substring(0,t),"<defs>",i.substring(t,n),'</defs><use href="#glyph',"",'"/>',i.substring(n)]}c(Y2,"makeSvgTemplate");function W2(i,e){const n=new DOMParser().parseFromString(i,"image/svg+xml").documentElement,s=n.viewBox.baseVal,r=n.width.baseVal,o=n.height.baseVal;let a=1,l=1;s.width>0&&s.height>0&&(r.unitType===1?(a=r.valueInSpecifiedUnits/s.width,l=o.unitType===1?o.valueInSpecifiedUnits/s.height:a):o.unitType===1?(l=o.valueInSpecifiedUnits/s.height,a=l):e&&(a=e/s.width,l=e/s.height));const A=document.createElement("div");A.style.position="fixed",A.style.visibility="hidden",A.appendChild(n),document.body.appendChild(A);const u=n.getBBox();document.body.removeChild(A);const h=(u.x-s.x)*a,d=(s.y-u.y)*l,g=u.width*a,p=u.height*l;n.setAttribute("viewBox",[u.x,u.y,u.width,u.height].join(" ")),a!==1&&n.setAttribute("width",g),l!==1&&n.setAttribute("height",p);const f=new Image(g,p);return f.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(n.outerHTML),{leftSideBearing:h,baseline:d,image:f}}c(W2,"makeSvgImage");function Cg(i,e,t,n,s){let r;return(e&n)>0?(r=i.parseByte(),e&s||(r=-r),r=t+r):(e&s)>0?r=t:r=t+i.parseShort(),r}c(Cg,"parseGlyphCoordinate");function qm(i,e,t){const n=new te.Parser(e,t);i._numberOfContours=n.parseShort(),i._xMin=n.parseShort(),i._yMin=n.parseShort(),i._xMax=n.parseShort(),i._yMax=n.parseShort();let s,r;if(i._numberOfContours>0){const o=i.endPointIndices=[];for(let l=0;l<i._numberOfContours;l+=1)o.push(n.parseUShort());i.instructionLength=n.parseUShort(),i.instructions=[];for(let l=0;l<i.instructionLength;l+=1)i.instructions.push(n.parseByte());const a=o[o.length-1]+1;s=[];for(let l=0;l<a;l+=1)if(r=n.parseByte(),s.push(r),(r&8)>0){const A=n.parseByte();for(let u=0;u<A;u+=1)s.push(r),l+=1}if(ge.argument(s.length===a,"Bad flags."),o.length>0){const l=[];let A;if(a>0){for(let d=0;d<a;d+=1)r=s[d],A={},A.onCurve=!!(r&1),A.lastPointOfContour=o.indexOf(d)>=0,l.push(A);let u=0;for(let d=0;d<a;d+=1)r=s[d],A=l[d],A.x=Cg(n,r,u,2,16),u=A.x;let h=0;for(let d=0;d<a;d+=1)r=s[d],A=l[d],A.y=Cg(n,r,h,4,32),h=A.y}i.points=l}else i.points=[]}else if(i.numberOfContours===0)i.points=[];else{i.isComposite=!0,i.points=[],i.components=[];let o=!0;for(;o;){s=n.parseUShort();const a={glyphIndex:n.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(s&1)>0?(s&2)>0?(a.dx=n.parseShort(),a.dy=n.parseShort()):a.matchedPoints=[n.parseUShort(),n.parseUShort()]:(s&2)>0?(a.dx=n.parseChar(),a.dy=n.parseChar()):a.matchedPoints=[n.parseByte(),n.parseByte()],(s&8)>0?a.xScale=a.yScale=n.parseF2Dot14():(s&64)>0?(a.xScale=n.parseF2Dot14(),a.yScale=n.parseF2Dot14()):(s&128)>0&&(a.xScale=n.parseF2Dot14(),a.scale01=n.parseF2Dot14(),a.scale10=n.parseF2Dot14(),a.yScale=n.parseF2Dot14()),i.components.push(a),o=!!(s&32)}if(s&256){i.instructionLength=n.parseUShort(),i.instructions=[];for(let a=0;a<i.instructionLength;a+=1)i.instructions.push(n.parseByte())}}}c(qm,"parseGlyph");function xa(i,e){const t=[];for(let n=0;n<i.length;n+=1){const s=i[n],r={x:e.xScale*s.x+e.scale10*s.y+e.dx,y:e.scale01*s.x+e.yScale*s.y+e.dy,onCurve:s.onCurve,lastPointOfContour:s.lastPointOfContour};t.push(r)}return t}c(xa,"transformPoints");function D2(i){const e=[];let t=[];for(let n=0;n<i.length;n+=1){const s=i[n];t.push(s),s.lastPointOfContour&&(e.push(t),t=[])}return ge.argument(t.length===0,"There are still points left in the current contour."),e}c(D2,"getContours");function fh(i){const e=new or;if(!i)return e;const t=D2(i);for(let n=0;n<t.length;++n){const s=t[n];let r=s[s.length-1],o=s[0];if(r.onCurve)e.moveTo(r.x,r.y);else if(o.onCurve)e.moveTo(o.x,o.y);else{const a={x:(r.x+o.x)*.5,y:(r.y+o.y)*.5};e.moveTo(a.x,a.y)}for(let a=0;a<s.length;++a)if(r=o,o=s[(a+1)%s.length],r.onCurve)e.lineTo(r.x,r.y);else{let l=o;o.onCurve||(l={x:(r.x+o.x)*.5,y:(r.y+o.y)*.5}),e.quadraticCurveTo(r.x,r.y,l.x,l.y)}e.closePath()}return e}c(fh,"getPath");function $m(i,e){if(e.isComposite)for(let t=0;t<e.components.length;t+=1){const n=e.components[t],s=i.get(n.glyphIndex);if(s.getPath(),s.points){let r;if(n.matchedPoints===void 0)r=xa(s.points,n);else{if(n.matchedPoints[0]>e.points.length-1||n.matchedPoints[1]>s.points.length-1)throw Error("Matched points out of range in "+e.name);const o=e.points[n.matchedPoints[0]];let a=s.points[n.matchedPoints[1]];const l={xScale:n.xScale,scale01:n.scale01,scale10:n.scale10,yScale:n.yScale,dx:0,dy:0};a=xa([a],l)[0],l.dx=o.x-a.x,l.dy=o.y-a.y,r=xa(s.points,l)}e.points=e.points.concat(r)}}return fh(e.points)}c($m,"buildPath");function T2(i,e,t,n){const s=new On.GlyphSet(n);for(let r=0;r<t.length-1;r+=1){const o=t[r],a=t[r+1];o!==a?s.push(r,On.ttfGlyphLoader(n,r,qm,i,e+o,$m)):s.push(r,On.glyphLoader(n,r))}return s}c(T2,"parseGlyfTableAll");function F2(i,e,t,n){const s=new On.GlyphSet(n);return n._push=function(r){const o=t[r],a=t[r+1];o!==a?s.push(r,On.ttfGlyphLoader(n,r,qm,i,e+o,$m)):s.push(r,On.glyphLoader(n,r))},s}c(F2,"parseGlyfTableOnLowMemory");function x2(i,e,t,n,s){return s.lowMemory?F2(i,e,t,n):T2(i,e,t,n)}c(x2,"parseGlyfTable");var eC={getPath:fh,parse:x2},L2=class{static{c(this,"VariationProcessor")}constructor(i){this.font=i}normalizeCoordTags(i){for(const e in i)if(e.length<4){const t=e.padEnd(4," ");i[t]===void 0&&(i[t]=i[e]),delete i[e]}}getNormalizedCoords(i){i||(i=this.font.variation.get());let e=[];this.normalizeCoordTags(i);for(let t=0;t<this.fvar().axes.length;t++){const n=this.fvar().axes[t];let s=i[n.tag];s===void 0&&(s=n.defaultValue),s<n.defaultValue?e.push((s-n.defaultValue+Number.EPSILON)/(n.defaultValue-n.minValue+Number.EPSILON)):e.push((s-n.defaultValue+Number.EPSILON)/(n.maxValue-n.defaultValue+Number.EPSILON))}if(this.avar())for(let t=0;t<this.avar().axisSegmentMaps.length;t++){let n=this.avar().axisSegmentMaps[t];for(let s=0;s<n.axisValueMaps.length;s++){let r=n.axisValueMaps[s];if(s>=1&&e[t]<r.fromCoordinate){let o=n.axisValueMaps[s-1];e[t]=((e[t]-o.fromCoordinate)*(r.toCoordinate-o.toCoordinate)+Number.EPSILON)/(r.fromCoordinate-o.fromCoordinate+Number.EPSILON)+o.toCoordinate;break}}}return e}interpolatePoints(i,e,t){if(i.length===0)return;let n=0;for(;n<i.length;){let s=n,r=n,o=i[r];for(;!o.lastPointOfContour;)o=i[++r];for(;n<=r&&!t[n];)n++;if(n>r)continue;let a=n,l=n;for(n++;n<=r;)t[n]&&(this.deltaInterpolate(l+1,n-1,l,n,e,i),l=n),n++;l===a?this.deltaShift(s,r,l,e,i):(this.deltaInterpolate(l+1,r,l,a,e,i),a>0&&this.deltaInterpolate(s,a-1,l,a,e,i)),n=r+1}}deltaInterpolate(i,e,t,n,s,r){if(i>e)return;let o=["x","y"];for(let l=0;l<o.length;l++){let A=o[l];if(s[t][A]>s[n][A]){var a=t;t=n,n=a}let u=s[t][A],h=s[n][A],d=r[t][A],g=r[n][A];if(u!==h||d===g){let p=u===h?0:(g-d)/(h-u);for(let f=i;f<=e;f++){let m=s[f][A];m<=u?m+=d-u:m>=h?m+=g-h:m=d+(m-u)*p,r[f][A]=m}}}}deltaShift(i,e,t,n,s){let r=s[t].x-n[t].x,o=s[t].y-n[t].y;if(!(r===0&&o===0))for(let a=i;a<=e;a++)a!==t&&(s[a].x+=r,s[a].y+=o)}transformComponents(i,e,t,n,s,r){let o=0;for(let a=0;a<i.components.length;a++){const l=i.components[a],A=this.font.glyphs.get(l.glyphIndex),u=G2(l),h=n.indexOf(a);h>-1&&(u.dx+=Math.round(s.deltas[h]*r),u.dy+=Math.round(s.deltasY[h]*r));const d=xa(this.getTransform(A,t).points,u);e.splice(o,d.length,...d),o+=A.points.length}}applyTupleVariationStore(i,e,t,n="gvar",s={}){t||(t=this.font.variation.get());const r=this.getNormalizedCoords(t),{headers:o,sharedPoints:a}=i,l=this.fvar().axes.length;let A;n==="gvar"?A=e.map(mg):n==="cvar"&&(A=[...e]);for(let u=0;u<o.length;u++){const h=o[u];let d=1;for(let p=0;p<l;p++){let f=[0];switch(n){case"gvar":f=h.peakTuple?h.peakTuple:this.gvar().sharedTuples[h.sharedTupleRecordsIndex];break;case"cvar":f=h.peakTuple;break}if(f[p]!==0){if(r[p]===0){d=0;break}if(h.intermediateStartTuple)if(r[p]<h.intermediateStartTuple[p]||r[p]>h.intermediateEndTuple[p]){d=0;break}else r[p]<f[p]?d=d*(r[p]-h.intermediateStartTuple[p]+Number.EPSILON)/(f[p]-h.intermediateStartTuple[p]+Number.EPSILON):d=d*(h.intermediateEndTuple[p]-r[p]+Number.EPSILON)/(h.intermediateEndTuple[p]-f[p]+Number.EPSILON);else{if(r[p]<Math.min(0,f[p])||r[p]>Math.max(0,f[p])){d=0;break}d=(d*r[p]+Number.EPSILON)/(f[p]+Number.EPSILON)}}}if(d===0)continue;const g=h.privatePoints.length?h.privatePoints:a;if(n==="gvar"&&s.glyph&&s.glyph.isComposite)this.transformComponents(s.glyph,A,t,g,h,d);else if(g.length===0)for(let p=0;p<A.length;p++){const f=A[p];n==="gvar"?A[p]={x:Math.round(f.x+h.deltas[p]*d),y:Math.round(f.y+h.deltasY[p]*d),onCurve:f.onCurve,lastPointOfContour:f.lastPointOfContour}:n==="cvar"&&(A[p]=Math.round(f+h.deltas[p]*d))}else{let p;n==="gvar"?p=A.map(mg):n==="cvar"&&(p=A);const f=Array(e.length).fill(!1);for(let m=0;m<g.length;m++){let y=g[m];if(y<e.length){let v=p[y];n==="gvar"?(f[y]=!0,v.x+=h.deltas[m]*d,v.y+=h.deltasY[m]*d):n==="cvar"&&(A[y]=Math.round(v+h.deltas[m]*d))}}if(n==="gvar"){this.interpolatePoints(p,A,f);for(let m=0;m<e.length;m++){let y=p[m].x-A[m].x,v=p[m].y-A[m].y;A[m].x=Math.round(A[m].x+y),A[m].y=Math.round(A[m].y+v)}}}}return A}getTransform(i,e){Number.isInteger(i)&&(i=this.font.glyphs.get(i));const t=i.getBlendPath,n=!!(i.points&&i.points.length);let s=i;if(t||n){if(e||(e=this.font.variation.get()),n){const r=this.gvar()&&this.gvar().glyphVariations[i.index];if(r){const o=i.points;let a=this.applyTupleVariationStore(r,o,e,"gvar",{glyph:i});s=new ro(Object.assign({},i,{points:a,path:fh(a)}))}}else if(t){const r=i.getBlendPath(e);s=new ro(Object.assign({},i,{path:r}))}}return this.font.tables.hvar&&(i._advanceWidth=typeof i._advanceWidth<"u"?i._advanceWidth:i.advanceWidth,i.advanceWidth=s.advanceWidth=Math.round(i._advanceWidth+this.getVariableAdjustment(s.index,"hvar","advanceWidth",e)),i._leftSideBearing=typeof i._leftSideBearing<"u"?i._leftSideBearing:i.leftSideBearing,i.leftSideBearing=s.leftSideBearing=Math.round(i._leftSideBearing+this.getVariableAdjustment(s.index,"hvar","lsb",e))),s}getCvarTransform(i){const e=this.font.tables.cvt,t=this.cvar();return!e||!e.length||!t||!t.headers.length?e:this.applyTupleVariationStore(t,e,i,"cvar")}getVariableAdjustment(i,e,t,n){n=n||this.font.variation.get();let s,r;const o=this.font.tables[e];if(!o)throw Error(`trying to get variation adjustment from non-existent table "${o}"`);if(!o.itemVariationStore)throw Error(`trying to get variation adjustment from table "${o}" which does not have an itemVariationStore`);const a=o[t]&&o[t].map.length;if(a){let l=i;l>=a&&(l=a-1),{outerIndex:s,innerIndex:r}=o[t].map[l]}else s=0,r=i;return this.getDelta(o.itemVariationStore,s,r,n)}getDelta(i,e,t,n){if(e>=i.itemVariationSubtables.length)return 0;let s=i.itemVariationSubtables[e];if(t>=s.deltaSets.length)return 0;let r=s.deltaSets[t],o=this.getBlendVector(i,e,n),a=0;for(let l=0;l<s.regionIndexes.length;l++)a+=r[l]*o[l];return a}getBlendVector(i,e,t){t||(t=this.font.variation.get());let n=i.itemVariationSubtables[e];const s=this.getNormalizedCoords(t);let r=[];for(let o=0;o<n.regionIndexes.length;o++){let a=1,l=n.regionIndexes[o],A=i.variationRegions[l].regionAxes;for(let u=0;u<A.length;u++){let h=A[u],d;h.startCoord>h.peakCoord||h.peakCoord>h.endCoord||h.startCoord<0&&h.endCoord>0&&h.peakCoord!==0||h.peakCoord===0?d=1:s[u]<h.startCoord||s[u]>h.endCoord?d=0:s[u]===h.peakCoord?d=1:s[u]<h.peakCoord?d=(s[u]-h.startCoord+Number.EPSILON)/(h.peakCoord-h.startCoord+Number.EPSILON):d=(h.endCoord-s[u]+Number.EPSILON)/(h.endCoord-h.peakCoord+Number.EPSILON),a*=d}r[o]=a}return r}avar(){return this.font.tables.avar}cvar(){return this.font.tables.cvar}fvar(){return this.font.tables.fvar}gvar(){return this.font.tables.gvar}hvar(){return this.font.tables.hvar}},M2=class{static{c(this,"VariationManager")}constructor(i){this.font=i,this.process=new L2(this.font),this.activateDefaultVariation(),this.getTransform=this.process.getTransform.bind(this.process)}activateDefaultVariation(){const i=this.getDefaultInstanceIndex();i>-1?this.set(i):this.set(this.getDefaultCoordinates())}getDefaultCoordinates(){return this.fvar().axes.reduce((i,e)=>(i[e.tag]=e.defaultValue,i),{})}getDefaultInstanceIndex(){const i=this.getDefaultCoordinates();let e=this.getInstanceIndex(i);return e<0&&(e=this.fvar().instances.findIndex(t=>t.name&&t.name.en==="Regular")),e}getInstanceIndex(i){return this.fvar().instances.findIndex(e=>Object.keys(i).every(t=>e.coordinates[t]===i[t]))}getInstance(i){return this.fvar().instances&&this.fvar().instances[i]}set(i){let e;if(Number.isInteger(i)){const t=this.getInstance(i);if(!t)throw Error(`Invalid instance index ${i}`);e={...t.coordinates}}else e=i,this.process.normalizeCoordTags(e);e=Object.assign({},this.font.defaultRenderOptions.variation,e),this.font.defaultRenderOptions=Object.assign({},this.font.defaultRenderOptions,{variation:e})}get(){return Object.assign({},this.font.defaultRenderOptions.variation)}avar(){return this.font.tables.avar}cvar(){return this.font.tables.cvar}fvar(){return this.font.tables.fvar}gvar(){return this.font.tables.gvar}hvar(){return this.font.tables.hvar}},tC,fs,nC,lu;function iC(i){this.font=i,this.getCommands=function(e){return eC.getPath(e).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}c(iC,"Hinting");function V2(i){return i}c(V2,"roundOff");function sC(i){return Math.sign(i)*Math.round(Math.abs(i))}c(sC,"roundToGrid");function O2(i){return Math.sign(i)*Math.round(Math.abs(i*2))/2}c(O2,"roundToDoubleGrid");function P2(i){return Math.sign(i)*(Math.round(Math.abs(i)+.5)-.5)}c(P2,"roundToHalfGrid");function H2(i){return Math.sign(i)*Math.ceil(Math.abs(i))}c(H2,"roundUpToGrid");function X2(i){return Math.sign(i)*Math.floor(Math.abs(i))}c(X2,"roundDownToGrid");var rC=c(function(i){const e=this.srPeriod;let t=this.srPhase;const n=this.srThreshold;let s=1;return i<0&&(i=-i,s=-1),i+=n-t,i=Math.trunc(i/e)*e,i+=t,i<0?t*s:i*s},"roundSuper"),Mn={x:1,y:0,axis:"x",distance:c(function(i,e,t,n){return(t?i.xo:i.x)-(n?e.xo:e.x)},"distance"),interpolate:c(function(i,e,t,n){let s,r,o,a,l,A,u;if(!n||n===this){if(s=i.xo-e.xo,r=i.xo-t.xo,l=e.x-e.xo,A=t.x-t.xo,o=Math.abs(s),a=Math.abs(r),u=o+a,u===0){i.x=i.xo+(l+A)/2;return}i.x=i.xo+(l*a+A*o)/u;return}if(s=n.distance(i,e,!0,!0),r=n.distance(i,t,!0,!0),l=n.distance(e,e,!1,!0),A=n.distance(t,t,!1,!0),o=Math.abs(s),a=Math.abs(r),u=o+a,u===0){Mn.setRelative(i,i,(l+A)/2,n,!0);return}Mn.setRelative(i,i,(l*a+A*o)/u,n,!0)},"interpolate"),normalSlope:Number.NEGATIVE_INFINITY,setRelative:c(function(i,e,t,n,s){if(!n||n===this){i.x=(s?e.xo:e.x)+t;return}const r=s?e.xo:e.x,o=s?e.yo:e.y,a=r+t*n.x,l=o+t*n.y;i.x=a+(i.y-l)/n.normalSlope},"setRelative"),slope:0,touch:c(function(i){i.xTouched=!0},"touch"),touched:c(function(i){return i.xTouched},"touched"),untouch:c(function(i){i.xTouched=!1},"untouch")},si={x:0,y:1,axis:"y",distance:c(function(i,e,t,n){return(t?i.yo:i.y)-(n?e.yo:e.y)},"distance"),interpolate:c(function(i,e,t,n){let s,r,o,a,l,A,u;if(!n||n===this){if(s=i.yo-e.yo,r=i.yo-t.yo,l=e.y-e.yo,A=t.y-t.yo,o=Math.abs(s),a=Math.abs(r),u=o+a,u===0){i.y=i.yo+(l+A)/2;return}i.y=i.yo+(l*a+A*o)/u;return}if(s=n.distance(i,e,!0,!0),r=n.distance(i,t,!0,!0),l=n.distance(e,e,!1,!0),A=n.distance(t,t,!1,!0),o=Math.abs(s),a=Math.abs(r),u=o+a,u===0){si.setRelative(i,i,(l+A)/2,n,!0);return}si.setRelative(i,i,(l*a+A*o)/u,n,!0)},"interpolate"),normalSlope:0,setRelative:c(function(i,e,t,n,s){if(!n||n===this){i.y=(s?e.yo:e.y)+t;return}const r=s?e.xo:e.x,o=s?e.yo:e.y,a=r+t*n.x,l=o+t*n.y;i.y=l+n.normalSlope*(i.x-a)},"setRelative"),slope:Number.POSITIVE_INFINITY,touch:c(function(i){i.yTouched=!0},"touch"),touched:c(function(i){return i.yTouched},"touched"),untouch:c(function(i){i.yTouched=!1},"untouch")};Object.freeze(Mn);Object.freeze(si);function Zo(i,e){this.x=i,this.y=e,this.axis=void 0,this.slope=e/i,this.normalSlope=-i/e,Object.freeze(this)}c(Zo,"UnitVector");Zo.prototype.distance=function(i,e,t,n){return this.x*Mn.distance(i,e,t,n)+this.y*si.distance(i,e,t,n)};Zo.prototype.interpolate=function(i,e,t,n){let s,r,o,a,l,A,u;if(o=n.distance(i,e,!0,!0),a=n.distance(i,t,!0,!0),s=n.distance(e,e,!1,!0),r=n.distance(t,t,!1,!0),l=Math.abs(o),A=Math.abs(a),u=l+A,u===0){this.setRelative(i,i,(s+r)/2,n,!0);return}this.setRelative(i,i,(s*A+r*l)/u,n,!0)};Zo.prototype.setRelative=function(i,e,t,n,s){n=n||this;const r=s?e.xo:e.x,o=s?e.yo:e.y,a=r+t*n.x,l=o+t*n.y,A=n.normalSlope,u=this.slope,h=i.x,d=i.y;i.x=(u*h-A*a+l-d)/(u-A),i.y=u*(i.x-h)+d};Zo.prototype.touch=function(i){i.xTouched=!0,i.yTouched=!0};function ko(i,e){const t=Math.sqrt(i*i+e*e);return i/=t,e/=t,i===1&&e===0?Mn:i===0&&e===1?si:new Zo(i,e)}c(ko,"getUnitVector");function ai(i,e,t,n){this.x=this.xo=Math.round(i*64)/64,this.y=this.yo=Math.round(e*64)/64,this.lastPointOfContour=t,this.onCurve=n,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}c(ai,"HPoint");ai.prototype.nextTouched=function(i){let e=this.nextPointOnContour;for(;!i.touched(e)&&e!==this;)e=e.nextPointOnContour;return e};ai.prototype.prevTouched=function(i){let e=this.prevPointOnContour;for(;!i.touched(e)&&e!==this;)e=e.prevPointOnContour;return e};var oo=Object.freeze(new ai(0,0)),z2={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function bi(i,e){switch(this.env=i,this.stack=[],this.prog=e,i){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Mn,this.round=sC}}c(bi,"State");iC.prototype.exec=function(i,e){if(typeof e!="number")throw new Error("Point size is not a number!");if(this._errorState>2)return;const t=this.font;let n=this._prepState;if(!n||n.ppem!==e){let s=this._fpgmState;if(!s){bi.prototype=z2,s=this._fpgmState=new bi("fpgm",t.tables.fpgm),s.funcs=[],s.font=t;try{fs(s)}catch(o){console.log("Hinting error in FPGM:"+o),this._errorState=3;return}}bi.prototype=s,n=this._prepState=new bi("prep",t.tables.prep),n.ppem=e;const r=t.variation&&t.variation.process.getCvarTransform()||t.tables.cvt;if(r){const o=n.cvt=new Array(r.length),a=e/t.unitsPerEm;for(let l=0;l<r.length;l++)o[l]=r[l]*a}else n.cvt=[];try{fs(n)}catch(o){this._errorState<2&&console.log("Hinting error in PREP:"+o),this._errorState=2}}if(!(this._errorState>1))try{return nC(i,n)}catch(s){this._errorState<1&&(console.log("Hinting error:"+s),console.log("Note: further hinting errors are silenced")),this._errorState=1;return}};nC=c(function(i,e){const t=e.ppem/e.font.unitsPerEm,n=t;let s=i.components,r,o,a;if(bi.prototype=e,!s)a=new bi("glyf",i.instructions),lu(i,a,t,n),o=a.gZone;else{const l=e.font;o=[],r=[];for(let A=0;A<s.length;A++){const u=s[A],h=l.glyphs.get(u.glyphIndex);a=new bi("glyf",h.instructions),lu(h,a,t,n);const d=Math.round(u.dx*t),g=Math.round(u.dy*n),p=a.gZone,f=a.contours;for(let y=0;y<p.length;y++){const v=p[y];v.xTouched=v.yTouched=!1,v.xo=v.x=v.x+d,v.yo=v.y=v.y+g}const m=o.length;o.push.apply(o,p);for(let y=0;y<f.length;y++)r.push(f[y]+m)}i.instructions&&!a.inhibitGridFit&&(a=new bi("glyf",i.instructions),a.gZone=a.z0=a.z1=a.z2=o,a.contours=r,o.push(new ai(0,0),new ai(Math.round(i.advanceWidth*t),0)),fs(a),o.length-=2)}return o},"execGlyph");lu=c(function(i,e,t,n){const s=i.points||[],r=s.length,o=e.gZone=e.z0=e.z1=e.z2=[],a=e.contours=[];let l;for(let h=0;h<r;h++)l=s[h],o[h]=new ai(l.x*t,l.y*n,l.lastPointOfContour,l.onCurve);let A,u;for(let h=0;h<r;h++)l=o[h],A||(A=l,a.push(h)),l.lastPointOfContour?(l.nextPointOnContour=A,A.prevPointOnContour=l,A=void 0):(u=o[h+1],l.nextPointOnContour=u,u.prevPointOnContour=l);e.inhibitGridFit||(o.push(new ai(0,0),new ai(Math.round(i.advanceWidth*t),0)),fs(e),o.length-=2)},"execComponent");fs=c(function(i){let e=i.prog;if(!e)return;const t=e.length;let n;for(i.ip=0;i.ip<t;i.ip++){if(n=tC[e[i.ip]],!n)throw new Error("unknown instruction: 0x"+Number(e[i.ip]).toString(16));n(i)}},"exec");function Ml(i){const e=i.tZone=new Array(i.gZone.length);for(let t=0;t<e.length;t++)e[t]=new ai(0,0)}c(Ml,"initTZone");function oC(i,e){const t=i.prog;let n=i.ip,s=1,r;do if(r=t[++n],r===88)s++;else if(r===89)s--;else if(r===64)n+=t[n+1]+1;else if(r===65)n+=2*t[n+1]+1;else if(r>=176&&r<=183)n+=r-176+1;else if(r>=184&&r<=191)n+=(r-184+1)*2;else if(e&&s===1&&r===27)break;while(s>0);i.ip=n}c(oC,"skip");function Ig(i,e){e.fv=e.pv=e.dpv=i}c(Ig,"SVTCA");function yg(i,e){e.pv=e.dpv=i}c(yg,"SPVTCA");function bg(i,e){e.fv=i}c(bg,"SFVTCA");function Eg(i,e){const t=e.stack,n=t.pop(),s=t.pop(),r=e.z2[n],o=e.z1[s];let a,l;i?(a=r.y-o.y,l=o.x-r.x):(a=o.x-r.x,l=o.y-r.y),e.pv=e.dpv=ko(a,l)}c(Eg,"SPVTL");function Bg(i,e){const t=e.stack,n=t.pop(),s=t.pop(),r=e.z2[n],o=e.z1[s];let a,l;i?(a=r.y-o.y,l=o.x-r.x):(a=o.x-r.x,l=o.y-r.y),e.fv=ko(a,l)}c(Bg,"SFVTL");function J2(i){const e=i.stack,t=e.pop(),n=e.pop();i.pv=i.dpv=ko(n,t)}c(J2,"SPVFS");function U2(i){const e=i.stack,t=e.pop(),n=e.pop();i.fv=ko(n,t)}c(U2,"SFVFS");function K2(i){const e=i.stack,t=i.pv;e.push(t.x*16384),e.push(t.y*16384)}c(K2,"GPV");function j2(i){const e=i.stack,t=i.fv;e.push(t.x*16384),e.push(t.y*16384)}c(j2,"GFV");function q2(i){i.fv=i.pv}c(q2,"SFVTPV");function $2(i){const e=i.stack,t=e.pop(),n=e.pop(),s=e.pop(),r=e.pop(),o=e.pop(),a=i.z0,l=i.z1,A=a[t],u=a[n],h=l[s],d=l[r],g=i.z2[o],p=A.x,f=A.y,m=u.x,y=u.y,v=h.x,G=h.y,R=d.x,Q=d.y,S=(p-m)*(G-Q)-(f-y)*(v-R),M=p*y-f*m,V=v*Q-G*R;g.x=(M*(v-R)-V*(p-m))/S,g.y=(M*(G-Q)-V*(f-y))/S}c($2,"ISECT");function eG(i){i.rp0=i.stack.pop()}c(eG,"SRP0");function tG(i){i.rp1=i.stack.pop()}c(tG,"SRP1");function nG(i){i.rp2=i.stack.pop()}c(nG,"SRP2");function iG(i){const e=i.stack.pop();switch(i.zp0=e,e){case 0:i.tZone||Ml(i),i.z0=i.tZone;break;case 1:i.z0=i.gZone;break;default:throw new Error("Invalid zone pointer")}}c(iG,"SZP0");function sG(i){const e=i.stack.pop();switch(i.zp1=e,e){case 0:i.tZone||Ml(i),i.z1=i.tZone;break;case 1:i.z1=i.gZone;break;default:throw new Error("Invalid zone pointer")}}c(sG,"SZP1");function rG(i){const e=i.stack.pop();switch(i.zp2=e,e){case 0:i.tZone||Ml(i),i.z2=i.tZone;break;case 1:i.z2=i.gZone;break;default:throw new Error("Invalid zone pointer")}}c(rG,"SZP2");function oG(i){const e=i.stack.pop();switch(i.zp0=i.zp1=i.zp2=e,e){case 0:i.tZone||Ml(i),i.z0=i.z1=i.z2=i.tZone;break;case 1:i.z0=i.z1=i.z2=i.gZone;break;default:throw new Error("Invalid zone pointer")}}c(oG,"SZPS");function aG(i){i.loop=i.stack.pop()}c(aG,"SLOOP");function lG(i){i.round=sC}c(lG,"RTG");function cG(i){i.round=P2}c(cG,"RTHG");function AG(i){const e=i.stack.pop();i.minDis=e/64}c(AG,"SMD");function uG(i){oC(i,!1)}c(uG,"ELSE");function hG(i){const e=i.stack.pop();i.ip+=e-1}c(hG,"JMPR");function dG(i){const e=i.stack.pop();i.cvCutIn=e/64}c(dG,"SCVTCI");function gG(i){const e=i.stack;e.push(e[e.length-1])}c(gG,"DUP");function zc(i){i.stack.pop()}c(zc,"POP");function pG(i){i.stack.length=0}c(pG,"CLEAR");function fG(i){const e=i.stack,t=e.pop(),n=e.pop();e.push(t),e.push(n)}c(fG,"SWAP");function mG(i){const e=i.stack;e.push(e.length)}c(mG,"DEPTH");function CG(i){const e=i.stack,t=e.pop(),n=e.pop(),s=i.ip,r=i.prog;i.prog=i.funcs[t];for(let o=0;o<n;o++)fs(i);i.ip=s,i.prog=r}c(CG,"LOOPCALL");function IG(i){const e=i.stack.pop(),t=i.ip,n=i.prog;i.prog=i.funcs[e],fs(i),i.ip=t,i.prog=n}c(IG,"CALL");function yG(i){const e=i.stack,t=e.pop();e.push(e[e.length-t])}c(yG,"CINDEX");function bG(i){const e=i.stack,t=e.pop();e.push(e.splice(e.length-t,1)[0])}c(bG,"MINDEX");function EG(i){if(i.env!=="fpgm")throw new Error("FDEF not allowed here");const e=i.stack,t=i.prog;let n=i.ip;const s=e.pop(),r=n;for(;t[++n]!==45;);i.ip=n,i.funcs[s]=t.slice(r+1,n)}c(EG,"FDEF");function vg(i,e){const t=e.stack.pop(),n=e.z0[t],s=e.fv,r=e.pv;let o=r.distance(n,oo);i&&(o=e.round(o)),s.setRelative(n,oo,o,r),s.touch(n),e.rp0=e.rp1=t}c(vg,"MDAP");function Gg(i,e){const t=e.z2,n=t.length-2;let s,r,o;for(let a=0;a<n;a++)s=t[a],!i.touched(s)&&(r=s.prevTouched(i),r!==s&&(o=s.nextTouched(i),r===o&&i.setRelative(s,s,i.distance(r,r,!1,!0),i,!0),i.interpolate(s,r,o,i)))}c(Gg,"IUP");function Rg(i,e){const t=e.stack,n=i?e.rp1:e.rp2,s=(i?e.z0:e.z1)[n],r=e.fv,o=e.pv;let a=e.loop;const l=e.z2;for(;a--;){const A=t.pop(),u=l[A],h=o.distance(s,s,!1,!0);r.setRelative(u,u,h,o),r.touch(u)}e.loop=1}c(Rg,"SHP");function Sg(i,e){const t=e.stack,n=i?e.rp1:e.rp2,s=(i?e.z0:e.z1)[n],r=e.fv,o=e.pv,a=t.pop(),l=e.z2[e.contours[a]];let A=l;const u=o.distance(s,s,!1,!0);do A!==s&&r.setRelative(A,A,u,o),A=A.nextPointOnContour;while(A!==l)}c(Sg,"SHC");function Ng(i,e){const t=e.stack,n=i?e.rp1:e.rp2,s=(i?e.z0:e.z1)[n],r=e.fv,o=e.pv,a=t.pop();let l;switch(a){case 0:l=e.tZone;break;case 1:l=e.gZone;break;default:throw new Error("Invalid zone")}let A;const u=o.distance(s,s,!1,!0),h=l.length-2;for(let d=0;d<h;d++)A=l[d],r.setRelative(A,A,u,o)}c(Ng,"SHZ");function BG(i){const e=i.stack;let t=i.loop;const n=i.fv,s=e.pop()/64,r=i.z2;for(;t--;){const o=e.pop(),a=r[o];n.setRelative(a,a,s),n.touch(a)}i.loop=1}c(BG,"SHPIX");function vG(i){const e=i.stack,t=i.rp1,n=i.rp2;let s=i.loop;const r=i.z0[t],o=i.z1[n],a=i.fv,l=i.dpv,A=i.z2;for(;s--;){const u=e.pop(),h=A[u];a.interpolate(h,r,o,l),a.touch(h)}i.loop=1}c(vG,"IP");function Qg(i,e){const t=e.stack,n=t.pop()/64,s=t.pop(),r=e.z1[s],o=e.z0[e.rp0],a=e.fv,l=e.pv;a.setRelative(r,o,n,l),a.touch(r),e.rp1=e.rp0,e.rp2=s,i&&(e.rp0=s)}c(Qg,"MSIRP");function GG(i){const e=i.stack,t=i.rp0,n=i.z0[t];let s=i.loop;const r=i.fv,o=i.pv,a=i.z1;for(;s--;){const l=e.pop(),A=a[l];r.setRelative(A,n,0,o),r.touch(A)}i.loop=1}c(GG,"ALIGNRP");function RG(i){i.round=O2}c(RG,"RTDG");function wg(i,e){const t=e.stack,n=t.pop(),s=t.pop(),r=e.z0[s],o=e.fv,a=e.pv;let l=e.cvt[n],A=a.distance(r,oo);i&&(Math.abs(A-l)<e.cvCutIn&&(A=l),A=e.round(A)),o.setRelative(r,oo,A,a),e.zp0===0&&(r.xo=r.x,r.yo=r.y),o.touch(r),e.rp0=e.rp1=s}c(wg,"MIAP");function SG(i){const e=i.prog;let t=i.ip;const n=i.stack,s=e[++t];for(let r=0;r<s;r++)n.push(e[++t]);i.ip=t}c(SG,"NPUSHB");function NG(i){let e=i.ip;const t=i.prog,n=i.stack,s=t[++e];for(let r=0;r<s;r++){let o=t[++e]<<8|t[++e];o&32768&&(o=-((o^65535)+1)),n.push(o)}i.ip=e}c(NG,"NPUSHW");function QG(i){const e=i.stack;let t=i.store;t||(t=i.store=[]);const n=e.pop(),s=e.pop();t[s]=n}c(QG,"WS");function wG(i){const e=i.stack,t=i.store,n=e.pop(),s=t&&t[n]||0;e.push(s)}c(wG,"RS");function ZG(i){const e=i.stack,t=e.pop(),n=e.pop();i.cvt[n]=t/64}c(ZG,"WCVTP");function kG(i){const e=i.stack,t=e.pop();e.push(i.cvt[t]*64)}c(kG,"RCVT");function Zg(i,e){const t=e.stack,n=t.pop(),s=e.z2[n];t.push(e.dpv.distance(s,oo,i,!1)*64)}c(Zg,"GC");function kg(i,e){const t=e.stack,n=t.pop(),s=t.pop(),r=e.z1[n],o=e.z0[s],a=e.dpv.distance(o,r,i,i);e.stack.push(Math.round(a*64))}c(kg,"MD");function _G(i){i.stack.push(i.ppem)}c(_G,"MPPEM");function YG(i){i.autoFlip=!0}c(YG,"FLIPON");function WG(i){const e=i.stack,t=e.pop(),n=e.pop();e.push(n<t?1:0)}c(WG,"LT");function DG(i){const e=i.stack,t=e.pop(),n=e.pop();e.push(n<=t?1:0)}c(DG,"LTEQ");function TG(i){const e=i.stack,t=e.pop(),n=e.pop();e.push(n>t?1:0)}c(TG,"GT");function FG(i){const e=i.stack,t=e.pop(),n=e.pop();e.push(n>=t?1:0)}c(FG,"GTEQ");function xG(i){const e=i.stack,t=e.pop(),n=e.pop();e.push(t===n?1:0)}c(xG,"EQ");function LG(i){const e=i.stack,t=e.pop(),n=e.pop();e.push(t!==n?1:0)}c(LG,"NEQ");function MG(i){const e=i.stack,t=e.pop();e.push(Math.trunc(t)&1?1:0)}c(MG,"ODD");function VG(i){const e=i.stack,t=e.pop();e.push(Math.trunc(t)&1?0:1)}c(VG,"EVEN");function OG(i){i.stack.pop()||oC(i,!0)}c(OG,"IF");function PG(i){}c(PG,"EIF");function HG(i){const e=i.stack,t=e.pop(),n=e.pop();e.push(t&&n?1:0)}c(HG,"AND");function XG(i){const e=i.stack,t=e.pop(),n=e.pop();e.push(t||n?1:0)}c(XG,"OR");function zG(i){const e=i.stack,t=e.pop();e.push(t?0:1)}c(zG,"NOT");function Jc(i,e){const t=e.stack,n=t.pop(),s=e.fv,r=e.pv,o=e.ppem,a=e.deltaBase+(i-1)*16,l=e.deltaShift,A=e.z0;for(let u=0;u<n;u++){const h=t.pop(),d=t.pop();if(a+((d&240)>>4)!==o)continue;let p=(d&15)-8;p>=0&&p++;const f=A[h];s.setRelative(f,f,p*l,r)}}c(Jc,"DELTAP123");function JG(i){const t=i.stack.pop();i.deltaBase=t}c(JG,"SDB");function UG(i){const t=i.stack.pop();i.deltaShift=Math.pow(.5,t)}c(UG,"SDS");function KG(i){const e=i.stack,t=e.pop(),n=e.pop();e.push(n+t)}c(KG,"ADD");function jG(i){const e=i.stack,t=e.pop(),n=e.pop();e.push(n-t)}c(jG,"SUB");function qG(i){const e=i.stack,t=e.pop(),n=e.pop();e.push(n*64/t)}c(qG,"DIV");function $G(i){const e=i.stack,t=e.pop(),n=e.pop();e.push(n*t/64)}c($G,"MUL");function eR(i){const e=i.stack,t=e.pop();e.push(Math.abs(t))}c(eR,"ABS");function tR(i){const e=i.stack;let t=e.pop();e.push(-t)}c(tR,"NEG");function nR(i){const e=i.stack,t=e.pop();e.push(Math.floor(t/64)*64)}c(nR,"FLOOR");function iR(i){const e=i.stack,t=e.pop();e.push(Math.ceil(t/64)*64)}c(iR,"CEILING");function Sa(i,e){const t=e.stack,n=t.pop();t.push(e.round(n/64)*64)}c(Sa,"ROUND");function sR(i){const e=i.stack,t=e.pop(),n=e.pop();i.cvt[n]=t*i.ppem/i.font.unitsPerEm}c(sR,"WCVTF");function Uc(i,e){const t=e.stack,n=t.pop(),s=e.ppem,r=e.deltaBase+(i-1)*16,o=e.deltaShift;for(let a=0;a<n;a++){const l=t.pop(),A=t.pop();if(r+((A&240)>>4)!==s)continue;let h=(A&15)-8;h>=0&&h++;const d=h*o;e.cvt[l]+=d}}c(Uc,"DELTAC123");function rR(i){let e=i.stack.pop();i.round=rC;let t;switch(e&192){case 0:t=.5;break;case 64:t=1;break;case 128:t=2;break;default:throw new Error("invalid SROUND value")}switch(i.srPeriod=t,e&48){case 0:i.srPhase=0;break;case 16:i.srPhase=.25*t;break;case 32:i.srPhase=.5*t;break;case 48:i.srPhase=.75*t;break;default:throw new Error("invalid SROUND value")}e&=15,e===0?i.srThreshold=0:i.srThreshold=(e/8-.5)*t}c(rR,"SROUND");function oR(i){let e=i.stack.pop();i.round=rC;let t;switch(e&192){case 0:t=Math.sqrt(2)/2;break;case 64:t=Math.sqrt(2);break;case 128:t=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(i.srPeriod=t,e&48){case 0:i.srPhase=0;break;case 16:i.srPhase=.25*t;break;case 32:i.srPhase=.5*t;break;case 48:i.srPhase=.75*t;break;default:throw new Error("invalid S45ROUND value")}e&=15,e===0?i.srThreshold=0:i.srThreshold=(e/8-.5)*t}c(oR,"S45ROUND");function aR(i){i.round=V2}c(aR,"ROFF");function lR(i){i.round=H2}c(lR,"RUTG");function cR(i){i.round=X2}c(cR,"RDTG");function AR(i){i.stack.pop()}c(AR,"SCANCTRL");function _g(i,e){const t=e.stack,n=t.pop(),s=t.pop(),r=e.z2[n],o=e.z1[s];let a,l;i?(a=r.y-o.y,l=o.x-r.x):(a=o.x-r.x,l=o.y-r.y),e.dpv=ko(a,l)}c(_g,"SDPVTL");function uR(i){const e=i.stack,t=e.pop();let n=0;t&1&&(n=35),t&32&&(n|=4096),e.push(n)}c(uR,"GETINFO");function hR(i){const e=i.stack,t=e.pop(),n=e.pop(),s=e.pop();e.push(n),e.push(t),e.push(s)}c(hR,"ROLL");function dR(i){const e=i.stack,t=e.pop(),n=e.pop();e.push(Math.max(n,t))}c(dR,"MAX");function gR(i){const e=i.stack,t=e.pop(),n=e.pop();e.push(Math.min(n,t))}c(gR,"MIN");function pR(i){i.stack.pop()}c(pR,"SCANTYPE");function fR(i){const e=i.stack.pop();let t=i.stack.pop();switch(e){case 1:i.inhibitGridFit=!!t;return;case 2:i.ignoreCvt=!!t;return;default:throw new Error("invalid INSTCTRL[] selector")}}c(fR,"INSTCTRL");function di(i,e){const t=e.stack,n=e.prog;let s=e.ip;for(let r=0;r<i;r++)t.push(n[++s]);e.ip=s}c(di,"PUSHB");function gi(i,e){let t=e.ip;const n=e.prog,s=e.stack;for(let r=0;r<i;r++){let o=n[++t]<<8|n[++t];o&32768&&(o=-((o^65535)+1)),s.push(o)}e.ip=t}c(gi,"PUSHW");function de(i,e,t,n,s,r){const o=r.stack,a=i&&o.pop(),l=o.pop(),A=r.rp0,u=r.z0[A],h=r.z1[l],d=r.minDis,g=r.fv,p=r.dpv;let f,m,y;f=p.distance(h,u,!0,!0),m=f>=0?1:-1,f=Math.abs(f),i&&(y=r.cvt[a],n&&Math.abs(f-y)<r.cvCutIn&&(f=y)),t&&f<d&&(f=d),n&&(f=r.round(f)),g.setRelative(h,u,m*f,p),g.touch(h),r.rp1=r.rp0,r.rp2=l,e&&(r.rp0=l)}c(de,"MDRP_MIRP");tC=[Ig.bind(void 0,si),Ig.bind(void 0,Mn),yg.bind(void 0,si),yg.bind(void 0,Mn),bg.bind(void 0,si),bg.bind(void 0,Mn),Eg.bind(void 0,0),Eg.bind(void 0,1),Bg.bind(void 0,0),Bg.bind(void 0,1),J2,U2,K2,j2,q2,$2,eG,tG,nG,iG,sG,rG,oG,aG,lG,cG,AG,uG,hG,dG,void 0,void 0,gG,zc,pG,fG,mG,yG,bG,void 0,void 0,void 0,CG,IG,EG,void 0,vg.bind(void 0,0),vg.bind(void 0,1),Gg.bind(void 0,si),Gg.bind(void 0,Mn),Rg.bind(void 0,0),Rg.bind(void 0,1),Sg.bind(void 0,0),Sg.bind(void 0,1),Ng.bind(void 0,0),Ng.bind(void 0,1),BG,vG,Qg.bind(void 0,0),Qg.bind(void 0,1),GG,RG,wg.bind(void 0,0),wg.bind(void 0,1),SG,NG,QG,wG,ZG,kG,Zg.bind(void 0,0),Zg.bind(void 0,1),void 0,kg.bind(void 0,0),kg.bind(void 0,1),_G,void 0,YG,void 0,void 0,WG,DG,TG,FG,xG,LG,MG,VG,OG,PG,HG,XG,zG,Jc.bind(void 0,1),JG,UG,KG,jG,qG,$G,eR,tR,nR,iR,Sa.bind(void 0,0),Sa.bind(void 0,1),Sa.bind(void 0,2),Sa.bind(void 0,3),void 0,void 0,void 0,void 0,sR,Jc.bind(void 0,2),Jc.bind(void 0,3),Uc.bind(void 0,1),Uc.bind(void 0,2),Uc.bind(void 0,3),rR,oR,void 0,void 0,aR,void 0,lR,cR,zc,zc,void 0,void 0,void 0,void 0,void 0,AR,_g.bind(void 0,0),_g.bind(void 0,1),uR,void 0,hR,dR,gR,pR,fR,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,di.bind(void 0,1),di.bind(void 0,2),di.bind(void 0,3),di.bind(void 0,4),di.bind(void 0,5),di.bind(void 0,6),di.bind(void 0,7),di.bind(void 0,8),gi.bind(void 0,1),gi.bind(void 0,2),gi.bind(void 0,3),gi.bind(void 0,4),gi.bind(void 0,5),gi.bind(void 0,6),gi.bind(void 0,7),gi.bind(void 0,8),de.bind(void 0,0,0,0,0,0),de.bind(void 0,0,0,0,0,1),de.bind(void 0,0,0,0,0,2),de.bind(void 0,0,0,0,0,3),de.bind(void 0,0,0,0,1,0),de.bind(void 0,0,0,0,1,1),de.bind(void 0,0,0,0,1,2),de.bind(void 0,0,0,0,1,3),de.bind(void 0,0,0,1,0,0),de.bind(void 0,0,0,1,0,1),de.bind(void 0,0,0,1,0,2),de.bind(void 0,0,0,1,0,3),de.bind(void 0,0,0,1,1,0),de.bind(void 0,0,0,1,1,1),de.bind(void 0,0,0,1,1,2),de.bind(void 0,0,0,1,1,3),de.bind(void 0,0,1,0,0,0),de.bind(void 0,0,1,0,0,1),de.bind(void 0,0,1,0,0,2),de.bind(void 0,0,1,0,0,3),de.bind(void 0,0,1,0,1,0),de.bind(void 0,0,1,0,1,1),de.bind(void 0,0,1,0,1,2),de.bind(void 0,0,1,0,1,3),de.bind(void 0,0,1,1,0,0),de.bind(void 0,0,1,1,0,1),de.bind(void 0,0,1,1,0,2),de.bind(void 0,0,1,1,0,3),de.bind(void 0,0,1,1,1,0),de.bind(void 0,0,1,1,1,1),de.bind(void 0,0,1,1,1,2),de.bind(void 0,0,1,1,1,3),de.bind(void 0,1,0,0,0,0),de.bind(void 0,1,0,0,0,1),de.bind(void 0,1,0,0,0,2),de.bind(void 0,1,0,0,0,3),de.bind(void 0,1,0,0,1,0),de.bind(void 0,1,0,0,1,1),de.bind(void 0,1,0,0,1,2),de.bind(void 0,1,0,0,1,3),de.bind(void 0,1,0,1,0,0),de.bind(void 0,1,0,1,0,1),de.bind(void 0,1,0,1,0,2),de.bind(void 0,1,0,1,0,3),de.bind(void 0,1,0,1,1,0),de.bind(void 0,1,0,1,1,1),de.bind(void 0,1,0,1,1,2),de.bind(void 0,1,0,1,1,3),de.bind(void 0,1,1,0,0,0),de.bind(void 0,1,1,0,0,1),de.bind(void 0,1,1,0,0,2),de.bind(void 0,1,1,0,0,3),de.bind(void 0,1,1,0,1,0),de.bind(void 0,1,1,0,1,1),de.bind(void 0,1,1,0,1,2),de.bind(void 0,1,1,0,1,3),de.bind(void 0,1,1,1,0,0),de.bind(void 0,1,1,1,0,1),de.bind(void 0,1,1,1,0,2),de.bind(void 0,1,1,1,0,3),de.bind(void 0,1,1,1,1,0),de.bind(void 0,1,1,1,1,1),de.bind(void 0,1,1,1,1,2),de.bind(void 0,1,1,1,1,3)];var mR=iC;function br(i){this.char=i,this.state={},this.activeState=null}c(br,"Token");function mh(i,e,t){this.contextName=t,this.startIndex=i,this.endOffset=e}c(mh,"ContextRange");function CR(i,e,t){this.contextName=i,this.openRange=null,this.ranges=[],this.checkStart=e,this.checkEnd=t}c(CR,"ContextChecker");function Jt(i,e){this.context=i,this.index=e,this.length=i.length,this.current=i[e],this.backtrack=i.slice(0,e),this.lookahead=i.slice(e+1)}c(Jt,"ContextParams");function Vl(i){this.eventId=i,this.subscribers=[]}c(Vl,"Event");function IR(i){const e=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];for(let n=0;n<e.length;n++){const s=e[n];Object.defineProperty(this.events,s,{value:new Vl(s)})}if(i)for(let n=0;n<e.length;n++){const s=e[n],r=i[s];typeof r=="function"&&this.events[s].subscribe(r)}const t=["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"];for(let n=0;n<t.length;n++){const s=t[n];this.events[s].subscribe(this.updateContextsRanges)}}c(IR,"initializeCoreEvents");function lt(i){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],IR.call(this,i)}c(lt,"Tokenizer");br.prototype.setState=function(i,e){return this.state[i]=e,this.activeState={key:i,value:this.state[i]},this.activeState};br.prototype.getState=function(i){return this.state[i]||null};lt.prototype.inboundIndex=function(i){return i>=0&&i<this.tokens.length};lt.prototype.composeRUD=function(i){const t=i.map(s=>this[s[0]].apply(this,s.slice(1).concat(!0))),n=c(s=>typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"FAIL"),"hasFAILObject");if(t.every(n))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:t.filter(n)};this.dispatch("composeRUD",[t.filter(s=>!n(s))])};lt.prototype.replaceRange=function(i,e,t,n){e=e!==null?e:this.tokens.length;const s=t.every(r=>r instanceof br);if(!isNaN(i)&&this.inboundIndex(i)&&s){const r=this.tokens.splice.apply(this.tokens,[i,e].concat(t));return n||this.dispatch("replaceToken",[i,e,t]),[r,t]}else return{FAIL:"replaceRange: invalid tokens or startIndex."}};lt.prototype.replaceToken=function(i,e,t){if(!isNaN(i)&&this.inboundIndex(i)&&e instanceof br){const n=this.tokens.splice(i,1,e);return t||this.dispatch("replaceToken",[i,e]),[n[0],e]}else return{FAIL:"replaceToken: invalid token or index."}};lt.prototype.removeRange=function(i,e,t){e=isNaN(e)?this.tokens.length:e;const n=this.tokens.splice(i,e);return t||this.dispatch("removeRange",[n,i,e]),n};lt.prototype.removeToken=function(i,e){if(!isNaN(i)&&this.inboundIndex(i)){const t=this.tokens.splice(i,1);return e||this.dispatch("removeToken",[t,i]),t}else return{FAIL:"removeToken: invalid token index."}};lt.prototype.insertToken=function(i,e,t){return i.every(s=>s instanceof br)?(this.tokens.splice.apply(this.tokens,[e,0].concat(i)),t||this.dispatch("insertToken",[i,e]),i):{FAIL:"insertToken: invalid token(s)."}};lt.prototype.registerModifier=function(i,e,t){this.events.newToken.subscribe(function(n,s){const r=[n,s],o=e===null||e.apply(this,r)===!0,a=[n,s];if(o){let l=t.apply(this,a);n.setState(i,l)}}),this.registeredModifiers.push(i)};Vl.prototype.subscribe=function(i){return typeof i=="function"?this.subscribers.push(i)-1:{FAIL:`invalid '${this.eventId}' event handler`}};Vl.prototype.unsubscribe=function(i){this.subscribers.splice(i,1)};Jt.prototype.setCurrentIndex=function(i){this.index=i,this.current=this.context[i],this.backtrack=this.context.slice(0,i),this.lookahead=this.context.slice(i+1)};Jt.prototype.get=function(i){switch(!0){case i===0:return this.current;case(i<0&&Math.abs(i)<=this.backtrack.length):return this.backtrack.slice(i)[0];case(i>0&&i<=this.lookahead.length):return this.lookahead[i-1];default:return null}};lt.prototype.rangeToText=function(i){if(i instanceof mh)return this.getRangeTokens(i).map(e=>e.char).join("")};lt.prototype.getText=function(){return this.tokens.map(i=>i.char).join("")};lt.prototype.getContext=function(i){let e=this.registeredContexts[i];return e||null};lt.prototype.on=function(i,e){const t=this.events[i];return t?t.subscribe(e):null};lt.prototype.dispatch=function(i,e){const t=this.events[i];if(t instanceof Vl)for(let n=0;n<t.subscribers.length;n++)t.subscribers[n].apply(this,e||[])};lt.prototype.registerContextChecker=function(i,e,t){if(this.getContext(i))return{FAIL:`context name '${i}' is already registered.`};if(typeof e!="function")return{FAIL:"missing context start check."};if(typeof t!="function")return{FAIL:"missing context end check."};const n=new CR(i,e,t);return this.registeredContexts[i]=n,this.contextCheckers.push(n),n};lt.prototype.getRangeTokens=function(i){const e=i.startIndex+i.endOffset;return[].concat(this.tokens.slice(i.startIndex,e))};lt.prototype.getContextRanges=function(i){const e=this.getContext(i);return e?e.ranges:{FAIL:`context checker '${i}' is not registered.`}};lt.prototype.resetContextsRanges=function(){const i=this.registeredContexts;for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e)){const t=i[e];t.ranges=[]}};lt.prototype.updateContextsRanges=function(){this.resetContextsRanges();const i=this.tokens.map(e=>e.char);for(let e=0;e<i.length;e++){const t=new Jt(i,e);this.runContextCheck(t)}this.dispatch("updateContextsRanges",[this.registeredContexts])};lt.prototype.setEndOffset=function(i,e){const t=this.getContext(e).openRange.startIndex;let n=new mh(t,i,e);const s=this.getContext(e).ranges;return n.rangeId=`${e}.${s.length}`,s.push(n),this.getContext(e).openRange=null,n};lt.prototype.runContextCheck=function(i){const e=i.index;for(let t=0;t<this.contextCheckers.length;t++){const n=this.contextCheckers[t];let s=n.contextName,r=this.getContext(s).openRange;if(!r&&n.checkStart(i)&&(r=new mh(e,null,s),this.getContext(s).openRange=r,this.dispatch("contextStart",[s,e])),r&&n.checkEnd(i)){const o=e-r.startIndex+1,a=this.setEndOffset(o,s);this.dispatch("contextEnd",[s,a])}}};lt.prototype.tokenize=function(i){this.tokens=[],this.resetContextsRanges();let e=Array.from(i);this.dispatch("start");for(let t=0;t<e.length;t++){const n=e[t],s=new Jt(e,t);this.dispatch("next",[s]),this.runContextCheck(s);let r=new br(n);this.tokens.push(r),this.dispatch("newToken",[r,s])}return this.dispatch("end",[this.tokens]),this.tokens};var yR=lt;function Si(i){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(i)}c(Si,"isArabicChar");function aC(i){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(i)}c(aC,"isIsolatedArabicChar");function _i(i){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(i)}c(_i,"isTashkeelArabicChar");function La(i){return/[\u0E00-\u0E7F]/.test(i)}c(La,"isThaiChar");function Ma(i){return/[A-z]/.test(i)}c(Ma,"isLatinChar");function bR(i){return/\s/.test(i)}c(bR,"isWhiteSpace");function hn(i){this.font=i,this.features={}}c(hn,"FeatureQuery");function mi(i){this.id=i.id,this.tag=i.tag,this.substitution=i.substitution}c(mi,"SubstitutionAction");function Ai(i,e){if(!i)return-1;switch(e.format){case 1:return e.glyphs.indexOf(i);case 2:{let t=e.ranges;for(let n=0;n<t.length;n++){const s=t[n];if(i>=s.start&&i<=s.end){let r=i-s.start;return s.index+r}}break}default:return-1}return-1}c(Ai,"lookupCoverage");function ER(i,e){return Ai(i,e.coverage)===-1?null:i+e.deltaGlyphId}c(ER,"singleSubstitutionFormat1");function BR(i,e){let t=Ai(i,e.coverage);return t===-1?null:e.substitute[t]}c(BR,"singleSubstitutionFormat2");function Kc(i,e){let t=[];for(let n=0;n<i.length;n++){const s=i[n];let r=e.current;r=Array.isArray(r)?r[0]:r;const o=Ai(r,s);o!==-1&&t.push(o)}return t.length!==i.length?-1:t}c(Kc,"lookupCoverageList");function vR(i,e){const t=e.inputCoverage.length+e.lookaheadCoverage.length+e.backtrackCoverage.length;if(i.context.length<t)return[];let n=Kc(e.inputCoverage,i);if(n===-1)return[];const s=e.inputCoverage.length-1;if(i.lookahead.length<e.lookaheadCoverage.length)return[];let r=i.lookahead.slice(s);for(;r.length&&_i(r[0].char);)r.shift();const o=new Jt(r,0);let a=Kc(e.lookaheadCoverage,o),l=[].concat(i.backtrack);for(l.reverse();l.length&&_i(l[0].char);)l.shift();if(l.length<e.backtrackCoverage.length)return[];const A=new Jt(l,0);let u=Kc(e.backtrackCoverage,A);const h=n.length===e.inputCoverage.length&&a.length===e.lookaheadCoverage.length&&u.length===e.backtrackCoverage.length;let d=[];if(h)for(let g=0;g<e.lookupRecords.length;g++){const f=e.lookupRecords[g].lookupListIndex,m=this.getLookupByIndex(f);for(let y=0;y<m.subtables.length;y++){let v=m.subtables[y],G,R=this.getSubstitutionType(m,v);if(R==="71"?(R=this.getSubstitutionType(v,v.extension),G=this.getLookupMethod(v,v.extension),v=v.extension):G=this.getLookupMethod(m,v),R==="12")for(let Q=0;Q<n.length;Q++){const S=i.get(Q),M=G(S);M&&d.push(M)}else throw new Error(`Substitution type ${R} is not supported in chaining substitution`)}}return d}c(vR,"chainingSubstitutionFormat3");function GR(i,e){let t=i.current,n=Ai(t,e.coverage);if(n===-1)return null;let s,r=e.ligatureSets[n];for(let o=0;o<r.length;o++){s=r[o];for(let a=0;a<s.components.length;a++){const l=i.lookahead[a],A=s.components[a];if(l!==A)break;if(a===s.components.length-1)return s}}return null}c(GR,"ligatureSubstitutionFormat1");function RR(i,e){let t=i.current;if(Ai(t,e.coverage)===-1)return null;for(const s of e.ruleSets)for(const r of s){let o=!0;for(let a=0;a<r.input.length;a++)if(i.lookahead[a]!==r.input[a]){o=!1;break}if(o){let a=[];a.push(t);for(let A=0;A<r.input.length;A++)a.push(r.input[A]);const l=c((A,u)=>{const{lookupListIndex:h,sequenceIndex:d}=u,{subtables:g}=this.getLookupByIndex(h);for(const p of g)Ai(A[d],p.coverage)!==-1&&(A[d]=p.deltaGlyphId)},"parser");for(let A=0;A<r.lookupRecords.length;A++){const u=r.lookupRecords[A];l(a,u)}return a}}return null}c(RR,"contextSubstitutionFormat1");function SR(i,e){let t=[];for(let n=0;n<e.coverages.length;n++){const s=e.lookupRecords[n],r=e.coverages[n];let o=i.context[i.index+s.sequenceIndex];if(Ai(o,r)===-1)return null;let l=this.font.tables.gsub.lookups[s.lookupListIndex];for(let A=0;A<l.subtables.length;A++){let u=l.subtables[A],h=Ai(o,u.coverage);if(h===-1)return null;switch(l.lookupType){case 1:{let d=u.substitute[h];t.push(d);break}case 2:{let d=u.sequences[h];t.push(d);break}}}}return t}c(SR,"contextSubstitutionFormat3");function NR(i,e){let t=Ai(i,e.coverage);return t===-1?null:e.sequences[t]}c(NR,"decompositionSubstitutionFormat1");hn.prototype.getDefaultScriptFeaturesIndexes=function(){const i=this.font.tables.gsub.scripts;for(let e=0;e<i.length;e++){const t=i[e];if(t.tag==="DFLT")return t.script.defaultLangSys.featureIndexes}return[]};hn.prototype.getScriptFeaturesIndexes=function(i){if(!this.font.tables.gsub)return[];if(!i)return this.getDefaultScriptFeaturesIndexes();const t=this.font.tables.gsub.scripts;for(let n=0;n<t.length;n++){const s=t[n];if(s.tag===i&&s.script.defaultLangSys)return s.script.defaultLangSys.featureIndexes;{let r=s.langSysRecords;if(r)for(let o=0;o<r.length;o++){const a=r[o];if(a.tag===i)return a.langSys.featureIndexes}}}return this.getDefaultScriptFeaturesIndexes()};hn.prototype.mapTagsToFeatures=function(i,e){let t={};for(let n=0;n<i.length;n++){const s=i[n].tag,r=i[n].feature;t[s]=r}this.features[e].tags=t};hn.prototype.getScriptFeatures=function(i){let e=this.features[i];if(Object.prototype.hasOwnProperty.call(this.features,i))return e;const t=this.getScriptFeaturesIndexes(i);if(!t)return null;const n=this.font.tables.gsub;return e=t.map(s=>n.features[s]),this.features[i]=e,this.mapTagsToFeatures(e,i),e};hn.prototype.getSubstitutionType=function(i,e){const t=i.lookupType.toString(),n=e.substFormat.toString();return t+n};hn.prototype.getLookupMethod=function(i,e){let t=this.getSubstitutionType(i,e);switch(t){case"11":return n=>ER.apply(this,[n,e]);case"12":return n=>BR.apply(this,[n,e]);case"63":return n=>vR.apply(this,[n,e]);case"41":return n=>GR.apply(this,[n,e]);case"21":return n=>NR.apply(this,[n,e]);case"51":return n=>RR.apply(this,[n,e]);case"53":return n=>SR.apply(this,[n,e]);default:throw new Error(`substitutionType : ${t} lookupType: ${i.lookupType} - substFormat: ${e.substFormat} is not yet supported`)}};hn.prototype.lookupFeature=function(i){let e=i.contextParams,t=e.index;const n=this.getFeature({tag:i.tag,script:i.script});if(!n)return new Error(`font '${(this.font.names.unicode||this.font.names.windows||this.font.names.macintosh).fullName.en}' doesn't support feature '${i.tag}' for script '${i.script}'.`);const s=this.getFeatureLookups(n),r=[].concat(e.context);for(let o=0;o<s.length;o++){const a=s[o],l=this.getLookupSubtables(a);for(let A=0;A<l.length;A++){let u=l[A],h=this.getSubstitutionType(a,u),d;h==="71"?(h=this.getSubstitutionType(u,u.extension),d=this.getLookupMethod(u,u.extension),u=u.extension):d=this.getLookupMethod(a,u);let g;switch(h){case"11":g=d(e.current),g&&r.splice(t,1,new mi({id:11,tag:i.tag,substitution:g}));break;case"12":g=d(e.current),g&&r.splice(t,1,new mi({id:12,tag:i.tag,substitution:g}));break;case"63":g=d(e),Array.isArray(g)&&g.length&&r.splice(t,1,new mi({id:63,tag:i.tag,substitution:g}));break;case"41":g=d(e),g&&r.splice(t,1,new mi({id:41,tag:i.tag,substitution:g}));break;case"21":g=d(e.current),g&&r.splice(t,1,new mi({id:21,tag:i.tag,substitution:g}));break;case"51":case"53":g=d(e),Array.isArray(g)&&g.length&&r.splice(t,1,new mi({id:parseInt(h),tag:i.tag,substitution:g}));break}e=new Jt(r,t),!(Array.isArray(g)&&!g.length)&&(g=null)}}return r.length?r:null};hn.prototype.supports=function(i){if(!i.script)return!1;this.getScriptFeatures(i.script);const e=Object.prototype.hasOwnProperty.call(this.features,i.script);if(!i.tag)return e;const t=this.features[i.script].some(n=>n.tag===i.tag);return e&&t};hn.prototype.getLookupSubtables=function(i){return i.subtables||null};hn.prototype.getLookupByIndex=function(i){return this.font.tables.gsub.lookups[i]||null};hn.prototype.getFeatureLookups=function(i){return i.lookupListIndexes.map(this.getLookupByIndex.bind(this))};hn.prototype.getFeature=c(function(e){if(!this.font)return{FAIL:"No font was found"};Object.prototype.hasOwnProperty.call(this.features,e.script)||this.getScriptFeatures(e.script);const t=this.features[e.script];return t?t.tags[e.tag]?this.features[e.script].tags[e.tag]:null:{FAIL:`No feature for script ${e.script}`}},"getFeature");var QR=hn;function wR(i){const e=i.current,t=i.get(-1);return t===null&&Si(e)||!Si(t)&&Si(e)}c(wR,"arabicWordStartCheck");function ZR(i){const e=i.get(1);return e===null||!Si(e)}c(ZR,"arabicWordEndCheck");var kR={startCheck:wR,endCheck:ZR};function _R(i){const e=i.current,t=i.get(-1);return(Si(e)||_i(e))&&!Si(t)}c(_R,"arabicSentenceStartCheck");function YR(i){const e=i.get(1);switch(!0){case e===null:return!0;case(!Si(e)&&!_i(e)):{const t=bR(e);if(!t)return!0;if(t){let n=!1;if(n=i.lookahead.some(s=>Si(s)||_i(s)),!n)return!0}break}default:return!1}}c(YR,"arabicSentenceEndCheck");var WR={startCheck:_R,endCheck:YR};function DR(i,e,t){e[t].setState(i.tag,i.substitution)}c(DR,"singleSubstitutionFormat12");function TR(i,e,t){e[t].setState(i.tag,i.substitution)}c(TR,"singleSubstitutionFormat22");function jc(i,e,t){for(let n=0;n<i.substitution.length;n++){const s=i.substitution[n],r=e[t+n];if(Array.isArray(s)){s.length?r.setState(i.tag,s[0]):r.setState("deleted",!0);continue}r.setState(i.tag,s)}}c(jc,"chainingSubstitutionFormat32");function FR(i,e,t){let n=e[t];n.setState(i.tag,i.substitution.ligGlyph);const s=i.substitution.components.length;for(let r=0;r<s;r++)n=e[t+r+1],n.setState("deleted",!0)}c(FR,"ligatureSubstitutionFormat12");var Yg={11:DR,12:TR,63:jc,41:FR,51:jc,53:jc};function xR(i,e,t){i instanceof mi&&Yg[i.id]&&Yg[i.id](i,e,t)}c(xR,"applySubstitution");var Qs=xR;function LR(i){let e=[].concat(i.backtrack);for(let t=e.length-1;t>=0;t--){const n=e[t],s=aC(n),r=_i(n);if(!s&&!r)return!0;if(s)return!1}return!1}c(LR,"willConnectPrev");function MR(i){if(aC(i.current))return!1;for(let e=0;e<i.lookahead.length;e++){const t=i.lookahead[e];if(!_i(t))return!0}return!1}c(MR,"willConnectNext");function VR(i){const e="arab",t=this.featuresTags[e],n=this.tokenizer.getRangeTokens(i);if(n.length===1)return;let s=new Jt(n.map(o=>o.getState("glyphIndex")),0);const r=new Jt(n.map(o=>o.char),0);for(let o=0;o<n.length;o++){const a=n[o];if(_i(a.char))continue;s.setCurrentIndex(o),r.setCurrentIndex(o);let l=0;LR(r)&&(l|=1),MR(r)&&(l|=2);let A;switch(l){case 1:A="fina";break;case 2:A="init";break;case 3:A="medi";break}if(t.indexOf(A)===-1)continue;let u=this.query.lookupFeature({tag:A,script:e,contextParams:s});if(u instanceof Error){console.info(u.message);continue}for(let h=0;h<u.length;h++){const d=u[h];d instanceof mi&&(Qs(d,n,h),s.context[h]=d.substitution)}}}c(VR,"arabicPresentationForms");var OR=VR;function Wg(i,e){const t=i.map(n=>n.activeState.value);return new Jt(t,0)}c(Wg,"getContextParams");function PR(i){const e="arab";let t=this.tokenizer.getRangeTokens(i),n=Wg(t);for(let s=0;s<n.context.length;s++){n.setCurrentIndex(s);let r=this.query.lookupFeature({tag:"rlig",script:e,contextParams:n});if(r.length){for(let o=0;o<r.length;o++){const a=r[o];Qs(a,t,s)}n=Wg(t)}}}c(PR,"arabicRequiredLigatures");var HR=PR;function XR(i){return i.index===0&&i.context.length>1}c(XR,"ccmpReplacementStartCheck");function zR(i){return i.index===i.context.length-1}c(zR,"ccmpReplacementEndCheck");var JR={startCheck:XR,endCheck:zR};function Dg(i,e){const t=i.map(n=>n.activeState.value);return new Jt(t,0)}c(Dg,"getContextParams2");function UR(i){const e="delf",t="ccmp";let n=this.tokenizer.getRangeTokens(i),s=Dg(n);for(let r=0;r<s.context.length;r++){if(!this.query.getFeature({tag:t,script:e,contextParams:s}))continue;s.setCurrentIndex(r);let o=this.query.lookupFeature({tag:t,script:e,contextParams:s});if(o.length){for(let a=0;a<o.length;a++){const l=o[a];Qs(l,n,r)}s=Dg(n)}}}c(UR,"ccmpReplacementLigatures");var KR=UR;function jR(i){const e=i.current,t=i.get(-1);return t===null&&Ma(e)||!Ma(t)&&Ma(e)}c(jR,"latinWordStartCheck");function qR(i){const e=i.get(1);return e===null||!Ma(e)}c(qR,"latinWordEndCheck");var $R={startCheck:jR,endCheck:qR};function Tg(i,e){const t=i.map(n=>n.activeState.value);return new Jt(t,0)}c(Tg,"getContextParams3");function eS(i){const e="latn";let t=this.tokenizer.getRangeTokens(i),n=Tg(t);for(let s=0;s<n.context.length;s++){n.setCurrentIndex(s);let r=this.query.lookupFeature({tag:"liga",script:e,contextParams:n});if(r.length){for(let o=0;o<r.length;o++){const a=r[o];Qs(a,t,s)}n=Tg(t)}}}c(eS,"latinLigature");var tS=eS;function nS(i){const e=i.current,t=i.get(-1);return t===null&&La(e)||!La(t)&&La(e)}c(nS,"thaiWordStartCheck");function iS(i){const e=i.get(1);return e===null||!La(e)}c(iS,"thaiWordEndCheck");var sS={startCheck:nS,endCheck:iS};function Fg(i,e){const t=i.map(n=>n.activeState.value);return new Jt(t,e||0)}c(Fg,"getContextParams4");function rS(i){const e="thai";let t=this.tokenizer.getRangeTokens(i),n=Fg(t,0);for(let s=0;s<n.context.length;s++){n.setCurrentIndex(s);let r=this.query.lookupFeature({tag:"ccmp",script:e,contextParams:n});if(r.length){for(let o=0;o<r.length;o++){const a=r[o];Qs(a,t,s)}n=Fg(t,s)}}}c(rS,"thaiGlyphComposition");var oS=rS;function xg(i,e){const t=i.map(n=>n.activeState.value);return new Jt(t,e||0)}c(xg,"getContextParams5");function aS(i){const e="thai";let t=this.tokenizer.getRangeTokens(i),n=xg(t,0);for(let s=0;s<n.context.length;s++){n.setCurrentIndex(s);let r=this.query.lookupFeature({tag:"liga",script:e,contextParams:n});if(r.length){for(let o=0;o<r.length;o++){const a=r[o];Qs(a,t,s)}n=xg(t,s)}}}c(aS,"thaiLigatures");var lS=aS;function Lg(i,e){const t=i.map(n=>n.activeState.value);return new Jt(t,e||0)}c(Lg,"getContextParams6");function cS(i){const e="thai";let t=this.tokenizer.getRangeTokens(i),n=Lg(t,0);for(let s=0;s<n.context.length;s++){n.setCurrentIndex(s);let r=this.query.lookupFeature({tag:"rlig",script:e,contextParams:n});if(r.length){for(let o=0;o<r.length;o++){const a=r[o];Qs(a,t,s)}n=Lg(t,s)}}}c(cS,"thaiRequiredLigatures");var AS=cS;function cu(i){if(i===null)return!1;const e=i.codePointAt(0);return e>=6155&&e<=6157||e>=65024&&e<=65039||e>=917760&&e<=917999}c(cu,"isVariationSequenceSelector");function uS(i){const e=i.current,t=i.get(1);return t===null&&cu(e)||cu(t)}c(uS,"unicodeVariationSequenceStartCheck");function hS(i){const e=i.get(1);return e===null||!cu(e)}c(hS,"unicodeVariationSequenceEndCheck");var dS={startCheck:uS,endCheck:hS};function gS(i){const e=this.query.font,t=this.tokenizer.getRangeTokens(i);if(t[1].setState("deleted",!0),e.tables.cmap&&e.tables.cmap.varSelectorList){const n=t[0].char.codePointAt(0),s=t[1].char.codePointAt(0),r=e.tables.cmap.varSelectorList[s];if(r!==void 0&&r.nonDefaultUVS){const o=r.nonDefaultUVS.uvsMappings;if(o[n]){const a=o[n].glyphID;e.glyphs.glyphs[a]!==void 0&&t[0].setState("glyphIndex",a)}}}}c(gS,"unicodeVariationSequence");var pS=gS;function En(i){this.baseDir=i||"ltr",this.tokenizer=new yR,this.featuresTags={}}c(En,"Bidi");En.prototype.setText=function(i){this.text=i};En.prototype.contextChecks={ccmpReplacementCheck:JR,latinWordCheck:$R,arabicWordCheck:kR,arabicSentenceCheck:WR,thaiWordCheck:sS,unicodeVariationSequenceCheck:dS};function Vs(i){const e=this.contextChecks[`${i}Check`];return this.tokenizer.registerContextChecker(i,e.startCheck,e.endCheck)}c(Vs,"registerContextChecker");function fS(){return Vs.call(this,"ccmpReplacement"),Vs.call(this,"latinWord"),Vs.call(this,"arabicWord"),Vs.call(this,"arabicSentence"),Vs.call(this,"thaiWord"),Vs.call(this,"unicodeVariationSequence"),this.tokenizer.tokenize(this.text)}c(fS,"tokenizeText");function mS(){const i=this.tokenizer.getContextRanges("arabicSentence");for(let e=0;e<i.length;e++){const t=i[e];let n=this.tokenizer.getRangeTokens(t);this.tokenizer.replaceRange(t.startIndex,t.endOffset,n.reverse())}}c(mS,"reverseArabicSentences");En.prototype.registerFeatures=function(i,e){const t=e.filter(n=>this.query.supports({script:i,tag:n}));Object.prototype.hasOwnProperty.call(this.featuresTags,i)?this.featuresTags[i]=this.featuresTags[i].concat(t):this.featuresTags[i]=t};En.prototype.applyFeatures=function(i,e){if(!i)throw new Error("No valid font was provided to apply features");this.query||(this.query=new QR(i));for(let t=0;t<e.length;t++){const n=e[t];this.query.supports({script:n.script})&&this.registerFeatures(n.script,n.tags)}};En.prototype.registerModifier=function(i,e,t){this.tokenizer.registerModifier(i,e,t)};function _o(){if(this.tokenizer.registeredModifiers.indexOf("glyphIndex")===-1)throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}c(_o,"checkGlyphIndexStatus");function CS(){if(!Object.prototype.hasOwnProperty.call(this.featuresTags,"arab"))return;_o.call(this);const e=this.tokenizer.getContextRanges("arabicWord");for(let t=0;t<e.length;t++){const n=e[t];OR.call(this,n)}}c(CS,"applyArabicPresentationForms");function IS(){_o.call(this);const i=this.tokenizer.getContextRanges("ccmpReplacement");for(let e=0;e<i.length;e++){const t=i[e];KR.call(this,t)}}c(IS,"applyCcmpReplacement");function yS(){if(!this.hasFeatureEnabled("arab","rlig"))return;_o.call(this);const i=this.tokenizer.getContextRanges("arabicWord");for(let e=0;e<i.length;e++){const t=i[e];HR.call(this,t)}}c(yS,"applyArabicRequireLigatures");function bS(){if(!this.hasFeatureEnabled("latn","liga"))return;_o.call(this);const i=this.tokenizer.getContextRanges("latinWord");for(let e=0;e<i.length;e++){const t=i[e];tS.call(this,t)}}c(bS,"applyLatinLigatures");function ES(){const i=this.tokenizer.getContextRanges("unicodeVariationSequence");for(let e=0;e<i.length;e++){const t=i[e];pS.call(this,t)}}c(ES,"applyUnicodeVariationSequences");function BS(){_o.call(this);const i=this.tokenizer.getContextRanges("thaiWord");for(let e=0;e<i.length;e++){const t=i[e];this.hasFeatureEnabled("thai","liga")&&lS.call(this,t),this.hasFeatureEnabled("thai","rlig")&&AS.call(this,t),this.hasFeatureEnabled("thai","ccmp")&&oS.call(this,t)}}c(BS,"applyThaiFeatures");En.prototype.checkContextReady=function(i){return!!this.tokenizer.getContext(i)};En.prototype.applyFeaturesToContexts=function(){this.checkContextReady("ccmpReplacement")&&IS.call(this),this.checkContextReady("arabicWord")&&(CS.call(this),yS.call(this)),this.checkContextReady("latinWord")&&bS.call(this),this.checkContextReady("arabicSentence")&&mS.call(this),this.checkContextReady("thaiWord")&&BS.call(this),this.checkContextReady("unicodeVariationSequence")&&ES.call(this)};En.prototype.hasFeatureEnabled=function(i,e){return(this.featuresTags[i]||[]).indexOf(e)!==-1};En.prototype.processText=function(i){(!this.text||this.text!==i)&&(this.setText(i),fS.call(this),this.applyFeaturesToContexts())};En.prototype.getBidiText=function(i){return this.processText(i),this.tokenizer.getText()};En.prototype.getTextGlyphs=function(i){this.processText(i);let e=[];for(let t=0;t<this.tokenizer.tokens.length;t++){const n=this.tokenizer.tokens[t];if(n.state.deleted)continue;const s=n.activeState.value;e.push(Array.isArray(s)?s[0]:s)}return e};var vS=En;function qc(i){return{fontFamily:{en:i.familyName||" "},fontSubfamily:{en:i.styleName||" "},fullName:{en:i.fullName||i.familyName+" "+i.styleName},postScriptName:{en:i.postScriptName||(i.familyName+i.styleName).replace(/\s/g,"")},designer:{en:i.designer||" "},designerURL:{en:i.designerURL||" "},manufacturer:{en:i.manufacturer||" "},manufacturerURL:{en:i.manufacturerURL||" "},license:{en:i.license||" "},licenseURL:{en:i.licenseURL||" "},version:{en:i.version||"Version 0.1"},description:{en:i.description||" "},copyright:{en:i.copyright||" "},trademark:{en:i.trademark||" "}}}c(qc,"createDefaultNamesInfo");function Pe(i){if(i=i||{},i.tables=i.tables||{},!i.empty){if(!i.familyName)throw"When creating a new Font object, familyName is required.";if(!i.styleName)throw"When creating a new Font object, styleName is required.";if(!i.unitsPerEm)throw"When creating a new Font object, unitsPerEm is required.";if(!i.ascender)throw"When creating a new Font object, ascender is required.";if(i.descender>0)throw"When creating a new Font object, negative descender value is required.";this.names={},this.names.unicode=qc(i),this.names.macintosh=qc(i),this.names.windows=qc(i),this.unitsPerEm=i.unitsPerEm||1e3,this.ascender=i.ascender,this.descender=i.descender,this.createdTimestamp=i.createdTimestamp,this.italicAngle=i.italicAngle||0,this.weightClass=i.weightClass||0;let e=0;i.fsSelection?e=i.fsSelection:(this.italicAngle<0?e|=this.fsSelectionValues.ITALIC:this.italicAngle>0&&(e|=this.fsSelectionValues.OBLIQUE),this.weightClass>=600&&(e|=this.fsSelectionValues.BOLD),e==0&&(e=this.fsSelectionValues.REGULAR)),(!i.panose||!Array.isArray(i.panose))&&(i.panose=[0,0,0,0,0,0,0,0,0]),this.tables=Object.assign(i.tables,{os2:Object.assign({usWeightClass:i.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:i.widthClass||this.usWidthClasses.MEDIUM,bFamilyType:i.panose[0]||0,bSerifStyle:i.panose[1]||0,bWeight:i.panose[2]||0,bProportion:i.panose[3]||0,bContrast:i.panose[4]||0,bStrokeVariation:i.panose[5]||0,bArmStyle:i.panose[6]||0,bLetterform:i.panose[7]||0,bMidline:i.panose[8]||0,bXHeight:i.panose[9]||0,fsSelection:e},i.tables.os2)})}this.supported=!0,this.glyphs=new On.GlyphSet(this,i.glyphs||[]),this.encoding=new ym(this),this.position=new I2(this),this.substitution=new R2(this),this.tables=this.tables||{},this.tables=new Proxy(this.tables,{set:c((e,t,n)=>(e[t]=n,e.fvar&&(e.gvar||e.cff2)&&!this.variation&&(this.variation=new M2(this)),!0),"set")}),this.palettes=new jm(this),this.layers=new S2(this),this.svgImages=new N2(this),this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:c(function(){return this._hinting?this._hinting:this.outlinesFormat==="truetype"?this._hinting=new mR(this):null},"get")})}c(Pe,"Font");Pe.prototype.hasChar=function(i){return this.encoding.charToGlyphIndex(i)>0};Pe.prototype.charToGlyphIndex=function(i){return this.encoding.charToGlyphIndex(i)};Pe.prototype.charToGlyph=function(i){const e=this.charToGlyphIndex(i);let t=this.glyphs.get(e);return t||(t=this.glyphs.get(0)),t};Pe.prototype.updateFeatures=function(i){return this.defaultRenderOptions.features.map(e=>e.script==="latn"?{script:"latn",tags:e.tags.filter(t=>i[t])}:e)};Pe.prototype.stringToGlyphIndexes=function(i,e){const t=new vS,n=c(r=>this.charToGlyphIndex(r.char),"charToGlyphIndexMod");t.registerModifier("glyphIndex",null,n);let s=e?this.updateFeatures(e.features):this.defaultRenderOptions.features;return t.applyFeatures(this,s),t.getTextGlyphs(i)};Pe.prototype.stringToGlyphs=function(i,e){const t=this.stringToGlyphIndexes(i,e);let n=t.length;const s=new Array(n),r=this.glyphs.get(0);for(let o=0;o<n;o+=1)s[o]=this.glyphs.get(t[o])||r;return s};Pe.prototype.nameToGlyphIndex=function(i){return this.glyphNames.nameToGlyphIndex(i)};Pe.prototype.nameToGlyph=function(i){const e=this.nameToGlyphIndex(i);let t=this.glyphs.get(e);return t||(t=this.glyphs.get(0)),t};Pe.prototype.glyphIndexToName=function(i){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(i):""};Pe.prototype.getKerningValue=function(i,e){i=i.index||i,e=e.index||e;const t=this.position.defaultKerningTables;return t?this.position.getKerningValue(t,i,e):this.kerningPairs[i+","+e]||0};Pe.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]},{script:"thai",tags:["liga","rlig","ccmp"]}],hinting:!1,usePalette:0,drawLayers:!0,drawSVG:!0};Pe.prototype.forEachGlyph=function(i,e,t,n,s,r){e=e!==void 0?e:0,t=t!==void 0?t:0,n=n!==void 0?n:72,s=Object.assign({},this.defaultRenderOptions,s);const o=1/this.unitsPerEm*n,a=this.stringToGlyphs(i,s);let l;if(s.kerning){const A=s.script||this.position.getDefaultScriptName();l=this.position.getKerningTables(A,s.language)}for(let A=0;A<a.length;A+=1){const u=a[A];if(r.call(this,u,e,t,n,s),u.advanceWidth&&(e+=u.advanceWidth*o),s.kerning&&A<a.length-1){const h=l?this.position.getKerningValue(l,u.index,a[A+1].index):this.getKerningValue(u,a[A+1]);e+=h*o}s.letterSpacing?e+=s.letterSpacing*n:s.tracking&&(e+=s.tracking/1e3*n)}return e};Pe.prototype.getPath=function(i,e,t,n,s){s=Object.assign({},this.defaultRenderOptions,s);const r=new or;if(r._layers=[],Qm(this,r),r.stroke){const o=1/(r.unitsPerEm||1e3)*n;r.strokeWidth*=o}return this.forEachGlyph(i,e,t,n,s,(o,a,l,A)=>{const u=o.getPath(a,l,A,s,this);if(s.drawSVG||s.drawLayers){const h=u._layers;if(h&&h.length){for(let d=0;d<h.length;d++){const g=h[d];r._layers.push(g)}return}}r.extend(u)}),r};Pe.prototype.getPaths=function(i,e,t,n,s){s=Object.assign({},this.defaultRenderOptions,s);const r=[];return this.forEachGlyph(i,e,t,n,s,function(o,a,l,A){const u=o.getPath(a,l,A,s,this);r.push(u)}),r};Pe.prototype.getAdvanceWidth=function(i,e,t){return t=Object.assign({},this.defaultRenderOptions,t),this.forEachGlyph(i,0,0,e,t,function(){})};Pe.prototype.draw=function(i,e,t,n,s,r){this.getPath(e,t,n,s,r).draw(i)};Pe.prototype.drawPoints=function(i,e,t,n,s,r){r=Object.assign({},this.defaultRenderOptions,r),this.forEachGlyph(e,t,n,s,r,function(o,a,l,A){o.drawPoints(i,a,l,A,r,this)})};Pe.prototype.drawMetrics=function(i,e,t,n,s,r){r=Object.assign({},this.defaultRenderOptions,r),this.forEachGlyph(e,t,n,s,r,function(o,a,l,A){o.drawMetrics(i,a,l,A)})};Pe.prototype.getEnglishName=function(i){const e=(this.names.unicode||this.names.macintosh||this.names.windows)[i];if(e)return e.en};Pe.prototype.validate=function(){const i=[],e=this;function t(s,r){s||(console.warn(`[opentype.js] ${r}`),i.push(r))}c(t,"assert");function n(s){const r=e.getEnglishName(s);t(r&&r.trim().length>0,"No English "+s+" specified.")}if(c(n,"assertNamePresent"),n("fontFamily"),n("weightName"),n("manufacturer"),n("copyright"),n("version"),t(this.unitsPerEm>0,"No unitsPerEm specified."),this.tables.colr){const s=this.tables.colr.baseGlyphRecords;let r=-1;for(let o=0;o<s.length;o++){const a=s[o].glyphID;if(t(r<s[o].glyphID,`baseGlyphs must be sorted by GlyphID in ascending order, but glyphID ${a} comes after ${r}`),r>s[o].glyphID)break;r=a}}return i};Pe.prototype.toTables=function(){return C2.fontToTable(this)};Pe.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()};Pe.prototype.toArrayBuffer=function(){const e=this.toTables().encode(),t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let s=0;s<e.length;s++)n[s]=e[s];return t};Pe.prototype.download=function(){console.error("DEPRECATED: platform-specific actions are to be implemented on user-side")};Pe.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512};Pe.prototype.macStyleValues={BOLD:1,ITALIC:2,UNDERLINE:4,OUTLINED:8,SHADOW:16,CONDENSED:32,EXTENDED:64};Pe.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9};Pe.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var GS=Pe;function RS(i,e){const t=new te.Parser(i,e),n=t.parseUShort(),s=t.parseUShort();n!==1&&console.warn(`Unsupported hvar table version ${n}.${s}`);const r=[n,s],o=t.parsePointer32(function(){return this.parseItemVariationStore()}),a=t.parsePointer32(function(){return this.parseDeltaSetIndexMap()}),l=t.parsePointer32(function(){return this.parseDeltaSetIndexMap()}),A=t.parsePointer32(function(){return this.parseDeltaSetIndexMap()});return{version:r,itemVariationStore:o,advanceWidth:a,lsb:l,rsb:A}}c(RS,"parseHvarTable");function SS(){console.warn("Writing of hvar tables is not yet supported.")}c(SS,"makeHvarTable");var NS={make:SS,parse:RS},QS=c(function(){return{coverage:this.parsePointer(B.coverage),attachPoints:this.parseList(B.pointer(B.uShortList))}},"attachList"),wS=c(function(){var i=this.parseUShort();if(ge.argument(i===1||i===2||i===3,"Unsupported CaretValue table version."),i===1)return{coordinate:this.parseShort()};if(i===2)return{pointindex:this.parseShort()};if(i===3)return{coordinate:this.parseShort()}},"caretValue"),ZS=c(function(){return this.parseList(B.pointer(wS))},"ligGlyph"),kS=c(function(){return{coverage:this.parsePointer(B.coverage),ligGlyphs:this.parseList(B.pointer(ZS))}},"ligCaretList"),_S=c(function(){return this.parseUShort(),this.parseList(B.pointer(B.coverage))},"markGlyphSets");function YS(i,e){e=e||0;const t=new B(i,e),n=t.parseVersion(1);ge.argument(n===1||n===1.2||n===1.3,"Unsupported GDEF table version.");var s={version:n,classDef:t.parsePointer(B.classDef),attachList:t.parsePointer(QS),ligCaretList:t.parsePointer(kS),markAttachClassDef:t.parsePointer(B.classDef)};return n>=1.2&&(s.markGlyphSets=t.parsePointer(_S)),s}c(YS,"parseGDEFTable");var WS={parse:YS},wn=new Array(10);wn[1]=c(function(){const e=this.offset+this.relativeOffset,t=this.parseUShort();if(t===1)return{posFormat:1,coverage:this.parsePointer(B.coverage),value:this.parseValueRecord()};if(t===2)return{posFormat:2,coverage:this.parsePointer(B.coverage),values:this.parseValueRecordList()};ge.assert(!1,"0x"+e.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},"parseLookup12");wn[2]=c(function(){const e=this.offset+this.relativeOffset,t=this.parseUShort();ge.assert(t===1||t===2,"0x"+e.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");const n=this.parsePointer(B.coverage),s=this.parseUShort(),r=this.parseUShort();if(t===1)return{posFormat:t,coverage:n,valueFormat1:s,valueFormat2:r,pairSets:this.parseList(B.pointer(B.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(s),value2:this.parseValueRecord(r)}})))};if(t===2){const o=this.parsePointer(B.classDef),a=this.parsePointer(B.classDef),l=this.parseUShort(),A=this.parseUShort();return{posFormat:t,coverage:n,valueFormat1:s,valueFormat2:r,classDef1:o,classDef2:a,class1Count:l,class2Count:A,classRecords:this.parseList(l,B.list(A,function(){return{value1:this.parseValueRecord(s),value2:this.parseValueRecord(r)}}))}}},"parseLookup22");wn[3]=c(function(){return{error:"GPOS Lookup 3 not supported"}},"parseLookup32");wn[4]=c(function(){return{error:"GPOS Lookup 4 not supported"}},"parseLookup42");wn[5]=c(function(){return{error:"GPOS Lookup 5 not supported"}},"parseLookup52");wn[6]=c(function(){return{error:"GPOS Lookup 6 not supported"}},"parseLookup62");wn[7]=c(function(){return{error:"GPOS Lookup 7 not supported"}},"parseLookup72");wn[8]=c(function(){return{error:"GPOS Lookup 8 not supported"}},"parseLookup82");wn[9]=c(function(){return{error:"GPOS Lookup 9 not supported"}},"parseLookup9");function DS(i,e){e=e||0;const t=new B(i,e),n=t.parseVersion(1);return ge.argument(n===1||n===1.1,"Unsupported GPOS table version "+n),n===1?{version:n,scripts:t.parseScriptList(),features:t.parseFeatureList(),lookups:t.parseLookupList(wn)}:{version:n,scripts:t.parseScriptList(),features:t.parseFeatureList(),lookups:t.parseLookupList(wn),variations:t.parseFeatureVariationsList()}}c(DS,"parseGposTable");var TS=new Array(10);function FS(i){return new x.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new x.ScriptList(i.scripts)},{name:"features",type:"TABLE",value:new x.FeatureList(i.features)},{name:"lookups",type:"TABLE",value:new x.LookupList(i.lookups,TS)}])}c(FS,"makeGposTable");var xS={parse:DS,make:FS};function LS(i){const e={};i.skip("uShort");const t=i.parseUShort();ge.argument(t===0,"Unsupported kern sub-table version."),i.skip("uShort",2);const n=i.parseUShort();i.skip("uShort",3);for(let s=0;s<n;s+=1){const r=i.parseUShort(),o=i.parseUShort(),a=i.parseShort();e[r+","+o]=a}return e}c(LS,"parseWindowsKernTable");function MS(i){const e={};i.skip("uShort"),i.parseULong()>1&&console.warn("Only the first kern subtable is supported."),i.skip("uLong");const s=i.parseUShort()&255;if(i.skip("uShort"),s===0){const r=i.parseUShort();i.skip("uShort",3);for(let o=0;o<r;o+=1){const a=i.parseUShort(),l=i.parseUShort(),A=i.parseShort();e[a+","+l]=A}}return e}c(MS,"parseMacKernTable");function VS(i,e){const t=new te.Parser(i,e),n=t.parseUShort();if(n===0)return LS(t);if(n===1)return MS(t);throw new Error("Unsupported kern table version ("+n+").")}c(VS,"parseKernTable");var OS={parse:VS};function PS(i,e,t,n){const s=new te.Parser(i,e),r=n?s.parseUShort:s.parseULong,o=[];for(let a=0;a<t+1;a+=1){let l=r.call(s);n&&(l*=2),o.push(l)}return o}c(PS,"parseLocaTable");var HS={parse:PS};function Mg(i,e){const t=[];let n=12;for(let s=0;s<e;s+=1){const r=te.getTag(i,n),o=te.getULong(i,n+4),a=te.getULong(i,n+8),l=te.getULong(i,n+12);t.push({tag:r,checksum:o,offset:a,length:l,compression:!1}),n+=16}return t}c(Mg,"parseOpenTypeTableEntries");function lC(i,e){const t=[];let n=44;for(let s=0;s<e;s+=1){const r=te.getTag(i,n),o=te.getULong(i,n+4),a=te.getULong(i,n+8),l=te.getULong(i,n+12),A=te.getULong(i,n+16);let u;a<l?u="WOFF":u=!1,t.push({tag:r,offset:o,compression:u,compressedLength:a,length:l,checksum:A}),n+=20}return t}c(lC,"parseWOFFTableEntries");function Ye(i,e){if(e.compression==="WOFF"){const t=new Uint8Array(i.buffer,e.offset+2,e.compressedLength-2),n=new Uint8Array(e.length);if(cm(t,n),n.byteLength!==e.length)throw new Error("Decompression error: "+e.tag+" decompressed length doesn't match recorded length");return{data:new DataView(n.buffer,0),offset:0}}else return{data:i,offset:e.offset}}c(Ye,"uncompressTable");function XS(i,e={}){let t,n;const s=new GS({empty:!0});i.constructor!==ArrayBuffer&&(i=new Uint8Array(i).buffer);const r=new DataView(i,0);let o,a=[];const l=te.getTag(r,0);if(l==="\0\0\0"||l==="true"||l==="typ1")s.outlinesFormat="truetype",o=te.getUShort(r,4),a=Mg(r,o);else if(l==="OTTO")s.outlinesFormat="cff",o=te.getUShort(r,4),a=Mg(r,o);else if(l==="wOFF"){const H=te.getTag(r,4);if(H==="\0\0\0")s.outlinesFormat="truetype";else if(H==="OTTO")s.outlinesFormat="cff";else throw new Error("Unsupported OpenType flavor "+l);o=te.getUShort(r,12),a=lC(r,o)}else if(l==="wOF2"){var A="https://github.com/opentypejs/opentype.js/issues/183#issuecomment-1147228025";throw new Error("WOFF2 require an external decompressor library, see examples at: "+A)}else throw new Error("Unsupported OpenType signature "+l);let u,h,d,g,p,f,m,y,v,G,R,Q,S,M,V,K,j,Ce;for(let H=0;H<o;H+=1){const Ae=a[H];let ne;switch(Ae.tag){case"avar":m=Ae;break;case"cmap":ne=Ye(r,Ae),s.tables.cmap=Im.parse(ne.data,ne.offset),s.encoding=new bm(s.tables.cmap);break;case"cvt ":ne=Ye(r,Ae),Ce=new te.Parser(ne.data,ne.offset),s.tables.cvt=Ce.parseShortList(Ae.length/2);break;case"fvar":d=Ae;break;case"STAT":g=Ae;break;case"gvar":p=Ae;break;case"cvar":f=Ae;break;case"fpgm":ne=Ye(r,Ae),Ce=new te.Parser(ne.data,ne.offset),s.tables.fpgm=Ce.parseByteList(Ae.length);break;case"head":ne=Ye(r,Ae),s.tables.head=km.parse(ne.data,ne.offset),s.unitsPerEm=s.tables.head.unitsPerEm,t=s.tables.head.indexToLocFormat;break;case"hhea":ne=Ye(r,Ae),s.tables.hhea=_m.parse(ne.data,ne.offset),s.ascender=s.tables.hhea.ascender,s.descender=s.tables.hhea.descender,s.numberOfHMetrics=s.tables.hhea.numberOfHMetrics;break;case"HVAR":S=Ae;break;case"hmtx":Q=Ae;break;case"ltag":ne=Ye(r,Ae),n=Wm.parse(ne.data,ne.offset);break;case"COLR":ne=Ye(r,Ae),s.tables.colr=Lm.parse(ne.data,ne.offset);break;case"CPAL":ne=Ye(r,Ae),s.tables.cpal=Gm.parse(ne.data,ne.offset);break;case"maxp":ne=Ye(r,Ae),s.tables.maxp=Dm.parse(ne.data,ne.offset),s.numGlyphs=s.tables.maxp.numGlyphs;break;case"name":K=Ae;break;case"OS/2":ne=Ye(r,Ae),s.tables.os2=au.parse(ne.data,ne.offset);break;case"post":ne=Ye(r,Ae),s.tables.post=Tm.parse(ne.data,ne.offset),s.glyphNames=new ch(s.tables.post);break;case"prep":ne=Ye(r,Ae),Ce=new te.Parser(ne.data,ne.offset),s.tables.prep=Ce.parseByteList(Ae.length);break;case"glyf":y=Ae;break;case"loca":V=Ae;break;case"CFF ":u=Ae;break;case"CFF2":h=Ae;break;case"kern":M=Ae;break;case"GDEF":v=Ae;break;case"GPOS":G=Ae;break;case"GSUB":R=Ae;break;case"meta":j=Ae;break;case"gasp":try{ne=Ye(r,Ae),s.tables.gasp=Xm.parse(ne.data,ne.offset)}catch(De){console.warn("Failed to parse gasp table, skipping."),console.warn(De)}break;case"SVG ":ne=Ye(r,Ae),s.tables.svg=zm.parse(ne.data,ne.offset);break}}const Ge=Ye(r,K);if(s.tables.name=Cm.parse(Ge.data,Ge.offset,n),s.names=s.tables.name,y&&V){const H=t===0,Ae=Ye(r,V),ne=HS.parse(Ae.data,Ae.offset,s.numGlyphs,H),De=Ye(r,y);s.glyphs=eC.parse(De.data,De.offset,ne,s,e)}else if(u){const H=Ye(r,u);ru.parse(H.data,H.offset,s,e)}else if(h){const H=Ye(r,h);ru.parse(H.data,H.offset,s,e)}else throw new Error("Font doesn't contain TrueType, CFF or CFF2 outlines.");const Ie=Ye(r,Q);if(Ym.parse(s,Ie.data,Ie.offset,s.numberOfHMetrics,s.numGlyphs,s.glyphs,e),VB(s,e),M){const H=Ye(r,M);s.kerningPairs=OS.parse(H.data,H.offset)}else s.kerningPairs={};if(v){const H=Ye(r,v);s.tables.gdef=WS.parse(H.data,H.offset)}if(G){const H=Ye(r,G);s.tables.gpos=xS.parse(H.data,H.offset),s.position.init()}if(R){const H=Ye(r,R);s.tables.gsub=Fm.parse(H.data,H.offset);for(const Ae in s.tables.gsub.features){if(!Object.hasOwn(s.tables.gsub.features,Ae))continue;const{tag:ne,feature:De}=s.tables.gsub.features[Ae];if(ne.match(/ss(?:0[1-9]|1\d|20)/)){const{uiNameId:O}=De.featureParamsTable;for(const[L,T]of Object.entries(s.tables.name))O in T&&(De.uiName||(De.uiName={}),De.uiName[L]=T[O])}else if(ne.match(/cv(?:0[1-9]|[1-9]\d)/)){const{featUiLabelNameId:O}=De.featureParamsTable;for(const[L,T]of Object.entries(s.tables.name))O in T&&(De.featUiLabelName||(De.featUiLabelName={}),De.featUiLabelName[L]=T[O])}}}if(d){const H=Ye(r,d);s.tables.fvar=Mm.parse(H.data,H.offset,s.names)}if(g){const H=Ye(r,g);s.tables.stat=Vm.parse(H.data,H.offset,s.tables.fvar)}if(p){d||console.warn("This font provides a gvar table, but no fvar table, which is required for variable fonts."),y||console.warn("This font provides a gvar table, but no glyf table. Glyph variation only works with TrueType outlines.");const H=Ye(r,p);s.tables.gvar=Hm.parse(H.data,H.offset,s.tables.fvar,s.glyphs)}if(f){d||console.warn("This font provides a cvar table, but no fvar table, which is required for variable fonts."),s.tables.cvt||console.warn("This font provides a cvar table, but no cvt table which could be made variable."),y||console.warn("This font provides a gvar table, but no glyf table. Glyph variation only works with TrueType outlines.");const H=Ye(r,f);s.tables.cvar=Pm.parse(H.data,H.offset,s.tables.fvar,s.tables.cvt||[])}if(m){d||console.warn("This font provides an avar table, but no fvar table, which is required for variable fonts.");const H=Ye(r,m);s.tables.avar=Om.parse(H.data,H.offset,s.tables.fvar)}if(S){d||console.warn("This font provides an HVAR table, but no fvar table, which is required for variable fonts."),Q||console.warn("This font provides an HVAR table, but no hmtx table to vary.");const H=Ye(r,S);s.tables.hvar=NS.parse(H.data,H.offset,s.tables.fvar)}if(j){const H=Ye(r,j);s.tables.meta=xm.parse(H.data,H.offset),s.metas=s.tables.meta}return s.palettes=new jm(s),s}c(XS,"parseBuffer");function zS(i){i.constructor!==ArrayBuffer&&(i=new Uint8Array(i).buffer);const e=new DataView(i,0),t=[],n=te.getTag(e,0);if(n!=="wOFF")throw new Error(`TYPE ERROR signature must be wOFF but is: "${n}"`);const s=te.getTag(e,4),r=te.getUShort(e,12),o=lC(e,r),a=[];for(let f=0;f<64&&!(Math.pow(2,f)>r);f++)a.splice(0,1/0,f,2**f);const l=a[1]*16,A=a[0],u=r*16-l;t.push(...X.TAG(s),...X.USHORT(r),...X.USHORT(l),...X.USHORT(A),...X.USHORT(u));let h=t.length+r*16;for(let f=0;f<r;f++){const m=o[f];t.push(...X.TAG(m.tag),...X.ULONG(m.checksum),...X.ULONG(h),...X.ULONG(m.length)),m.outOffset=h,h+=m.length,h%4!==0&&(h+=4-h%4)}const d=new Uint8Array(t.length),g=[d];for(let f=0,m=t.length;f<m;f++)d[f]=t[f];for(let f=0;f<r;f++){const m=o[f],y=Ye(e,m),v=m.outOffset+m.length,G=v%4!==0?4-v%4:0;g.push(new Uint8Array(y.data.buffer,y.offset,m.length),new Uint8Array(G))}const p=new Uint8Array(g.reduce((f,m)=>f+m.byteLength,0));return g.reduce((f,m)=>(p.set(m,f),f+m.byteLength),0),p.buffer}c(zS,"woffToOTF");var JS=function(){var i=import.meta.url;return function(t){t=t||{};var t=typeof t<"u"?t:{},n,s;t.ready=new Promise(function(C,I){n=C,s=I});var r={},o;for(o in t)t.hasOwnProperty(o)&&(r[o]=t[o]);var a=typeof window=="object",l=typeof importScripts=="function",A=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",u="";function h(C){return t.locateFile?t.locateFile(C,u):u+C}c(h,"locateFile");var d,g,p,f,m;A?(l?u=require("path").dirname(u)+"/":u=__dirname+"/",d=c(function(I,E){var N=xs(I);return N?E?N:N.toString():(f||(f=require("fs")),m||(m=require("path")),I=m.normalize(I),f.readFileSync(I,E?null:"utf8"))},"shell_read"),p=c(function(I){var E=d(I,!0);return E.buffer||(E=new Uint8Array(E)),Q(E.buffer),E},"readBinary"),g=c(function(I,E,N){var F=xs(I);F&&E(F),f||(f=require("fs")),m||(m=require("path")),I=m.normalize(I),f.readFile(I,function(U,$){U?N(U):E($.buffer)})},"readAsync"),process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(C){if(!(C instanceof j0))throw C}),process.on("unhandledRejection",function(C){throw C}),t.inspect=function(){return"[Emscripten Module object]"}):(a||l)&&(l?u=self.location.href:typeof document<"u"&&document.currentScript&&(u=document.currentScript.src),i&&(u=i),u.indexOf("blob:")!==0?u=u.substr(0,u.replace(/[?#].*/,"").lastIndexOf("/")+1):u="",d=c(function(C){try{var I=new XMLHttpRequest;return I.open("GET",C,!1),I.send(null),I.responseText}catch(N){var E=xs(C);if(E)return z0(E);throw N}},"read_"),l&&(p=c(function(C){try{var I=new XMLHttpRequest;return I.open("GET",C,!1),I.responseType="arraybuffer",I.send(null),new Uint8Array(I.response)}catch(N){var E=xs(C);if(E)return E;throw N}},"readBinary")),g=c(function(C,I,E){var N=new XMLHttpRequest;N.open("GET",C,!0),N.responseType="arraybuffer",N.onload=function(){if(N.status==200||N.status==0&&N.response){I(N.response);return}var F=xs(C);if(F){I(F.buffer);return}E()},N.onerror=E,N.send(null)},"readAsync")),t.print||console.log.bind(console);var y=t.printErr||console.warn.bind(console);for(o in r)r.hasOwnProperty(o)&&(t[o]=r[o]);r=null,t.arguments&&t.arguments,t.thisProgram&&t.thisProgram,t.quit&&t.quit;var v;t.wasmBinary&&(v=t.wasmBinary),t.noExitRuntime,typeof WebAssembly!="object"&&ji("no native wasm support detected");var G,R=!1;function Q(C,I){C||ji("Assertion failed: "+I)}c(Q,"assert");var S=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function M(C,I,E){for(var N=I+E,F=I;C[F]&&!(F>=N);)++F;if(F-I>16&&C.subarray&&S)return S.decode(C.subarray(I,F));for(var U="";I<F;){var $=C[I++];if(!($&128)){U+=String.fromCharCode($);continue}var _=C[I++]&63;if(($&224)==192){U+=String.fromCharCode(($&31)<<6|_);continue}var Ee=C[I++]&63;if(($&240)==224?$=($&15)<<12|_<<6|Ee:$=($&7)<<18|_<<12|Ee<<6|C[I++]&63,$<65536)U+=String.fromCharCode($);else{var Qe=$-65536;U+=String.fromCharCode(55296|Qe>>10,56320|Qe&1023)}}return U}c(M,"UTF8ArrayToString");function V(C,I){return C?M(W,C,I):""}c(V,"UTF8ToString");function K(C,I,E,N){if(!(N>0))return 0;for(var F=E,U=E+N-1,$=0;$<C.length;++$){var _=C.charCodeAt($);if(_>=55296&&_<=57343){var Ee=C.charCodeAt(++$);_=65536+((_&1023)<<10)|Ee&1023}if(_<=127){if(E>=U)break;I[E++]=_}else if(_<=2047){if(E+1>=U)break;I[E++]=192|_>>6,I[E++]=128|_&63}else if(_<=65535){if(E+2>=U)break;I[E++]=224|_>>12,I[E++]=128|_>>6&63,I[E++]=128|_&63}else{if(E+3>=U)break;I[E++]=240|_>>18,I[E++]=128|_>>12&63,I[E++]=128|_>>6&63,I[E++]=128|_&63}}return I[E]=0,E-F}c(K,"stringToUTF8Array");function j(C,I,E){return K(C,W,I,E)}c(j,"stringToUTF8");function Ce(C){for(var I=0,E=0;E<C.length;++E){var N=C.charCodeAt(E);N>=55296&&N<=57343&&(N=65536+((N&1023)<<10)|C.charCodeAt(++E)&1023),N<=127?++I:N<=2047?I+=2:N<=65535?I+=3:I+=4}return I}c(Ce,"lengthBytesUTF8");var Ge=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function Ie(C,I){for(var E=C,N=E>>1,F=N+I/2;!(N>=F)&&ie[N];)++N;if(E=N<<1,E-C>32&&Ge)return Ge.decode(W.subarray(C,E));for(var U="",$=0;!($>=I/2);++$){var _=z[C+$*2>>1];if(_==0)break;U+=String.fromCharCode(_)}return U}c(Ie,"UTF16ToString");function H(C,I,E){if(E===void 0&&(E=2147483647),E<2)return 0;E-=2;for(var N=I,F=E<C.length*2?E/2:C.length,U=0;U<F;++U){var $=C.charCodeAt(U);z[I>>1]=$,I+=2}return z[I>>1]=0,I-N}c(H,"stringToUTF16");function Ae(C){return C.length*2}c(Ae,"lengthBytesUTF16");function ne(C,I){for(var E=0,N="";!(E>=I/4);){var F=ee[C+E*4>>2];if(F==0)break;if(++E,F>=65536){var U=F-65536;N+=String.fromCharCode(55296|U>>10,56320|U&1023)}else N+=String.fromCharCode(F)}return N}c(ne,"UTF32ToString");function De(C,I,E){if(E===void 0&&(E=2147483647),E<4)return 0;for(var N=I,F=N+E-4,U=0;U<C.length;++U){var $=C.charCodeAt(U);if($>=55296&&$<=57343){var _=C.charCodeAt(++U);$=65536+(($&1023)<<10)|_&1023}if(ee[I>>2]=$,I+=4,I+4>F)break}return ee[I>>2]=0,I-N}c(De,"stringToUTF32");function O(C){for(var I=0,E=0;E<C.length;++E){var N=C.charCodeAt(E);N>=55296&&N<=57343&&++E,I+=4}return I}c(O,"lengthBytesUTF32");function L(C,I){return C%I>0&&(C+=I-C%I),C}c(L,"alignUp");var T,he,W,z,ie,ee,J,ve,Re;function We(C){T=C,t.HEAP8=he=new Int8Array(C),t.HEAP16=z=new Int16Array(C),t.HEAP32=ee=new Int32Array(C),t.HEAPU8=W=new Uint8Array(C),t.HEAPU16=ie=new Uint16Array(C),t.HEAPU32=J=new Uint32Array(C),t.HEAPF32=ve=new Float32Array(C),t.HEAPF64=Re=new Float64Array(C)}c(We,"updateGlobalBufferAndViews"),t.INITIAL_MEMORY;var He,Ke=[],$e=[],et=[];function nt(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)pt(t.preRun.shift());b(Ke)}c(nt,"preRun");function Ct(){b($e)}c(Ct,"initRuntime");function ct(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)At(t.postRun.shift());b(et)}c(ct,"postRun");function pt(C){Ke.unshift(C)}c(pt,"addOnPreRun");function It(C){$e.unshift(C)}c(It,"addOnInit");function At(C){et.unshift(C)}c(At,"addOnPostRun");var Xt=0,zt=null;function jn(C){Xt++,t.monitorRunDependencies&&t.monitorRunDependencies(Xt)}c(jn,"addRunDependency");function Dt(C){if(Xt--,t.monitorRunDependencies&&t.monitorRunDependencies(Xt),Xt==0&&zt){var I=zt;zt=null,I()}}c(Dt,"removeRunDependency"),t.preloadedImages={},t.preloadedAudios={};function ji(C){t.onAbort&&t.onAbort(C),C="Aborted("+C+")",y(C),R=!0,C+=". Build with -s ASSERTIONS=1 for more info.";var I=new WebAssembly.RuntimeError(C);throw s(I),I}c(ji,"abort");var Qr="data:application/octet-stream;base64,";function ue(C){return C.startsWith(Qr)}c(ue,"isDataURI");function wr(C){return C.startsWith("file://")}c(wr,"isFileURI");var St;St="data:application/octet-stream;base64,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IAApAgA3AwAgACABKQIYNwIYIAAgASkCEDcCECAAIAEpAgg3AgggACABKQIANwIAIAEgBCkDGDcCGCABIAQpAxA3AhAgASAEKQMINwIIIAEgBCkDADcCAEEBIAIoAgAgASgCAE8NARogBCABKQIYNwMYIAQgASkCEDcDECAEIAEpAgg3AwggBCABKQIANwMAIAEgAikCGDcCGCABIAIpAhA3AhAgASACKQIINwIIIAEgAikCADcCACACIAQpAxg3AhggAiAEKQMQNwIQIAIgBCkDCDcCCCACIAQpAwA3AgALQQILIQUgAygCACACKAIASQR/IAQgAikCGDcDGCAEIAIpAhA3AxAgBCACKQIINwMIIAQgAikCADcDACACIAMpAhg3AhggAiADKQIQNwIQIAIgAykCCDcCCCACIAMpAgA3AgAgAyAEKQMYNwIYIAMgBCkDEDcCECADIAQpAwg3AgggAyAEKQMANwIAIAIoAgAgASgCAE8EQCAFQQFqDwsgBCABKQIYNwMYIAQgASkCEDcDECAEIAEpAgg3AwggBCABKQIANwMAIAEgAikCGDcCGCABIAIpAhA3AhAgASACKQIINwIIIAEgAikCADcCACACIAQpAxg3AhggAiAEKQMQNwIQIAIgBCkDCDcCCCACIAQpAwA3AgAgASgCACAAKAIATwRAIAVBAmoPCyAEIAApAhg3AxggBCAAKQIQNwMQIAQgACkCCDcDCCAEIAApAgA3AwAgACABKQIYNwIYIAAgASkCEDcCECAAIAEpAgg3AgggACABKQIANwIAIAEgBCkDGDcCGCABIAQpAxA3AhAgASAEKQMINwIIIAEgBCkDADcCACAFQQNqBSAFCwsdACABBEAgACABKAIAECAgACABKAIEECAgARASCwubBAEDfyABIAAgAUYiAjoADAJAIAINAANAIAEoAggiAi0ADA0BAkACfyACIAIoAggiAygCACIERgRAAkAgAygCBCIERQ0AIAQtAAwNAAwDCwJAIAEgAigCAEYEQCACIQEMAQsgAiACKAIEIgEoAgAiADYCBCABIAAEfyAAIAI2AgggAigCCAUgAws2AgggAigCCCIAIAAoAgAgAkdBAnRqIAE2AgAgASACNgIAIAIgATYCCCABKAIIIQMLIAFBAToADCADQQA6AAwgAyADKAIAIgAoAgQiATYC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AUcNAiADQQFGDQEMAgsgASACRgRAIAAoAhgiAkECRgRAIAAgAzYCGCADIQILIAAoAjBBAUcNAiACQQFGDQEMAgsgACAAKAIkQQFqNgIkCyAAQQE6ADYLC10BAX8gACgCECIDRQRAIABBATYCJCAAIAI2AhggACABNgIQDwsCQCABIANGBEAgACgCGEECRw0BIAAgAjYCGA8LIABBAToANiAAQQI2AhggACAAKAIkQQFqNgIkCwuIJwEIfyMAQSBrIgMkAANAIAFBIGshBgNAAkACQAJAAkACQAJAIAEgAGsiBEEFdSIFDgYFBQABAgMECyABQSBrIgEoAgAgACgCAE8NBCADIABBGGopAgA3AxggAyAAQRBqKQIANwMQIAMgAEEIaikCADcDCCADIAApAgA3AwAgACABKQIYNwIYIAAgASkCEDcCECAAIAEpAgg3AgggACABKQIANwIAIAEgAykDGDcCGCABIAMpAxA3AhAgASADKQMINwIIIAEgAykDADcCAAwECyAAQSBqIQQgAUEgayIFKAIAIQIgACgCICIBIAAoAgBPBEAgASACTQ0EIAMgBCkCGDcDGCADIAQpAhA3AxAgAyAEKQIINwMIIAMgBCkCADcDACAEIAUpAhg3AhggBCAFKQIQNwIQIAQgBSkCCDcCCCAEIAUpAgA3AgAgBSADKQMYNwIYIAUgAykDEDcCECAFIAMpAwg3AgggBSADKQMANwIAIAAoAiAgACgCAE8NBCADIABBGGopAgA3AxggAyAAQRBqKQIANwMQIAMgAEEIaikCADcDCCADIAApAgA3AwAgACAEKQIYNwIYIAAgBCkCEDcCECAAIAQpAgg3AgggACAEKQIANwIAIAQgAykDGDcCGCAEIAMpAxA3AhAgBCADKQMINwIIIAQgAykDADcCAAwECyABIAJLBEAgAyAAQRhqKQIANwMYIAMgAEEQaikCADcDECADIABBCGopAgA3AwggAyAAKQIANwMAIAAgBSkCGDcCGCAAIAUpAhA3AhAgACAFKQIINwIIIAAgBSkCADcCACAFIAMpAxg3AhggBSADKQMQNwIQIAUgAykDCDcCCCAFIAMpAwA3AgAMBAsgAyAAQRhqKQIANwMYIAMgAEEQaikCADcDECADIABBCGopAgA3AwggAyAAKQIANwMAIAAgBCkCGDcCGCAAIAQp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IAMpAxA3AhAgByADKQMINwIIIAcgAykDADcCAAwBCyAEIAVJBEAgAyAAQRhqKQIANwMYIAMgAEEQaikCADcDECADIABBCGopAgA3AwggAyAAKQIANwMAIAAgBikCGDcCGCAAIAYpAhA3AhAgACAGKQIINwIIIAAgBikCADcCACAGIAMpAxg3AhggBiADKQMQNwIQIAYgAykDCDcCCCAGIAMpAwA3AgBBASEKDAILIAMgAEEYaikCADcDGCADIABBEGopAgA3AxAgAyAAQQhqKQIANwMIIAMgACkCADcDACAAIAciBEEYaikCADcCGCAAIAQiBUEQaikCADcCECAAIARBCGopAgA3AgggACAEKQIANwIAIAQgAykDGDcCGCAEIAMpAxA3AhAgBCADKQMINwIIIAQgAykDADcCAEEBIQogBigCACAEKAIATw0BIAMgBCkCGDcDGCADIAUpAhA3AxAgAyAHKQIINwMIIAMgBykCADcDACAEIAYpAhg3AhggBSAGKQIQNwIQIAcgBikCCDcCCCAHIAYpAgA3AgAgBiADKQMYNwIYIAYgAykDEDcCECAGIAMpAwg3AgggBiADKQMANwIAC0ECIQoLIAYhBQJ/AkACQCAAKAIAIgggBygCACIESQRADAELA0AgBUEgayIFIABGBEAgAEEgaiEEIAggBigCAEkNAyAEIAZGDQUDQCAEKAIAIAhLBEAgAyAEQRhqKQIANwMYIAMgBEEQaikCADcDECADIARBCGopAgA3AwggAyAEKQIANwMAIAQgBikCGDcCGCAEIAYpAhA3AhAgBCAGKQIINwIIIAQgBikCADcCACAGIAMpAxg3AhggBiADKQMQNwIQIAYgAykDCDcCCCAGIAMpAwA3AgAgBEEgaiEEDAULIAYgBEEgaiIERw0ACwwFCyAFKAIAIARPDQALIAMgAEEYaikCADcDGCADIABBEGopAgA3AxAgAyAAQQhqKQIANwMIIAMgACkCADcDACAAIAVBGGopAgA3AhggACAFQRBqKQIANwIQIAAgBUEIaikCADcCCCAAIAUpAgA3AgAgBSADKQMYNwIYIAUgAykDEDcCECAFIAMpAwg3AgggBSADKQMANwIAIApBAWohCgsgBSAAQSBqIgRLBEADfyAHKAIAIQkDQCAEIghBIGohBCAIKAIAIAlJDQALA0AgBUEg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IAECfyACQf8AcSIBIAJBgAFxRQ0AGiAEQQJqIgIgBUsNASADIAZqLQAAIQMgACACNgIIIANB/wBxIAFBB3RyIgEgA0GAAXFFDQAaIARBA2oiAyAFSw0BIAIgBmotAAAhAiAAIAM2AgggAkH/AHEgAUEHdHIiASACQYABcUUNABogBEEEaiICIAVLDQEgAyAGai0AACEDIAAgAjYCCCADQf8AcSABQQd0ciIBIANBgAFxRQ0AGiAFIARBBWoiBUkNASACIAZqLQAAIQQgACAFNgIIIAFB////D0sNASAEQYABcQ0BIARB/wBxIAFBB3RyCzYCAEEBIQcLIAcL1RIBB38jAEEgayICJABBASEGAkACQAJAAkACQAJAIAEgAGtBBXUOBgUFAAECAwQLIAFBIGsiASgCACAAKAIATw0EIAIgACkCGDcDGCACIAApAhA3AxAgAiAAKQIINwMIIAIgACkCADcDACAAIAEpAhg3AhggACABKQIQNwIQIAAgASkCCDcCCCAAIAEpAgA3AgAgASACKQMYNwIYIAEgAikDEDcCECABIAIpAwg3AgggASACKQMANwIADAQLIAFBIGsiASgCACEDIAAoAiAiBSAAKAIATwRAIAMgBU8NBCACIAApAjg3AxggAiAAKQIwNwMQIAIgACkCKDcDCCACIAApAiA3AwAgACABKQIYNwI4IAAgASkCEDcCMCAAIAEpAgg3AiggACABKQIANwIgIAEgAikDGDcCGCABIAIpAxA3AhAgASACKQMINwIIIAEgAikDADcCACAAKAIgIAAoAgBPDQQgAiAAKQIYNwMYIAIgACkCEDcDECACIAApAgg3AwggAiAAKQIANwMAIAAgACkCODcCGCAAIAApAjA3AhAgACAAKQIoNwIIIAAgACkCIDcCACAAIAIpAxg3AjggACACKQMQNwIwIAAgAikDCDcCKCAAIAIpAwA3AiAMBAsgAyAFSQRAIAIgACkCGDcDGCACIAApAhA3AxAgAiAAKQIINwMIIAIgACkCADcDACAAIAEpAhg3AhggACABKQIQNwIQIAAgASkCCDcCCCAAIAEpAgA3AgAgASACKQMYNwIYIAEgAikDEDcCECABIAIpAwg3AgggASACKQMANwIADAQLIAIgACkCGDcDGCACIAApAhA3AxAgAiAAKQIINwMIIAIgACkCADcDACAAIAApAjg3AhggACAAKQIwNwIQIAAgACkCKDcCCCAAIAApAiA3AgAgACACKQMYNwI4IAAgAikDEDcCMCAAIAIpAwg3AiggACACKQMANwIgIAEoAgAgACgCIE8NAyACIAApAjg3AxggAiAAKQIwNwMQIAIgACkCKDcDCCACIAApAiA3AwAgACABKQIYNwI4IAAgASkCEDcCMCAAIAEpAgg3AiggACABKQIANwIgIAEgAikDGDcCGCABIAIpAxA3AhAgASACKQMINwIIIAEgAikDADcCAAwDCyAAIABBIGogAEFAayABQSBrEB8aDAILIAAgAEEgaiAAQUBrIgMgAEHgAGoQHxogAUEgayIBKAIAIAAoAmBPDQEgAiAAKQJ4NwMYIAIgACkCcDcDECACIAApAmg3AwggAiAAKQJgNwMAIAAgASkCGDcCeCAAIAEpAhA3AnAgACABKQIINwJoIAAgASkCADcCYCABIAIpAxg3AhggASACKQMQNwIQIAEgAikDCDcCCCABIAIpAwA3AgAgACgCYCADKAIATw0BIAIgAykCGDcDGCACIAMpAhA3AxAgAiADKQIINwMIIAIgAykCADcDACADIAApAng3AhggAyAAKQJwNwIQIAMgACkCaDcCCCADIAApAmA3AgAgACACKQMYNwJ4IAAgAikDEDcCcCAAIAIpAwg3AmggACACKQMANwJgIAMoAgAgACgCIE8NASACIAApAjg3AxggAiAAKQIwNwMQIAIgACkCKDcDCCACIAApAiA3AwAgACADKQIYNwI4IAAgAykCEDcCMCAAIAMpAgg3AiggACADKQIANwIgIAMgAikDGDcCGCADIAIpAxA3AhAgAyACKQMINwIIIAMgAikDADcCACAAKAIgIAAoAgBPDQEgAiAAKQIYNwMYIAIgACkCEDcDECACIAApAgg3AwggAiAAKQIANwMAIAAgACkCODcCGCAAIAApAjA3AhAgACAAKQIoNwIIIAAgACkCIDcCACAAIAIpAxg3AjggACACKQMQNwIwIAAgAikDCDcCKCAAIAIpAwA3AiAMAQsgAEFAayEEIAAoAkAhAwJAIAAoAiAiBSAAKAIAIgdPBEAgAyAFTw0BIAIgACkCODcDGCACIAApAjA3AxAgAiAAKQIoNwMIIAIgACkCIDcDACAAIAQpAhg3AjggACAEKQIQ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IABBCXY6AAQgAUH//wNxIQJBACEAA0AgAiAAIgFBAWoiAHYNAAsgAyABOgAJIAMgAUEIdjoACCADQRAgAXQiADoAByADIABBCHY6AAYgAyACQQR0IABB8P8DcWsiADoACyADIABBCHY6AAogC0EMaiELIBYoAgwiIiAWKAIQIhdHBEADQCAIKAI4ICIvAQBBBXRqKAIAIQMCQCAIKAJUIBVBBXRqIgdBGGoiASgCACIABEAgB0EYaiEBA0ACQCAAKAIQIgIgA0sEQCAAKAIAIgINASAAIQEMBAsgAiADTw0DIABBBGohASAAKAIEIgJFDQMgASEACyAAIQEgAiEADAALAAsgASEACyABKAIAIg1FBEBBGBATIg0gAzYCECANIAA2AgggDUIANwIAIA1BADYCFCABIA02AgAgBygCFCgCACIABH8gByAANgIUIAEoAgAFIA0LIgYgBiAHKAIYIhlGIgA6AAwCQCAADQADQCAGKAIIIgEtAAwNAQJAAkAgASABKAIIIgAoAgAiAkYEQAJAIAAoAgQiAkUNACACLQAMDQAMAwsCQCAGIAEoAgBGBEAgASECDAELIAEgASgCBCICKAIAIgY2AgQgAiAGBH8gBiABNgIIIAEoAggFIAALNgIIIAEoAggiACAAKAIAIAFHQQJ0aiACNgIAIAIgATYCACABIAI2AgggAigCCCEACyACQQE6AAwgAEEAOgAMIAAgACgCACIBKAIEIgI2AgAgAgRAIAIgADYCCAsgASAAKAIINgIIIAAoAggiAiACKAIAIABHQQJ0aiABNgIAIAEgADYCBAwBCwJAIAJFDQAgAi0ADA0ADAILAkAgBiABKAIARwRAIAEhBgwBCyABIAYoAgQiAjYCACAGIAIEfyACIAE2AgggASgCCAUgAAs2AgggASgCCCIAIAAoAgAgAUdBAnRqIAY2AgAgBiABNgIEIAEgBjYCCCAGKAIIIQALIAZBAToADCAAQQA6AAwgACAAKAIEIgEoAgAiAjYCBCACBEAgAiAANgIICyABIAAoAgg2AgggACgCCCICIAIoAgAgAEdBAnRqIAE2AgAgASAANgIACyAAIAE2AggMAgsgAUEBOgAMIAAgACAZRiIBOgAMIAJBAToADCAAIQYgAUUNAAsLIAcgBygCHEEBajYCHAsgDSALNgIUIAsgDGoiAEEANgAM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bW9yeV92aWV3PGludDE2X3Q+AGVtc2NyaXB0ZW46Om1lbW9yeV92aWV3PHVpbnQzMl90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxpbnQzMl90PgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxjaGFyPgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzx1bnNpZ25lZCBjaGFyPgBzdGQ6OmJhc2ljX3N0cmluZzx1bnNpZ25lZCBjaGFyPgBlbXNjcmlwdGVuOjptZW1vcnlfdmlldzxzaWduZWQgY2hhcj4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8bG9uZz4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8dW5zaWduZWQgbG9uZz4AZW1zY3JpcHRlbjo6bWVtb3J5X3ZpZXc8ZG91YmxlPgBOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0loRUUAmBECAHEHAAC0BwAALAgAAE4xMGVtc2NyaXB0ZW4zdmFsRQAAmBECAKAHAABOU3QzX18yMTJiYXNpY19zdHJpbmdJY05TXzExY2hhcl90cmFpdHNJY0VFTlNfOWFsbG9jYXRvckljRUVFRQBOU3QzX18yMjFfX2Jhc2ljX3N0cmluZ19jb21tb25JTGIxRUVFAAAAAJgRAgD7BwAAHBICALwHAAAAAAAAAQAAACQIAAAAAAAAaWlpAE41d29mZjIxNFdPRkYyU3RyaW5nT3V0RQBONXdvZmYyOFdPRkYyT3V0RQBBgBELkgJwYW1jZGFlaGFlaGh4dG1ocHhhbWVtYW4yL1NPdHNvcCB0dmNtZ3BmZnlsZ2Fjb2xwZXJwIEZGQ0dST1ZUREJFQ0xCRXBzYWd4bWRobnJla0hTVExUTENQWE1EVmFlaHZ4dG12RVNBQkZFREdTT1BHQlVTR0NTQkVGVFNKSFRBTVREQkNDTEJDUkxPQ0xBUEMgR1ZTeGlic3RuY2FyYXZhdGFkYmNvbGJubHNicmF2Y2NzZGZ0YWVmeHRtZnJhdmZyYXZneXRzaHRzdWpyYWNsdHJvbXhyb21kYnBvcG9ycGthcnRmcGFaZmxpU3RhbEdjb2xHdGFlRmxsaVMAAAAAAQIDBAAFEQYQBwgJCgsMDQ4PAEGgEwuHAQICAgMCAgIEAgICAwICAgQABAMCAAQDAQAEAwIABAMFAQACAAUAAgAJAAIADQACABEAAwAZAAMAIQADACkAAwAxAAQAQQAEAFEABABhAAQAcQAFAJEABQCxAAUA0QAFAPEABgAxAQYAcQEHAPEBCADxAgkA8QQKAPEICwDxEAwA8SANAPFAGABBtBQLgAEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9//////wBBxBULnAIEAAAADAAAABwAAABJAAAAfgAAAOQAAACoAQAAAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+PwABAgMEBQYHCAkKCwwNDg8QERITFBUWFxgZGhscHR4fICEiIyQlJicoKSorLC0uLzAxMjM0NTY3ODk6Ozw9Pj8AAQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/AAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+PwBB5BkL/AEBAQEBAgICAgMDAwMEBAQEBQUFBQYGBgYHBwcHCAgICAkJCQkKCgoKCwsLCwwMDAwNDQ0NDg4ODg8PDw8QEBAQERERERISEhITExMTFBQUFBUVFRUWFhYWFxcXFxgYGBgZGRkZGhoaGhsbGxscHBwcHR0dHR4eHh4fHx8fICAgICEhISEiIiIiIyMjIyQkJCQlJSUlJiYmJicnJycoKCgoKSkpKSoqKiorKysrLCwsLC0tLS0uLi4uLy8vLzAwMDAxMTExMjIyMjMzMzM0NDQ0NTU1NTY2NjY3Nzc3ODg4ODk5OTk6Ojo6Ozs7Ozw8PDw9PT09Pj4+Pj8/Pz8AQekdCwUEBAAABABBgB4L4AEIDBAMDBQMEBgcDAwgDCQMLCwsLCwsLCwsLCAgGCgcDAwwNDQ0MDQ0NDA0NDQ0NDA0NDQ0NDA0NDQ0NBgMHAwMDDg8PDw4PDw8ODw8PDw8ODw8PDw8ODw8PDw8GAwcDAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwBBgSALXgEBAQEBAQEBAQEBAQEBAQICAgICAgICAgIBAQEBAQEBAgICAgICAgICAgICAgICAgICAgICAgICAgIBAQEBAQEDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwEBAQEAQcAhC+jzBwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAAgICAgICAgICAgICAgICBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBggICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoMDAwMDAwMDAwMDAwMDAwOAABAQEBAQEBAQEBAQEBAQECAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQYGBgYGBgYGBgYGBgYGBgcAAAAAAAACAAAAAAEAAAMAAAAAAgAABAAAAAADAAAFAAAAAAMAAAYAAAAAAwAABwAAAAADAAAIAAAAAAMAAAkAAAAAAAEAAgAAAAABAQADAAAAAAIBAAQAAAAAAwEABQAAAAADAQAGAAAAAAMBAAcAAAAAAwEACAAAAAADAQAJAAAAAAACAAIAAAAAAQIAAwAAAAACAgAEAAAAAAMCAAUAAAAAAwIABgAAAAADAgAHAAAAAAMCAAgAAAAAAwIACQAAAAAAAwACAAAAAAEDAAMAAAAAAgMABAAAAAADAwAFAAAAAAMDAAYAAAAAAwMABwAAAAADAwAIAAAAAAMDAAkAAAAAAAQAAgAAAAABBAADAAAAAAIEAAQAAAAAAwQABQAAAAADBAAGAAAAAAMEAAcAAAAAAwQACAAAAAADBAAJAAAAAAAFAAIAAAAAAQUAAwAAAAACBQAEAAAAAAMFAAUAAAAAAwUABgAAAAADBQAHAAAAAAMFAAgAAAAAAwUACQABAAAABgACAAEAAAEGAAMAAQAAAgYABAABAAADBgAFAAEAAAMGAAYAAQAAAwYABwABAAADBgAIAAEAAAMGAAkAAQAAAAgAAgABAAABCAADAAEAAAIIAAQAAQAAAwgABQABAAADCAAGAAEAAAMIAAcAAQAAAwgACAABAAADCAAJAAABAAMAAAoAAAEAAwAADAAAAgADAAAOAAACAAMAABIAAAMAAwAAFgAAAwADAAAeAAAEAAMAACYAAAQAAwAANgAAAQADAQAKAAABAAMBAAwAAAIAAwEADgAAAgADAQASAAADAAMBABYAAAMAAwEAHgAABAADAQAmAAAEAAMBADYAAAEAAwIACgAAAQADAgAMAAACAAMCAA4AAAIAAwIAEgAAAwADAgAWAAADAAMCAB4AAAQAAwIAJgAABAADAgA2AAABAAMDAAoAAAEAAwMADAAAAgADAwAOAAACAAMDABIAAAMAAwMAFgAAAwADAwAeAAAEAAMDACYAAAQAAwMANgAAAQADBAAKAAABAAMEAAwAAAIAAwQADgAAAgADBAASAAADAAMEABYAAAMAAwQAHgAABAADBAAmAAAEAAMEADYAAAEAAwUACgAAAQADBQAMAAACAAMFAA4AAAIAAwUAEgAAAwADBQAWAAADAAMFAB4AAAQAAwUAJgAABAADBQA2AAEBAAMGAAoAAQEAAwYADAABAgADBgAOAAECAAMGABIAAQMAAwYAFgABAwADBgAeAAEEAAMGACYAAQQAAwYANgABAQADCAAKAAEBAAMIAAwAAQIAAwgADgABAgADCAASAAEDAAMIABYAAQMAAwgAHgABBAADCAAmAAEEAAMIADYAAAD/AAAAAgAAAP8BAAADAAAA/wIAAAQAAAD/AwAABQAAAP8DAAAGAAAA/wMAAAcAAAD/AwAACAAAAP8DAAAJAAAA/wABAAIAAAD/AQEAAwAAAP8CAQAEAAAA/wMBAAUAAAD/AwEABgAAAP8DAQAHAAAA/wMBAAgAAAD/AwEACQAAAP8AAgACAAAA/wECAAMAAAD/AgIABAAAAP8DAgAFAAAA/wMCAAYAAAD/AwIABwAAAP8DAgAIAAAA/wMCAAkAAAD/AAMAAgAAAP8BAwADAAAA/wIDAAQAAAD/AwMABQAAAP8DAwAGAAAA/wMDAAcAAAD/AwMACAAAAP8DAwAJAAAA/wAEAAIAAAD/AQQAAwAAAP8CBAAEAAAA/wMEAAUAAAD/AwQABgAAAP8DBAAHAAAA/wMEAAgAAAD/AwQACQAAAP8ABQACAAAA/wEFAAMAAAD/AgUABAAAAP8DBQAFAAAA/wMFAAYAAAD/AwUABwAAAP8DBQAIAAAA/wMFAAkAAQD/AAYAAgABAP8BBgADAAEA/wIGAAQAAQD/AwYABQABAP8DBgAGAAEA/wMGAAcAAQD/AwYACAABAP8DBgAJAAEA/wAIAAIAAQD/AQgAAwABAP8CCAAEAAEA/wMIAAUAAQD/AwgABgABAP8DCAAHAAEA/wMIAAgAAQD/AwgACQAAAf8DAAAKAAAB/wMAAAwAAAL/AwAADgAAAv8DAAASAAAD/wMAABYAAAP/AwAAHgAABP8DAAAmAAAE/wMAADYAAAH/AwEACgAAAf8DAQAMAAAC/wMBAA4AAAL/AwEAEgAAA/8DAQAWAAAD/wMBAB4AAAT/AwEAJgAABP8DAQA2AAAB/wMCAAoAAAH/AwIADAAAAv8DAgAOAAAC/wMCABIAAAP/AwIAFgAAA/8DAgAeAAAE/wMCACYAAAT/AwIANgAAAf8DAwAKAAAB/wMDAAwAAAL/AwMADgAAAv8DAwASAAAD/wMDABYAAAP/AwMAHgAABP8DAwAmAAAE/wMDADYAAAH/AwQACgAAAf8DBAAMAAAC/wMEAA4AAAL/AwQAEgAAA/8DBAAWAAAD/wMEAB4AAAT/AwQAJgAABP8DBAA2AAAB/wMFAAoAAAH/AwUADAAAAv8DBQAOAAAC/wMFABIAAAP/AwUAFgAAA/8DBQAeAAAE/wMFACYAAAT/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AAYB/wOCAAwABgL/A4IADgAGAv8DggASAAYD/wOCABYABgP/A4IAHgAGBP8DggAmAAYE/wOCADYABwH/A8IACgAHAf8DwgAMAAcC/wPCAA4ABwL/A8IAEgAHA/8DwgAWAAcD/wPCAB4ABwT/A8IAJgAHBP8DwgA2AAgB/wNCAQoACAH/A0IBDAAIAv8DQgEOAAgC/wNCARIACAP/A0IBFgAIA/8DQgEeAAgE/wNCASYACAT/A0IBNgAJAf8DQgIKAAkB/wNCAgwACQL/A0ICDgAJAv8DQgISAAkD/wNCAhYACQP/A0ICHgAJBP8DQgImAAkE/wNCAjYACgH/A0IECgAKAf8DQgQMAAoC/wNCBA4ACgL/A0IEEgAKA/8DQgQWAAoD/wNCBB4ACgT/A0IEJgAKBP8DQgQ2AAwB/wNCCAoADAH/A0IIDAAMAv8DQggOAAwC/wNCCBIADAP/A0IIFgAMA/8DQggeAAwE/wNCCCYADAT/A0IINgAOAf8DQhgKAA4B/wNCGAwADgL/A0IYDgAOAv8DQhgSAA4D/wNCGBYADgP/A0IYHgAOBP8DQhgmAA4E/wNCGDYAGAH/A0JYCgAYAf8DQlgMABgC/wNCWA4AGAL/A0JYEgAYA/8DQlgWABgD/wNCWB4AGAT/A0JYJgAYBP8DQlg2AAYF/wOCAEYABgX/A4IAZgAGBv8DggCGAAYH/wOCAMYABgj/A4IARgEGCf8DggBGAgYK/wOCAEYEBhj/A4IARggHBf8DwgBGAAcF/wPCAGYABwb/A8IAhgAHB/8DwgDGAAcI/wPCAEYBBwn/A8IARgIHCv8DwgBGBAcY/wPCAEYICAX/A0IBRgAIBf8DQgFmAAgG/wNCAYYACAf/A0IBxgAICP8DQgFGAQgJ/wNCAUYCCAr/A0IBRgQIGP8DQgFGCAkF/wNCAkYACQX/A0ICZgAJBv8DQgKGAAkH/wNCAsYACQj/A0ICRgEJCf8DQgJGAgkK/wNCAkYECRj/A0ICRggKBf8DQgRGAAoF/wNCBGYACgb/A0IEhgAKB/8DQgTGAAoI/wNCBEYBCgn/A0IERgIKCv8DQgRGBAoY/wNCBEYIDAX/A0IIRgAMBf8DQghmAAwG/wNCCIYADAf/A0IIxgAMCP8DQghGAQwJ/wNCCEYCDAr/A0IIRgQMGP8DQghGCA4F/wNCGEYADgX/A0IYZgAOBv8DQhiGAA4H/wNCGMYADgj/A0IYRgEOCf8DQhhGAg4K/wNCGEYEDhj/A0IYRggYBf8DQlhGABgF/wNCWGYAGAb/A0JYhgAYB/8DQljGABgI/wNCWEYBGAn/A0JYRgIYCv8DQlhGBBgY/wNCWEYIAIBAwCCgYOAQkFDQMLBw8AiISMgoqGjoGJhY2Di4ePgEhETEJKRk5BSUVNQ0tHT0DIxMzCysbOwcnFzcPLx8/AKCQsIiomLiEpJS0jKycvIKikrKKqpq6hqaWto6unr6BoZGxiamZuYWllbWNrZ29g6OTs4urm7uHp5e3j6+fv4BgUHBIaFh4RGRUdExsXHxCYlJySmpaekZmVnZObl5+QWFRcUlpWXlFZVV1TW1dfUNjU3NLa1t7R2dXd09vX39A4NDwyOjY+MTk1PTM7Nz8wuLS8srq2vrG5tb2zu7e/sHh0fHJ6dn5xeXV9c3t3f3D49Pzy+vb+8fn1/fP79//wABkgG0AdQB9AEWAjYCVgJ2ApYCtgLWAvYCFgM2A1YDdgOYA7gD2AP4AxgEOARYBHgEmAS4BNgE+AQYBTgFWAV4BZgFuAXYBfgFAAAAAAAAdGltZWRvd25saWZlbGVmdGJhY2tjb2RlZGF0YXNob3dvbmx5c2l0ZWNpdHlvcGVuanVzdGxpa2VmcmVld29ya3RleHR5ZWFyb3ZlcmJvZHlsb3ZlZm9ybWJvb2twbGF5bGl2ZWxpbmVoZWxwaG9tZXNpZGVtb3Jld29yZGxvbmd0aGVtdmlld2ZpbmRwYWdlZGF5c2Z1bGxoZWFkdGVybWVhY2hhcmVhZnJvbXRydWVtYXJrYWJsZXVwb25oaWdoZGF0ZWxhbmRuZXdzZXZlbm5leHRjYXNlYm90aHBvc3R1c2VkbWFkZWhhbmRoZXJld2hhdG5hbWVMaW5rYmxvZ3NpemViYXNlaGVsZG1ha2VtYWludXNlcicpICtob2xkZW5kc3dpdGhOZXdzcmVhZHdlcmVzaWdudGFrZWhhdmVnYW1lc2VlbmNhbGxwYXRod2VsbHBsdXNtZW51ZmlsbXBhcnRqb2ludGhpc2xpc3Rnb29kbmVlZHdheXN3ZXN0am9ic21pbmRhbHNvbG9nb3JpY2h1c2VzbGFzdHRlYW1hcm15Zm9vZGtpbmd3aWxsZWFzdHdhcmRiZXN0ZmlyZVBhZ2Vrbm93YXdheS5wbmdtb3ZldGhhbmxvYWRnaXZlc2VsZm5vdGVtdWNoZmVlZG1hbnlyb2NraWNvbm9uY2Vsb29raGlkZWRpZWRIb21lcnVsZWhvc3RhamF4aW5mb2NsdWJsYXdzbGVzc2hhbGZzb21lc3VjaHpvbmUxMDAlb25lc2NhcmVUaW1lcmFjZWJsdWVmb3Vyd2Vla2ZhY2Vob3BlZ2F2ZWhhcmRsb3N0d2hlbnBhcmtrZXB0cGFzc3NoaXByb29tSFRNTHBsYW5UeXBlZG9uZXNhdmVrZWVwZmxhZ2xpbmtzb2xkZml2ZXRvb2tyYXRldG93bmp1bXB0aHVzZGFya2NhcmRmaWxlZmVhcnN0YXlraWxsdGhhdGZhbGxhdXRvZXZlci5jb210YWxrc2hvcHZvdGVkZWVwbW9kZXJlc3R0dXJuYm9ybmJhbmRmZWxscm9zZXVybChza2lucm9sZWNvbWVhY3RzYWdlc21lZXRnb2xkLmpwZ2l0ZW12YXJ5ZmVsdHRoZW5zZW5kZHJvcFZpZXdjb3B5MS4wIjwvYT5zdG9wZWxzZWxpZXN0b3VycGFjay5naWZwYXN0Y3NzP2dyYXltZWFuJmd0O3JpZGVzaG90bGF0ZXNhaWRyb2FkdmFyIGZlZWxqb2hucmlja3BvcnRmYXN0J1VBLWRlYWQ8L2I+cG9vcmJpbGx0eXBlVS5TLndvb2RtdXN0MnB4O0luZm9yYW5rd2lkZXdhbnR3YWxsbGVhZFswXTtwYXVsd2F2ZXN1cmUkKCcjd2FpdG1hc3Nhcm1zZ29lc2dhaW5sYW5ncGFpZCEtLSBsb2NrdW5pdHJvb3R3YWxrZmlybXdpZmV4bWwic29uZ3Rlc3QyMHB4a2luZHJvd3N0b29sZm9udG1haWxzYWZlc3Rhcm1hcHNjb3JlcmFpbmZsb3diYWJ5c3BhbnNheXM0cHg7NnB4O2FydHNmb290cmVhbHdpa2loZWF0c3RlcHRyaXBvcmcvbGFrZXdlYWt0b2xkRm9ybWNhc3RmYW5zYmFua3ZlcnlydW5zanVseXRhc2sxcHg7Z29hbGdyZXdzbG93ZWRnZWlkPSJzZXRzNXB4Oy5qcz80MHB4aWYgKHNvb25zZWF0bm9uZXR1YmV6ZXJvc2VudHJlZWRmYWN0aW50b2dpZnRoYXJtMThweGNhbWVoaWxsYm9sZHpvb212b2lkZWFzeXJpbmdmaWxscGVha2luaXRjb3N0M3B4O2phY2t0YWdzYml0c3JvbGxlZGl0a25ld25lYXI8IS0tZ3Jvd0pTT05kdXR5TmFtZXNhbGV5b3UgbG90c3BhaW5qYXp6Y29sZGV5ZXNmaXNod3d3LnJpc2t0YWJzcHJldjEwcHhyaXNlMjVweEJsdWVkaW5nMzAwLGJhbGxmb3JkZWFybndpbGRib3guZmFpcmxhY2t2ZXJzcGFpcmp1bmV0ZWNoaWYoIXBpY2tldmlsJCgiI3dhcm1sb3JkZG9lc3B1bGwsMDAwaWRlYWRyYXdodWdlc3BvdGZ1bmRidXJuaHJlZmNlbGxrZXlzdGlja2hvdXJsb3NzZnVlbDEycHhzdWl0ZGVhbFJTUyJhZ2VkZ3JleUdFVCJlYXNlYWltc2dpcmxhaWRzOHB4O25hdnlncmlkdGlwcyM5OTl3YXJzbGFkeWNhcnMpOyB9cGhwP2hlbGx0YWxsd2hvbXpoOuUqLw0KIDEwMGhhbGwuCgpBN3B4O3B1c2hjaGF0MHB4O2NyZXcqLzwvaGFzaDc1cHhmbGF0cmFyZSAmJiB0ZWxsY2FtcG9udG9sYWlkbWlzc3NraXB0ZW50ZmluZW1hbGVnZXRzcGxvdDQwMCwNCg0KY29vbGZlZXQucGhwPGJyPmVyaWNtb3N0Z3VpZGJlbGxkZXNjaGFpcm1hdGhhdG9tL2ltZyYjODJsdWNrY2VudDAwMDt0aW55Z29uZWh0bWxzZWxsZHJ1Z0ZSRUVub2Rlbmljaz9pZD1sb3NlbnVsbHZhc3R3aW5kUlNTIHdlYXJyZWx5YmVlbnNhbWVkdWtlbmFzYWNhcGV3aXNoZ3VsZlQyMzpoaXRzc2xvdGdhdGVraWNrYmx1cnRoZXkxNXB4JycpOyk7Ij5tc2lld2luc2JpcmRzb3J0YmV0YXNlZWtUMTg6b3Jkc3RyZWVtYWxsNjBweGZhcm3igJlzYm95c1swXS4nKTsiUE9TVGJlYXJraWRzKTt9fW1hcnl0ZW5kKFVLKXF1YWR6aDrmLXNpei0tLS1wcm9wJyk7DWxpZnRUMTk6dmljZWFuZHlkZWJ0PlJTU3Bvb2xuZWNrYmxvd1QxNjpkb29yZXZhbFQxNzpsZXRzZmFpbG9yYWxwb2xsbm92YWNvbHNnZW5lIOKAlHNvZnRyb21ldGlsbHJvc3M8aDM+cG91cmZhZGVwaW5rPHRyPm1pbmkpfCEobWluZXpoOuhiYXJzaGVhcjAwKTttaWxrIC0tPmlyb25mcmVkZGlza3dlbnRzb2lscHV0cy9qcy9ob2x5VDIyOklTQk5UMjA6YWRhbXNlZXM8aDI+anNvbicsICdjb250VDIxOiBSU1Nsb29wYXNpYW1vb248L3A+c291bExJTkVmb3J0Y2FydFQxNDo8aDE+ODBweCEtLTw5cHg7VDA0Om1pa2U6NDZabmljZWluY2hZb3JrcmljZXpoOuQnKSk7cHVyZW1hZ2VwYXJhdG9uZWJvbmQ6MzdaX29mXyddKTswMDAsemg653Rhbmt5YXJkYm93bGJ1c2g6NTZaSmF2YTMwcHgKfH0KJUMzJTozNFpqZWZmRVhQSWNhc2h2aXNhZ29sZnNub3d6aDrpcXVlci5jc3NzaWNrbWVhdG1pbi5iaW5kZGVsbGhpcmVwaWNzcmVudDozNlpIVFRQLTIwMWZvdG93b2xmRU5EIHhib3g6NTRaQk9EWWRpY2s7Cn0KZXhpdDozNVp2YXJzYmVhdCd9KTtkaWV0OTk5O2FubmV9fTwvW2ldLkxhbmdrbcKyd2lyZXRveXNhZGRzc2VhbGFsZXg7Cgl9ZWNob25pbmUub3JnMDA1KXRvbnlqZXdzc2FuZGxlZ3Nyb29mMDAwKSAyMDB3aW5lZ2VhcmRvZ3Nib290Z2FyeWN1dHN0eWxldGVtcHRpb24ueG1sY29ja2dhbmckKCcuNTBweFBoLkRtaXNjYWxhbmxvYW5kZXNrbWlsZXJ5YW51bml4ZGlzYyk7fQpkdXN0Y2xpcCkuCgo3MHB4LTIwMERWRHM3XT48dGFwZWRlbW9pKyspd2FnZWV1cm9waGlsb3B0c2hvbGVGQVFzYXNpbi0yNlRsYWJzcGV0c1VSTCBidWxrY29vazt9DQpIRUFEWzBdKWFiYnJqdWFuKDE5OGxlc2h0d2luPC9pPnNvbnlndXlzZnVja3BpcGV8LQohMDAyKW5kb3dbMV07W107CkxvZyBzYWx0DQoJCWJhbmd0cmltYmF0aCl7DQowMHB4Cn0pO2tvOuxmZWVzYWQ+DXM6Ly8gW107dG9sbHBsdWcoKXsKew0KIC5qcycyMDBwZHVhbGJvYXQuSlBHKTsKfXF1b3QpOwoKJyk7Cg0KfQ0yMDE0MjAxNTIwMTYyMDE3MjAxODIwMTkyMDIwMjAyMTIwMjIyMDIzMjAyNDIwMjUyMDI2MjAyNzIwMjgyMDI5MjAzMDIwMzEyMDMyMjAzMzIwMzQyMDM1MjAzNjIwMzcyMDEzMjAxMjIwMTEyMDEwMjAwOTIwMDgyMDA3MjAwNjIwMDUyMDA0MjAwMzIwMDIyMDAxMjAwMDE5OTkxOTk4MTk5NzE5OTYxOTk1MTk5NDE5OTMxOTkyMTk5MTE5OTAxOTg5MTk4ODE5ODcxOTg2MTk4NTE5ODQxOTgzMTk4MjE5ODExOTgwMTk3OTE5NzgxOTc3MTk3NjE5NzUxOTc0MTk3MzE5NzIxOTcxMTk3MDE5NjkxOTY4MTk2NzE5NjYxOTY1MTk2NDE5NjMxOTYyMTk2MTE5NjAxOTU5MTk1ODE5NTcxOTU2MTk1NTE5NTQxOTUzMTk1MjE5NTExOTUwMTAwMDEwMjQxMzk0MDAwMDk5OTljb21vbcOhc2VzdGVlc3RhcGVyb3RvZG9oYWNlY2FkYWHDsW9iaWVuZMOtYWFzw612aWRhY2Fzb290cm9mb3Jvc29sb290cmFjdWFsZGlqb3NpZG9ncmFudGlwb3RlbWFkZWJlYWxnb3F1w6llc3RvbmFkYXRyZXNwb2NvY2FzYWJham90b2Rhc2lub2FndWFwdWVzdW5vc2FudGVkaWNlbHVpc2VsbGFtYXlvem9uYWFtb3JwaXNvb2JyYWNsaWNlbGxvZGlvc2hvcmFjYXNp0LfQsNC90LDQvtC80YDQsNGA0YPRgtCw0L3QtdC/0L7QvtGC0LjQt9C90L7QtNC+0YLQvtC20LXQvtC90LjRhdCd0LDQtdC10LHRi9C80YvQktGL0YHQvtCy0YvQstC+0J3QvtC+0LHQn9C+0LvQuNC90LjQoNCk0J3QtdCc0YvRgtGL0J7QvdC40LzQtNCw0JfQsNCU0LDQndGD0J7QsdGC0LXQmNC30LXQudC90YPQvNC80KLRi9GD0LbZgdmK2KPZhtmF2KfZhdi52YPZhNij2YjYsdiv2YrYp9mB2YnZh9mI2YTZhdmE2YPYp9mI2YTZh9io2LPYp9mE2KXZhtmH2YrYo9mK2YLYr9mH2YTYq9mF2KjZh9mE2YjZhNmK2KjZhNin2YrYqNmD2LTZitin2YXYo9mF2YbYqtio2YrZhNmG2K3YqNmH2YXZhdi02YjYtGZpcnN0dmlkZW9saWdodHdvcmxkbWVkaWF3aGl0ZWNsb3NlYmxhY2tyaWdodHNtYWxsYm9va3NwbGFjZW11c2ljZmllbGRvcmRlcnBvaW50dmFsdWVsZXZlbHRhYmxlYm9hcmRob3VzZWdyb3Vwd29ya3N5ZWFyc3N0YXRldG9kYXl3YXRlcnN0YXJ0c3R5bGVkZWF0aHBvd2VycGhvbmVuaWdodGVycm9yaW5wdXRhYm91dHRlcm1zdGl0bGV0b29sc2V2ZW50bG9jYWx0aW1lc2xhcmdld29yZHNnYW1lc3Nob3J0c3BhY2Vmb2N1c2NsZWFybW9kZWxibG9ja2d1aWRlcmFkaW9zaGFyZXdvbWVuYWdhaW5tb25leWltYWdlbmFtZXN5b3VuZ2xpbmVzbGF0ZXJjb2xvcmdyZWVuZnJvbnQmYW1wO3dhdGNoZm9yY2VwcmljZXJ1bGVzYmVnaW5hZnRlcnZpc2l0aXNzdWVhcmVhc2JlbG93aW5kZXh0b3RhbGhvdXJzbGFiZWxwcmludHByZXNzYnVpbHRsaW5rc3NwZWVkc3R1ZHl0cmFkZWZvdW5kc2Vuc2V1bmRlcnNob3duZm9ybXNyYW5nZWFkZGVkc3RpbGxtb3ZlZHRha2VuYWJvdmVmbGFzaGZpeGVkb2Z0ZW5vdGhlcnZpZXdzY2hlY2tsZWdhbHJpdmVyaXRlbXNxdWlja3NoYXBlaHVtYW5leGlzdGdvaW5nbW92aWV0aGlyZGJhc2ljcGVhY2VzdGFnZXdpZHRobG9naW5pZGVhc3dyb3RlcGFnZXN1c2Vyc2RyaXZlc3RvcmVicmVha3NvdXRodm9pY2VzaXRlc21vbnRod2hlcmVidWlsZHdoaWNoZWFydGhmb3J1bXRocmVlc3BvcnRwYXJ0eUNsaWNrbG93ZXJsaXZlc2NsYXNzbGF5ZXJlbnRyeXN0b3J5dXNhZ2Vzb3VuZGNvdXJ0eW91ciBiaXJ0aHBvcHVwdHlwZXNhcHBseUltYWdlYmVpbmd1cHBlcm5vdGVzZXZlcnlzaG93c21lYW5zZXh0cmFtYXRjaHRyYWNra25vd25lYXJseWJlZ2Fuc3VwZXJwYXBlcm5vcnRobGVhcm5naXZlbm5hbWVkZW5kZWRUZXJtc3BhcnRzR3JvdXBicmFuZHVzaW5nd29tYW5mYWxzZXJlYWR5YXVkaW90YWtlc3doaWxlLmNvbS9saXZlZGNhc2VzZGFpbHljaGlsZGdyZWF0anVkZ2V0aG9zZXVuaXRzbmV2ZXJicm9hZGNvYXN0Y292ZXJhcHBsZWZpbGVzY3ljbGVzY2VuZXBsYW5zY2xpY2t3cml0ZXF1ZWVucGllY2VlbWFpbGZyYW1lb2xkZXJwaG90b2xpbWl0Y2FjaGVjaXZpbHNjYWxlZW50ZXJ0aGVtZXRoZXJldG91Y2hib3VuZHJveWFsYXNrZWR3aG9sZXNpbmNlc3RvY2sgbmFtZWZhaXRoaGVhcnRlbXB0eW9mZmVyc2NvcGVvd25lZG1pZ2h0YWxidW10aGlua2Jsb29kYXJyYXltYWpvcnRydXN0Y2Fub251bmlvbmNvdW50dmFsaWRzdG9uZVN0eWxlTG9naW5oYXBweW9jY3VybGVmdDpmcmVzaHF1aXRlZmlsbXNncmFkZW5lZWRzdXJiYW5maWdodGJhc2lzaG92ZXJhdXRvO3JvdXRlLmh0bWxtaXhlZGZpbmFsWW91ciBzbGlkZXRvcGljYnJvd25hbG9uZWRyYXduc3BsaXRyZWFjaFJpZ2h0ZGF0ZXNtYXJjaHF1b3RlZ29vZHNMaW5rc2RvdWJ0YXN5bmN0aHVtYmFsbG93Y2hpZWZ5b3V0aG5vdmVsMTBweDtzZXJ2ZXVudGlsaGFuZHNDaGVja1NwYWNlcXVlcnlqYW1lc2VxdWFsdHdpY2UwLDAwMFN0YXJ0cGFuZWxzb25nc3JvdW5kZWlnaHRzaGlmdHdvcnRocG9zdHNsZWFkc3dlZWtzYXZvaWR0aGVzZW1pbGVzcGxhbmVzbWFydGFscGhhcGxhbnRtYXJrc3JhdGVzcGxheXNjbGFpbXNhbGVzdGV4dHNzdGFyc3dyb25nPC9oMz50aGluZy5vcmcvbXVsdGloZWFyZFBvd2Vyc3RhbmR0b2tlbnNvbGlkKHRoaXNicmluZ3NoaXBzc3RhZmZ0cmllZGNhbGxzZnVsbHlmYWN0c2FnZW50VGhpcyAvLy0tPmFkbWluZWd5cHRFdmVudDE1cHg7RW1haWx0cnVlImNyb3Nzc3BlbnRibG9nc2JveCI+bm90ZWRsZWF2ZWNoaW5hc2l6ZXNndWVzdDwvaDQ+cm9ib3RoZWF2eXRydWUsc2V2ZW5ncmFuZGNyaW1lc2lnbnNhd2FyZWRhbmNlcGhhc2U+PCEtLWVuX1VTJiMzOTsyMDBweF9uYW1lbGF0aW5lbmpveWFqYXguYXRpb25zbWl0aFUuUy4gaG9sZHNwZXRlcmluZGlhbmF2Ij5jaGFpbnNjb3JlY29tZXNkb2luZ3ByaW9yU2hhcmUxOTkwc3JvbWFubGlzdHNqYXBhbmZhbGxzdHJpYWxvd25lcmFncmVlPC9oMj5hYnVzZWFsZXJ0b3BlcmEiLS8vV2NhcmRzaGlsbHN0ZWFtc1Bob3RvdHJ1dGhjbGVhbi5waHA/c2FpbnRtZXRhbGxvdWlzbWVhbnRwcm9vZmJyaWVmcm93Ij5nZW5yZXRydWNrbG9va3NWYWx1ZUZyYW1lLm5ldC8tLT4KPHRyeSB7CnZhciBtYWtlc2Nvc3RzcGxhaW5hZHVsdHF1ZXN0dHJhaW5sYWJvcmhlbHBzY2F1c2VtYWdpY21vdG9ydGhlaXIyNTBweGxlYXN0c3RlcHNDb3VudGNvdWxkZ2xhc3NzaWRlc2Z1bmRzaG90ZWxhd2FyZG1vdXRobW92ZXNwYXJpc2dpdmVzZHV0Y2h0ZXhhc2ZydWl0bnVsbCx8fFtdO3RvcCI+CjwhLS1QT1NUIm9jZWFuPGJyLz5mbG9vcnNwZWFrZGVwdGggc2l6ZWJhbmtzY2F0Y2hjaGFydDIwcHg7YWxpZ25kZWFsc3dvdWxkNTBweDt1cmw9InBhcmtzbW91c2VNb3N0IC4uLjwvYW1vbmdicmFpbmJvZHkgbm9uZTtiYXNlZGNhcnJ5ZHJhZnRyZWZlcnBhZ2VfaG9tZS5tZXRlcmRlbGF5ZHJlYW1wcm92ZWpvaW50PC90cj5kcnVnczwhLS0gYXByaWxpZGVhbGFsbGVuZXhhY3Rmb3J0aGNvZGVzbG9naWNWaWV3IHNlZW1zYmxhbmtwb3J0cyAoMjAwc2F2ZWRfbGlua2dvYWxzZ3JhbnRncmVla2hvbWVzcmluZ3NyYXRlZDMwcHg7d2hvc2VwYXJzZSgpOyIgQmxvY2tsaW51eGpvbmVzcGl4ZWwnKTsiPik7aWYoLWxlZnRkYXZpZGhvcnNlRm9jdXNyYWlzZWJveGVzVHJhY2tlbWVudDwvZW0+YmFyIj4uc3JjPXRvd2VyYWx0PSJjYWJsZWhlbnJ5MjRweDtzZXR1cGl0YWx5c2hhcnBtaW5vcnRhc3Rld2FudHN0aGlzLnJlc2V0d2hlZWxnaXJscy9jc3MvMTAwJTtjbHVic3N0dWZmYmlibGV2b3RlcyAxMDAwa29yZWF9KTsNCmJhbmRzcXVldWU9IHt9OzgwcHg7Y2tpbmd7DQoJCWFoZWFkY2xvY2tpcmlzaGxpa2UgcmF0aW9zdGF0c0Zvcm0ieWFob28pWzBdO0Fib3V0ZmluZHM8L2gxPmRlYnVndGFza3NVUkwgPWNlbGxzfSkoKTsxMnB4O3ByaW1ldGVsbHN0dXJuczB4NjAwLmpwZyJzcGFpbmJlYWNodGF4ZXNtaWNyb2FuZ2VsLS0+PC9naWZ0c3N0ZXZlLWxpbmtib2R5Ln0pOwoJbW91bnQgKDE5OUZBUTwvcm9nZXJmcmFua0NsYXNzMjhweDtmZWVkczxoMT48c2NvdHR0ZXN0czIycHg7ZHJpbmspIHx8IGxld2lzc2hhbGwjMDM5OyBmb3IgbG92ZWR3YXN0ZTAwcHg7amE644JzaW1vbjxmb250cmVwbHltZWV0c3VudGVyY2hlYXB0aWdodEJyYW5kKSAhPSBkcmVzc2NsaXBzcm9vbXNvbmtleW1vYmlsbWFpbi5OYW1lIHBsYXRlZnVubnl0cmVlc2NvbS8iMS5qcGd3bW9kZXBhcmFtU1RBUlRsZWZ0IGlkZGVuLCAyMDEpOwp9CmZvcm0udmlydXNjaGFpcnRyYW5zd29yc3RQYWdlc2l0aW9ucGF0Y2g8IS0tCm8tY2FjZmlybXN0b3VycywwMDAgYXNpYW5pKyspe2Fkb2JlJylbMF1pZD0xMGJvdGg7bWVudSAuMi5taS5wbmcia2V2aW5jb2FjaENoaWxkYnJ1Y2UyLmpwZ1VSTCkrLmpwZ3xzdWl0ZXNsaWNlaGFycnkxMjAiIHN3ZWV0dHI+DQpuYW1lPWRpZWdvcGFnZSBzd2lzcy0tPgoKI2ZmZjsiPkxvZy5jb20idHJlYXRzaGVldCkgJiYgMTRweDtzbGVlcG50ZW50ZmlsZWRqYTrjg2lkPSJjTmFtZSJ3b3JzZXNob3RzLWJveC1kZWx0YQombHQ7YmVhcnM6NDhaPGRhdGEtcnVyYWw8L2E+IHNwZW5kYmFrZXJzaG9wcz0gIiI7cGhwIj5jdGlvbjEzcHg7YnJpYW5oZWxsb3NpemU9bz0lMkYgam9pbm1heWJlPGltZyBpbWciPiwgZmpzaW1nIiAiKVswXU1Ub3BCVHlwZSJuZXdseURhbnNrY3plY2h0cmFpbGtub3dzPC9oNT5mYXEiPnpoLWNuMTApOwotMSIpO3R5cGU9Ymx1ZXN0cnVseWRhdmlzLmpzJzs+DQo8IXN0ZWVsIHlvdSBoMj4NCmZvcm0gamVzdXMxMDAlIG1lbnUuDQoJDQp3YWxlc3Jpc2tzdW1lbnRkZGluZ2ItbGlrdGVhY2hnaWYiIHZlZ2FzZGFuc2tlZXN0aXNocWlwc3VvbWlzb2JyZWRlc2RlZW50cmV0b2Rvc3B1ZWRlYcOxb3Nlc3TDoXRpZW5laGFzdGFvdHJvc3BhcnRlZG9uZGVudWV2b2hhY2VyZm9ybWFtaXNtb21lam9ybXVuZG9hcXXDrWTDrWFzc8OzbG9heXVkYWZlY2hhdG9kYXN0YW50b21lbm9zZGF0b3NvdHJhc3NpdGlvbXVjaG9haG9yYWx1Z2FybWF5b3Jlc3Rvc2hvcmFzdGVuZXJhbnRlc2ZvdG9zZXN0YXNwYcOtc251ZXZhc2FsdWRmb3Jvc21lZGlvcXVpZW5tZXNlc3BvZGVyY2hpbGVzZXLDoXZlY2VzZGVjaXJqb3PDqWVzdGFydmVudGFncnVwb2hlY2hvZWxsb3N0ZW5nb2FtaWdvY29zYXNuaXZlbGdlbnRlbWlzbWFhaXJlc2p1bGlvdGVtYXNoYWNpYWZhdm9yanVuaW9saWJyZXB1bnRvYnVlbm9hdXRvcmFicmlsYnVlbmF0ZXh0b21hcnpvc2FiZXJsaXN0YWx1ZWdvY8OzbW9lbmVyb2p1ZWdvcGVyw7poYWJlcmVzdG95bnVuY2FtdWplcnZhbG9yZnVlcmFsaWJyb2d1c3RhaWd1YWx2b3Rvc2Nhc29zZ3XDrWFwdWVkb3NvbW9zYXZpc291c3RlZGRlYmVubm9jaGVidXNjYWZhbHRhZXVyb3NzZXJpZWRpY2hvY3Vyc29jbGF2ZWNhc2FzbGXDs25wbGF6b2xhcmdvb2JyYXN2aXN0YWFwb3lvanVudG90cmF0YXZpc3RvY3JlYXJjYW1wb2hlbW9zY2luY29jYXJnb3Bpc29zb3JkZW5oYWNlbsOhcmVhZGlzY29wZWRyb2NlcmNhcHVlZGFwYXBlbG1lbm9yw7p0aWxjbGFyb2pvcmdlY2FsbGVwb25lcnRhcmRlbmFkaWVtYXJjYXNpZ3VlZWxsYXNzaWdsb2NvY2hlbW90b3NtYWRyZWNsYXNlcmVzdG9uacOxb3F1ZWRhcGFzYXJiYW5jb2hpam9zdmlhamVwYWJsb8Opc3RldmllbmVyZWlub2RlamFyZm9uZG9jYW5hbG5vcnRlbGV0cmFjYXVzYXRvbWFybWFub3NsdW5lc2F1dG9zdmlsbGF2ZW5kb3Blc2FydGlwb3N0ZW5nYW1hcmNvbGxldmFwYWRyZXVuaWRvdmFtb3N6b25hc2FtYm9zYmFuZGFtYXJpYWFidXNvbXVjaGFzdWJpcnJpb2phdml2aXJncmFkb2NoaWNhYWxsw61qb3ZlbmRpY2hhZXN0YW50YWxlc3NhbGlyc3VlbG9wZXNvc2ZpbmVzbGxhbWFidXNjb8Opc3RhbGxlZ2FuZWdyb3BsYXphaHVtb3JwYWdhcmp1bnRhZG9ibGVpc2xhc2JvbHNhYmHDsW9oYWJsYWx1Y2hhw4FyZWFkaWNlbmp1Z2Fybm90YXN2YWxsZWFsbMOhY2FyZ2Fkb2xvcmFiYWpvZXN0w6lndXN0b21lbnRlbWFyaW9maXJtYWNvc3RvZmljaGFwbGF0YWhvZ2FyYXJ0ZXNsZXllc2FxdWVsbXVzZW9iYXNlc3BvY29zbWl0YWRjaWVsb2NoaWNvbWllZG9nYW5hcnNhbnRvZXRhcGFkZWJlc3BsYXlhcmVkZXNzaWV0ZWNvcnRlY29yZWFkdWRhc2Rlc2Vvdmllam9kZXNlYWFndWFzJnF1b3Q7ZG9tYWluY29tbW9uc3RhdHVzZXZlbnRzbWFzdGVyc3lzdGVtYWN0aW9uYmFubmVycmVtb3Zlc2Nyb2xsdXBkYXRlZ2xvYmFsbWVkaXVtZmlsdGVybnVtYmVyY2hhbmdlcmVzdWx0cHVibGljc2NyZWVuY2hvb3Nlbm9ybWFsdHJhdmVsaXNzdWVzc291cmNldGFyZ2V0c3ByaW5nbW9kdWxlbW9iaWxlc3dpdGNocGhvdG9zYm9yZGVycmVnaW9uaXRzZWxmc29jaWFsYWN0aXZlY29sdW1ucmVjb3JkZm9sbG93dGl0bGU+ZWl0aGVybGVuZ3RoZmFtaWx5ZnJpZW5kbGF5b3V0YXV0aG9yY3JlYXRlcmV2aWV3c3VtbWVyc2VydmVycGxheWVkcGxheWVyZXhwYW5kcG9saWN5Zm9ybWF0ZG91YmxlcG9pbnRzc2VyaWVzcGVyc29ubGl2aW5nZGVzaWdubW9udGhzZm9yY2VzdW5pcXVld2VpZ2h0cGVvcGxlZW5lcmd5bmF0dXJlc2VhcmNoZmlndXJlaGF2aW5nY3VzdG9tb2Zmc2V0bGV0dGVyd2luZG93c3VibWl0cmVuZGVyZ3JvdXBzdXBsb2FkaGVhbHRobWV0aG9kdmlkZW9zc2Nob29sZnV0dXJlc2hhZG93ZGViYXRldmFsdWVzT2JqZWN0b3RoZXJzcmlnaHRzbGVhZ3VlY2hyb21lc2ltcGxlbm90aWNlc2hhcmVkZW5kaW5nc2Vhc29ucmVwb3J0b25saW5lc3F1YXJlYnV0dG9uaW1hZ2VzZW5hYmxlbW92aW5nbGF0ZXN0d2ludGVyRnJhbmNlcGVyaW9kc3Ryb25ncmVwZWF0TG9uZG9uZGV0YWlsZm9ybWVkZGVtYW5kc2VjdXJlcGFzc2VkdG9nZ2xlcGxhY2VzZGV2aWNlc3RhdGljY2l0aWVzc3RyZWFteWVsbG93YXR0YWNrc3RyZWV0ZmxpZ2h0aGlkZGVuaW5mbyI+b3BlbmVkdXNlZnVsdmFsbGV5Y2F1c2VzbGVhZGVyc2VjcmV0c2Vjb25kZGFtYWdlc3BvcnRzZXhjZXB0cmF0aW5nc2lnbmVkdGhpbmdzZWZmZWN0ZmllbGRzc3RhdGVzb2ZmaWNldmlzdWFsZWRpdG9ydm9sdW1lUmVwb3J0bXVzZXVtbW92aWVzcGFyZW50YWNjZXNzbW9zdGx5bW90aGVyIiBpZD0ibWFya2V0Z3JvdW5kY2hhbmNlc3VydmV5YmVmb3Jlc3ltYm9sbW9tZW50c3BlZWNobW90aW9uaW5zaWRlbWF0dGVyQ2VudGVyb2JqZWN0ZXhpc3RzbWlkZGxlRXVyb3BlZ3Jvd3RobGVnYWN5bWFubmVyZW5vdWdoY2FyZWVyYW5zd2Vyb3JpZ2lucG9ydGFsY2xpZW50c2VsZWN0cmFuZG9tY2xvc2VkdG9waWNzY29taW5nZmF0aGVyb3B0aW9uc2ltcGx5cmFpc2VkZXNjYXBlY2hvc2VuY2h1cmNoZGVmaW5lcmVhc29uY29ybmVyb3V0cHV0bWVtb3J5aWZyYW1lcG9saWNlbW9kZWxzTnVtYmVyZHVyaW5nb2ZmZXJzc3R5bGVza2lsbGVkbGlzdGVkY2FsbGVkc2lsdmVybWFyZ2luZGVsZXRlYmV0dGVyYnJvd3NlbGltaXRzR2xvYmFsc2luZ2xld2lkZ2V0Y2VudGVyYnVkZ2V0bm93cmFwY3JlZGl0Y2xhaW1zZW5naW5lc2FmZXR5Y2hvaWNlc3Bpcml0LXN0eWxlc3ByZWFkbWFraW5nbmVlZGVkcnVzc2lhcGxlYXNlZXh0ZW50U2NyaXB0YnJva2VuYWxsb3dzY2hhcmdlZGl2aWRlZmFjdG9ybWVtYmVyLWJhc2VkdGhlb3J5Y29uZmlnYXJvdW5kd29ya2VkaGVscGVkQ2h1cmNoaW1wYWN0c2hvdWxkYWx3YXlzbG9nbyIgYm90dG9tbGlzdCI+KXt2YXIgcHJlZml4b3JhbmdlSGVhZGVyLnB1c2goY291cGxlZ2FyZGVuYnJpZGdlbGF1bmNoUmV2aWV3dGFraW5ndmlzaW9ubGl0dGxlZGF0aW5nQnV0dG9uYmVhdXR5dGhlbWVzZm9yZ290U2VhcmNoYW5jaG9yYWxtb3N0bG9hZGVkQ2hhbmdlcmV0dXJuc3RyaW5ncmVsb2FkTW9iaWxlaW5jb21lc3VwcGx5U291cmNlb3JkZXJzdmlld2VkJm5ic3A7Y291cnNlQWJvdXQgaXNsYW5kPGh0bWwgY29va2llbmFtZT0iYW1hem9ubW9kZXJuYWR2aWNlaW48L2E+OiBUaGUgZGlhbG9naG91c2VzQkVHSU4gTWV4aWNvc3RhcnRzY2VudHJlaGVpZ2h0YWRkaW5nSXNsYW5kYXNzZXRzRW1waXJlU2Nob29sZWZmb3J0ZGlyZWN0bmVhcmx5bWFudWFsU2VsZWN0LgoKT25lam9pbmVkbWVudSI+UGhpbGlwYXdhcmRzaGFuZGxlaW1wb3J0T2ZmaWNlcmVnYXJkc2tpbGxzbmF0aW9uU3BvcnRzZGVncmVld2Vla2x5IChlLmcuYmVoaW5kZG9jdG9ybG9nZ2VkdW5pdGVkPC9iPjwvYmVnaW5zcGxhbnRzYXNzaXN0YXJ0aXN0aXNzdWVkMzAwcHh8Y2FuYWRhYWdlbmN5c2NoZW1lcmVtYWluQnJhemlsc2FtcGxlbG9nbyI+YmV5b25kLXNjYWxlYWNjZXB0c2VydmVkbWFyaW5lRm9vdGVyY2FtZXJhPC9oMT4KX2Zvcm0ibGVhdmVzc3RyZXNzIiAvPg0KLmdpZiIgb25sb2FkbG9hZGVyT3hmb3Jkc2lzdGVyc3Vydml2bGlzdGVuZmVtYWxlRGVzaWduc2l6ZT0iYXBwZWFsdGV4dCI+bGV2ZWxzdGhhbmtzaGlnaGVyZm9yY2VkYW5pbWFsYW55b25lQWZyaWNhYWdyZWVkcmVjZW50UGVvcGxlPGJyIC8+d29uZGVycHJpY2VzdHVybmVkfHwge307bWFpbiI+aW5saW5lc3VuZGF5d3JhcCI+ZmFpbGVkY2Vuc3VzbWludXRlYmVhY29ucXVvdGVzMTUwcHh8ZXN0YXRlcmVtb3RlZW1haWwibGlua2VkcmlnaHQ7c2lnbmFsZm9ybWFsMS5odG1sc2lnbnVwcHJpbmNlZmxvYXQ6LnBuZyIgZm9ydW0uQWNjZXNzcGFwZXJzc291bmRzZXh0ZW5kSGVpZ2h0c2xpZGVyVVRGLTgiJmFtcDsgQmVmb3JlLiBXaXRoc3R1ZGlvb3duZXJzbWFuYWdlcHJvZml0alF1ZXJ5YW5udWFscGFyYW1zYm91Z2h0ZmFtb3VzZ29vZ2xlbG9uZ2VyaSsrKSB7aXNyYWVsc2F5aW5nZGVjaWRlaG9tZSI+aGVhZGVyZW5zdXJlYnJhbmNocGllY2VzYmxvY2s7c3RhdGVkdG9wIj48cmFjaW5ncmVzaXplLS0mZ3Q7cGFjaXR5c2V4dWFsYnVyZWF1LmpwZyIgMTAsMDAwb2J0YWludGl0bGVzYW1vdW50LCBJbmMuY29tZWR5bWVudSIgbHlyaWNzdG9kYXkuaW5kZWVkY291bnR5X2xvZ28uRmFtaWx5bG9va2VkTWFya2V0bHNlIGlmUGxheWVydHVya2V5KTt2YXIgZm9yZXN0Z2l2aW5nZXJyb3JzRG9tYWlufWVsc2V7aW5zZXJ0QmxvZzwvZm9vdGVybG9naW4uZmFzdGVyYWdlbnRzPGJvZHkgMTBweCAwcHJhZ21hZnJpZGF5anVuaW9yZG9sbGFycGxhY2VkY292ZXJzcGx1Z2luNSwwMDAgcGFnZSI+Ym9zdG9uLnRlc3QoYXZhdGFydGVzdGVkX2NvdW50Zm9ydW1zc2NoZW1haW5kZXgsZmlsbGVkc2hhcmVzcmVhZGVyYWxlcnQoYXBwZWFyU3VibWl0bGluZSI+Ym9keSI+CiogVGhlVGhvdWdoc2VlaW5namVyc2V5TmV3czwvdmVyaWZ5ZXhwZXJ0aW5qdXJ5d2lkdGg9Q29va2llU1RBUlQgYWNyb3NzX2ltYWdldGhyZWFkbmF0aXZlcG9ja2V0Ym94Ij4KU3lzdGVtIERhdmlkY2FuY2VydGFibGVzcHJvdmVkQXByaWwgcmVhbGx5ZHJpdmVyaXRlbSI+bW9yZSI+Ym9hcmRzY29sb3JzY2FtcHVzZmlyc3QgfHwgW107bWVkaWEuZ3VpdGFyZmluaXNod2lkdGg6c2hvd2VkT3RoZXIgLnBocCIgYXNzdW1lbGF5ZXJzd2lsc29uc3RvcmVzcmVsaWVmc3dlZGVuQ3VzdG9tZWFzaWx5IHlvdXIgU3RyaW5nCgpXaGlsdGF5bG9yY2xlYXI6cmVzb3J0ZnJlbmNodGhvdWdoIikgKyAiPGJvZHk+YnV5aW5nYnJhbmRzTWVtYmVybmFtZSI+b3BwaW5nc2VjdG9yNXB4OyI+dnNwYWNlcG9zdGVybWFqb3IgY29mZmVlbWFydGlubWF0dXJlaGFwcGVuPC9uYXY+a2Fuc2FzbGluayI+SW1hZ2VzPWZhbHNld2hpbGUgaHNwYWNlMCZhbXA7IAoKSW4gIHBvd2VyUG9sc2tpLWNvbG9yam9yZGFuQm90dG9tU3RhcnQgLWNvdW50Mi5odG1sbmV3cyI+MDEuanBnT25saW5lLXJpZ2h0bWlsbGVyc2VuaW9ySVNCTiAwMCwwMDAgZ3VpZGVzdmFsdWUpZWN0aW9ucmVwYWlyLnhtbCIgIHJpZ2h0cy5odG1sLWJsb2NrcmVnRXhwOmhvdmVyd2l0aGludmlyZ2lucGhvbmVzPC90cj4NdXNpbmcgCgl2YXIgPicpOwoJPC90ZD4KPC90cj4KYmFoYXNhYnJhc2lsZ2FsZWdvbWFneWFycG9sc2tpc3Jwc2tp2LHYr9mI5Lit5paH566A5L2T57mB6auU5L+h5oGv5Lit5Zu95oiR5Lus5LiA5Liq5YWs5Y+4566h55CG6K665Z2b5Y+v5Lul5pyN5Yqh5pe26Ze05Liq5Lq65Lqn5ZOB6Ieq5bex5LyB5Lia5p+l55yL5bel5L2c6IGU57O75rKh5pyJ572R56uZ5omA5pyJ6K+E6K665Lit5b+D5paH56ug55So5oi36aaW6aG15L2c6ICF5oqA5pyv6Zeu6aKY55u45YWz5LiL6L295pCc57Si5L2/55So6L2v5Lu25Zyo57q/5Li76aKY6LWE5paZ6KeG6aKR5Zue5aSN5rOo5YaM572R57uc5pS26JeP5YaF5a655o6o6I2Q5biC5Zy65raI5oGv56m66Ze05Y+R5biD5LuA5LmI5aW95Y+L55Sf5rS75Zu+54mH5Y+R5bGV5aaC5p6c5omL5py65paw6Ze75pyA5paw5pa55byP5YyX5Lqs5o+Q5L6b5YWz5LqO5pu05aSa6L+Z5Liq57O757uf55+l6YGT5ri45oiP5bm/5ZGK5YW25LuW5Y+R6KGo5a6J5YWo56ys5LiA5Lya5ZGY6L+b6KGM54K55Ye754mI5p2D55S15a2Q5LiW55WM6K6+6K6h5YWN6LS55pWZ6IKy5Yqg5YWl5rS75Yqo5LuW5Lus5ZWG5ZOB5Y2a5a6i546w5Zyo5LiK5rW35aaC5L2V5bey57uP55WZ6KiA6K+m57uG56S+5Yy655m75b2V5pys56uZ6ZyA6KaB5Lu35qC85pSv5oyB5Zu96ZmF6ZO+5o6l5Zu95a625bu66K6+5pyL5Y+L6ZiF6K+75rOV5b6L5L2N572u57uP5rWO6YCJ5oup6L+Z5qC35b2T5YmN5YiG57G75o6S6KGM5Zug5Li65Lqk5piT5pyA5ZCO6Z+z5LmQ5LiN6IO96YCa6L+H6KGM5Lia56eR5oqA5Y+v6IO96K6+5aSH5ZCI5L2c5aSn5a6256S+5Lya56CU56m25LiT5Lia5YWo6YOo6aG555uu6L+Z6YeM6L+Y5piv5byA5aeL5oOF5Ya155S16ISR5paH5Lu25ZOB54mM5biu5Yqp5paH5YyW6LWE5rqQ5aSn5a2m5a2m5Lmg5Zyw5Z2A5rWP6KeI5oqV6LWE5bel56iL6KaB5rGC5oCO5LmI5pe25YCZ5Yqf6IO95Li76KaB55uu5YmN6LWE6K6v5Z+O5biC5pa55rOV55S15b2x5oub6IGY5aOw5piO5Lu75L2V5YGl5bq35pWw5o2u576O5Zu95rG96L2m5LuL57uN5L2G5piv5Lqk5rWB55Sf5Lqn5omA5Lul55S16K+d5pi+56S65LiA5Lqb5Y2V5L2N5Lq65ZGY5YiG5p6Q5Zyw5Zu+5peF5ri45bel5YW35a2m55Sf57O75YiX572R5Y+L5biW5a2Q5a+G56CB6aKR6YGT5o6n5Yi25Zyw5Yy65Z+65pys5YWo5Zu9572R5LiK6YeN6KaB56ys5LqM5Zac5qyi6L+b5YWl5Y+L5oOF6L+Z5Lqb6ICD6K+V5Y+R546w5Z+56K6t5Lul5LiK5pS/5bqc5oiQ5Li6546v5aKD6aaZ5riv5ZCM5pe25aix5LmQ5Y+R6YCB5LiA5a6a5byA5Y+R5L2c5ZOB5qCH5YeG5qyi6L+O6Kej5Yaz5Zyw5pa55LiA5LiL5Lul5Y+K6LSj5Lu75oiW6ICF5a6i5oi35Luj6KGo56ev5YiG5aWz5Lq65pWw56CB6ZSA5ZSu5Ye6546w56a757q/5bqU55So5YiX6KGo5LiN5ZCM57yW6L6R57uf6K6h5p+l6K+i5LiN6KaB5pyJ5YWz5py65p6E5b6I5aSa5pKt5pS+57uE57uH5pS/562W55u05o6l6IO95Yqb5p2l5rqQ5pmC6ZaT55yL5Yiw54Ot6Zeo5YWz6ZSu5LiT5Yy66Z2e5bi46Iux6K+t55m+5bqm5biM5pyb576O5aWz5q+U6L6D55+l6K+G6KeE5a6a5bu66K6u6YOo6Zeo5oSP6KeB57K+5b2p5pel5pys5o+Q6auY5Y+R6KiA5pa56Z2i5Z+66YeR5aSE55CG5p2D6ZmQ5b2x54mH6ZO26KGM6L+Y5pyJ5YiG5Lqr54mp5ZOB57uP6JCl5re75Yqg5LiT5a626L+Z56eN6K+d6aKY6LW35p2l5Lia5Yqh5YWs5ZGK6K6w5b2V566A5LuL6LSo6YeP55S35Lq65b2x5ZON5byV55So5oql5ZGK6YOo5YiG5b+r6YCf5ZKo6K+i5pe25bCa5rOo5oSP55Sz6K+35a2m5qCh5bqU6K+l5Y6G5Y+y5Y+q5piv6L+U5Zue6LSt5Lmw5ZCN56ew5Li65LqG5oiQ5Yqf6K+05piO5L6b5bqU5a2p5a2Q5LiT6aKY56iL5bqP5LiA6Iis5pyD5ZOh5Y+q5pyJ5YW25a6D5L+d5oqk6ICM5LiU5LuK5aSp56qX5Y+j5Yqo5oCB54q25oCB54m55Yir6K6k5Li65b+F6aG75pu05paw5bCP6K+05oiR5YCR5L2c5Li65aqS5L2T5YyF5ous6YKj5LmI5LiA5qC35Zu95YaF5piv5ZCm5qC55o2u55S16KeG5a2m6Zmi5YW35pyJ6L+H56iL55Sx5LqO5Lq65omN5Ye65p2l5LiN6L+H5q2j5Zyo5piO5pif5pWF5LqL5YWz57O75qCH6aKY5ZWG5Yqh6L6T5YWl5LiA55u05Z+656GA5pWZ5a2m5LqG6Kej5bu6562R57uT5p6c5YWo55CD6YCa55+l6K6h5YiS5a+55LqO6Im65pyv55u45YaM5Y+R55Sf55yf55qE5bu656uL562J57qn57G75Z6L57uP6aqM5a6e546w5Yi25L2c5p2l6Ieq5qCH562+5Lul5LiL5Y6f5Yib5peg5rOV5YW25Lit5YCL5Lq65LiA5YiH5oyH5Y2X5YWz6Zet6ZuG5Zui56ys5LiJ5YWz5rOo5Zug5q2k54Wn54mH5rex5Zyz5ZWG5Lia5bm/5bee5pel5pyf6auY57qn5pyA6L+R57u85ZCI6KGo56S65LiT6L6R6KGM5Li65Lqk6YCa6K+E5Lu36KeJ5b6X57K+5Y2O5a625bqt5a6M5oiQ5oSf6KeJ5a6J6KOF5b6X5Yiw6YKu5Lu25Yi25bqm6aOf5ZOB6Jm954S26L2s6L295oql5Lu36K6w6ICF5pa55qGI6KGM5pS/5Lq65rCR55So5ZOB5Lic6KW/5o+Q5Ye66YWS5bqX54S25ZCO5LuY5qy+54Ot54K55Lul5YmN5a6M5YWo5Y+R5biW6K6+572u6aKG5a+85bel5Lia5Yy76Zmi55yL55yL57uP5YW45Y6f5Zug5bmz5Y+w5ZCE56eN5aKe5Yqg5p2Q5paZ5paw5aKe5LmL5ZCO6IGM5Lia5pWI5p6c5LuK5bm06K665paH5oiR5Zu95ZGK6K+J54mI5Li75L+u5pS55Y+C5LiO5omT5Y2w5b+r5LmQ5py65qKw6KeC54K55a2Y5Zyo57K+56We6I635b6X5Yip55So57un57ut5L2g5Lus6L+Z5LmI5qih5byP6K+t6KiA6IO95aSf6ZuF6JmO5pON5L2c6aOO5qC85LiA6LW356eR5a2m5L2T6IKy55+t5L+h5p2h5Lu25rK755aX6L+Q5Yqo5Lqn5Lia5Lya6K6u5a+86Iiq5YWI55Sf6IGU55uf5Y+v5piv5ZWP6aGM57uT5p6E5L2c55So6LCD5p+l6LOH5paZ6Ieq5Yqo6LSf6LSj5Yac5Lia6K6/6Zeu5a6e5pa95o6l5Y+X6K6o6K666YKj5Liq5Y+N6aaI5Yqg5by65aWz5oCn6IyD5Zu05pyN5YuZ5LyR6Zey5LuK5pel5a6i5pyN6KeA55yL5Y+C5Yqg55qE6K+d5LiA54K55L+d6K+B5Zu+5Lmm5pyJ5pWI5rWL6K+V56e75Yqo5omN6IO95Yaz5a6a6IKh56Wo5LiN5pat6ZyA5rGC5LiN5b6X5Yqe5rOV5LmL6Ze06YeH55So6JCl6ZSA5oqV6K+J55uu5qCH54ix5oOF5pGE5b2x5pyJ5Lqb6KSH6KO95paH5a2m5py65Lya5pWw5a2X6KOF5L+u6LSt54mp5Yac5p2R5YWo6Z2i57K+5ZOB5YW25a6e5LqL5oOF5rC05bmz5o+Q56S65LiK5biC6LCi6LCi5pmu6YCa5pWZ5biI5LiK5Lyg57G75Yir5q2M5puy5oul5pyJ5Yib5paw6YWN5Lu25Y+q6KaB5pe25Luj6LOH6KiK6L6+5Yiw5Lq655Sf6K6i6ZiF6ICB5biI5bGV56S65b+D55CG6LS05a2Q57ay56uZ5Li76aGM6Ieq54S257qn5Yir566A5Y2V5pS56Z2p6YKj5Lqb5p2l6K+05omT5byA5Luj56CB5Yig6Zmk6K+B5Yi46IqC55uu6YeN54K55qyh5pW45aSa5bCR6KeE5YiS6LWE6YeR5om+5Yiw5Lul5ZCO5aSn5YWo5Li76aG15pyA5L2z5Zue562U5aSp5LiL5L+d6Zqc546w5Luj5qOA5p+l5oqV56Wo5bCP5pe25rKS5pyJ5q2j5bi455Sa6Iez5Luj55CG55uu5b2V5YWs5byA5aSN5Yi26YeR6J6N5bm456aP54mI5pys5b2i5oiQ5YeG5aSH6KGM5oOF5Zue5Yiw5oCd5oOz5oCO5qC35Y2P6K6u6K6k6K+B5pyA5aW95Lqn55Sf5oyJ54Wn5pyN6KOF5bm/5Lic5Yqo5ryr6YeH6LSt5paw5omL57uE5Zu+6Z2i5p2/5Y+C6ICD5pS/5rK75a655piT5aSp5Zyw5Yqq5Yqb5Lq65Lus5Y2H57qn6YCf5bqm5Lq654mp6LCD5pW05rWB6KGM6YCg5oiQ5paH5a2X6Z+p5Zu96LS45piT5byA5bGV55u46Zec6KGo546w5b2x6KeG5aaC5q2k576O5a655aSn5bCP5oql6YGT5p2h5qy+5b+D5oOF6K645aSa5rOV6KeE5a625bGF5Lmm5bqX6L+e5o6l56uL5Y2z5Li+5oql5oqA5ben5aWl6L+Q55m75YWl5Lul5p2l55CG6K665LqL5Lu26Ieq55Sx5Lit5Y2O5Yqe5YWs5aaI5aaI55yf5q2j5LiN6ZSZ5YWo5paH5ZCI5ZCM5Lu35YC85Yir5Lq655uR552j5YW35L2T5LiW57qq5Zui6Zif5Yib5Lia5om/5ouF5aKe6ZW/5pyJ5Lq65L+d5oyB5ZWG5a6257u05L+u5Y+w5rm+5bem5Y+z6IKh5Lu9562U5qGI5a6e6ZmF55S15L+h57uP55CG55Sf5ZG95a6j5Lyg5Lu75Yqh5q2j5byP54m56Imy5LiL5p2l5Y2P5Lya5Y+q6IO95b2T54S26YeN5paw5YWn5a655oyH5a+86L+Q6KGM5pel5b+X6LOj5a626LaF6L+H5Zyf5Zyw5rWZ5rGf5pSv5LuY5o6o5Ye656uZ6ZW/5p2t5bee5omn6KGM5Yi26YCg5LmL5LiA5o6o5bm/546w5Zy65o+P6L+w5Y+Y5YyW5Lyg57uf5q2M5omL5L+d6Zmp6K++56iL5Yy755aX57uP6L+H6L+H5Y675LmL5YmN5pS25YWl5bm05bqm5p2C5b+X576O5Li95pyA6auY55m76ZmG5pyq5p2l5Yqg5bel5YWN6LSj5pWZ56iL54mI5Z2X6Lqr5L2T6YeN5bqG5Ye65ZSu5oiQ5pys5b2i5byP5Zyf6LGG5Ye65YO55Lic5pa56YKu566x5Y2X5Lqs5rGC6IGM5Y+W5b6X6IGM5L2N55u45L+h6aG16Z2i5YiG6ZKf572R6aG156Gu5a6a5Zu+5L6L572R5Z2A56ev5p6B6ZSZ6K+v55uu55qE5a6d6LSd5py65YWz6aOO6Zmp5o6I5p2D55eF5q+S5a6g54mp6Zmk5LqG6KmV6KuW55a+55eF5Y+K5pe25rGC6LSt56uZ54K55YS/56ul5q+P5aSp5Lit5aSu6K6k6K+G5q+P5Liq5aSp5rSl5a2X5L2T5Y+w54Gj57u05oqk5pys6aG15Liq5oCn5a6Y5pa55bi46KeB55u45py65oiY55Wl5bqU5b2T5b6L5biI5pa55L6/5qCh5Zut6IKh5biC5oi/5bGL5qCP55uu5ZGY5bel5a+86Ie056qB54S26YGT5YW35pys572R57uT5ZCI5qGj5qGI5Yqz5Yqo5Y+m5aSW576O5YWD5byV6LW35pS55Y+Y56ys5Zub5Lya6K6h6Kqq5piO6ZqQ56eB5a6d5a6d6KeE6IyD5raI6LS55YWx5ZCM5b+Y6K6w5L2T57O75bim5p2l5ZCN5a2X55m86KGo5byA5pS+5Yqg55uf5Y+X5Yiw5LqM5omL5aSn6YeP5oiQ5Lq65pWw6YeP5YWx5Lqr5Yy65Z+f5aWz5a2p5Y6f5YiZ5omA5Zyo57uT5p2f6YCa5L+h6LaF57qn6YWN572u5b2T5pe25LyY56eA5oCn5oSf5oi/5Lqn6YGK5oiy5Ye65Y+j5o+Q5Lqk5bCx5Lia5L+d5YGl56iL5bqm5Y+C5pWw5LqL5Lia5pW05Liq5bGx5Lic5oOF5oSf54m55q6K5YiG6aGe5pCc5bCL5bGe5LqO6Zeo5oi36LSi5Yqh5aOw6Z+z5Y+K5YW26LSi57uP5Z2a5oyB5bmy6YOo5oiQ56uL5Yip55uK6ICD6JmR5oiQ6YO95YyF6KOF55So5oi25q+U6LWb5paH5piO5oub5ZWG5a6M5pW055yf5piv55y8552b5LyZ5Ly05aiB5pyb6aKG5Z+f5Y2r55Sf5LyY5oOg6KuW5aOH5YWs5YWx6Imv5aW95YWF5YiG56ym5ZCI6ZmE5Lu254m554K55LiN5Y+v6Iux5paH6LWE5Lqn5qC55pys5piO5pi+5a+G56K85YWs5LyX5rCR5peP5pu05Yqg5Lqr5Y+X5ZCM5a2m5ZCv5Yqo6YCC5ZCI5Y6f5p2l6Zeu562U5pys5paH576O6aOf57u/6Imy56iz5a6a57uI5LqO55Sf54mp5L6b5rGC5pCc54uQ5Yqb6YeP5Lil6YeN5rC46L+c5YaZ55yf5pyJ6ZmQ56ue5LqJ5a+56LGh6LS555So5LiN5aW957ud5a+55Y2B5YiG5L+D6L+b54K56K+E5b2x6Z+z5LyY5Yq/5LiN5bCR5qyj6LWP5bm25LiU5pyJ54K55pa55ZCR5YWo5paw5L+h55So6K6+5pa95b2i6LGh6LWE5qC856qB56C06ZqP552A6YeN5aSn5LqO5piv5q+V5Lia5pm66IO95YyW5bel5a6M576O5ZWG5Z+O57uf5LiA5Ye654mI5omT6YCg55Si5ZOB5qaC5Ya155So5LqO5L+d55WZ5Zug57Sg5Lit5ZyL5a2Y5YKo6LS05Zu+5pyA5oSb6ZW/5pyf5Y+j5Lu355CG6LSi5Z+65Zyw5a6J5o6S5q2m5rGJ6YeM6Z2i5Yib5bu65aSp56m66aaW5YWI5a6M5ZaE6amx5Yqo5LiL6Z2i5LiN5YaN6K+a5L+h5oSP5LmJ6Ziz5YWJ6Iux5Zu95ryC5Lqu5Yab5LqL546p5a62576k5LyX5Yac5rCR5Y2z5Y+v5ZCN56ix5a625YW35Yqo55S75oOz5Yiw5rOo5piO5bCP5a2m5oCn6IO96ICD56CU56Gs5Lu26KeC55yL5riF5qWa5pCe56yR6aaW6aCB6buE6YeR6YCC55So5rGf6IuP55yf5a6e5Li7566h6Zi25q616Ki75YaK57+76K+R5p2D5Yip5YGa5aW95Ly85LmO6YCa6K6v5pa95bel54uA5oWL5Lmf6K64546v5L+d5Z+55YW75qaC5b+15aSn5Z6L5py656Wo55CG6Kej5Yy/5ZCNY3VhbmRvZW52aWFybWFkcmlkYnVzY2FyaW5pY2lvdGllbXBvcG9ycXVlY3VlbnRhZXN0YWRvcHVlZGVuanVlZ29zY29udHJhZXN0w6Fubm9tYnJldGllbmVucGVyZmlsbWFuZXJhYW1pZ29zY2l1ZGFkY2VudHJvYXVucXVlcHVlZGVzZGVudHJvcHJpbWVycHJlY2lvc2Vnw7puYnVlbm9zdm9sdmVycHVudG9zc2VtYW5haGFiw61hYWdvc3RvbnVldm9zdW5pZG9zY2FybG9zZXF1aXBvbmnDsW9zbXVjaG9zYWxndW5hY29ycmVvaW1hZ2VucGFydGlyYXJyaWJhbWFyw61haG9tYnJlZW1wbGVvdmVyZGFkY2FtYmlvbXVjaGFzZnVlcm9ucGFzYWRvbMOtbmVhcGFyZWNlbnVldmFzY3Vyc29zZXN0YWJhcXVpZXJvbGlicm9zY3VhbnRvYWNjZXNvbWlndWVsdmFyaW9zY3VhdHJvdGllbmVzZ3J1cG9zc2Vyw6FuZXVyb3BhbWVkaW9zZnJlbnRlYWNlcmNhZGVtw6Fzb2ZlcnRhY29jaGVzbW9kZWxvaXRhbGlhbGV0cmFzYWxnw7puY29tcHJhY3VhbGVzZXhpc3RlY3VlcnBvc2llbmRvcHJlbnNhbGxlZ2FydmlhamVzZGluZXJvbXVyY2lhcG9kcsOhcHVlc3RvZGlhcmlvcHVlYmxvcXVpZXJlbWFudWVscHJvcGlvY3Jpc2lzY2llcnRvc2VndXJvbXVlcnRlZnVlbnRlY2VycmFyZ3JhbmRlZWZlY3RvcGFydGVzbWVkaWRhcHJvcGlhb2ZyZWNldGllcnJhZS1tYWlsdmFyaWFzZm9ybWFzZnV0dXJvb2JqZXRvc2VndWlycmllc2dvbm9ybWFzbWlzbW9zw7puaWNvY2FtaW5vc2l0aW9zcmF6w7NuZGViaWRvcHJ1ZWJhdG9sZWRvdGVuw61hamVzw7pzZXNwZXJvY29jaW5hb3JpZ2VudGllbmRhY2llbnRvY8OhZGl6aGFibGFyc2Vyw61hbGF0aW5hZnVlcnphZXN0aWxvZ3VlcnJhZW50cmFyw6l4aXRvbMOzcGV6YWdlbmRhdsOtZGVvZXZpdGFycGFnaW5hbWV0cm9zamF2aWVycGFkcmVzZsOhY2lsY2FiZXphw6FyZWFzc2FsaWRhZW52w61vamFww7NuYWJ1c29zYmllbmVzdGV4dG9zbGxldmFycHVlZGFuZnVlcnRlY29tw7puY2xhc2VzaHVtYW5vdGVuaWRvYmlsYmFvdW5pZGFkZXN0w6FzZWRpdGFyY3JlYWRv0LTQu9GP0YfRgtC+0LrQsNC60LjQu9C40Y3RgtC+0LLRgdC10LXQs9C+0L/RgNC40YLQsNC60LXRidC10YPQttC10JrQsNC60LHQtdC30LHRi9C70L7QvdC40JLRgdC10L/QvtC00K3RgtC+0YLQvtC80YfQtdC80L3QtdGC0LvQtdGC0YDQsNC30L7QvdCw0LPQtNC10LzQvdC10JTQu9GP0J/RgNC40L3QsNGB0L3QuNGF0YLQtdC80LrRgtC+0LPQvtC00LLQvtGC0YLQsNC80KHQqNCQ0LzQsNGP0KfRgtC+0LLQsNGB0LLQsNC80LXQvNGD0KLQsNC60LTQstCw0L3QsNC80Y3RgtC40Y3RgtGD0JLQsNC80YLQtdGF0L/RgNC+0YLRg9GC0L3QsNC00LTQvdGP0JLQvtGC0YLRgNC40L3QtdC50JLQsNGB0L3QuNC80YHQsNC80YLQvtGC0YDRg9Cx0J7QvdC40LzQuNGA0L3QtdC10J7QntCe0LvQuNGG0Y3RgtCw0J7QvdCw0L3QtdC80LTQvtC80LzQvtC50LTQstC10L7QvdC+0YHRg9C04KSV4KWH4KS54KWI4KSV4KWA4KS44KWH4KSV4KS+4KSV4KWL4KSU4KSw4KSq4KSw4KSo4KWH4KSP4KSV4KSV4KS/4KSt4KWA4KSH4KS44KSV4KSw4KSk4KWL4KS54KWL4KSG4KSq4KS54KWA4KSv4KS54KSv4KS+4KSk4KSV4KSl4KS+amFncmFu4KSG4KSc4KSc4KWL4KSF4KSs4KSm4KWL4KSX4KSI4KSc4KS+4KSX4KSP4KS54KSu4KSH4KSo4KS14KS54KSv4KWH4KSl4KWH4KSl4KWA4KSY4KSw4KSc4KSs4KSm4KWA4KSV4KSI4KSc4KWA4KS14KWH4KSo4KSI4KSo4KSP4KS54KSw4KSJ4KS44KSu4KWH4KSV4KSu4KS14KWL4KSy4KWH4KS44KSs4KSu4KSI4KSm4KWH4KST4KSw4KSG4KSu4KSs4KS44KSt4KSw4KSs4KSo4KSa4KSy4KSu4KSo4KSG4KSX4KS44KWA4KSy4KWA2LnZhNmJ2KXZhNmJ2YfYsNin2KLYrtix2LnYr9iv2KfZhNmJ2YfYsNmH2LXZiNix2LrZitix2YPYp9mG2YjZhNin2KjZitmG2LnYsdi22LDZhNmD2YfZhtin2YrZiNmF2YLYp9mE2LnZhNmK2KfZhtin2YTZg9mG2K3YqtmJ2YLYqNmE2YjYrdip2KfYrtix2YHZgti32LnYqNiv2LHZg9mG2KXYsNin2YPZhdin2KfYrdiv2KXZhNin2YHZitmH2KjYudi22YPZitmB2KjYrdir2YjZhdmG2YjZh9mI2KPZhtin2KzYr9in2YTZh9in2LPZhNmF2LnZhtiv2YTZitiz2LnYqNix2LXZhNmJ2YXZhtiw2KjZh9in2KPZhtmH2YXYq9mE2YPZhtiq2KfZhNin2K3Zitir2YXYtdix2LTYsdit2K3ZiNmE2YjZgdmK2KfYsNin2YTZg9mE2YXYsdip2KfZhtiq2KfZhNmB2KPYqNmI2K7Yp9i12KPZhtiq2KfZhtmH2KfZhNmK2LnYttmI2YjZgtiv2KfYqNmG2K7Zitix2KjZhtiq2YTZg9mF2LTYp9ih2YjZh9mK2KfYqNmI2YLYtdi12YjZhdin2LHZgtmF2KPYrdiv2YbYrdmG2LnYr9mF2LHYo9mK2KfYrdip2YPYqtio2K/ZiNmG2YrYrNio2YXZhtmH2KrYrdiq2KzZh9ip2LPZhtip2YrYqtmF2YPYsdip2LrYstip2YbZgdiz2KjZitiq2YTZhNmH2YTZhtin2KrZhNmD2YLZhNio2YTZhdin2LnZhtmH2KPZiNmE2LTZitih2YbZiNix2KPZhdin2YHZitmD2KjZg9mE2LDYp9iq2LHYqtio2KjYo9mG2YfZhdiz2KfZhtmD2KjZiti52YHZgtiv2K3Ys9mG2YTZh9mF2LTYudix2KPZh9mE2LTZh9ix2YLYt9ix2LfZhNiocHJvZmlsZXNlcnZpY2VkZWZhdWx0aGltc2VsZmRldGFpbHNjb250ZW50c3VwcG9ydHN0YXJ0ZWRtZXNzYWdlc3VjY2Vzc2Zhc2hpb248dGl0bGU+Y291bnRyeWFjY291bnRjcmVhdGVkc3Rvcmllc3Jlc3VsdHNydW5uaW5ncHJvY2Vzc3dyaXRpbmdvYmplY3RzdmlzaWJsZXdlbGNvbWVhcnRpY2xldW5rbm93bm5ldHdvcmtjb21wYW55ZHluYW1pY2Jyb3dzZXJwcml2YWN5cHJvYmxlbVNlcnZpY2VyZXNwZWN0ZGlzcGxheXJlcXVlc3RyZXNlcnZld2Vic2l0ZWhpc3RvcnlmcmllbmRzb3B0aW9uc3dvcmtpbmd2ZXJzaW9ubWlsbGlvbmNoYW5uZWx3aW5kb3cuYWRkcmVzc3Zpc2l0ZWR3ZWF0aGVyY29ycmVjdHByb2R1Y3RlZGlyZWN0Zm9yd2FyZHlvdSBjYW5yZW1vdmVkc3ViamVjdGNvbnRyb2xhcmNoaXZlY3VycmVudHJlYWRpbmdsaWJyYXJ5bGltaXRlZG1hbmFnZXJmdXJ0aGVyc3VtbWFyeW1hY2hpbmVtaW51dGVzcHJpdmF0ZWNvbnRleHRwcm9ncmFtc29jaWV0eW51bWJlcnN3cml0dGVuZW5hYmxlZHRyaWdnZXJzb3VyY2VzbG9hZGluZ2VsZW1lbnRwYXJ0bmVyZmluYWxseXBlcmZlY3RtZWFuaW5nc3lzdGVtc2tlZXBpbmdjdWx0dXJlJnF1b3Q7LGpvdXJuYWxwcm9qZWN0c3VyZmFjZXMmcXVvdDtleHBpcmVzcmV2aWV3c2JhbGFuY2VFbmdsaXNoQ29udGVudHRocm91Z2hQbGVhc2Ugb3BpbmlvbmNvbnRhY3RhdmVyYWdlcHJpbWFyeXZpbGxhZ2VTcGFuaXNoZ2FsbGVyeWRlY2xpbmVtZWV0aW5nbWlzc2lvbnBvcHVsYXJxdWFsaXR5bWVhc3VyZWdlbmVyYWxzcGVjaWVzc2Vzc2lvbnNlY3Rpb253cml0ZXJzY291bnRlcmluaXRpYWxyZXBvcnRzZmlndXJlc21lbWJlcnNob2xkaW5nZGlzcHV0ZWVhcmxpZXJleHByZXNzZGlnaXRhbHBpY3R1cmVBbm90aGVybWFycmllZHRyYWZmaWNsZWFkaW5nY2hhbmdlZGNlbnRyYWx2aWN0b3J5aW1hZ2VzL3JlYXNvbnNzdHVkaWVzZmVhdHVyZWxpc3RpbmdtdXN0IGJlc2Nob29sc1ZlcnNpb251c3VhbGx5ZXBpc29kZXBsYXlpbmdncm93aW5nb2J2aW91c292ZXJsYXlwcmVzZW50YWN0aW9uczwvdWw+DQp3cmFwcGVyYWxyZWFkeWNlcnRhaW5yZWFsaXR5c3RvcmFnZWFub3RoZXJkZXNrdG9wb2ZmZXJlZHBhdHRlcm51bnVzdWFsRGlnaXRhbGNhcGl0YWxXZWJzaXRlZmFpbHVyZWNvbm5lY3RyZWR1Y2VkQW5kcm9pZGRlY2FkZXNyZWd1bGFyICZhbXA7IGFuaW1hbHNyZWxlYXNlQXV0b21hdGdldHRpbmdtZXRob2Rzbm90aGluZ1BvcHVsYXJjYXB0aW9ubGV0dGVyc2NhcHR1cmVzY2llbmNlbGljZW5zZWNoYW5nZXNFbmdsYW5kPTEmYW1wO0hpc3RvcnkgPSBuZXcgQ2VudHJhbHVwZGF0ZWRTcGVjaWFsTmV0d29ya3JlcXVpcmVjb21tZW50d2FybmluZ0NvbGxlZ2V0b29sYmFycmVtYWluc2JlY2F1c2VlbGVjdGVkRGV1dHNjaGZpbmFuY2V3b3JrZXJzcXVpY2tseWJldHdlZW5leGFjdGx5c2V0dGluZ2Rpc2Vhc2VTb2NpZXR5d2VhcG9uc2V4aGliaXQmbHQ7IS0tQ29udHJvbGNsYXNzZXNjb3ZlcmVkb3V0bGluZWF0dGFja3NkZXZpY2VzKHdpbmRvd3B1cnBvc2V0aXRsZT0iTW9iaWxlIGtpbGxpbmdzaG93aW5nSXRhbGlhbmRyb3BwZWRoZWF2aWx5ZWZmZWN0cy0xJ10pOwpjb25maXJtQ3VycmVudGFkdmFuY2VzaGFyaW5nb3BlbmluZ2RyYXdpbmdiaWxsaW9ub3JkZXJlZEdlcm1hbnlyZWxhdGVkPC9mb3JtPmluY2x1ZGV3aGV0aGVyZGVmaW5lZFNjaWVuY2VjYXRhbG9nQXJ0aWNsZWJ1dHRvbnNsYXJnZXN0dW5pZm9ybWpvdXJuZXlzaWRlYmFyQ2hpY2Fnb2hvbGlkYXlHZW5lcmFscGFzc2FnZSwmcXVvdDthbmltYXRlZmVlbGluZ2Fycml2ZWRwYXNzaW5nbmF0dXJhbHJvdWdobHkuCgpUaGUgYnV0IG5vdGRlbnNpdHlCcml0YWluQ2hpbmVzZWxhY2sgb2Z0cmlidXRlSXJlbGFuZCIgZGF0YS1mYWN0b3JzcmVjZWl2ZXRoYXQgaXNMaWJyYXJ5aHVzYmFuZGluIGZhY3RhZmZhaXJzQ2hhcmxlc3JhZGljYWxicm91Z2h0ZmluZGluZ2xhbmRpbmc6bGFuZz0icmV0dXJuIGxlYWRlcnNwbGFubmVkcHJlbWl1bXBhY2thZ2VBbWVyaWNhRWRpdGlvbl0mcXVvdDtNZXNzYWdlbmVlZCB0b3ZhbHVlPSJjb21wbGV4bG9va2luZ3N0YXRpb25iZWxpZXZlc21hbGxlci1tb2JpbGVyZWNvcmRzd2FudCB0b2tpbmQgb2ZGaXJlZm94eW91IGFyZXNpbWlsYXJzdHVkaWVkbWF4aW11bWhlYWRpbmdyYXBpZGx5Y2xpbWF0ZWtpbmdkb21lbWVyZ2VkYW1vdW50c2ZvdW5kZWRwaW9uZWVyZm9ybXVsYWR5bmFzdHlob3cgdG8gU3VwcG9ydHJldmVudWVlY29ub215UmVzdWx0c2Jyb3RoZXJzb2xkaWVybGFyZ2VseWNhbGxpbmcuJnF1b3Q7QWNjb3VudEVkd2FyZCBzZWdtZW50Um9iZXJ0IGVmZm9ydHNQYWNpZmljbGVhcm5lZHVwIHdpdGhoZWlnaHQ6d2UgaGF2ZUFuZ2VsZXNuYXRpb25zX3NlYXJjaGFwcGxpZWRhY3F1aXJlbWFzc2l2ZWdyYW50ZWQ6IGZhbHNldHJlYXRlZGJpZ2dlc3RiZW5lZml0ZHJpdmluZ1N0dWRpZXNtaW5pbXVtcGVyaGFwc21vcm5pbmdzZWxsaW5naXMgdXNlZHJldmVyc2V2YXJpYW50IHJvbGU9Im1pc3NpbmdhY2hpZXZlcHJvbW90ZXN0dWRlbnRzb21lb25lZXh0cmVtZXJlc3RvcmVib3R0b206ZXZvbHZlZGFsbCB0aGVzaXRlbWFwZW5nbGlzaHdheSB0byAgQXVndXN0c3ltYm9sc0NvbXBhbnltYXR0ZXJzbXVzaWNhbGFnYWluc3RzZXJ2aW5nfSkoKTsNCnBheW1lbnR0cm91YmxlY29uY2VwdGNvbXBhcmVwYXJlbnRzcGxheWVyc3JlZ2lvbnNtb25pdG9yICcnVGhlIHdpbm5pbmdleHBsb3JlYWRhcHRlZEdhbGxlcnlwcm9kdWNlYWJpbGl0eWVuaGFuY2VjYXJlZXJzKS4gVGhlIGNvbGxlY3RTZWFyY2ggYW5jaWVudGV4aXN0ZWRmb290ZXIgaGFuZGxlcnByaW50ZWRjb25zb2xlRWFzdGVybmV4cG9ydHN3aW5kb3dzQ2hhbm5lbGlsbGVnYWxuZXV0cmFsc3VnZ2VzdF9oZWFkZXJzaWduaW5nLmh0bWwiPnNldHRsZWR3ZXN0ZXJuY2F1c2luZy13ZWJraXRjbGFpbWVkSnVzdGljZWNoYXB0ZXJ2aWN0aW1zVGhvbWFzIG1vemlsbGFwcm9taXNlcGFydGllc2VkaXRpb25vdXRzaWRlOmZhbHNlLGh1bmRyZWRPbHltcGljX2J1dHRvbmF1dGhvcnNyZWFjaGVkY2hyb25pY2RlbWFuZHNzZWNvbmRzcHJvdGVjdGFkb3B0ZWRwcmVwYXJlbmVpdGhlcmdyZWF0bHlncmVhdGVyb3ZlcmFsbGltcHJvdmVjb21tYW5kc3BlY2lhbHNlYXJjaC53b3JzaGlwZnVuZGluZ3Rob3VnaHRoaWdoZXN0aW5zdGVhZHV0aWxpdHlxdWFydGVyQ3VsdHVyZXRlc3RpbmdjbGVhcmx5ZXhwb3NlZEJyb3dzZXJsaWJlcmFsfSBjYXRjaFByb2plY3RleGFtcGxlaGlkZSgpO0Zsb3JpZGFhbnN3ZXJzYWxsb3dlZEVtcGVyb3JkZWZlbnNlc2VyaW91c2ZyZWVkb21TZXZlcmFsLWJ1dHRvbkZ1cnRoZXJvdXQgb2YgIT0gbnVsbHRyYWluZWREZW5tYXJrdm9pZCgwKS9hbGwuanNwcmV2ZW50UmVxdWVzdFN0ZXBoZW4KCldoZW4gb2JzZXJ2ZTwvaDI+DQpNb2Rlcm4gcHJvdmlkZSIgYWx0PSJib3JkZXJzLgoKRm9yIAoKTWFueSBhcnRpc3RzcG93ZXJlZHBlcmZvcm1maWN0aW9udHlwZSBvZm1lZGljYWx0aWNrZXRzb3Bwb3NlZENvdW5jaWx3aXRuZXNzanVzdGljZUdlb3JnZSBCZWxnaXVtLi4uPC9hPnR3aXR0ZXJub3RhYmx5d2FpdGluZ3dhcmZhcmUgT3RoZXIgcmFua2luZ3BocmFzZXNtZW50aW9uc3Vydml2ZXNjaG9sYXI8L3A+DQogQ291bnRyeWlnbm9yZWRsb3NzIG9manVzdCBhc0dlb3JnaWFzdHJhbmdlPGhlYWQ+PHN0b3BwZWQxJ10pOw0KaXNsYW5kc25vdGFibGVib3JkZXI6bGlzdCBvZmNhcnJpZWQxMDAsMDAwPC9oMz4KIHNldmVyYWxiZWNvbWVzc2VsZWN0IHdlZGRpbmcwMC5odG1sbW9uYXJjaG9mZiB0aGV0ZWFjaGVyaGlnaGx5IGJpb2xvZ3lsaWZlIG9mb3IgZXZlbnJpc2Ugb2YmcmFxdW87cGx1c29uZWh1bnRpbmcodGhvdWdoRG91Z2xhc2pvaW5pbmdjaXJjbGVzRm9yIHRoZUFuY2llbnRWaWV0bmFtdmVoaWNsZXN1Y2ggYXNjcnlzdGFsdmFsdWUgPVdpbmRvd3NlbmpveWVkYSBzbWFsbGFzc3VtZWQ8YSBpZD0iZm9yZWlnbiBBbGwgcmlob3cgdGhlRGlzcGxheXJldGlyZWRob3dldmVyaGlkZGVuO2JhdHRsZXNzZWVraW5nY2FiaW5ldHdhcyBub3Rsb29rIGF0Y29uZHVjdGdldCB0aGVKYW51YXJ5aGFwcGVuc3R1cm5pbmdhOmhvdmVyT25saW5lIEZyZW5jaCBsYWNraW5ndHlwaWNhbGV4dHJhY3RlbmVtaWVzZXZlbiBpZmdlbmVyYXRkZWNpZGVkYXJlIG5vdC9zZWFyY2hiZWxpZWZzLWltYWdlOmxvY2F0ZWRzdGF0aWMubG9naW4iPmNvbnZlcnR2aW9sZW50ZW50ZXJlZGZpcnN0Ij5jaXJjdWl0RmlubGFuZGNoZW1pc3RzaGUgd2FzMTBweDsiPmFzIHN1Y2hkaXZpZGVkPC9zcGFuPndpbGwgYmVsaW5lIG9mYSBncmVhdG15c3RlcnkvaW5kZXguZmFsbGluZ2R1ZSB0byByYWlsd2F5Y29sbGVnZW1vbnN0ZXJkZXNjZW50aXQgd2l0aG51Y2xlYXJKZXdpc2ggcHJvdGVzdEJyaXRpc2hmbG93ZXJzcHJlZGljdHJlZm9ybXNidXR0b24gd2hvIHdhc2xlY3R1cmVpbnN0YW50c3VpY2lkZWdlbmVyaWNwZXJpb2RzbWFya2V0c1NvY2lhbCBmaXNoaW5nY29tYmluZWdyYXBoaWN3aW5uZXJzPGJyIC8+PGJ5IHRoZSBOYXR1cmFsUHJpdmFjeWNvb2tpZXNvdXRjb21lcmVzb2x2ZVN3ZWRpc2hicmllZmx5UGVyc2lhbnNvIG11Y2hDZW50dXJ5ZGVwaWN0c2NvbHVtbnNob3VzaW5nc2NyaXB0c25leHQgdG9iZWFyaW5nbWFwcGluZ3JldmlzZWRqUXVlcnkoLXdpZHRoOnRpdGxlIj50b29sdGlwU2VjdGlvbmRlc2lnbnNUdXJraXNoeW91bmdlci5tYXRjaCh9KSgpOwoKYnVybmluZ29wZXJhdGVkZWdyZWVzc291cmNlPVJpY2hhcmRjbG9zZWx5cGxhc3RpY2VudHJpZXM8L3RyPg0KY29sb3I6I3VsIGlkPSJwb3NzZXNzcm9sbGluZ3BoeXNpY3NmYWlsaW5nZXhlY3V0ZWNvbnRlc3RsaW5rIHRvRGVmYXVsdDxiciAvPgo6IHRydWUsY2hhcnRlcnRvdXJpc21jbGFzc2ljcHJvY2VlZGV4cGxhaW48L2gxPg0Kb25saW5lLj94bWwgdmVoZWxwaW5nZGlhbW9uZHVzZSB0aGVhaXJsaW5lZW5kIC0tPikuYXR0cihyZWFkZXJzaG9zdGluZyNmZmZmZmZyZWFsaXplVmluY2VudHNpZ25hbHMgc3JjPSIvUHJvZHVjdGRlc3BpdGVkaXZlcnNldGVsbGluZ1B1YmxpYyBoZWxkIGluSm9zZXBoIHRoZWF0cmVhZmZlY3RzPHN0eWxlPmEgbGFyZ2Vkb2Vzbid0bGF0ZXIsIEVsZW1lbnRmYXZpY29uY3JlYXRvckh1bmdhcnlBaXJwb3J0c2VlIHRoZXNvIHRoYXRNaWNoYWVsU3lzdGVtc1Byb2dyYW1zLCBhbmQgIHdpZHRoPWUmcXVvdDt0cmFkaW5nbGVmdCI+CnBlcnNvbnNHb2xkZW4gQWZmYWlyc2dyYW1tYXJmb3JtaW5nZGVzdHJveWlkZWEgb2ZjYXNlIG9mb2xkZXN0IHRoaXMgaXMuc3JjID0gY2FydG9vbnJlZ2lzdHJDb21tb25zTXVzbGltc1doYXQgaXNpbiBtYW55bWFya2luZ3JldmVhbHNJbmRlZWQsZXF1YWxseS9zaG93X2FvdXRkb29yZXNjYXBlKEF1c3RyaWFnZW5ldGljc3lzdGVtLEluIHRoZSBzaXR0aW5nSGUgYWxzb0lzbGFuZHNBY2FkZW15CgkJPCEtLURhbmllbCBiaW5kaW5nYmxvY2siPmltcG9zZWR1dGlsaXplQWJyYWhhbShleGNlcHR7d2lkdGg6cHV0dGluZykuaHRtbCh8fCBbXTsKREFUQVsgKmtpdGNoZW5tb3VudGVkYWN0dWFsIGRpYWxlY3RtYWlubHkgX2JsYW5rJ2luc3RhbGxleHBlcnRzaWYodHlwZUl0IGFsc28mY29weTsgIj5UZXJtc2Jvcm4gaW5PcHRpb25zZWFzdGVybnRhbGtpbmdjb25jZXJuZ2FpbmVkIG9uZ29pbmdqdXN0aWZ5Y3JpdGljc2ZhY3RvcnlpdHMgb3duYXNzYXVsdGludml0ZWRsYXN0aW5naGlzIG93bmhyZWY9Ii8iIHJlbD0iZGV2ZWxvcGNvbmNlcnRkaWFncmFtZG9sbGFyc2NsdXN0ZXJwaHA/aWQ9YWxjb2hvbCk7fSkoKTt1c2luZyBhPjxzcGFuPnZlc3NlbHNyZXZpdmFsQWRkcmVzc2FtYXRldXJhbmRyb2lkYWxsZWdlZGlsbG5lc3N3YWxraW5nY2VudGVyc3F1YWxpZnltYXRjaGVzdW5pZmllZGV4dGluY3REZWZlbnNlZGllZCBpbgoJPCEtLSBjdXN0b21zbGlua2luZ0xpdHRsZSBCb29rIG9mZXZlbmluZ21pbi5qcz9hcmUgdGhla29udGFrdHRvZGF5J3MuaHRtbCIgdGFyZ2V0PXdlYXJpbmdBbGwgUmlnOwp9KSgpO3JhaXNpbmcgQWxzbywgY3J1Y2lhbGFib3V0Ij5kZWNsYXJlLS0+CjxzY2ZpcmVmb3hhcyBtdWNoYXBwbGllc2luZGV4LCBzLCBidXQgdHlwZSA9IAoNCjwhLS10b3dhcmRzUmVjb3Jkc1ByaXZhdGVGb3JlaWduUHJlbWllcmNob2ljZXNWaXJ0dWFscmV0dXJuc0NvbW1lbnRQb3dlcmVkaW5saW5lO3BvdmVydHljaGFtYmVyTGl2aW5nIHZvbHVtZXNBbnRob255bG9naW4iIFJlbGF0ZWRFY29ub215cmVhY2hlc2N1dHRpbmdncmF2aXR5bGlmZSBpbkNoYXB0ZXItc2hhZG93Tm90YWJsZTwvdGQ+DQogcmV0dXJuc3RhZGl1bXdpZGdldHN2YXJ5aW5ndHJhdmVsc2hlbGQgYnl3aG8gYXJld29yayBpbmZhY3VsdHlhbmd1bGFyd2hvIGhhZGFpcnBvcnR0b3duIG9mCgpTb21lICdjbGljaydjaGFyZ2Vza2V5d29yZGl0IHdpbGxjaXR5IG9mKHRoaXMpO0FuZHJldyB1bmlxdWUgY2hlY2tlZG9yIG1vcmUzMDBweDsgcmV0dXJuO3JzaW9uPSJwbHVnaW5zd2l0aGluIGhlcnNlbGZTdGF0aW9uRmVkZXJhbHZlbnR1cmVwdWJsaXNoc2VudCB0b3RlbnNpb25hY3RyZXNzY29tZSB0b2ZpbmdlcnNEdWtlIG9mcGVvcGxlLGV4cGxvaXR3aGF0IGlzaGFybW9ueWEgbWFqb3IiOiJodHRwaW4gaGlzIG1lbnUiPgptb250aGx5b2ZmaWNlcmNvdW5jaWxnYWluaW5nZXZlbiBpblN1bW1hcnlkYXRlIG9mbG95YWx0eWZpdG5lc3NhbmQgd2FzZW1wZXJvcnN1cHJlbWVTZWNvbmQgaGVhcmluZ1J1c3NpYW5sb25nZXN0QWxiZXJ0YWxhdGVyYWxzZXQgb2Ygc21hbGwiPi5hcHBlbmRkbyB3aXRoZmVkZXJhbGJhbmsgb2ZiZW5lYXRoRGVzcGl0ZUNhcGl0YWxncm91bmRzKSwgYW5kIHBlcmNlbnRpdCBmcm9tY2xvc2luZ2NvbnRhaW5JbnN0ZWFkZmlmdGVlbmFzIHdlbGwueWFob28ucmVzcG9uZGZpZ2h0ZXJvYnNjdXJlcmVmbGVjdG9yZ2FuaWM9IE1hdGguZWRpdGluZ29ubGluZSBwYWRkaW5nYSB3aG9sZW9uZXJyb3J5ZWFyIG9mZW5kIG9mIGJhcnJpZXJ3aGVuIGl0aGVhZGVyIGhvbWUgb2ZyZXN1bWVkcmVuYW1lZHN0cm9uZz5oZWF0aW5ncmV0YWluc2Nsb3VkZnJ3YXkgb2YgTWFyY2ggMWtub3dpbmdpbiBwYXJ0QmV0d2Vlbmxlc3NvbnNjbG9zZXN0dmlydHVhbGxpbmtzIj5jcm9zc2VkRU5EIC0tPmZhbW91cyBhd2FyZGVkTGljZW5zZUhlYWx0aCBmYWlybHkgd2VhbHRoeW1pbmltYWxBZnJpY2FuY29tcGV0ZWxhYmVsIj5zaW5naW5nZmFybWVyc0JyYXNpbClkaXNjdXNzcmVwbGFjZUdyZWdvcnlmb250IGNvcHVyc3VlZGFwcGVhcnNtYWtlIHVwcm91bmRlZGJvdGggb2ZibG9ja2Vkc2F3IHRoZW9mZmljZXNjb2xvdXJzaWYoZG9jdXdoZW4gaGVlbmZvcmNlcHVzaChmdUF1Z3VzdCBVVEYtOCI+RmFudGFzeWluIG1vc3Rpbmp1cmVkVXN1YWxseWZhcm1pbmdjbG9zdXJlb2JqZWN0IGRlZmVuY2V1c2Ugb2YgTWVkaWNhbDxib2R5PgpldmlkZW50YmUgdXNlZGtleUNvZGVzaXh0ZWVuSXNsYW1pYyMwMDAwMDBlbnRpcmUgd2lkZWx5IGFjdGl2ZSAodHlwZW9mb25lIGNhbmNvbG9yID1zcGVha2VyZXh0ZW5kc1BoeXNpY3N0ZXJyYWluPHRib2R5PmZ1bmVyYWx2aWV3aW5nbWlkZGxlIGNyaWNrZXRwcm9waGV0c2hpZnRlZGRvY3RvcnNSdXNzZWxsIHRhcmdldGNvbXBhY3RhbGdlYnJhc29jaWFsLWJ1bGsgb2ZtYW4gYW5kPC90ZD4KIGhlIGxlZnQpLnZhbCgpZmFsc2UpO2xvZ2ljYWxiYW5raW5naG9tZSB0b25hbWluZyBBcml6b25hY3JlZGl0cyk7Cn0pOwpmb3VuZGVyaW4gdHVybkNvbGxpbnNiZWZvcmUgQnV0IHRoZWNoYXJnZWRUaXRsZSI+Q2FwdGFpbnNwZWxsZWRnb2RkZXNzVGFnIC0tPkFkZGluZzpidXQgd2FzUmVjZW50IHBhdGllbnRiYWNrIGluPWZhbHNlJkxpbmNvbG53ZSBrbm93Q291bnRlckp1ZGFpc21zY3JpcHQgYWx0ZXJlZCddKTsKICBoYXMgdGhldW5jbGVhckV2ZW50Jyxib3RoIGlubm90IGFsbAoKPCEtLSBwbGFjaW5naGFyZCB0byBjZW50ZXJzb3J0IG9mY2xpZW50c3N0cmVldHNCZXJuYXJkYXNzZXJ0c3RlbmQgdG9mYW50YXN5ZG93biBpbmhhcmJvdXJGcmVlZG9tamV3ZWxyeS9hYm91dC4uc2VhcmNobGVnZW5kc2lzIG1hZGVtb2Rlcm4gb25seSBvbm9ubHkgdG9pbWFnZSIgbGluZWFyIHBhaW50ZXJhbmQgbm90cmFyZWx5IGFjcm9ueW1kZWxpdmVyc2hvcnRlcjAwJmFtcDthcyBtYW55d2lkdGg9Ii8qIDwhW0N0aXRsZSA9b2YgdGhlIGxvd2VzdCBwaWNrZWQgZXNjYXBlZHVzZXMgb2ZwZW9wbGVzIFB1YmxpY01hdHRoZXd0YWN0aWNzZGFtYWdlZHdheSBmb3JsYXdzIG9mZWFzeSB0byB3aW5kb3dzdHJvbmcgIHNpbXBsZX1jYXRjaChzZXZlbnRoaW5mb2JveHdlbnQgdG9wYWludGVkY2l0aXplbkkgZG9uJ3RyZXRyZWF0LiBTb21lIHd3LiIpOwpib21iaW5nbWFpbHRvOm1hZGUgaW4uIE1hbnkgY2Fycmllc3x8e307d2l3b3JrIG9mc3lub255bWRlZmVhdHNmYXZvcmVkb3B0aWNhbHBhZ2VUcmF1bmxlc3Mgc2VuZGluZ2xlZnQiPjxjb21TY29yQWxsIHRoZWpRdWVyeS50b3VyaXN0Q2xhc3NpY2ZhbHNlIiBXaWxoZWxtc3VidXJic2dlbnVpbmViaXNob3BzLnNwbGl0KGdsb2JhbCBmb2xsb3dzYm9keSBvZm5vbWluYWxDb250YWN0c2VjdWxhcmxlZnQgdG9jaGllZmx5LWhpZGRlbi1iYW5uZXI8L2xpPgoKLiBXaGVuIGluIGJvdGhkaXNtaXNzRXhwbG9yZWFsd2F5cyB2aWEgdGhlc3Bhw7FvbHdlbGZhcmVydWxpbmcgYXJyYW5nZWNhcHRhaW5oaXMgc29ucnVsZSBvZmhlIHRvb2tpdHNlbGYsPTAmYW1wOyhjYWxsZWRzYW1wbGVzdG8gbWFrZWNvbS9wYWdNYXJ0aW4gS2VubmVkeWFjY2VwdHNmdWxsIG9maGFuZGxlZEJlc2lkZXMvLy0tPjwvYWJsZSB0b3RhcmdldHNlc3NlbmNlaGltIHRvIGl0cyBieSBjb21tb24ubWluZXJhbHRvIHRha2V3YXlzIHRvcy5vcmcvbGFkdmlzZWRwZW5hbHR5c2ltcGxlOmlmIHRoZXlMZXR0ZXJzYSBzaG9ydEhlcmJlcnRzdHJpa2VzIGdyb3Vwcy5sZW5ndGhmbGlnaHRzb3ZlcmxhcHNsb3dseSBsZXNzZXIgc29jaWFsIDwvcD4KCQlpdCBpbnRvcmFua2VkIHJhdGUgb2Z1bD4NCiAgYXR0ZW1wdHBhaXIgb2ZtYWtlIGl0S29udGFrdEFudG9uaW9oYXZpbmcgcmF0aW5ncyBhY3RpdmVzdHJlYW1zdHJhcHBlZCIpLmNzcyhob3N0aWxlbGVhZCB0b2xpdHRsZSBncm91cHMsUGljdHVyZS0tPg0KDQogcm93cz0iIG9iamVjdGludmVyc2U8Zm9vdGVyQ3VzdG9tVj48XC9zY3Jzb2x2aW5nQ2hhbWJlcnNsYXZlcnl3b3VuZGVkd2hlcmVhcyE9ICd1bmRmb3IgYWxscGFydGx5IC1yaWdodDpBcmFiaWFuYmFja2VkIGNlbnR1cnl1bml0IG9mbW9iaWxlLUV1cm9wZSxpcyBob21lcmlzayBvZmRlc2lyZWRDbGludG9uY29zdCBvZmFnZSBvZiBiZWNvbWUgbm9uZSBvZnAmcXVvdDtNaWRkbGUgZWFkJylbMENyaXRpY3NzdHVkaW9zPiZjb3B5O2dyb3VwIj5hc3NlbWJsbWFraW5nIHByZXNzZWR3aWRnZXQucHM6IiA/IHJlYnVpbHRieSBzb21lRm9ybWVyIGVkaXRvcnNkZWxheWVkQ2Fub25pY2hhZCB0aGVwdXNoaW5nY2xhc3M9ImJ1dCBhcmVwYXJ0aWFsQmFieWxvbmJvdHRvbSBjYXJyaWVyQ29tbWFuZGl0cyB1c2VBcyB3aXRoY291cnNlc2EgdGhpcmRkZW5vdGVzYWxzbyBpbkhvdXN0b24yMHB4OyI+YWNjdXNlZGRvdWJsZSBnb2FsIG9mRmFtb3VzICkuYmluZChwcmllc3RzIE9ubGluZWluIEp1bHlzdCArICJnY29uc3VsdGRlY2ltYWxoZWxwZnVscmV2aXZlZGlzIHZlcnlyJysnaXB0bG9zaW5nIGZlbWFsZXNpcyBhbHNvc3RyaW5nc2RheXMgb2ZhcnJpdmFsZnV0dXJlIDxvYmplY3Rmb3JjaW5nU3RyaW5nKCIgLz4KCQloZXJlIGlzZW5jb2RlZC4gIFRoZSBiYWxsb29uZG9uZSBieS9jb21tb25iZ2NvbG9ybGF3IG9mIEluZGlhbmFhdm9pZGVkYnV0IHRoZTJweCAzcHhqcXVlcnkuYWZ0ZXIgYXBvbGljeS5tZW4gYW5kZm9vdGVyLT0gdHJ1ZTtmb3IgdXNlc2NyZWVuLkluZGlhbiBpbWFnZSA9ZmFtaWx5LGh0dHA6Ly8gJm5ic3A7ZHJpdmVyc2V0ZXJuYWxzYW1lIGFzbm90aWNlZHZpZXdlcnN9KSgpOwogaXMgbW9yZXNlYXNvbnNmb3JtZXIgdGhlIG5ld2lzIGp1c3Rjb25zZW50IFNlYXJjaHdhcyB0aGV3aHkgdGhlc2hpcHBlZGJyPjxicj53aWR0aDogaGVpZ2h0PW1hZGUgb2ZjdWlzaW5laXMgdGhhdGEgdmVyeSBBZG1pcmFsIGZpeGVkO25vcm1hbCBNaXNzaW9uUHJlc3MsIG9udGFyaW9jaGFyc2V0dHJ5IHRvIGludmFkZWQ9InRydWUic3BhY2luZ2lzIG1vc3RhIG1vcmUgdG90YWxseWZhbGwgb2Z9KTsNCiAgaW1tZW5zZXRpbWUgaW5zZXQgb3V0c2F0aXNmeXRvIGZpbmRkb3duIHRvbG90IG9mIFBsYXllcnNpbiBKdW5lcXVhbnR1bW5vdCB0aGV0aW1lIHRvZGlzdGFudEZpbm5pc2hzcmMgPSAoc2luZ2xlIGhlbHAgb2ZHZXJtYW4gbGF3IGFuZGxhYmVsZWRmb3Jlc3RzY29va2luZ3NwYWNlIj5oZWFkZXItd2VsbCBhc1N0YW5sZXlicmlkZ2VzL2dsb2JhbENyb2F0aWEgQWJvdXQgWzBdOwogIGl0LCBhbmRncm91cGVkYmVpbmcgYSl7dGhyb3doZSBtYWRlbGlnaHRlcmV0aGljYWxGRkZGRkYiYm90dG9tImxpa2UgYSBlbXBsb3lzbGl2ZSBpbmFzIHNlZW5wcmludGVybW9zdCBvZnViLWxpbmtyZWplY3RzYW5kIHVzZWltYWdlIj5zdWNjZWVkZmVlZGluZ051Y2xlYXJpbmZvcm1hdG8gaGVscFdvbWVuJ3NOZWl0aGVyTWV4aWNhbnByb3RlaW48dGFibGUgYnkgbWFueWhlYWx0aHlsYXdzdWl0ZGV2aXNlZC5wdXNoKHtzZWxsZXJzc2ltcGx5IFRocm91Z2guY29va2llIEltYWdlKG9sZGVyIj51cy5qcyI+IFNpbmNlIHVuaXZlcnNsYXJnZXIgb3BlbiB0byEtLSBlbmRsaWVzIGluJ10pOw0KICBtYXJrZXR3aG8gaXMgKCJET01Db21hbmFnZWRvbmUgZm9ydHlwZW9mIEtpbmdkb21wcm9maXRzcHJvcG9zZXRvIHNob3djZW50ZXI7bWFkZSBpdGRyZXNzZWR3ZXJlIGlubWl4dHVyZXByZWNpc2VhcmlzaW5nc3JjID0gJ21ha2UgYSBzZWN1cmVkQmFwdGlzdHZvdGluZyAKCQl2YXIgTWFyY2ggMmdyZXcgdXBDbGltYXRlLnJlbW92ZXNraWxsZWR3YXkgdGhlPC9oZWFkPmZhY2Ugb2ZhY3RpbmcgcmlnaHQiPnRvIHdvcmtyZWR1Y2VzaGFzIGhhZGVyZWN0ZWRzaG93KCk7YWN0aW9uPWJvb2sgb2ZhbiBhcmVhPT0gImh0dDxoZWFkZXIKPGh0bWw+Y29uZm9ybWZhY2luZyBjb29raWUucmVseSBvbmhvc3RlZCAuY3VzdG9taGUgd2VudGJ1dCBmb3JzcHJlYWQgRmFtaWx5IGEgbWVhbnNvdXQgdGhlZm9ydW1zLmZvb3RhZ2UiPk1vYmlsQ2xlbWVudHMiIGlkPSJhcyBoaWdoaW50ZW5zZS0tPjwhLS1mZW1hbGUgaXMgc2VlbmltcGxpZWRzZXQgdGhlYSBzdGF0ZWFuZCBoaXNmYXN0ZXN0YmVzaWRlc2J1dHRvbl9ib3VuZGVkIj48aW1nIEluZm9ib3hldmVudHMsYSB5b3VuZ2FuZCBhcmVOYXRpdmUgY2hlYXBlclRpbWVvdXRhbmQgaGFzZW5naW5lc3dvbiB0aGUobW9zdGx5cmlnaHQ6IGZpbmQgYSAtYm90dG9tUHJpbmNlIGFyZWEgb2Ztb3JlIG9mc2VhcmNoX25hdHVyZSxsZWdhbGx5cGVyaW9kLGxhbmQgb2ZvciB3aXRoaW5kdWNlZHByb3ZpbmdtaXNzaWxlbG9jYWxseUFnYWluc3R0aGUgd2F5ayZxdW90O3B4OyI+DQpwdXNoZWQgYWJhbmRvbm51bWVyYWxDZXJ0YWluSW4gdGhpc21vcmUgaW5vciBzb21lbmFtZSBpc2FuZCwgaW5jcm93bmVkSVNCTiAwLWNyZWF0ZXNPY3RvYmVybWF5IG5vdGNlbnRlciBsYXRlIGluRGVmZW5jZWVuYWN0ZWR3aXNoIHRvYnJvYWRseWNvb2xpbmdvbmxvYWQ9aXQuIFRoZXJlY292ZXJNZW1iZXJzaGVpZ2h0IGFzc3VtZXM8aHRtbD4KcGVvcGxlLmluIG9uZSA9d2luZG93Zm9vdGVyX2EgZ29vZCByZWtsYW1hb3RoZXJzLHRvIHRoaXNfY29va2llcGFuZWwiPkxvbmRvbixkZWZpbmVzY3J1c2hlZGJhcHRpc21jb2FzdGFsc3RhdHVzIHRpdGxlIiBtb3ZlIHRvbG9zdCBpbmJldHRlciBpbXBsaWVzcml2YWxyeXNlcnZlcnMgU3lzdGVtUGVyaGFwc2VzIGFuZCBjb250ZW5kZmxvd2luZ2xhc3RlZCByaXNlIGluR2VuZXNpc3ZpZXcgb2ZyaXNpbmcgc2VlbSB0b2J1dCBpbiBiYWNraW5naGUgd2lsbGdpdmVuIGFnaXZpbmcgY2l0aWVzLmZsb3cgb2YgTGF0ZXIgYWxsIGJ1dEhpZ2h3YXlvbmx5IGJ5c2lnbiBvZmhlIGRvZXNkaWZmZXJzYmF0dGVyeSZhbXA7bGFzaW5nbGVzdGhyZWF0c2ludGVnZXJ0YWtlIG9ucmVmdXNlZGNhbGxlZCA9VVMmYW1wU2VlIHRoZW5hdGl2ZXNieSB0aGlzc3lzdGVtLmhlYWQgb2Y6aG92ZXIsbGVzYmlhbnN1cm5hbWVhbmQgYWxsY29tbW9uL2hlYWRlcl9fcGFyYW1zSGFydmFyZC9waXhlbC5yZW1vdmFsc28gbG9uZ3JvbGUgb2Zqb2ludGx5c2t5c2NyYVVuaWNvZGViciAvPg0KQXRsYW50YW51Y2xldXNDb3VudHkscHVyZWx5IGNvdW50Ij5lYXNpbHkgYnVpbGQgYW9uY2xpY2thIGdpdmVucG9pbnRlcmgmcXVvdDtldmVudHMgZWxzZSB7CmRpdGlvbnNub3cgdGhlLCB3aXRoIG1hbiB3aG9vcmcvV2Vib25lIGFuZGNhdmFscnlIZSBkaWVkc2VhdHRsZTAwLDAwMCB7d2luZG93aGF2ZSB0b2lmKHdpbmRhbmQgaXRzc29sZWx5IG0mcXVvdDtyZW5ld2VkRGV0cm9pdGFtb25nc3RlaXRoZXIgdGhlbSBpblNlbmF0b3JVczwvYT48S2luZyBvZkZyYW5jaXMtcHJvZHVjaGUgdXNlZGFydCBhbmRoaW0gYW5kdXNlZCBieXNjb3JpbmdhdCBob21ldG8gaGF2ZXJlbGF0ZXNpYmlsaXR5ZmFjdGlvbkJ1ZmZhbG9saW5rIj48d2hhdCBoZWZyZWUgdG9DaXR5IG9mY29tZSBpbnNlY3RvcnNjb3VudGVkb25lIGRheW5lcnZvdXNzcXVhcmUgfTtpZihnb2luIHdoYXRpbWciIGFsaXMgb25seXNlYXJjaC90dWVzZGF5bG9vc2VseVNvbG9tb25zZXh1YWwgLSA8YSBocm1lZGl1bSJETyBOT1QgRnJhbmNlLHdpdGggYSB3YXIgYW5kc2Vjb25kIHRha2UgYSA+DQoNCg0KbWFya2V0LmhpZ2h3YXlkb25lIGluY3Rpdml0eSJsYXN0Ij5vYmxpZ2VkcmlzZSB0byJ1bmRlZmltYWRlIHRvIEVhcmx5IHByYWlzZWRpbiBpdHMgZm9yIGhpc2F0aGxldGVKdXBpdGVyWWFob28hIHRlcm1lZCBzbyBtYW55cmVhbGx5IHMuIFRoZSBhIHdvbWFuP3ZhbHVlPWRpcmVjdCByaWdodCIgYmljeWNsZWFjaW5nPSJkYXkgYW5kc3RhdGluZ1JhdGhlcixoaWdoZXIgT2ZmaWNlIGFyZSBub3d0aW1lcywgd2hlbiBhIHBheSBmb3JvbiB0aGlzLWxpbmsiPjtib3JkZXJhcm91bmQgYW5udWFsIHRoZSBOZXdwdXQgdGhlLmNvbSIgdGFraW4gdG9hIGJyaWVmKGluIHRoZWdyb3Vwcy47IHdpZHRoZW56eW1lc3NpbXBsZSBpbiBsYXRle3JldHVybnRoZXJhcHlhIHBvaW50YmFubmluZ2lua3MiPgooKTsiIHJlYSBwbGFjZVx1MDAzQ2FhYm91dCBhdHI+DQoJCWNjb3VudCBnaXZlcyBhPFNDUklQVFJhaWx3YXl0aGVtZXMvdG9vbGJveEJ5SWQoInhodW1hbnMsd2F0Y2hlc2luIHNvbWUgaWYgKHdpY29taW5nIGZvcm1hdHMgVW5kZXIgYnV0IGhhc2hhbmRlZCBtYWRlIGJ5dGhhbiBpbmZlYXIgb2ZkZW5vdGVkL2lmcmFtZWxlZnQgaW52b2x0YWdlaW4gZWFjaGEmcXVvdDtiYXNlIG9mSW4gbWFueXVuZGVyZ29yZWdpbWVzYWN0aW9uIDwvcD4NCjx1c3RvbVZhOyZndDs8L2ltcG9ydHNvciB0aGF0bW9zdGx5ICZhbXA7cmUgc2l6ZT0iPC9hPjwvaGEgY2xhc3NwYXNzaXZlSG9zdCA9IFdoZXRoZXJmZXJ0aWxlVmFyaW91cz1bXTsoZnVjYW1lcmFzLz48L3RkPmFjdHMgYXNJbiBzb21lPg0KDQo8IW9yZ2FuaXMgPGJyIC8+QmVpamluZ2NhdGFsw6BkZXV0c2NoZXVyb3BldWV1c2thcmFnYWVpbGdlc3ZlbnNrYWVzcGHDsWFtZW5zYWpldXN1YXJpb3RyYWJham9tw6l4aWNvcMOhZ2luYXNpZW1wcmVzaXN0ZW1hb2N0dWJyZWR1cmFudGVhw7FhZGlyZW1wcmVzYW1vbWVudG9udWVzdHJvcHJpbWVyYXRyYXbDqXNncmFjaWFzbnVlc3RyYXByb2Nlc29lc3RhZG9zY2FsaWRhZHBlcnNvbmFuw7ptZXJvYWN1ZXJkb23DunNpY2FtaWVtYnJvb2ZlcnRhc2FsZ3Vub3NwYcOtc2VzZWplbXBsb2RlcmVjaG9hZGVtw6FzcHJpdmFkb2FncmVnYXJlbmxhY2VzcG9zaWJsZWhvdGVsZXNzZXZpbGxhcHJpbWVyb8O6bHRpbW9ldmVudG9zYXJjaGl2b2N1bHR1cmFtdWplcmVzZW50cmFkYWFudW5jaW9lbWJhcmdvbWVyY2Fkb2dyYW5kZXNlc3R1ZGlvbWVqb3Jlc2ZlYnJlcm9kaXNlw7FvdHVyaXNtb2PDs2RpZ29wb3J0YWRhZXNwYWNpb2ZhbWlsaWFhbnRvbmlvcGVybWl0ZWd1YXJkYXJhbGd1bmFzcHJlY2lvc2FsZ3VpZW5zZW50aWRvdmlzaXRhc3TDrXR1bG9jb25vY2Vyc2VndW5kb2NvbnNlam9mcmFuY2lhbWludXRvc3NlZ3VuZGF0ZW5lbW9zZWZlY3Rvc23DoWxhZ2FzZXNpw7NucmV2aXN0YWdyYW5hZGFjb21wcmFyaW5ncmVzb2dhcmPDrWFhY2Npw7NuZWN1YWRvcnF1aWVuZXNpbmNsdXNvZGViZXLDoW1hdGVyaWFob21icmVzbXVlc3RyYXBvZHLDrWFtYcOxYW5hw7psdGltYWVzdGFtb3NvZmljaWFsdGFtYmllbm5pbmfDum5zYWx1ZG9zcG9kZW1vc21lam9yYXJwb3NpdGlvbmJ1c2luZXNzaG9tZXBhZ2VzZWN1cml0eWxhbmd1YWdlc3RhbmRhcmRjYW1wYWlnbmZlYXR1cmVzY2F0ZWdvcnlleHRlcm5hbGNoaWxkcmVucmVzZXJ2ZWRyZXNlYXJjaGV4Y2hhbmdlZmF2b3JpdGV0ZW1wbGF0ZW1pbGl0YXJ5aW5kdXN0cnlzZXJ2aWNlc21hdGVyaWFscHJvZHVjdHN6LWluZGV4OmNvbW1lbnRzc29mdHdhcmVjb21wbGV0ZWNhbGVuZGFycGxhdGZvcm1hcnRpY2xlc3JlcXVpcmVkbW92ZW1lbnRxdWVzdGlvbmJ1aWxkaW5ncG9saXRpY3Nwb3NzaWJsZXJlbGlnaW9ucGh5c2ljYWxmZWVkYmFja3JlZ2lzdGVycGljdHVyZXNkaXNhYmxlZHByb3RvY29sYXVkaWVuY2VzZXR0aW5nc2FjdGl2aXR5ZWxlbWVudHNsZWFybmluZ2FueXRoaW5nYWJzdHJhY3Rwcm9ncmVzc292ZXJ2aWV3bWFnYXppbmVlY29ub21pY3RyYWluaW5ncHJlc3N1cmV2YXJpb3VzIDxzdHJvbmc+cHJvcGVydHlzaG9wcGluZ3RvZ2V0aGVyYWR2YW5jZWRiZWhhdmlvcmRvd25sb2FkZmVhdHVyZWRmb290YmFsbHNlbGVjdGVkTGFuZ3VhZ2VkaXN0YW5jZXJlbWVtYmVydHJhY2tpbmdwYXNzd29yZG1vZGlmaWVkc3R1ZGVudHNkaXJlY3RseWZpZ2h0aW5nbm9ydGhlcm5kYXRhYmFzZWZlc3RpdmFsYnJlYWtpbmdsb2NhdGlvbmludGVybmV0ZHJvcGRvd25wcmFjdGljZWV2aWRlbmNlZnVuY3Rpb25tYXJyaWFnZXJlc3BvbnNlcHJvYmxlbXNuZWdhdGl2ZXByb2dyYW1zYW5hbHlzaXNyZWxlYXNlZGJhbm5lciI+cHVyY2hhc2Vwb2xpY2llc3JlZ2lvbmFsY3JlYXRpdmVhcmd1bWVudGJvb2ttYXJrcmVmZXJyZXJjaGVtaWNhbGRpdmlzaW9uY2FsbGJhY2tzZXBhcmF0ZXByb2plY3RzY29uZmxpY3RoYXJkd2FyZWludGVyZXN0ZGVsaXZlcnltb3VudGFpbm9idGFpbmVkPSBmYWxzZTtmb3IodmFyIGFjY2VwdGVkY2FwYWNpdHljb21wdXRlcmlkZW50aXR5YWlyY3JhZnRlbXBsb3llZHByb3Bvc2VkZG9tZXN0aWNpbmNsdWRlc3Byb3ZpZGVkaG9zcGl0YWx2ZXJ0aWNhbGNvbGxhcHNlYXBwcm9hY2hwYXJ0bmVyc2xvZ28iPjxhZGF1Z2h0ZXJhdXRob3IiIGN1bHR1cmFsZmFtaWxpZXMvaW1hZ2VzL2Fzc2VtYmx5cG93ZXJmdWx0ZWFjaGluZ2ZpbmlzaGVkZGlzdHJpY3Rjcml0aWNhbGNnaS1iaW4vcHVycG9zZXNyZXF1aXJlc2VsZWN0aW9uYmVjb21pbmdwcm92aWRlc2FjYWRlbWljZXhlcmNpc2VhY3R1YWxseW1lZGljaW5lY29uc3RhbnRhY2NpZGVudE1hZ2F6aW5lZG9jdW1lbnRzdGFydGluZ2JvdHRvbSI+b2JzZXJ2ZWQ6ICZxdW90O2V4dGVuZGVkcHJldmlvdXNTb2Z0d2FyZWN1c3RvbWVyZGVjaXNpb25zdHJlbmd0aGRldGFpbGVkc2xpZ2h0bHlwbGFubmluZ3RleHRhcmVhY3VycmVuY3lldmVyeW9uZXN0cmFpZ2h0dHJhbnNmZXJwb3NpdGl2ZXByb2R1Y2VkaGVyaXRhZ2VzaGlwcGluZ2Fic29sdXRlcmVjZWl2ZWRyZWxldmFudGJ1dHRvbiIgdmlvbGVuY2Vhbnl3aGVyZWJlbmVmaXRzbGF1bmNoZWRyZWNlbnRseWFsbGlhbmNlZm9sbG93ZWRtdWx0aXBsZWJ1bGxldGluaW5jbHVkZWRvY2N1cnJlZGludGVybmFsJCh0aGlzKS5yZXB1YmxpYz48dHI+PHRkY29uZ3Jlc3NyZWNvcmRlZHVsdGltYXRlc29sdXRpb248dWwgaWQ9ImRpc2NvdmVySG9tZTwvYT53ZWJzaXRlc25ldHdvcmtzYWx0aG91Z2hlbnRpcmVseW1lbW9yaWFsbWVzc2FnZXNjb250aW51ZWFjdGl2ZSI+c29tZXdoYXR2aWN0b3JpYVdlc3Rlcm4gIHRpdGxlPSJMb2NhdGlvbmNvbnRyYWN0dmlzaXRvcnNEb3dubG9hZHdpdGhvdXQgcmlnaHQiPgptZWFzdXJlc3dpZHRoID0gdmFyaWFibGVpbnZvbHZlZHZpcmdpbmlhbm9ybWFsbHloYXBwZW5lZGFjY291bnRzc3RhbmRpbmduYXRpb25hbFJlZ2lzdGVycHJlcGFyZWRjb250cm9sc2FjY3VyYXRlYmlydGhkYXlzdHJhdGVneW9mZmljaWFsZ3JhcGhpY3NjcmltaW5hbHBvc3NpYmx5Y29uc3VtZXJQZXJzb25hbHNwZWFraW5ndmFsaWRhdGVhY2hpZXZlZC5qcGciIC8+bWFjaGluZXM8L2gyPgogIGtleXdvcmRzZnJpZW5kbHlicm90aGVyc2NvbWJpbmVkb3JpZ2luYWxjb21wb3NlZGV4cGVjdGVkYWRlcXVhdGVwYWtpc3RhbmZvbGxvdyIgdmFsdWFibGU8L2xhYmVsPnJlbGF0aXZlYnJpbmdpbmdpbmNyZWFzZWdvdmVybm9ycGx1Z2lucy9MaXN0IG9mIEhlYWRlciI+IiBuYW1lPSIgKCZxdW90O2dyYWR1YXRlPC9oZWFkPgpjb21tZXJjZW1hbGF5c2lhZGlyZWN0b3JtYWludGFpbjtoZWlnaHQ6c2NoZWR1bGVjaGFuZ2luZ2JhY2sgdG8gY2F0aG9saWNwYXR0ZXJuc2NvbG9yOiAjZ3JlYXRlc3RzdXBwbGllc3JlbGlhYmxlPC91bD4KCQk8c2VsZWN0IGNpdGl6ZW5zY2xvdGhpbmd3YXRjaGluZzxsaSBpZD0ic3BlY2lmaWNjYXJyeWluZ3NlbnRlbmNlPGNlbnRlcj5jb250cmFzdHRoaW5raW5nY2F0Y2goZSlzb3V0aGVybk1pY2hhZWwgbWVyY2hhbnRjYXJvdXNlbHBhZGRpbmc6aW50ZXJpb3Iuc3BsaXQoImxpemF0aW9uT2N0b2JlciApe3JldHVybmltcHJvdmVkLS0mZ3Q7Cgpjb3ZlcmFnZWNoYWlybWFuLnBuZyIgLz5zdWJqZWN0c1JpY2hhcmQgd2hhdGV2ZXJwcm9iYWJseXJlY292ZXJ5YmFzZWJhbGxqdWRnbWVudGNvbm5lY3QuLmNzcyIgLz4gd2Vic2l0ZXJlcG9ydGVkZGVmYXVsdCIvPjwvYT4NCmVsZWN0cmljc2NvdGxhbmRjcmVhdGlvbnF1YW50aXR5LiBJU0JOIDBkaWQgbm90IGluc3RhbmNlLXNlYXJjaC0iIGxhbmc9InNwZWFrZXJzQ29tcHV0ZXJjb250YWluc2FyY2hpdmVzbWluaXN0ZXJyZWFjdGlvbmRpc2NvdW50SXRhbGlhbm9jcml0ZXJpYXN0cm9uZ2x5OiAnaHR0cDonc2NyaXB0J2NvdmVyaW5nb2ZmZXJpbmdhcHBlYXJlZEJyaXRpc2ggaWRlbnRpZnlGYWNlYm9va251bWVyb3VzdmVoaWNsZXNjb25jZXJuc0FtZXJpY2FuaGFuZGxpbmdkaXYgaWQ9IldpbGxpYW0gcHJvdmlkZXJfY29udGVudGFjY3VyYWN5c2VjdGlvbiBhbmRlcnNvbmZsZXhpYmxlQ2F0ZWdvcnlsYXdyZW5jZTxzY3JpcHQ+bGF5b3V0PSJhcHByb3ZlZCBtYXhpbXVtaGVhZGVyIj48L3RhYmxlPlNlcnZpY2VzaGFtaWx0b25jdXJyZW50IGNhbmFkaWFuY2hhbm5lbHMvdGhlbWVzLy9hcnRpY2xlb3B0aW9uYWxwb3J0dWdhbHZhbHVlPSIiaW50ZXJ2YWx3aXJlbGVzc2VudGl0bGVkYWdlbmNpZXNTZWFyY2giIG1lYXN1cmVkdGhvdXNhbmRzcGVuZGluZyZoZWxsaXA7bmV3IERhdGUiIHNpemU9InBhZ2VOYW1lbWlkZGxlIiAiIC8+PC9hPmhpZGRlbiI+c2VxdWVuY2VwZXJzb25hbG92ZXJmbG93b3BpbmlvbnNpbGxpbm9pc2xpbmtzIj4KCTx0aXRsZT52ZXJzaW9uc3NhdHVyZGF5dGVybWluYWxpdGVtcHJvcGVuZ2luZWVyc2VjdGlvbnNkZXNpZ25lcnByb3Bvc2FsPSJmYWxzZSJFc3Bhw7FvbHJlbGVhc2Vzc3VibWl0IiBlciZxdW90O2FkZGl0aW9uc3ltcHRvbXNvcmllbnRlZHJlc291cmNlcmlnaHQiPjxwbGVhc3VyZXN0YXRpb25zaGlzdG9yeS5sZWF2aW5nICBib3JkZXI9Y29udGVudHNjZW50ZXIiPi4KClNvbWUgZGlyZWN0ZWRzdWl0YWJsZWJ1bGdhcmlhLnNob3coKTtkZXNpZ25lZEdlbmVyYWwgY29uY2VwdHNFeGFtcGxlc3dpbGxpYW1zT3JpZ2luYWwiPjxzcGFuPnNlYXJjaCI+b3BlcmF0b3JyZXF1ZXN0c2EgJnF1b3Q7YWxsb3dpbmdEb2N1bWVudHJldmlzaW9uLiAKClRoZSB5b3Vyc2VsZkNvbnRhY3QgbWljaGlnYW5FbmdsaXNoIGNvbHVtYmlhcHJpb3JpdHlwcmludGluZ2RyaW5raW5nZmFjaWxpdHlyZXR1cm5lZENvbnRlbnQgb2ZmaWNlcnNSdXNzaWFuIGdlbmVyYXRlLTg4NTktMSJpbmRpY2F0ZWZhbWlsaWFyIHF1YWxpdHltYXJnaW46MCBjb250ZW50dmlld3BvcnRjb250YWN0cy10aXRsZSI+cG9ydGFibGUubGVuZ3RoIGVsaWdpYmxlaW52b2x2ZXNhdGxhbnRpY29ubG9hZD0iZGVmYXVsdC5zdXBwbGllZHBheW1lbnRzZ2xvc3NhcnkKCkFmdGVyIGd1aWRhbmNlPC90ZD48dGRlbmNvZGluZ21pZGRsZSI+Y2FtZSB0byBkaXNwbGF5c3Njb3R0aXNoam9uYXRoYW5tYWpvcml0eXdpZGdldHMuY2xpbmljYWx0aGFpbGFuZHRlYWNoZXJzPGhlYWQ+CglhZmZlY3RlZHN1cHBvcnRzcG9pbnRlcjt0b1N0cmluZzwvc21hbGw+b2tsYWhvbWF3aWxsIGJlIGludmVzdG9yMCIgYWx0PSJob2xpZGF5c1Jlc291cmNlbGljZW5zZWQgKHdoaWNoIC4gQWZ0ZXIgY29uc2lkZXJ2aXNpdGluZ2V4cGxvcmVycHJpbWFyeSBzZWFyY2giIGFuZHJvaWQicXVpY2tseSBtZWV0aW5nc2VzdGltYXRlO3JldHVybiA7Y29sb3I6IyBoZWlnaHQ9YXBwcm92YWwsICZxdW90OyBjaGVja2VkLm1pbi5qcyJtYWduZXRpYz48L2E+PC9oZm9yZWNhc3QuIFdoaWxlIHRodXJzZGF5ZHZlcnRpc2UmZWFjdXRlO2hhc0NsYXNzZXZhbHVhdGVvcmRlcmluZ2V4aXN0aW5ncGF0aWVudHMgT25saW5lIGNvbG9yYWRvT3B0aW9ucyJjYW1wYmVsbDwhLS0gZW5kPC9zcGFuPjw8YnIgLz4NCl9wb3B1cHN8c2NpZW5jZXMsJnF1b3Q7IHF1YWxpdHkgV2luZG93cyBhc3NpZ25lZGhlaWdodDogPGIgY2xhc3NsZSZxdW90OyB2YWx1ZT0iIENvbXBhbnlleGFtcGxlczxpZnJhbWUgYmVsaWV2ZXNwcmVzZW50c21hcnNoYWxscGFydCBvZiBwcm9wZXJseSkuCgpUaGUgdGF4b25vbXltdWNoIG9mIDwvc3Bhbj4KIiBkYXRhLXNydHVndcOqc3Njcm9sbFRvIHByb2plY3Q8aGVhZD4NCmF0dG9ybmV5ZW1waGFzaXNzcG9uc29yc2ZhbmN5Ym94d29ybGQncyB3aWxkbGlmZWNoZWNrZWQ9c2Vzc2lvbnNwcm9ncmFtbXB4O2ZvbnQtIFByb2plY3Rqb3VybmFsc2JlbGlldmVkdmFjYXRpb250aG9tcHNvbmxpZ2h0aW5nYW5kIHRoZSBzcGVjaWFsIGJvcmRlcj0wY2hlY2tpbmc8L3Rib2R5PjxidXR0b24gQ29tcGxldGVjbGVhcmZpeAo8aGVhZD4KYXJ0aWNsZSA8c2VjdGlvbmZpbmRpbmdzcm9sZSBpbiBwb3B1bGFyICBPY3RvYmVyd2Vic2l0ZSBleHBvc3VyZXVzZWQgdG8gIGNoYW5nZXNvcGVyYXRlZGNsaWNraW5nZW50ZXJpbmdjb21tYW5kc2luZm9ybWVkIG51bWJlcnMgIDwvZGl2PmNyZWF0aW5nb25TdWJtaXRtYXJ5bGFuZGNvbGxlZ2VzYW5hbHl0aWNsaXN0aW5nc2NvbnRhY3QubG9nZ2VkSW5hZHZpc29yeXNpYmxpbmdzY29udGVudCJzJnF1b3Q7KXMuIFRoaXMgcGFja2FnZXNjaGVja2JveHN1Z2dlc3RzcHJlZ25hbnR0b21vcnJvd3NwYWNpbmc9aWNvbi5wbmdqYXBhbmVzZWNvZGViYXNlYnV0dG9uIj5nYW1ibGluZ3N1Y2ggYXMgLCB3aGlsZSA8L3NwYW4+IG1pc3NvdXJpc3BvcnRpbmd0b3A6MXB4IC48L3NwYW4+dGVuc2lvbnN3aWR0aD0iMmxhenlsb2Fkbm92ZW1iZXJ1c2VkIGluIGhlaWdodD0iY3JpcHQiPgombmJzcDs8Lzx0cj48dGQgaGVpZ2h0OjIvcHJvZHVjdGNvdW50cnkgaW5jbHVkZSBmb290ZXIiICZsdDshLS0gdGl0bGUiPjwvanF1ZXJ5LjwvZm9ybT4KKOeugOS9kyko57mB6auUKWhydmF0c2tpaXRhbGlhbm9yb23Dom7Eg3TDvHJrw6dl2KfYsdiv2Yh0YW1iacOpbm5vdGljaWFzbWVuc2FqZXNwZXJzb25hc2RlcmVjaG9zbmFjaW9uYWxzZXJ2aWNpb2NvbnRhY3RvdXN1YXJpb3Nwcm9ncmFtYWdvYmllcm5vZW1wcmVzYXNhbnVuY2lvc3ZhbGVuY2lhY29sb21iaWFkZXNwdcOpc2RlcG9ydGVzcHJveWVjdG9wcm9kdWN0b3DDumJsaWNvbm9zb3Ryb3NoaXN0b3JpYXByZXNlbnRlbWlsbG9uZXNtZWRpYW50ZXByZWd1bnRhYW50ZXJpb3JyZWN1cnNvc3Byb2JsZW1hc2FudGlhZ29udWVzdHJvc29waW5pw7NuaW1wcmltaXJtaWVudHJhc2Ftw6lyaWNhdmVuZGVkb3Jzb2NpZWRhZHJlc3BlY3RvcmVhbGl6YXJyZWdpc3Ryb3BhbGFicmFzaW50ZXLDqXNlbnRvbmNlc2VzcGVjaWFsbWllbWJyb3NyZWFsaWRhZGPDs3Jkb2JhemFyYWdvemFww6FnaW5hc3NvY2lhbGVzYmxvcXVlYXJnZXN0acOzbmFscXVpbGVyc2lzdGVtYXNjaWVuY2lhc2NvbXBsZXRvdmVyc2nDs25jb21wbGV0YWVzdHVkaW9zcMO6YmxpY2FvYmpldGl2b2FsaWNhbnRlYnVzY2Fkb3JjYW50aWRhZGVudHJhZGFzYWNjaW9uZXNhcmNoaXZvc3N1cGVyaW9ybWF5b3LDrWFhbGVtYW5pYWZ1bmNpw7Nuw7psdGltb3NoYWNpZW5kb2FxdWVsbG9zZWRpY2nDs25mZXJuYW5kb2FtYmllbnRlZmFjZWJvb2tudWVzdHJhc2NsaWVudGVzcHJvY2Vzb3NiYXN0YW50ZXByZXNlbnRhcmVwb3J0YXJjb25ncmVzb3B1YmxpY2FyY29tZXJjaW9jb250cmF0b2rDs3ZlbmVzZGlzdHJpdG90w6ljbmljYWNvbmp1bnRvZW5lcmfDrWF0cmFiYWphcmFzdHVyaWFzcmVjaWVudGV1dGlsaXphcmJvbGV0w61uc2FsdmFkb3Jjb3JyZWN0YXRyYWJham9zcHJpbWVyb3NuZWdvY2lvc2xpYmVydGFkZGV0YWxsZXNwYW50YWxsYXByw7N4aW1vYWxtZXLDrWFhbmltYWxlc3F1acOpbmVzY29yYXrDs25zZWNjacOzbmJ1c2NhbmRvb3BjaW9uZXNleHRlcmlvcmNvbmNlcHRvdG9kYXbDrWFnYWxlcsOtYWVzY3JpYmlybWVkaWNpbmFsaWNlbmNpYWNvbnN1bHRhYXNwZWN0b3NjcsOtdGljYWTDs2xhcmVzanVzdGljaWFkZWJlcsOhbnBlcsOtb2RvbmVjZXNpdGFtYW50ZW5lcnBlcXVlw7FvcmVjaWJpZGF0cmlidW5hbHRlbmVyaWZlY2FuY2nDs25jYW5hcmlhc2Rlc2NhcmdhZGl2ZXJzb3NtYWxsb3JjYXJlcXVpZXJldMOpY25pY29kZWJlcsOtYXZpdmllbmRhZmluYW56YXNhZGVsYW50ZWZ1bmNpb25hY29uc2Vqb3NkaWbDrWNpbGNpdWRhZGVzYW50aWd1YXNhdmFuemFkYXTDqXJtaW5vdW5pZGFkZXNzw6FuY2hlemNhbXBhw7Fhc29mdG9uaWNyZXZpc3Rhc2NvbnRpZW5lc2VjdG9yZXNtb21lbnRvc2ZhY3VsdGFkY3LDqWRpdG9kaXZlcnNhc3N1cHVlc3RvZmFjdG9yZXNzZWd1bmRvc3BlcXVlw7Fh0LPQvtC00LDQtdGB0LvQuNC10YHRgtGM0LHRi9C70L7QsdGL0YLRjNGN0YLQvtC80JXRgdC70LjRgtC+0LPQvtC80LXQvdGP0LLRgdC10YXRjdGC0L7QudC00LDQttC10LHRi9C70LjQs9C+0LTRg9C00LXQvdGM0Y3RgtC+0YLQsdGL0LvQsNGB0LXQsdGP0L7QtNC40L3RgdC10LHQtdC90LDQtNC+0YHQsNC50YLRhNC+0YLQvtC90LXQs9C+0YHQstC+0LjRgdCy0L7QudC40LPRgNGL0YLQvtC20LXQstGB0LXQvNGB0LLQvtGO0LvQuNGI0YzRjdGC0LjRhdC/0L7QutCw0LTQvdC10LnQtNC+0LzQsNC80LjRgNCw0LvQuNCx0L7RgtC10LzRg9GF0L7RgtGP0LTQstGD0YXRgdC10YLQuNC70Y7QtNC40LTQtdC70L7QvNC40YDQtdGC0LXQsdGP0YHQstC+0LXQstC40LTQtdGH0LXQs9C+0Y3RgtC40LzRgdGH0LXRgtGC0LXQvNGL0YbQtdC90YvRgdGC0LDQu9Cy0LXQtNGM0YLQtdC80LXQstC+0LTRi9GC0LXQsdC10LLRi9GI0LXQvdCw0LzQuNGC0LjQv9Cw0YLQvtC80YPQv9GA0LDQstC70LjRhtCw0L7QtNC90LDQs9C+0LTRi9C30L3QsNGO0LzQvtCz0YPQtNGA0YPQs9Cy0YHQtdC50LjQtNC10YLQutC40L3QvtC+0LTQvdC+0LTQtdC70LDQtNC10LvQtdGB0YDQvtC60LjRjtC90Y/QstC10YHRjNCV0YHRgtGM0YDQsNC30LDQvdCw0YjQuNin2YTZhNmH2KfZhNiq2YrYrNmF2YrYudiu2KfYtdip2KfZhNiw2YrYudmE2YrZh9is2K/Zitiv2KfZhNii2YbYp9mE2LHYr9iq2K3Zg9mF2LXZgdit2KnZg9in2YbYqtin2YTZhNmK2YrZg9mI2YbYtNio2YPYqdmB2YrZh9in2KjZhtin2KrYrdmI2KfYodij2YPYq9ix2K7ZhNin2YTYp9mE2K3YqNiv2YTZitmE2K/YsdmI2LPYp9i22LrYt9iq2YPZiNmG2YfZhtin2YPYs9in2K3YqdmG2KfYr9mK2KfZhNi32KjYudmE2YrZg9i02YPYsdin2YrZhdmD2YbZhdmG2YfYp9i02LHZg9ip2LHYptmK2LPZhti02YrYt9mF2KfYsNin2KfZhNmB2YbYtNio2KfYqNiq2LnYqNix2LHYrdmF2KnZg9in2YHYqdmK2YLZiNmE2YXYsdmD2LLZg9mE2YXYqdij2K3Zhdiv2YLZhNio2YrZiti52YbZiti12YjYsdip2LfYsdmK2YLYtNin2LHZg9is2YjYp9mE2KPYrtix2YnZhdi52YbYp9in2KjYrdir2LnYsdmI2LbYqNi02YPZhNmF2LPYrNmE2KjZhtin2YbYrtin2YTYr9mD2KrYp9io2YPZhNmK2KnYqNiv2YjZhtij2YrYttin2YrZiNis2K/Zgdix2YrZgtmD2KrYqNiq2KPZgdi22YTZhdi32KjYrtin2YPYq9ix2KjYp9ix2YPYp9mB2LbZhNin2K3ZhNmJ2YbZgdiz2YfYo9mK2KfZhdix2K/ZiNiv2KPZhtmH2KfYr9mK2YbYp9in2YTYp9mG2YXYudix2LbYqti52YTZhdiv2KfYrtmE2YXZhdmD2YYAAAAAAAAAAAEAAQABAAEAAgACAAIAAgAEAAQABAAEAAABAgMEBQYHBwYFBAMCAQAICQoLDA0ODw8ODQwLCgkIEBESExQVFhcXFhUUExIREBgZGhscHR4fHx4dHBsaGRj/////AAAAAAAAAAD/////AQAAAAIAAAACAAAAAQAAAAEAAAADAAAA//8AAQAAAAEAAP//AAEAAAAIAAgACAAIAAAAAQACAAMABAAFAAYAB3Jlc291cmNlc2NvdW50cmllc3F1ZXN0aW9uc2VxdWlwbWVudGNvbW11bml0eWF2YWlsYWJsZWhpZ2hsaWdodERURC94aHRtbG1hcmtldGluZ2tub3dsZWRnZXNvbWV0aGluZ2NvbnRhaW5lcmRpcmVjdGlvbnN1YnNjcmliZWFkdmVydGlzZWNoYXJhY3RlciIgdmFsdWU9Ijwvc2VsZWN0PkF1c3RyYWxpYSIgY2xhc3M9InNpdHVhdGlvbmF1dGhvcml0eWZvbGxvd2luZ3ByaW1hcmlseW9wZXJhdGlvbmNoYWxsZW5nZWRldmVsb3BlZGFub255bW91c2Z1bmN0aW9uIGZ1bmN0aW9uc2NvbXBhbmllc3N0cnVjdHVyZWFncmVlbWVudCIgdGl0bGU9InBvdGVudGlhbGVkdWNhdGlvbmFyZ3VtZW50c3NlY29uZGFyeWNvcHlyaWdodGxhbmd1YWdlc2V4Y2x1c2l2ZWNvbmRpdGlvbjwvZm9ybT4NCnN0YXRlbWVudGF0dGVudGlvbkJpb2dyYXBoeX0gZWxzZSB7CnNvbHV0aW9uc3doZW4gdGhlIEFuYWx5dGljc3RlbXBsYXRlc2Rhbmdlcm91c3NhdGVsbGl0ZWRvY3VtZW50c3B1Ymxpc2hlcmltcG9ydGFudHByb3RvdHlwZWluZmx1ZW5jZSZyYXF1bzs8L2VmZmVjdGl2ZWdlbmVyYWxseXRyYW5zZm9ybWJlYXV0aWZ1bHRyYW5zcG9ydG9yZ2FuaXplZHB1Ymxpc2hlZHByb21pbmVudHVudGlsIHRoZXRodW1ibmFpbE5hdGlvbmFsIC5mb2N1cygpO292ZXIgdGhlIG1pZ3JhdGlvbmFubm91bmNlZGZvb3RlciI+CmV4Y2VwdGlvbmxlc3MgdGhhbmV4cGVuc2l2ZWZvcm1hdGlvbmZyYW1ld29ya3RlcnJpdG9yeW5kaWNhdGlvbmN1cnJlbnRseWNsYXNzTmFtZWNyaXRpY2lzbXRyYWRpdGlvbmVsc2V3aGVyZUFsZXhhbmRlcmFwcG9pbnRlZG1hdGVyaWFsc2Jyb2FkY2FzdG1lbnRpb25lZGFmZmlsaWF0ZTwvb3B0aW9uPnRyZWF0bWVudGRpZmZlcmVudC9kZWZhdWx0LlByZXNpZGVudG9uY2xpY2s9ImJpb2dyYXBoeW90aGVyd2lzZXBlcm1hbmVudEZyYW7Dp2Fpc0hvbGx5d29vZGV4cGFuc2lvbnN0YW5kYXJkczwvc3R5bGU+CnJlZHVjdGlvbkRlY2VtYmVyIHByZWZlcnJlZENhbWJyaWRnZW9wcG9uZW50c0J1c2luZXNzIGNvbmZ1c2lvbj4KPHRpdGxlPnByZXNlbnRlZGV4cGxhaW5lZGRvZXMgbm90IHdvcmxkd2lkZWludGVyZmFjZXBvc2l0aW9uc25ld3NwYXBlcjwvdGFibGU+Cm1vdW50YWluc2xpa2UgdGhlIGVzc2VudGlhbGZpbmFuY2lhbHNlbGVjdGlvbmFjdGlvbj0iL2FiYW5kb25lZEVkdWNhdGlvbnBhcnNlSW50KHN0YWJpbGl0eXVuYWJsZSB0bzwvdGl0bGU+CnJlbGF0aW9uc05vdGUgdGhhdGVmZmljaWVudHBlcmZvcm1lZHR3byB5ZWFyc1NpbmNlIHRoZXRoZXJlZm9yZXdyYXBwZXIiPmFsdGVybmF0ZWluY3JlYXNlZEJhdHRsZSBvZnBlcmNlaXZlZHRyeWluZyB0b25lY2Vzc2FyeXBvcnRyYXllZGVsZWN0aW9uc0VsaXphYmV0aDwvaWZyYW1lPmRpc2NvdmVyeWluc3VyYW5jZXMubGVuZ3RoO2xlZ2VuZGFyeUdlb2dyYXBoeWNhbmRpZGF0ZWNvcnBvcmF0ZXNvbWV0aW1lc3NlcnZpY2VzLmluaGVyaXRlZDwvc3Ryb25nPkNvbW11bml0eXJlbGlnaW91c2xvY2F0aW9uc0NvbW1pdHRlZWJ1aWxkaW5nc3RoZSB3b3JsZG5vIGxvbmdlcmJlZ2lubmluZ3JlZmVyZW5jZWNhbm5vdCBiZWZyZXF1ZW5jeXR5cGljYWxseWludG8gdGhlIHJlbGF0aXZlO3JlY29yZGluZ3ByZXNpZGVudGluaXRpYWxseXRlY2huaXF1ZXRoZSBvdGhlcml0IGNhbiBiZWV4aXN0ZW5jZXVuZGVybGluZXRoaXMgdGltZXRlbGVwaG9uZWl0ZW1zY29wZXByYWN0aWNlc2FkdmFudGFnZSk7cmV0dXJuIEZvciBvdGhlcnByb3ZpZGluZ2RlbW9jcmFjeWJvdGggdGhlIGV4dGVuc2l2ZXN1ZmZlcmluZ3N1cHBvcnRlZGNvbXB1dGVycyBmdW5jdGlvbnByYWN0aWNhbHNhaWQgdGhhdGl0IG1heSBiZUVuZ2xpc2g8L2Zyb20gdGhlIHNjaGVkdWxlZGRvd25sb2FkczwvbGFiZWw+CnN1c3BlY3RlZG1hcmdpbjogMHNwaXJpdHVhbDwvaGVhZD4KCm1pY3Jvc29mdGdyYWR1YWxseWRpc2N1c3NlZGhlIGJlY2FtZWV4ZWN1dGl2ZWpxdWVyeS5qc2hvdXNlaG9sZGNvbmZpcm1lZHB1cmNoYXNlZGxpdGVyYWxseWRlc3Ryb3llZHVwIHRvIHRoZXZhcmlhdGlvbnJlbWFpbmluZ2l0IGlzIG5vdGNlbnR1cmllc0phcGFuZXNlIGFtb25nIHRoZWNvbXBsZXRlZGFsZ29yaXRobWludGVyZXN0c3JlYmVsbGlvbnVuZGVmaW5lZGVuY291cmFnZXJlc2l6YWJsZWludm9sdmluZ3NlbnNpdGl2ZXVuaXZlcnNhbHByb3Zpc2lvbihhbHRob3VnaGZlYXR1cmluZ2NvbmR1Y3RlZCksIHdoaWNoIGNvbnRpbnVlZC1oZWFkZXIiPkZlYnJ1YXJ5IG51bWVyb3VzIG92ZXJmbG93OmNvbXBvbmVudGZyYWdtZW50c2V4Y2VsbGVudGNvbHNwYW49InRlY2huaWNhbG5lYXIgdGhlIEFkdmFuY2VkIHNvdXJjZSBvZmV4cHJlc3NlZEhvbmcgS29uZyBGYWNlYm9va211bHRpcGxlIG1lY2hhbmlzbWVsZXZhdGlvbm9mZmVuc2l2ZTwvZm9ybT4KCXNwb25zb3JlZGRvY3VtZW50Lm9yICZxdW90O3RoZXJlIGFyZXRob3NlIHdob21vdmVtZW50c3Byb2Nlc3Nlc2RpZmZpY3VsdHN1Ym1pdHRlZHJlY29tbWVuZGNvbnZpbmNlZHByb21vdGluZyIgd2lkdGg9Ii5yZXBsYWNlKGNsYXNzaWNhbGNvYWxpdGlvbmhpcyBmaXJzdGRlY2lzaW9uc2Fzc2lzdGFudGluZGljYXRlZGV2b2x1dGlvbi13cmFwcGVyImVub3VnaCB0b2Fsb25nIHRoZWRlbGl2ZXJlZC0tPg0KPCEtLUFtZXJpY2FuIHByb3RlY3RlZE5vdmVtYmVyIDwvc3R5bGU+PGZ1cm5pdHVyZUludGVybmV0ICBvbmJsdXI9InN1c3BlbmRlZHJlY2lwaWVudGJhc2VkIG9uIE1vcmVvdmVyLGFib2xpc2hlZGNvbGxlY3RlZHdlcmUgbWFkZWVtb3Rpb25hbGVtZXJnZW5jeW5hcnJhdGl2ZWFkdm9jYXRlc3B4O2JvcmRlcmNvbW1pdHRlZGRpcj0ibHRyImVtcGxveWVlc3Jlc2VhcmNoLiBzZWxlY3RlZHN1Y2Nlc3NvcmN1c3RvbWVyc2Rpc3BsYXllZFNlcHRlbWJlcmFkZENsYXNzKEZhY2Vib29rIHN1Z2dlc3RlZGFuZCBsYXRlcm9wZXJhdGluZ2VsYWJvcmF0ZVNvbWV0aW1lc0luc3RpdHV0ZWNlcnRhaW5seWluc3RhbGxlZGZvbGxvd2Vyc0plcnVzYWxlbXRoZXkgaGF2ZWNvbXB1dGluZ2dlbmVyYXRlZHByb3ZpbmNlc2d1YXJhbnRlZWFyYml0cmFyeXJlY29nbml6ZXdhbnRlZCB0b3B4O3dpZHRoOnRoZW9yeSBvZmJlaGF2aW91cldoaWxlIHRoZWVzdGltYXRlZGJlZ2FuIHRvIGl0IGJlY2FtZW1hZ25pdHVkZW11c3QgaGF2ZW1vcmUgdGhhbkRpcmVjdG9yeWV4dGVuc2lvbnNlY3JldGFyeW5hdHVyYWxseW9jY3VycmluZ3ZhcmlhYmxlc2dpdmVuIHRoZXBsYXRmb3JtLjwvbGFiZWw+PGZhaWxlZCB0b2NvbXBvdW5kc2tpbmRzIG9mIHNvY2lldGllc2Fsb25nc2lkZSAtLSZndDsKCnNvdXRod2VzdHRoZSByaWdodHJhZGlhdGlvbm1heSBoYXZlIHVuZXNjYXBlKHNwb2tlbiBpbiIgaHJlZj0iL3Byb2dyYW1tZW9ubHkgdGhlIGNvbWUgZnJvbWRpcmVjdG9yeWJ1cmllZCBpbmEgc2ltaWxhcnRoZXkgd2VyZTwvZm9udD48L05vcndlZ2lhbnNwZWNpZmllZHByb2R1Y2luZ3Bhc3NlbmdlcihuZXcgRGF0ZXRlbXBvcmFyeWZpY3Rpb25hbEFmdGVyIHRoZWVxdWF0aW9uc2Rvd25sb2FkLnJlZ3VsYXJseWRldmVsb3BlcmFib3ZlIHRoZWxpbmtlZCB0b3BoZW5vbWVuYXBlcmlvZCBvZnRvb2x0aXAiPnN1YnN0YW5jZWF1dG9tYXRpY2FzcGVjdCBvZkFtb25nIHRoZWNvbm5lY3RlZGVzdGltYXRlc0FpciBGb3JjZXN5c3RlbSBvZm9iamVjdGl2ZWltbWVkaWF0ZW1ha2luZyBpdHBhaW50aW5nc2NvbnF1ZXJlZGFyZSBzdGlsbHByb2NlZHVyZWdyb3d0aCBvZmhlYWRlZCBieUV1cm9wZWFuIGRpdmlzaW9uc21vbGVjdWxlc2ZyYW5jaGlzZWludGVudGlvbmF0dHJhY3RlZGNoaWxkaG9vZGFsc28gdXNlZGRlZGljYXRlZHNpbmdhcG9yZWRlZ3JlZSBvZmZhdGhlciBvZmNvbmZsaWN0czwvYT48L3A+CmNhbWUgZnJvbXdlcmUgdXNlZG5vdGUgdGhhdHJlY2VpdmluZ0V4ZWN1dGl2ZWV2ZW4gbW9yZWFjY2VzcyB0b2NvbW1hbmRlclBvbGl0aWNhbG11c2ljaWFuc2RlbGljaW91c3ByaXNvbmVyc2FkdmVudCBvZlVURi04IiAvPjwhW0NEQVRBWyI+Q29udGFjdFNvdXRoZXJuIGJnY29sb3I9InNlcmllcyBvZi4gSXQgd2FzIGluIEV1cm9wZXBlcm1pdHRlZHZhbGlkYXRlLmFwcGVhcmluZ29mZmljaWFsc3NlcmlvdXNseS1sYW5ndWFnZWluaXRpYXRlZGV4dGVuZGluZ2xvbmctdGVybWluZmxhdGlvbnN1Y2ggdGhhdGdldENvb2tpZW1hcmtlZCBieTwvYnV0dG9uPmltcGxlbWVudGJ1dCBpdCBpc2luY3JlYXNlc2Rvd24gdGhlIHJlcXVpcmluZ2RlcGVuZGVudC0tPgo8IS0tIGludGVydmlld1dpdGggdGhlIGNvcGllcyBvZmNvbnNlbnN1c3dhcyBidWlsdFZlbmV6dWVsYShmb3JtZXJseXRoZSBzdGF0ZXBlcnNvbm5lbHN0cmF0ZWdpY2Zhdm91ciBvZmludmVudGlvbldpa2lwZWRpYWNvbnRpbmVudHZpcnR1YWxseXdoaWNoIHdhc3ByaW5jaXBsZUNvbXBsZXRlIGlkZW50aWNhbHNob3cgdGhhdHByaW1pdGl2ZWF3YXkgZnJvbW1vbGVjdWxhcnByZWNpc2VseWRpc3NvbHZlZFVuZGVyIHRoZXZlcnNpb249Ij4mbmJzcDs8L0l0IGlzIHRoZSBUaGlzIGlzIHdpbGwgaGF2ZW9yZ2FuaXNtc3NvbWUgdGltZUZyaWVkcmljaHdhcyBmaXJzdHRoZSBvbmx5IGZhY3QgdGhhdGZvcm0gaWQ9InByZWNlZGluZ1RlY2huaWNhbHBoeXNpY2lzdG9jY3VycyBpbm5hdmlnYXRvcnNlY3Rpb24iPnNwYW4gaWQ9InNvdWdodCB0b2JlbG93IHRoZXN1cnZpdmluZ308L3N0eWxlPmhpcyBkZWF0aGFzIGluIHRoZWNhdXNlZCBieXBhcnRpYWxseWV4aXN0aW5nIHVzaW5nIHRoZXdhcyBnaXZlbmEgbGlzdCBvZmxldmVscyBvZm5vdGlvbiBvZk9mZmljaWFsIGRpc21pc3NlZHNjaWVudGlzdHJlc2VtYmxlc2R1cGxpY2F0ZWV4cGxvc2l2ZXJlY292ZXJlZGFsbCBvdGhlcmdhbGxlcmllc3twYWRkaW5nOnBlb3BsZSBvZnJlZ2lvbiBvZmFkZHJlc3Nlc2Fzc29jaWF0ZWltZyBhbHQ9ImluIG1vZGVybnNob3VsZCBiZW1ldGhvZCBvZnJlcG9ydGluZ3RpbWVzdGFtcG5lZWRlZCB0b3RoZSBHcmVhdHJlZ2FyZGluZ3NlZW1lZCB0b3ZpZXdlZCBhc2ltcGFjdCBvbmlkZWEgdGhhdHRoZSBXb3JsZGhlaWdodCBvZmV4cGFuZGluZ1RoZXNlIGFyZWN1cnJlbnQiPmNhcmVmdWxseW1haW50YWluc2NoYXJnZSBvZkNsYXNzaWNhbGFkZHJlc3NlZHByZWRpY3RlZG93bmVyc2hpcDxkaXYgaWQ9InJpZ2h0Ij4NCnJlc2lkZW5jZWxlYXZlIHRoZWNvbnRlbnQiPmFyZSBvZnRlbiAgfSkoKTsNCnByb2JhYmx5IFByb2Zlc3Nvci1idXR0b24iIHJlc3BvbmRlZHNheXMgdGhhdGhhZCB0byBiZXBsYWNlZCBpbkh1bmdhcmlhbnN0YXR1cyBvZnNlcnZlcyBhc1VuaXZlcnNhbGV4ZWN1dGlvbmFnZ3JlZ2F0ZWZvciB3aGljaGluZmVjdGlvbmFncmVlZCB0b2hvd2V2ZXIsIHBvcHVsYXIiPnBsYWNlZCBvbmNvbnN0cnVjdGVsZWN0b3JhbHN5bWJvbCBvZmluY2x1ZGluZ3JldHVybiB0b2FyY2hpdGVjdENocmlzdGlhbnByZXZpb3VzIGxpdmluZyBpbmVhc2llciB0b3Byb2Zlc3NvcgombHQ7IS0tIGVmZmVjdCBvZmFuYWx5dGljc3dhcyB0YWtlbndoZXJlIHRoZXRvb2sgb3ZlcmJlbGllZiBpbkFmcmlrYWFuc2FzIGZhciBhc3ByZXZlbnRlZHdvcmsgd2l0aGEgc3BlY2lhbDxmaWVsZHNldENocmlzdG1hc1JldHJpZXZlZAoKSW4gdGhlIGJhY2sgaW50b25vcnRoZWFzdG1hZ2F6aW5lcz48c3Ryb25nPmNvbW1pdHRlZWdvdmVybmluZ2dyb3VwcyBvZnN0b3JlZCBpbmVzdGFibGlzaGEgZ2VuZXJhbGl0cyBmaXJzdHRoZWlyIG93bnBvcHVsYXRlZGFuIG9iamVjdENhcmliYmVhbmFsbG93IHRoZWRpc3RyaWN0c3dpc2NvbnNpbmxvY2F0aW9uLjsgd2lkdGg6IGluaGFiaXRlZFNvY2lhbGlzdEphbnVhcnkgMTwvZm9vdGVyPnNpbWlsYXJseWNob2ljZSBvZnRoZSBzYW1lIHNwZWNpZmljIGJ1c2luZXNzIFRoZSBmaXJzdC5sZW5ndGg7IGRlc2lyZSB0b2RlYWwgd2l0aHNpbmNlIHRoZXVzZXJBZ2VudGNvbmNlaXZlZGluZGV4LnBocGFzICZxdW90O2VuZ2FnZSBpbnJlY2VudGx5LGZldyB5ZWFyc3dlcmUgYWxzbwo8aGVhZD4KPGVkaXRlZCBieWFyZSBrbm93bmNpdGllcyBpbmFjY2Vzc2tleWNvbmRlbW5lZGFsc28gaGF2ZXNlcnZpY2VzLGZhbWlseSBvZlNjaG9vbCBvZmNvbnZlcnRlZG5hdHVyZSBvZiBsYW5ndWFnZW1pbmlzdGVyczwvb2JqZWN0PnRoZXJlIGlzIGEgcG9wdWxhcnNlcXVlbmNlc2Fkdm9jYXRlZFRoZXkgd2VyZWFueSBvdGhlcmxvY2F0aW9uPWVudGVyIHRoZW11Y2ggbW9yZXJlZmxlY3RlZHdhcyBuYW1lZG9yaWdpbmFsIGEgdHlwaWNhbHdoZW4gdGhleWVuZ2luZWVyc2NvdWxkIG5vdHJlc2lkZW50c3dlZG5lc2RheXRoZSB0aGlyZCBwcm9kdWN0c0phbnVhcnkgMndoYXQgdGhleWEgY2VydGFpbnJlYWN0aW9uc3Byb2Nlc3NvcmFmdGVyIGhpc3RoZSBsYXN0IGNvbnRhaW5lZCI+PC9kaXY+CjwvYT48L3RkPmRlcGVuZCBvbnNlYXJjaCI+CnBpZWNlcyBvZmNvbXBldGluZ1JlZmVyZW5jZXRlbm5lc3NlZXdoaWNoIGhhcyB2ZXJzaW9uPTwvc3Bhbj4gPDwvaGVhZGVyPmdpdmVzIHRoZWhpc3RvcmlhbnZhbHVlPSIiPnBhZGRpbmc6MHZpZXcgdGhhdHRvZ2V0aGVyLHRoZSBtb3N0IHdhcyBmb3VuZHN1YnNldCBvZmF0dGFjayBvbmNoaWxkcmVuLHBvaW50cyBvZnBlcnNvbmFsIHBvc2l0aW9uOmFsbGVnZWRseUNsZXZlbGFuZHdhcyBsYXRlcmFuZCBhZnRlcmFyZSBnaXZlbndhcyBzdGlsbHNjcm9sbGluZ2Rlc2lnbiBvZm1ha2VzIHRoZW11Y2ggbGVzc0FtZXJpY2Fucy4KCkFmdGVyICwgYnV0IHRoZU11c2V1bSBvZmxvdWlzaWFuYShmcm9tIHRoZW1pbm5lc290YXBhcnRpY2xlc2EgcHJvY2Vzc0RvbWluaWNhbnZvbHVtZSBvZnJldHVybmluZ2RlZmVuc2l2ZTAwcHh8cmlnaG1hZGUgZnJvbW1vdXNlb3ZlciIgc3R5bGU9InN0YXRlcyBvZih3aGljaCBpc2NvbnRpbnVlc0ZyYW5jaXNjb2J1aWxkaW5nIHdpdGhvdXQgYXdpdGggc29tZXdobyB3b3VsZGEgZm9ybSBvZmEgcGFydCBvZmJlZm9yZSBpdGtub3duIGFzICBTZXJ2aWNlc2xvY2F0aW9uIGFuZCBvZnRlbm1lYXN1cmluZ2FuZCBpdCBpc3BhcGVyYmFja3ZhbHVlcyBvZg0KPHRpdGxlPj0gd2luZG93LmRldGVybWluZWVyJnF1b3Q7IHBsYXllZCBieWFuZCBlYXJseTwvY2VudGVyPmZyb20gdGhpc3RoZSB0aHJlZXBvd2VyIGFuZG9mICZxdW90O2lubmVySFRNTDxhIGhyZWY9Ink6aW5saW5lO0NodXJjaCBvZnRoZSBldmVudHZlcnkgaGlnaG9mZmljaWFsIC1oZWlnaHQ6IGNvbnRlbnQ9Ii9jZ2ktYmluL3RvIGNyZWF0ZWFmcmlrYWFuc2VzcGVyYW50b2ZyYW7Dp2Fpc2xhdHZpZcWhdWxpZXR1dmnFs8SMZcWhdGluYcSNZcWhdGluYeC5hOC4l+C4ouaXpeacrOiqnueugOS9k+Wtl+e5gemrlOWtl+2VnOq1reyWtOS4uuS7gOS5iOiuoeeul+acuueslOiusOacrOiojuirluWNgOacjeWKoeWZqOS6kuiBlOe9keaIv+WcsOS6p+S/seS5kOmDqOWHuueJiOekvuaOkuihjOamnOmDqOiQveagvOi/m+S4gOatpeaUr+S7mOWunemqjOivgeeggeWnlOWRmOS8muaVsOaNruW6k+a2iOi0ueiAheWKnuWFrOWupOiuqOiuuuWMuua3seWcs+W4guaSreaUvuWZqOWMl+S6rOW4guWkp+WtpueUn+i2iuadpei2iueuoeeQhuWRmOS/oeaBr+e9kXNlcnZpY2lvc2FydMOtY3Vsb2FyZ2VudGluYWJhcmNlbG9uYWN1YWxxdWllcnB1YmxpY2Fkb3Byb2R1Y3Rvc3BvbMOtdGljYXJlc3B1ZXN0YXdpa2lwZWRpYXNpZ3VpZW50ZWLDunNxdWVkYWNvbXVuaWRhZHNlZ3VyaWRhZHByaW5jaXBhbHByZWd1bnRhc2NvbnRlbmlkb3Jlc3BvbmRlcnZlbmV6dWVsYXByb2JsZW1hc2RpY2llbWJyZXJlbGFjacOzbm5vdmllbWJyZXNpbWlsYXJlc3Byb3llY3Rvc3Byb2dyYW1hc2luc3RpdHV0b2FjdGl2aWRhZGVuY3VlbnRyYWVjb25vbcOtYWltw6FnZW5lc2NvbnRhY3RhcmRlc2Nhcmdhcm5lY2VzYXJpb2F0ZW5jacOzbnRlbMOpZm9ub2NvbWlzacOzbmNhbmNpb25lc2NhcGFjaWRhZGVuY29udHJhcmFuw6FsaXNpc2Zhdm9yaXRvc3TDqXJtaW5vc3Byb3ZpbmNpYWV0aXF1ZXRhc2VsZW1lbnRvc2Z1bmNpb25lc3Jlc3VsdGFkb2NhcsOhY3RlcnByb3BpZWRhZHByaW5jaXBpb25lY2VzaWRhZG11bmljaXBhbGNyZWFjacOzbmRlc2Nhcmdhc3ByZXNlbmNpYWNvbWVyY2lhbG9waW5pb25lc2VqZXJjaWNpb2VkaXRvcmlhbHNhbGFtYW5jYWdvbnrDoWxlemRvY3VtZW50b3BlbMOtY3VsYXJlY2llbnRlc2dlbmVyYWxlc3RhcnJhZ29uYXByw6FjdGljYW5vdmVkYWRlc3Byb3B1ZXN0YXBhY2llbnRlc3TDqWNuaWNhc29iamV0aXZvc2NvbnRhY3Rvc+CkruClh+CkguCksuCkv+Ckj+CkueCliOCkguCkl+Ckr+CkvuCkuOCkvuCkpeCkj+CkteCkguCksOCkueClh+CkleCli+CkiOCkleClgeCkm+CksOCkueCkvuCkrOCkvuCkpuCkleCkueCkvuCkuOCkreClgOCkueClgeCkj+CksOCkueClgOCkruCliOCkguCkpuCkv+CkqOCkrOCkvuCkpGRpcGxvZG9jc+CkuOCkruCkr+CksOClguCkquCkqOCkvuCkruCkquCkpOCkvuCkq+Ckv+CksOCklOCkuOCkpOCkpOCksOCkueCksuCli+Ckl+CkueClgeCkhuCkrOCkvuCksOCkpuClh+CktuCkueClgeCkiOCkluClh+CksuCkr+CkpuCkv+CkleCkvuCkruCkteClh+CkrOCkpOClgOCkqOCkrOClgOCkmuCkruCljOCkpOCkuOCkvuCksuCksuClh+CkluCknOClieCkrOCkruCkpuCkpuCkpOCkpeCkvuCkqOCkueClgOCktuCkueCksOCkheCksuCkl+CkleCkreClgOCkqOCkl+CksOCkquCkvuCkuOCksOCkvuCkpOCkleCkv+Ckj+CkieCkuOClh+Ckl+Ckr+ClgOCkueClguCkgeCkhuCkl+Clh+Ckn+ClgOCkruCkluCli+CknOCkleCkvuCksOCkheCkreClgOCkl+Ckr+Clh+CkpOClgeCkruCkteCli+Ckn+CkpuClh+CkguCkheCkl+CksOCkkOCkuOClh+CkruClh+CksuCksuCkl+CkvuCkueCkvuCksuCkiuCkquCksOCkmuCkvuCksOCkkOCkuOCkvuCkpuClh+CksOCknOCkv+CkuOCkpuCkv+CksuCkrOCkguCkpuCkrOCkqOCkvuCkueClguCkguCksuCkvuCkluCknOClgOCkpOCkrOCkn+CkqOCkruCkv+CksuCkh+CkuOClh+CkhuCkqOClh+CkqOCkr+CkvuCkleClgeCksuCksuClieCkl+CkreCkvuCkl+CksOClh+CksuCknOCkl+CkueCksOCkvuCkruCksuCkl+Clh+CkquClh+CknOCkueCkvuCkpeCkh+CkuOClgOCkuOCkueClgOCkleCksuCkvuCkoOClgOCkleCkueCkvuCkgeCkpuClguCksOCkpOCkueCkpOCkuOCkvuCkpOCkr+CkvuCkpuCkhuCkr+CkvuCkquCkvuCkleCkleCljOCkqOCktuCkvuCkruCkpuClh+CkluCkr+CkueClgOCksOCkvuCkr+CkluClgeCkpuCksuCkl+ClgGNhdGVnb3JpZXNleHBlcmllbmNlPC90aXRsZT4NCkNvcHlyaWdodCBqYXZhc2NyaXB0Y29uZGl0aW9uc2V2ZXJ5dGhpbmc8cCBjbGFzcz0idGVjaG5vbG9neWJhY2tncm91bmQ8YSBjbGFzcz0ibWFuYWdlbWVudCZjb3B5OyAyMDFqYXZhU2NyaXB0Y2hhcmFjdGVyc2JyZWFkY3J1bWJ0aGVtc2VsdmVzaG9yaXpvbnRhbGdvdmVybm1lbnRDYWxpZm9ybmlhYWN0aXZpdGllc2Rpc2NvdmVyZWROYXZpZ2F0aW9udHJhbnNpdGlvbmNvbm5lY3Rpb25uYXZpZ2F0aW9uYXBwZWFyYW5jZTwvdGl0bGU+PG1jaGVja2JveCIgdGVjaG5pcXVlc3Byb3RlY3Rpb25hcHBhcmVudGx5YXMgd2VsbCBhc3VudCcsICdVQS1yZXNvbHV0aW9ub3BlcmF0aW9uc3RlbGV2aXNpb250cmFuc2xhdGVkV2FzaGluZ3Rvbm5hdmlnYXRvci4gPSB3aW5kb3cuaW1wcmVzc2lvbiZsdDticiZndDtsaXRlcmF0dXJlcG9wdWxhdGlvbmJnY29sb3I9IiNlc3BlY2lhbGx5IGNvbnRlbnQ9InByb2R1Y3Rpb25uZXdzbGV0dGVycHJvcGVydGllc2RlZmluaXRpb25sZWFkZXJzaGlwVGVjaG5vbG9neVBhcmxpYW1lbnRjb21wYXJpc29udWwgY2xhc3M9Ii5pbmRleE9mKCJjb25jbHVzaW9uZGlzY3Vzc2lvbmNvbXBvbmVudHNiaW9sb2dpY2FsUmV2b2x1dGlvbl9jb250YWluZXJ1bmRlcnN0b29kbm9zY3JpcHQ+PHBlcm1pc3Npb25lYWNoIG90aGVyYXRtb3NwaGVyZSBvbmZvY3VzPSI8Zm9ybSBpZD0icHJvY2Vzc2luZ3RoaXMudmFsdWVnZW5lcmF0aW9uQ29uZmVyZW5jZXN1YnNlcXVlbnR3ZWxsLWtub3dudmFyaWF0aW9uc3JlcHV0YXRpb25waGVub21lbm9uZGlzY2lwbGluZWxvZ28ucG5nIiAoZG9jdW1lbnQsYm91bmRhcmllc2V4cHJlc3Npb25zZXR0bGVtZW50QmFja2dyb3VuZG91dCBvZiB0aGVlbnRlcnByaXNlKCJodHRwczoiIHVuZXNjYXBlKCJwYXNzd29yZCIgZGVtb2NyYXRpYzxhIGhyZWY9Ii93cmFwcGVyIj4KbWVtYmVyc2hpcGxpbmd1aXN0aWNweDtwYWRkaW5ncGhpbG9zb3BoeWFzc2lzdGFuY2V1bml2ZXJzaXR5ZmFjaWxpdGllc3JlY29nbml6ZWRwcmVmZXJlbmNlaWYgKHR5cGVvZm1haW50YWluZWR2b2NhYnVsYXJ5aHlwb3RoZXNpcy5zdWJtaXQoKTsmYW1wO25ic3A7YW5ub3RhdGlvbmJlaGluZCB0aGVGb3VuZGF0aW9ucHVibGlzaGVyImFzc3VtcHRpb25pbnRyb2R1Y2VkY29ycnVwdGlvbnNjaWVudGlzdHNleHBsaWNpdGx5aW5zdGVhZCBvZmRpbWVuc2lvbnMgb25DbGljaz0iY29uc2lkZXJlZGRlcGFydG1lbnRvY2N1cGF0aW9uc29vbiBhZnRlcmludmVzdG1lbnRwcm9ub3VuY2VkaWRlbnRpZmllZGV4cGVyaW1lbnRNYW5hZ2VtZW50Z2VvZ3JhcGhpYyIgaGVpZ2h0PSJsaW5rIHJlbD0iLnJlcGxhY2UoL2RlcHJlc3Npb25jb25mZXJlbmNlcHVuaXNobWVudGVsaW1pbmF0ZWRyZXNpc3RhbmNlYWRhcHRhdGlvbm9wcG9zaXRpb253ZWxsIGtub3duc3VwcGxlbWVudGRldGVybWluZWRoMSBjbGFzcz0iMHB4O21hcmdpbm1lY2hhbmljYWxzdGF0aXN0aWNzY2VsZWJyYXRlZEdvdmVybm1lbnQKCkR1cmluZyB0ZGV2ZWxvcGVyc2FydGlmaWNpYWxlcXVpdmFsZW50b3JpZ2luYXRlZENvbW1pc3Npb25hdHRhY2htZW50PHNwYW4gaWQ9InRoZXJlIHdlcmVOZWRlcmxhbmRzYmV5b25kIHRoZXJlZ2lzdGVyZWRqb3VybmFsaXN0ZnJlcXVlbnRseWFsbCBvZiB0aGVsYW5nPSJlbiIgPC9zdHlsZT4NCmFic29sdXRlOyBzdXBwb3J0aW5nZXh0cmVtZWx5IG1haW5zdHJlYW08L3N0cm9uZz4gcG9wdWxhcml0eWVtcGxveW1lbnQ8L3RhYmxlPg0KIGNvbHNwYW49IjwvZm9ybT4KICBjb252ZXJzaW9uYWJvdXQgdGhlIDwvcD48L2Rpdj5pbnRlZ3JhdGVkIiBsYW5nPSJlblBvcnR1Z3Vlc2VzdWJzdGl0dXRlaW5kaXZpZHVhbGltcG9zc2libGVtdWx0aW1lZGlhYWxtb3N0IGFsbHB4IHNvbGlkICNhcGFydCBmcm9tc3ViamVjdCB0b2luIEVuZ2xpc2hjcml0aWNpemVkZXhjZXB0IGZvcmd1aWRlbGluZXNvcmlnaW5hbGx5cmVtYXJrYWJsZXRoZSBzZWNvbmRoMiBjbGFzcz0iPGEgdGl0bGU9IihpbmNsdWRpbmdwYXJhbWV0ZXJzcHJvaGliaXRlZD0gImh0dHA6Ly9kaWN0aW9uYXJ5cGVyY2VwdGlvbnJldm9sdXRpb25mb3VuZGF0aW9ucHg7aGVpZ2h0OnN1Y2Nlc3NmdWxzdXBwb3J0ZXJzbWlsbGVubml1bWhpcyBmYXRoZXJ0aGUgJnF1b3Q7bm8tcmVwZWF0O2NvbW1lcmNpYWxpbmR1c3RyaWFsZW5jb3VyYWdlZGFtb3VudCBvZiB1bm9mZmljaWFsZWZmaWNpZW5jeVJlZmVyZW5jZXNjb29yZGluYXRlZGlzY2xhaW1lcmV4cGVkaXRpb25kZXZlbG9waW5nY2FsY3VsYXRlZHNpbXBsaWZpZWRsZWdpdGltYXRlc3Vic3RyaW5nKDAiIGNsYXNzPSJjb21wbGV0ZWx5aWxsdXN0cmF0ZWZpdmUgeWVhcnNpbnN0cnVtZW50UHVibGlzaGluZzEiIGNsYXNzPSJwc3ljaG9sb2d5Y29uZmlkZW5jZW51bWJlciBvZiBhYnNlbmNlIG9mZm9jdXNlZCBvbmpvaW5lZCB0aGVzdHJ1Y3R1cmVzcHJldmlvdXNseT48L2lmcmFtZT5vbmNlIGFnYWluYnV0IHJhdGhlcmltbWlncmFudHNvZiBjb3Vyc2UsYSBncm91cCBvZkxpdGVyYXR1cmVVbmxpa2UgdGhlPC9hPiZuYnNwOwpmdW5jdGlvbiBpdCB3YXMgdGhlQ29udmVudGlvbmF1dG9tb2JpbGVQcm90ZXN0YW50YWdncmVzc2l2ZWFmdGVyIHRoZSBTaW1pbGFybHksIiAvPjwvZGl2PmNvbGxlY3Rpb24NCmZ1bmN0aW9udmlzaWJpbGl0eXRoZSB1c2Ugb2Z2b2x1bnRlZXJzYXR0cmFjdGlvbnVuZGVyIHRoZSB0aHJlYXRlbmVkKjwhW0NEQVRBW2ltcG9ydGFuY2VpbiBnZW5lcmFsdGhlIGxhdHRlcjwvZm9ybT4KPC8uaW5kZXhPZignaSA9IDA7IGkgPGRpZmZlcmVuY2VkZXZvdGVkIHRvdHJhZGl0aW9uc3NlYXJjaCBmb3J1bHRpbWF0ZWx5dG91cm5hbWVudGF0dHJpYnV0ZXNzby1jYWxsZWQgfQo8L3N0eWxlPmV2YWx1YXRpb25lbXBoYXNpemVkYWNjZXNzaWJsZTwvc2VjdGlvbj5zdWNjZXNzaW9uYWxvbmcgd2l0aE1lYW53aGlsZSxpbmR1c3RyaWVzPC9hPjxiciAvPmhhcyBiZWNvbWVhc3BlY3RzIG9mVGVsZXZpc2lvbnN1ZmZpY2llbnRiYXNrZXRiYWxsYm90aCBzaWRlc2NvbnRpbnVpbmdhbiBhcnRpY2xlPGltZyBhbHQ9ImFkdmVudHVyZXNoaXMgbW90aGVybWFuY2hlc3RlcnByaW5jaXBsZXNwYXJ0aWN1bGFyY29tbWVudGFyeWVmZmVjdHMgb2ZkZWNpZGVkIHRvIj48c3Ryb25nPnB1Ymxpc2hlcnNKb3VybmFsIG9mZGlmZmljdWx0eWZhY2lsaXRhdGVhY2NlcHRhYmxlc3R5bGUuY3NzIglmdW5jdGlvbiBpbm5vdmF0aW9uPkNvcHlyaWdodHNpdHVhdGlvbnN3b3VsZCBoYXZlYnVzaW5lc3Nlc0RpY3Rpb25hcnlzdGF0ZW1lbnRzb2Z0ZW4gdXNlZHBlcnNpc3RlbnRpbiBKYW51YXJ5Y29tcHJpc2luZzwvdGl0bGU+CglkaXBsb21hdGljY29udGFpbmluZ3BlcmZvcm1pbmdleHRlbnNpb25zbWF5IG5vdCBiZWNvbmNlcHQgb2Ygb25jbGljaz0iSXQgaXMgYWxzb2ZpbmFuY2lhbCBtYWtpbmcgdGhlTHV4ZW1ib3VyZ2FkZGl0aW9uYWxhcmUgY2FsbGVkZW5nYWdlZCBpbiJzY3JpcHQiKTtidXQgaXQgd2FzZWxlY3Ryb25pY29uc3VibWl0PSIKPCEtLSBFbmQgZWxlY3RyaWNhbG9mZmljaWFsbHlzdWdnZXN0aW9udG9wIG9mIHRoZXVubGlrZSB0aGVBdXN0cmFsaWFuT3JpZ2luYWxseXJlZmVyZW5jZXMKPC9oZWFkPg0KcmVjb2duaXNlZGluaXRpYWxpemVsaW1pdGVkIHRvQWxleGFuZHJpYXJldGlyZW1lbnRBZHZlbnR1cmVzZm91ciB5ZWFycwoKJmx0OyEtLSBpbmNyZWFzaW5nZGVjb3JhdGlvbmgzIGNsYXNzPSJvcmlnaW5zIG9mb2JsaWdhdGlvbnJlZ3VsYXRpb25jbGFzc2lmaWVkKGZ1bmN0aW9uKGFkdmFudGFnZXNiZWluZyB0aGUgaGlzdG9yaWFuczxiYXNlIGhyZWZyZXBlYXRlZGx5d2lsbGluZyB0b2NvbXBhcmFibGVkZXNpZ25hdGVkbm9taW5hdGlvbmZ1bmN0aW9uYWxpbnNpZGUgdGhlcmV2ZWxhdGlvbmVuZCBvZiB0aGVzIGZvciB0aGUgYXV0aG9yaXplZHJlZnVzZWQgdG90YWtlIHBsYWNlYXV0b25vbW91c2NvbXByb21pc2Vwb2xpdGljYWwgcmVzdGF1cmFudHR3byBvZiB0aGVGZWJydWFyeSAycXVhbGl0eSBvZnN3Zm9iamVjdC51bmRlcnN0YW5kbmVhcmx5IGFsbHdyaXR0ZW4gYnlpbnRlcnZpZXdzIiB3aWR0aD0iMXdpdGhkcmF3YWxmbG9hdDpsZWZ0aXMgdXN1YWxseWNhbmRpZGF0ZXNuZXdzcGFwZXJzbXlzdGVyaW91c0RlcGFydG1lbnRiZXN0IGtub3ducGFybGlhbWVudHN1cHByZXNzZWRjb252ZW5pZW50cmVtZW1iZXJlZGRpZmZlcmVudCBzeXN0ZW1hdGljaGFzIGxlZCB0b3Byb3BhZ2FuZGFjb250cm9sbGVkaW5mbHVlbmNlc2NlcmVtb25pYWxwcm9jbGFpbWVkUHJvdGVjdGlvbmxpIGNsYXNzPSJTY2llbnRpZmljY2xhc3M9Im5vLXRyYWRlbWFya3Ntb3JlIHRoYW4gd2lkZXNwcmVhZExpYmVyYXRpb250b29rIHBsYWNlZGF5IG9mIHRoZWFzIGxvbmcgYXNpbXByaXNvbmVkQWRkaXRpb25hbAo8aGVhZD4KPG1MYWJvcmF0b3J5Tm92ZW1iZXIgMmV4Y2VwdGlvbnNJbmR1c3RyaWFsdmFyaWV0eSBvZmZsb2F0OiBsZWZEdXJpbmcgdGhlYXNzZXNzbWVudGhhdmUgYmVlbiBkZWFscyB3aXRoU3RhdGlzdGljc29jY3VycmVuY2UvdWw+PC9kaXY+Y2xlYXJmaXgiPnRoZSBwdWJsaWNtYW55IHllYXJzd2hpY2ggd2VyZW92ZXIgdGltZSxzeW5vbnltb3VzY29udGVudCI+CnByZXN1bWFibHloaXMgZmFtaWx5dXNlckFnZW50LnVuZXhwZWN0ZWRpbmNsdWRpbmcgY2hhbGxlbmdlZGEgbWlub3JpdHl1bmRlZmluZWQiYmVsb25ncyB0b3Rha2VuIGZyb21pbiBPY3RvYmVycG9zaXRpb246IHNhaWQgdG8gYmVyZWxpZ2lvdXMgRmVkZXJhdGlvbiByb3dzcGFuPSJvbmx5IGEgZmV3bWVhbnQgdGhhdGxlZCB0byB0aGUtLT4NCjxkaXYgPGZpZWxkc2V0PkFyY2hiaXNob3AgY2xhc3M9Im5vYmVpbmcgdXNlZGFwcHJvYWNoZXNwcml2aWxlZ2Vzbm9zY3JpcHQ+CnJlc3VsdHMgaW5tYXkgYmUgdGhlRWFzdGVyIGVnZ21lY2hhbmlzbXNyZWFzb25hYmxlUG9wdWxhdGlvbkNvbGxlY3Rpb25zZWxlY3RlZCI+bm9zY3JpcHQ+DS9pbmRleC5waHBhcnJpdmFsIG9mLWpzc2RrJykpO21hbmFnZWQgdG9pbmNvbXBsZXRlY2FzdWFsdGllc2NvbXBsZXRpb25DaHJpc3RpYW5zU2VwdGVtYmVyIGFyaXRobWV0aWNwcm9jZWR1cmVzbWlnaHQgaGF2ZVByb2R1Y3Rpb25pdCBhcHBlYXJzUGhpbG9zb3BoeWZyaWVuZHNoaXBsZWFkaW5nIHRvZ2l2aW5nIHRoZXRvd2FyZCB0aGVndWFyYW50ZWVkZG9jdW1lbnRlZGNvbG9yOiMwMDB2aWRlbyBnYW1lY29tbWlzc2lvbnJlZmxlY3RpbmdjaGFuZ2UgdGhlYXNzb2NpYXRlZHNhbnMtc2VyaWZvbmtleXByZXNzOyBwYWRkaW5nOkhlIHdhcyB0aGV1bmRlcmx5aW5ndHlwaWNhbGx5ICwgYW5kIHRoZSBzcmNFbGVtZW50c3VjY2Vzc2l2ZXNpbmNlIHRoZSBzaG91bGQgYmUgbmV0d29ya2luZ2FjY291bnRpbmd1c2Ugb2YgdGhlbG93ZXIgdGhhbnNob3dzIHRoYXQ8L3NwYW4+CgkJY29tcGxhaW50c2NvbnRpbnVvdXNxdWFudGl0aWVzYXN0cm9ub21lcmhlIGRpZCBub3RkdWUgdG8gaXRzYXBwbGllZCB0b2FuIGF2ZXJhZ2VlZmZvcnRzIHRvdGhlIGZ1dHVyZWF0dGVtcHQgdG9UaGVyZWZvcmUsY2FwYWJpbGl0eVJlcHVibGljYW53YXMgZm9ybWVkRWxlY3Ryb25pY2tpbG9tZXRlcnNjaGFsbGVuZ2VzcHVibGlzaGluZ3RoZSBmb3JtZXJpbmRpZ2Vub3VzZGlyZWN0aW9uc3N1YnNpZGlhcnljb25zcGlyYWN5ZGV0YWlscyBvZmFuZCBpbiB0aGVhZmZvcmRhYmxlc3Vic3RhbmNlc3JlYXNvbiBmb3Jjb252ZW50aW9uaXRlbXR5cGU9ImFic29sdXRlbHlzdXBwb3NlZGx5cmVtYWluZWQgYWF0dHJhY3RpdmV0cmF2ZWxsaW5nc2VwYXJhdGVseWZvY3VzZXMgb25lbGVtZW50YXJ5YXBwbGljYWJsZWZvdW5kIHRoYXRzdHlsZXNoZWV0bWFudXNjcmlwdHN0YW5kcyBmb3Igbm8tcmVwZWF0KHNvbWV0aW1lc0NvbW1lcmNpYWxpbiBBbWVyaWNhdW5kZXJ0YWtlbnF1YXJ0ZXIgb2ZhbiBleGFtcGxlcGVyc29uYWxseWluZGV4LnBocD88L2J1dHRvbj4KcGVyY2VudGFnZWJlc3Qta25vd25jcmVhdGluZyBhIiBkaXI9Imx0ckxpZXV0ZW5hbnQKPGRpdiBpZD0idGhleSB3b3VsZGFiaWxpdHkgb2ZtYWRlIHVwIG9mbm90ZWQgdGhhdGNsZWFyIHRoYXRhcmd1ZSB0aGF0dG8gYW5vdGhlcmNoaWxkcmVuJ3NwdXJwb3NlIG9mZm9ybXVsYXRlZGJhc2VkIHVwb250aGUgcmVnaW9uc3ViamVjdCBvZnBhc3NlbmdlcnNwb3NzZXNzaW9uLgoKSW4gdGhlIEJlZm9yZSB0aGVhZnRlcndhcmRzY3VycmVudGx5IGFjcm9zcyB0aGVzY2llbnRpZmljY29tbXVuaXR5LmNhcGl0YWxpc21pbiBHZXJtYW55cmlnaHQtd2luZ3RoZSBzeXN0ZW1Tb2NpZXR5IG9mcG9saXRpY2lhbmRpcmVjdGlvbjp3ZW50IG9uIHRvcmVtb3ZhbCBvZiBOZXcgWW9yayBhcGFydG1lbnRzaW5kaWNhdGlvbmR1cmluZyB0aGV1bmxlc3MgdGhlaGlzdG9yaWNhbGhhZCBiZWVuIGFkZWZpbml0aXZlaW5ncmVkaWVudGF0dGVuZGFuY2VDZW50ZXIgZm9ycHJvbWluZW5jZXJlYWR5U3RhdGVzdHJhdGVnaWVzYnV0IGluIHRoZWFzIHBhcnQgb2Zjb25zdGl0dXRlY2xhaW0gdGhhdGxhYm9yYXRvcnljb21wYXRpYmxlZmFpbHVyZSBvZiwgc3VjaCBhcyBiZWdhbiB3aXRodXNpbmcgdGhlIHRvIHByb3ZpZGVmZWF0dXJlIG9mZnJvbSB3aGljaC8iIGNsYXNzPSJnZW9sb2dpY2Fsc2V2ZXJhbCBvZmRlbGliZXJhdGVpbXBvcnRhbnQgaG9sZHMgdGhhdGluZyZxdW90OyB2YWxpZ249dG9wdGhlIEdlcm1hbm91dHNpZGUgb2ZuZWdvdGlhdGVkaGlzIGNhcmVlcnNlcGFyYXRpb25pZD0ic2VhcmNod2FzIGNhbGxlZHRoZSBmb3VydGhyZWNyZWF0aW9ub3RoZXIgdGhhbnByZXZlbnRpb253aGlsZSB0aGUgZWR1Y2F0aW9uLGNvbm5lY3RpbmdhY2N1cmF0ZWx5d2VyZSBidWlsdHdhcyBraWxsZWRhZ3JlZW1lbnRzbXVjaCBtb3JlIER1ZSB0byB0aGV3aWR0aDogMTAwc29tZSBvdGhlcktpbmdkb20gb2Z0aGUgZW50aXJlZmFtb3VzIGZvcnRvIGNvbm5lY3RvYmplY3RpdmVzdGhlIEZyZW5jaHBlb3BsZSBhbmRmZWF0dXJlZCI+aXMgc2FpZCB0b3N0cnVjdHVyYWxyZWZlcmVuZHVtbW9zdCBvZnRlbmEgc2VwYXJhdGUtPgo8ZGl2IGlkIE9mZmljaWFsIHdvcmxkd2lkZS5hcmlhLWxhYmVsdGhlIHBsYW5ldGFuZCBpdCB3YXNkIiB2YWx1ZT0ibG9va2luZyBhdGJlbmVmaWNpYWxhcmUgaW4gdGhlbW9uaXRvcmluZ3JlcG9ydGVkbHl0aGUgbW9kZXJud29ya2luZyBvbmFsbG93ZWQgdG93aGVyZSB0aGUgaW5ub3ZhdGl2ZTwvYT48L2Rpdj5zb3VuZHRyYWNrc2VhcmNoRm9ybXRlbmQgdG8gYmVpbnB1dCBpZD0ib3BlbmluZyBvZnJlc3RyaWN0ZWRhZG9wdGVkIGJ5YWRkcmVzc2luZ3RoZW9sb2dpYW5tZXRob2RzIG9mdmFyaWFudCBvZkNocmlzdGlhbiB2ZXJ5IGxhcmdlYXV0b21vdGl2ZWJ5IGZhciB0aGVyYW5nZSBmcm9tcHVyc3VpdCBvZmZvbGxvdyB0aGVicm91Z2h0IHRvaW4gRW5nbGFuZGFncmVlIHRoYXRhY2N1c2VkIG9mY29tZXMgZnJvbXByZXZlbnRpbmdkaXYgc3R5bGU9aGlzIG9yIGhlcnRyZW1lbmRvdXNmcmVlZG9tIG9mY29uY2VybmluZzAgMWVtIDFlbTtCYXNrZXRiYWxsL3N0eWxlLmNzc2FuIGVhcmxpZXJldmVuIGFmdGVyLyIgdGl0bGU9Ii5jb20vaW5kZXh0YWtpbmcgdGhlcGl0dHNidXJnaGNvbnRlbnQiPg08c2NyaXB0PihmdHVybmVkIG91dGhhdmluZyB0aGU8L3NwYW4+DQogb2NjYXNpb25hbGJlY2F1c2UgaXRzdGFydGVkIHRvcGh5c2ljYWxseT48L2Rpdj4KICBjcmVhdGVkIGJ5Q3VycmVudGx5LCBiZ2NvbG9yPSJ0YWJpbmRleD0iZGlzYXN0cm91c0FuYWx5dGljcyBhbHNvIGhhcyBhPjxkaXYgaWQ9Ijwvc3R5bGU+CjxjYWxsZWQgZm9yc2luZ2VyIGFuZC5zcmMgPSAiLy92aW9sYXRpb25zdGhpcyBwb2ludGNvbnN0YW50bHlpcyBsb2NhdGVkcmVjb3JkaW5nc2QgZnJvbSB0aGVuZWRlcmxhbmRzcG9ydHVndcOqc9ei15HXqNeZ16rZgdin2LHYs9uMZGVzYXJyb2xsb2NvbWVudGFyaW9lZHVjYWNpw7Nuc2VwdGllbWJyZXJlZ2lzdHJhZG9kaXJlY2Npw7NudWJpY2FjacOzbnB1YmxpY2lkYWRyZXNwdWVzdGFzcmVzdWx0YWRvc2ltcG9ydGFudGVyZXNlcnZhZG9zYXJ0w61jdWxvc2RpZmVyZW50ZXNzaWd1aWVudGVzcmVww7pibGljYXNpdHVhY2nDs25taW5pc3RlcmlvcHJpdmFjaWRhZGRpcmVjdG9yaW9mb3JtYWNpw7NucG9ibGFjacOzbnByZXNpZGVudGVjb250ZW5pZG9zYWNjZXNvcmlvc3RlY2hub3JhdGlwZXJzb25hbGVzY2F0ZWdvcsOtYWVzcGVjaWFsZXNkaXNwb25pYmxlYWN0dWFsaWRhZHJlZmVyZW5jaWF2YWxsYWRvbGlkYmlibGlvdGVjYXJlbGFjaW9uZXNjYWxlbmRhcmlvcG9sw610aWNhc2FudGVyaW9yZXNkb2N1bWVudG9zbmF0dXJhbGV6YW1hdGVyaWFsZXNkaWZlcmVuY2lhZWNvbsOzbWljYXRyYW5zcG9ydGVyb2Ryw61ndWV6cGFydGljaXBhcmVuY3VlbnRyYW5kaXNjdXNpw7NuZXN0cnVjdHVyYWZ1bmRhY2nDs25mcmVjdWVudGVzcGVybWFuZW50ZXRvdGFsbWVudGXQvNC+0LbQvdC+0LHRg9C00LXRgtC80L7QttC10YLQstGA0LXQvNGP0YLQsNC60LbQtdGH0YLQvtCx0YvQsdC+0LvQtdC10L7Rh9C10L3RjNGN0YLQvtCz0L7QutC+0LPQtNCw0L/QvtGB0LvQtdCy0YHQtdCz0L7RgdCw0LnRgtC10YfQtdGA0LXQt9C80L7Qs9GD0YLRgdCw0LnRgtCw0LbQuNC30L3QuNC80LXQttC00YPQsdGD0LTRg9GC0J/QvtC40YHQutC30LTQtdGB0YzQstC40LTQtdC+0YHQstGP0LfQuNC90YPQttC90L7RgdCy0L7QtdC50LvRjtC00LXQudC/0L7RgNC90L7QvNC90L7Qs9C+0LTQtdGC0LXQudGB0LLQvtC40YXQv9GA0LDQstCw0YLQsNC60L7QudC80LXRgdGC0L7QuNC80LXQtdGC0LbQuNC30L3RjNC+0LTQvdC+0LnQu9GD0YfRiNC10L/QtdGA0LXQtNGH0LDRgdGC0LjRh9Cw0YHRgtGM0YDQsNCx0L7RgtC90L7QstGL0YXQv9GA0LDQstC+0YHQvtCx0L7QudC/0L7RgtC+0LzQvNC10L3QtdC10YfQuNGB0LvQtdC90L7QstGL0LXRg9GB0LvRg9Cz0L7QutC+0LvQvtC90LDQt9Cw0LTRgtCw0LrQvtC10YLQvtCz0LTQsNC/0L7Rh9GC0LjQn9C+0YHQu9C10YLQsNC60LjQtdC90L7QstGL0LnRgdGC0L7QuNGC0YLQsNC60LjRhdGB0YDQsNC30YPQodCw0L3QutGC0YTQvtGA0YPQvNCa0L7Qs9C00LDQutC90LjQs9C40YHQu9C+0LLQsNC90LDRiNC10LnQvdCw0LnRgtC40YHQstC+0LjQvNGB0LLRj9C30YzQu9GO0LHQvtC50YfQsNGB0YLQvtGB0YDQtdC00LjQmtGA0L7QvNC10KTQvtGA0YPQvNGA0YvQvdC60LXRgdGC0LDQu9C40L/QvtC40YHQutGC0YvRgdGP0YfQvNC10YHRj9GG0YbQtdC90YLRgNGC0YDRg9C00LDRgdCw0LzRi9GF0YDRi9C90LrQsNCd0L7QstGL0LnRh9Cw0YHQvtCy0LzQtdGB0YLQsNGE0LjQu9GM0LzQvNCw0YDRgtCw0YHRgtGA0LDQvdC80LXRgdGC0LXRgtC10LrRgdGC0L3QsNGI0LjRhdC80LjQvdGD0YLQuNC80LXQvdC40LjQvNC10Y7RgtC90L7QvNC10YDQs9C+0YDQvtC00YHQsNC80L7QvNGN0YLQvtC80YPQutC+0L3RhtC10YHQstC+0LXQvNC60LDQutC+0LnQkNGA0YXQuNCy2YXZhtiq2K/Zidil2LHYs9in2YTYsdiz2KfZhNip2KfZhNi52KfZhdmD2KrYqNmH2KfYqNix2KfZhdis2KfZhNmK2YjZhdin2YTYtdmI2LHYrNiv2YrYr9ip2KfZhNi52LbZiNil2LbYp9mB2KnYp9mE2YLYs9mF2KfZhNi52KfYqNiq2K3ZhdmK2YTZhdmE2YHYp9iq2YXZhNiq2YLZidiq2LnYr9mK2YTYp9mE2LTYudix2KPYrtio2KfYsdiq2LfZiNmK2LHYudmE2YrZg9mF2KXYsdmB2KfZgti32YTYqNin2KrYp9mE2YTYutip2KrYsdiq2YrYqNin2YTZhtin2LPYp9mE2LTZitiu2YXZhtiq2K/Zitin2YTYudix2KjYp9mE2YLYtdi12KfZgdmE2KfZhdi52YTZitmH2KfYqtit2K/Zitir2KfZhNmE2YfZhdin2YTYudmF2YTZhdmD2KrYqNip2YrZhdmD2YbZg9in2YTYt9mB2YTZgdmK2K/ZitmI2KXYr9in2LHYqdiq2KfYsdmK2K7Yp9mE2LXYrdip2KrYs9is2YrZhNin2YTZiNmC2KrYudmG2K/Zhdin2YXYr9mK2YbYqdiq2LXZhdmK2YXYo9ix2LTZitmB2KfZhNiw2YrZhti52LHYqNmK2KnYqNmI2KfYqNip2KPZhNi52KfYqNin2YTYs9mB2LHZhdi02KfZg9mE2KrYudin2YTZidin2YTYo9mI2YTYp9mE2LPZhtip2KzYp9mF2LnYqdin2YTYtdit2YHYp9mE2K/ZitmG2YPZhNmF2KfYqtin2YTYrtin2LXYp9mE2YXZhNmB2KPYudi22KfYodmD2KrYp9io2KnYp9mE2K7Zitix2LHYs9in2KbZhNin2YTZgtmE2KjYp9mE2KPYr9io2YXZgtin2LfYudmF2LHYp9iz2YTZhdmG2LfZgtip2KfZhNmD2KrYqNin2YTYsdis2YTYp9i02KrYsdmD2KfZhNmC2K/ZhdmK2LnYt9mK2YNzQnlUYWdOYW1lKC5qcGciIGFsdD0iMXB4IHNvbGlkICMuZ2lmIiBhbHQ9InRyYW5zcGFyZW50aW5mb3JtYXRpb25hcHBsaWNhdGlvbiIgb25jbGljaz0iZXN0YWJsaXNoZWRhZHZlcnRpc2luZy5wbmciIGFsdD0iZW52aXJvbm1lbnRwZXJmb3JtYW5jZWFwcHJvcHJpYXRlJmFtcDttZGFzaDtpbW1lZGlhdGVseTwvc3Ryb25nPjwvcmF0aGVyIHRoYW50ZW1wZXJhdHVyZWRldmVsb3BtZW50Y29tcGV0aXRpb25wbGFjZWhvbGRlcnZpc2liaWxpdHk6Y29weXJpZ2h0Ij4wIiBoZWlnaHQ9ImV2ZW4gdGhvdWdocmVwbGFjZW1lbnRkZXN0aW5hdGlvbkNvcnBvcmF0aW9uPHVsIGNsYXNzPSJBc3NvY2lhdGlvbmluZGl2aWR1YWxzcGVyc3BlY3RpdmVzZXRUaW1lb3V0KHVybChodHRwOi8vbWF0aGVtYXRpY3NtYXJnaW4tdG9wOmV2ZW50dWFsbHkgZGVzY3JpcHRpb24pIG5vLXJlcGVhdGNvbGxlY3Rpb25zLkpQR3x0aHVtYnxwYXJ0aWNpcGF0ZS9oZWFkPjxib2R5ZmxvYXQ6bGVmdDs8bGkgY2xhc3M9Imh1bmRyZWRzIG9mCgpIb3dldmVyLCBjb21wb3NpdGlvbmNsZWFyOmJvdGg7Y29vcGVyYXRpb253aXRoaW4gdGhlIGxhYmVsIGZvcj0iYm9yZGVyLXRvcDpOZXcgWmVhbGFuZHJlY29tbWVuZGVkcGhvdG9ncmFwaHlpbnRlcmVzdGluZyZsdDtzdXAmZ3Q7Y29udHJvdmVyc3lOZXRoZXJsYW5kc2FsdGVybmF0aXZlbWF4bGVuZ3RoPSJzd2l0emVybGFuZERldmVsb3BtZW50ZXNzZW50aWFsbHkKCkFsdGhvdWdoIDwvdGV4dGFyZWE+dGh1bmRlcmJpcmRyZXByZXNlbnRlZCZhbXA7bmRhc2g7c3BlY3VsYXRpb25jb21tdW5pdGllc2xlZ2lzbGF0aW9uZWxlY3Ryb25pY3MKCTxkaXYgaWQ9ImlsbHVzdHJhdGVkZW5naW5lZXJpbmd0ZXJyaXRvcmllc2F1dGhvcml0aWVzZGlzdHJpYnV0ZWQ2IiBoZWlnaHQ9InNhbnMtc2VyaWY7Y2FwYWJsZSBvZiBkaXNhcHBlYXJlZGludGVyYWN0aXZlbG9va2luZyBmb3JpdCB3b3VsZCBiZUFmZ2hhbmlzdGFud2FzIGNyZWF0ZWRNYXRoLmZsb29yKHN1cnJvdW5kaW5nY2FuIGFsc28gYmVvYnNlcnZhdGlvbm1haW50ZW5hbmNlZW5jb3VudGVyZWQ8aDIgY2xhc3M9Im1vcmUgcmVjZW50aXQgaGFzIGJlZW5pbnZhc2lvbiBvZikuZ2V0VGltZSgpZnVuZGFtZW50YWxEZXNwaXRlIHRoZSI+PGRpdiBpZD0iaW5zcGlyYXRpb25leGFtaW5hdGlvbnByZXBhcmF0aW9uZXhwbGFuYXRpb248aW5wdXQgaWQ9IjwvYT48L3NwYW4+dmVyc2lvbnMgb2ZpbnN0cnVtZW50c2JlZm9yZSB0aGUgID0gJ2h0dHA6Ly9EZXNjcmlwdGlvbnJlbGF0aXZlbHkgLnN1YnN0cmluZyhlYWNoIG9mIHRoZWV4cGVyaW1lbnRzaW5mbHVlbnRpYWxpbnRlZ3JhdGlvbm1hbnkgcGVvcGxlZHVlIHRvIHRoZSBjb21iaW5hdGlvbmRvIG5vdCBoYXZlTWlkZGxlIEVhc3Q8bm9zY3JpcHQ+PGNvcHlyaWdodCIgcGVyaGFwcyB0aGVpbnN0aXR1dGlvbmluIERlY2VtYmVyYXJyYW5nZW1lbnRtb3N0IGZhbW91c3BlcnNvbmFsaXR5Y3JlYXRpb24gb2ZsaW1pdGF0aW9uc2V4Y2x1c2l2ZWx5c292ZXJlaWdudHktY29udGVudCI+Cjx0ZCBjbGFzcz0idW5kZXJncm91bmRwYXJhbGxlbCB0b2RvY3RyaW5lIG9mb2NjdXBpZWQgYnl0ZXJtaW5vbG9neVJlbmFpc3NhbmNlYSBudW1iZXIgb2ZzdXBwb3J0IGZvcmV4cGxvcmF0aW9ucmVjb2duaXRpb25wcmVkZWNlc3NvcjxpbWcgc3JjPSIvPGgxIGNsYXNzPSJwdWJsaWNhdGlvbm1heSBhbHNvIGJlc3BlY2lhbGl6ZWQ8L2ZpZWxkc2V0PnByb2dyZXNzaXZlbWlsbGlvbnMgb2ZzdGF0ZXMgdGhhdGVuZm9yY2VtZW50YXJvdW5kIHRoZSBvbmUgYW5vdGhlci5wYXJlbnROb2RlYWdyaWN1bHR1cmVBbHRlcm5hdGl2ZXJlc2VhcmNoZXJzdG93YXJkcyB0aGVNb3N0IG9mIHRoZW1hbnkgb3RoZXIgKGVzcGVjaWFsbHk8dGQgd2lkdGg9Ijt3aWR0aDoxMDAlaW5kZXBlbmRlbnQ8aDMgY2xhc3M9IiBvbmNoYW5nZT0iKS5hZGRDbGFzcyhpbnRlcmFjdGlvbk9uZSBvZiB0aGUgZGF1Z2h0ZXIgb2ZhY2Nlc3Nvcmllc2JyYW5jaGVzIG9mDQo8ZGl2IGlkPSJ0aGUgbGFyZ2VzdGRlY2xhcmF0aW9ucmVndWxhdGlvbnNJbmZvcm1hdGlvbnRyYW5zbGF0aW9uZG9jdW1lbnRhcnlpbiBvcmRlciB0byI+CjxoZWFkPgo8IiBoZWlnaHQ9IjFhY3Jvc3MgdGhlIG9yaWVudGF0aW9uKTs8L3NjcmlwdD5pbXBsZW1lbnRlZGNhbiBiZSBzZWVudGhlcmUgd2FzIGFkZW1vbnN0cmF0ZWNvbnRhaW5lciI+Y29ubmVjdGlvbnN0aGUgQnJpdGlzaHdhcyB3cml0dGVuIWltcG9ydGFudDtweDsgbWFyZ2luLWZvbGxvd2VkIGJ5YWJpbGl0eSB0byBjb21wbGljYXRlZGR1cmluZyB0aGUgaW1taWdyYXRpb25hbHNvIGNhbGxlZDxoNCBjbGFzcz0iZGlzdGluY3Rpb25yZXBsYWNlZCBieWdvdmVybm1lbnRzbG9jYXRpb24gb2ZpbiBOb3ZlbWJlcndoZXRoZXIgdGhlPC9wPgo8L2Rpdj5hY3F1aXNpdGlvbmNhbGxlZCB0aGUgcGVyc2VjdXRpb25kZXNpZ25hdGlvbntmb250LXNpemU6YXBwZWFyZWQgaW5pbnZlc3RpZ2F0ZWV4cGVyaWVuY2VkbW9zdCBsaWtlbHl3aWRlbHkgdXNlZGRpc2N1c3Npb25zcHJlc2VuY2Ugb2YgKGRvY3VtZW50LmV4dGVuc2l2ZWx5SXQgaGFzIGJlZW5pdCBkb2VzIG5vdGNvbnRyYXJ5IHRvaW5oYWJpdGFudHNpbXByb3ZlbWVudHNjaG9sYXJzaGlwY29uc3VtcHRpb25pbnN0cnVjdGlvbmZvciBleGFtcGxlb25lIG9yIG1vcmVweDsgcGFkZGluZ3RoZSBjdXJyZW50YSBzZXJpZXMgb2ZhcmUgdXN1YWxseXJvbGUgaW4gdGhlcHJldmlvdXNseSBkZXJpdmF0aXZlc2V2aWRlbmNlIG9mZXhwZXJpZW5jZXNjb2xvcnNjaGVtZXN0YXRlZCB0aGF0Y2VydGlmaWNhdGU8L2E+PC9kaXY+CiBzZWxlY3RlZD0iaGlnaCBzY2hvb2xyZXNwb25zZSB0b2NvbWZvcnRhYmxlYWRvcHRpb24gb2Z0aHJlZSB5ZWFyc3RoZSBjb3VudHJ5aW4gRmVicnVhcnlzbyB0aGF0IHRoZXBlb3BsZSB3aG8gcHJvdmlkZWQgYnk8cGFyYW0gbmFtZWFmZmVjdGVkIGJ5aW4gdGVybXMgb2ZhcHBvaW50bWVudElTTy04ODU5LTEid2FzIGJvcm4gaW5oaXN0b3JpY2FsIHJlZ2FyZGVkIGFzbWVhc3VyZW1lbnRpcyBiYXNlZCBvbiBhbmQgb3RoZXIgOiBmdW5jdGlvbihzaWduaWZpY2FudGNlbGVicmF0aW9udHJhbnNtaXR0ZWQvanMvanF1ZXJ5LmlzIGtub3duIGFzdGhlb3JldGljYWwgdGFiaW5kZXg9Iml0IGNvdWxkIGJlPG5vc2NyaXB0PgpoYXZpbmcgYmVlbg0KPGhlYWQ+DQo8ICZxdW90O1RoZSBjb21waWxhdGlvbmhlIGhhZCBiZWVucHJvZHVjZWQgYnlwaGlsb3NvcGhlcmNvbnN0cnVjdGVkaW50ZW5kZWQgdG9hbW9uZyBvdGhlcmNvbXBhcmVkIHRvdG8gc2F5IHRoYXRFbmdpbmVlcmluZ2EgZGlmZmVyZW50cmVmZXJyZWQgdG9kaWZmZXJlbmNlc2JlbGllZiB0aGF0cGhvdG9ncmFwaHNpZGVudGlmeWluZ0hpc3Rvcnkgb2YgUmVwdWJsaWMgb2ZuZWNlc3NhcmlseXByb2JhYmlsaXR5dGVjaG5pY2FsbHlsZWF2aW5nIHRoZXNwZWN0YWN1bGFyZnJhY3Rpb24gb2ZlbGVjdHJpY2l0eWhlYWQgb2YgdGhlcmVzdGF1cmFudHNwYXJ0bmVyc2hpcGVtcGhhc2lzIG9ubW9zdCByZWNlbnRzaGFyZSB3aXRoIHNheWluZyB0aGF0ZmlsbGVkIHdpdGhkZXNpZ25lZCB0b2l0IGlzIG9mdGVuIj48L2lmcmFtZT5hcyBmb2xsb3dzOm1lcmdlZCB3aXRodGhyb3VnaCB0aGVjb21tZXJjaWFsIHBvaW50ZWQgb3V0b3Bwb3J0dW5pdHl2aWV3IG9mIHRoZXJlcXVpcmVtZW50ZGl2aXNpb24gb2Zwcm9ncmFtbWluZ2hlIHJlY2VpdmVkc2V0SW50ZXJ2YWwiPjwvc3Bhbj48L2luIE5ldyBZb3JrYWRkaXRpb25hbCBjb21wcmVzc2lvbgoKPGRpdiBpZD0iaW5jb3Jwb3JhdGU7PC9zY3JpcHQ+PGF0dGFjaEV2ZW50YmVjYW1lIHRoZSAiIHRhcmdldD0iX2NhcnJpZWQgb3V0U29tZSBvZiB0aGVzY2llbmNlIGFuZHRoZSB0aW1lIG9mQ29udGFpbmVyIj5tYWludGFpbmluZ0NocmlzdG9waGVyTXVjaCBvZiB0aGV3cml0aW5ncyBvZiIgaGVpZ2h0PSIyc2l6ZSBvZiB0aGV2ZXJzaW9uIG9mIG1peHR1cmUgb2YgYmV0d2VlbiB0aGVFeGFtcGxlcyBvZmVkdWNhdGlvbmFsY29tcGV0aXRpdmUgb25zdWJtaXQ9ImRpcmVjdG9yIG9mZGlzdGluY3RpdmUvRFREIFhIVE1MIHJlbGF0aW5nIHRvdGVuZGVuY3kgdG9wcm92aW5jZSBvZndoaWNoIHdvdWxkZGVzcGl0ZSB0aGVzY2llbnRpZmljIGxlZ2lzbGF0dXJlLmlubmVySFRNTCBhbGxlZ2F0aW9uc0FncmljdWx0dXJld2FzIHVzZWQgaW5hcHByb2FjaCB0b2ludGVsbGlnZW50eWVhcnMgbGF0ZXIsc2Fucy1zZXJpZmRldGVybWluaW5nUGVyZm9ybWFuY2VhcHBlYXJhbmNlcywgd2hpY2ggaXMgZm91bmRhdGlvbnNhYmJyZXZpYXRlZGhpZ2hlciB0aGFucyBmcm9tIHRoZSBpbmRpdmlkdWFsIGNvbXBvc2VkIG9mc3VwcG9zZWQgdG9jbGFpbXMgdGhhdGF0dHJpYnV0aW9uZm9udC1zaXplOjFlbGVtZW50cyBvZkhpc3RvcmljYWwgaGlzIGJyb3RoZXJhdCB0aGUgdGltZWFubml2ZXJzYXJ5Z292ZXJuZWQgYnlyZWxhdGVkIHRvIHVsdGltYXRlbHkgaW5ub3ZhdGlvbnNpdCBpcyBzdGlsbGNhbiBvbmx5IGJlZGVmaW5pdGlvbnN0b0dNVFN0cmluZ0EgbnVtYmVyIG9maW1nIGNsYXNzPSJFdmVudHVhbGx5LHdhcyBjaGFuZ2Vkb2NjdXJyZWQgaW5uZWlnaGJvcmluZ2Rpc3Rpbmd1aXNod2hlbiBoZSB3YXNpbnRyb2R1Y2luZ3RlcnJlc3RyaWFsTWFueSBvZiB0aGVhcmd1ZXMgdGhhdGFuIEFtZXJpY2FuY29ucXVlc3Qgb2Z3aWRlc3ByZWFkIHdlcmUga2lsbGVkc2NyZWVuIGFuZCBJbiBvcmRlciB0b2V4cGVjdGVkIHRvZGVzY2VuZGFudHNhcmUgbG9jYXRlZGxlZ2lzbGF0aXZlZ2VuZXJhdGlvbnMgYmFja2dyb3VuZG1vc3QgcGVvcGxleWVhcnMgYWZ0ZXJ0aGVyZSBpcyBub3RoZSBoaWdoZXN0ZnJlcXVlbnRseSB0aGV5IGRvIG5vdGFyZ3VlZCB0aGF0c2hvd2VkIHRoYXRwcmVkb21pbmFudHRoZW9sb2dpY2FsYnkgdGhlIHRpbWVjb25zaWRlcmluZ3Nob3J0LWxpdmVkPC9zcGFuPjwvYT5jYW4gYmUgdXNlZHZlcnkgbGl0dGxlb25lIG9mIHRoZSBoYWQgYWxyZWFkeWludGVycHJldGVkY29tbXVuaWNhdGVmZWF0dXJlcyBvZmdvdmVybm1lbnQsPC9ub3NjcmlwdD5lbnRlcmVkIHRoZSIgaGVpZ2h0PSIzSW5kZXBlbmRlbnRwb3B1bGF0aW9uc2xhcmdlLXNjYWxlLiBBbHRob3VnaCB1c2VkIGluIHRoZWRlc3RydWN0aW9ucG9zc2liaWxpdHlzdGFydGluZyBpbnR3byBvciBtb3JlZXhwcmVzc2lvbnNzdWJvcmRpbmF0ZWxhcmdlciB0aGFuaGlzdG9yeSBhbmQ8L29wdGlvbj4NCkNvbnRpbmVudGFsZWxpbWluYXRpbmd3aWxsIG5vdCBiZXByYWN0aWNlIG9maW4gZnJvbnQgb2ZzaXRlIG9mIHRoZWVuc3VyZSB0aGF0dG8gY3JlYXRlIGFtaXNzaXNzaXBwaXBvdGVudGlhbGx5b3V0c3RhbmRpbmdiZXR0ZXIgdGhhbndoYXQgaXMgbm93c2l0dWF0ZWQgaW5tZXRhIG5hbWU9IlRyYWRpdGlvbmFsc3VnZ2VzdGlvbnNUcmFuc2xhdGlvbnRoZSBmb3JtIG9mYXRtb3NwaGVyaWNpZGVvbG9naWNhbGVudGVycHJpc2VzY2FsY3VsYXRpbmdlYXN0IG9mIHRoZXJlbW5hbnRzIG9mcGx1Z2luc3BhZ2UvaW5kZXgucGhwP3JlbWFpbmVkIGludHJhbnNmb3JtZWRIZSB3YXMgYWxzb3dhcyBhbHJlYWR5c3RhdGlzdGljYWxpbiBmYXZvciBvZk1pbmlzdHJ5IG9mbW92ZW1lbnQgb2Zmb3JtdWxhdGlvbmlzIHJlcXVpcmVkPGxpbmsgcmVsPSJUaGlzIGlzIHRoZSA8YSBocmVmPSIvcG9wdWxhcml6ZWRpbnZvbHZlZCBpbmFyZSB1c2VkIHRvYW5kIHNldmVyYWxtYWRlIGJ5IHRoZXNlZW1zIHRvIGJlbGlrZWx5IHRoYXRQYWxlc3Rpbmlhbm5hbWVkIGFmdGVyaXQgaGFkIGJlZW5tb3N0IGNvbW1vbnRvIHJlZmVyIHRvYnV0IHRoaXMgaXNjb25zZWN1dGl2ZXRlbXBvcmFyaWx5SW4gZ2VuZXJhbCxjb252ZW50aW9uc3Rha2VzIHBsYWNlc3ViZGl2aXNpb250ZXJyaXRvcmlhbG9wZXJhdGlvbmFscGVybWFuZW50bHl3YXMgbGFyZ2VseW91dGJyZWFrIG9maW4gdGhlIHBhc3Rmb2xsb3dpbmcgYSB4bWxuczpvZz0iPjxhIGNsYXNzPSJjbGFzcz0idGV4dENvbnZlcnNpb24gbWF5IGJlIHVzZWRtYW51ZmFjdHVyZWFmdGVyIGJlaW5nY2xlYXJmaXgiPgpxdWVzdGlvbiBvZndhcyBlbGVjdGVkdG8gYmVjb21lIGFiZWNhdXNlIG9mIHNvbWUgcGVvcGxlaW5zcGlyZWQgYnlzdWNjZXNzZnVsIGEgdGltZSB3aGVubW9yZSBjb21tb25hbW9uZ3N0IHRoZWFuIG9mZmljaWFsd2lkdGg6MTAwJTt0ZWNobm9sb2d5LHdhcyBhZG9wdGVkdG8ga2VlcCB0aGVzZXR0bGVtZW50c2xpdmUgYmlydGhzaW5kZXguaHRtbCJDb25uZWN0aWN1dGFzc2lnbmVkIHRvJmFtcDt0aW1lczthY2NvdW50IGZvcmFsaWduPXJpZ2h0dGhlIGNvbXBhbnlhbHdheXMgYmVlbnJldHVybmVkIHRvaW52b2x2ZW1lbnRCZWNhdXNlIHRoZXRoaXMgcGVyaW9kIiBuYW1lPSJxIiBjb25maW5lZCB0b2EgcmVzdWx0IG9mdmFsdWU9IiIgLz5pcyBhY3R1YWxseUVudmlyb25tZW50DQo8L2hlYWQ+DQpDb252ZXJzZWx5LD4KPGRpdiBpZD0iMCIgd2lkdGg9IjFpcyBwcm9iYWJseWhhdmUgYmVjb21lY29udHJvbGxpbmd0aGUgcHJvYmxlbWNpdGl6ZW5zIG9mcG9saXRpY2lhbnNyZWFjaGVkIHRoZWFzIGVhcmx5IGFzOm5vbmU7IG92ZXI8dGFibGUgY2VsbHZhbGlkaXR5IG9mZGlyZWN0bHkgdG9vbm1vdXNlZG93bndoZXJlIGl0IGlzd2hlbiBpdCB3YXNtZW1iZXJzIG9mIHJlbGF0aW9uIHRvYWNjb21tb2RhdGVhbG9uZyB3aXRoIEluIHRoZSBsYXRldGhlIEVuZ2xpc2hkZWxpY2lvdXMiPnRoaXMgaXMgbm90dGhlIHByZXNlbnRpZiB0aGV5IGFyZWFuZCBmaW5hbGx5YSBtYXR0ZXIgb2YNCgk8L2Rpdj4NCg0KPC9zY3JpcHQ+ZmFzdGVyIHRoYW5tYWpvcml0eSBvZmFmdGVyIHdoaWNoY29tcGFyYXRpdmV0byBtYWludGFpbmltcHJvdmUgdGhlYXdhcmRlZCB0aGVlciIgY2xhc3M9ImZyYW1lYm9yZGVycmVzdG9yYXRpb25pbiB0aGUgc2FtZWFuYWx5c2lzIG9mdGhlaXIgZmlyc3REdXJpbmcgdGhlIGNvbnRpbmVudGFsc2VxdWVuY2Ugb2ZmdW5jdGlvbigpe2ZvbnQtc2l6ZTogd29yayBvbiB0aGU8L3NjcmlwdD4KPGJlZ2lucyB3aXRoamF2YXNjcmlwdDpjb25zdGl0dWVudHdhcyBmb3VuZGVkZXF1aWxpYnJpdW1hc3N1bWUgdGhhdGlzIGdpdmVuIGJ5bmVlZHMgdG8gYmVjb29yZGluYXRlc3RoZSB2YXJpb3VzYXJlIHBhcnQgb2Zvbmx5IGluIHRoZXNlY3Rpb25zIG9maXMgYSBjb21tb250aGVvcmllcyBvZmRpc2NvdmVyaWVzYXNzb2NpYXRpb25lZGdlIG9mIHRoZXN0cmVuZ3RoIG9mcG9zaXRpb24gaW5wcmVzZW50LWRheXVuaXZlcnNhbGx5dG8gZm9ybSB0aGVidXQgaW5zdGVhZGNvcnBvcmF0aW9uYXR0YWNoZWQgdG9pcyBjb21tb25seXJlYXNvbnMgZm9yICZxdW90O3RoZSBjYW4gYmUgbWFkZXdhcyBhYmxlIHRvd2hpY2ggbWVhbnNidXQgZGlkIG5vdG9uTW91c2VPdmVyYXMgcG9zc2libGVvcGVyYXRlZCBieWNvbWluZyBmcm9tdGhlIHByaW1hcnlhZGRpdGlvbiBvZmZvciBzZXZlcmFsdHJhbnNmZXJyZWRhIHBlcmlvZCBvZmFyZSBhYmxlIHRvaG93ZXZlciwgaXRzaG91bGQgaGF2ZW11Y2ggbGFyZ2VyCgk8L3NjcmlwdD5hZG9wdGVkIHRoZXByb3BlcnR5IG9mZGlyZWN0ZWQgYnllZmZlY3RpdmVseXdhcyBicm91Z2h0Y2hpbGRyZW4gb2ZQcm9ncmFtbWluZ2xvbmdlciB0aGFubWFudXNjcmlwdHN3YXIgYWdhaW5zdGJ5IG1lYW5zIG9mYW5kIG1vc3Qgb2ZzaW1pbGFyIHRvIHByb3ByaWV0YXJ5b3JpZ2luYXRpbmdwcmVzdGlnaW91c2dyYW1tYXRpY2FsZXhwZXJpZW5jZS50byBtYWtlIHRoZUl0IHdhcyBhbHNvaXMgZm91bmQgaW5jb21wZXRpdG9yc2luIHRoZSBVLlMucmVwbGFjZSB0aGVicm91Z2h0IHRoZWNhbGN1bGF0aW9uZmFsbCBvZiB0aGV0aGUgZ2VuZXJhbHByYWN0aWNhbGx5aW4gaG9ub3Igb2ZyZWxlYXNlZCBpbnJlc2lkZW50aWFsYW5kIHNvbWUgb2ZraW5nIG9mIHRoZXJlYWN0aW9uIHRvMXN0IEVhcmwgb2ZjdWx0dXJlIGFuZHByaW5jaXBhbGx5PC90aXRsZT4KICB0aGV5IGNhbiBiZWJhY2sgdG8gdGhlc29tZSBvZiBoaXNleHBvc3VyZSB0b2FyZSBzaW1pbGFyZm9ybSBvZiB0aGVhZGRGYXZvcml0ZWNpdGl6ZW5zaGlwcGFydCBpbiB0aGVwZW9wbGUgd2l0aGluIHByYWN0aWNldG8gY29udGludWUmYW1wO21pbnVzO2FwcHJvdmVkIGJ5IHRoZSBmaXJzdCBhbGxvd2VkIHRoZWFuZCBmb3IgdGhlZnVuY3Rpb25pbmdwbGF5aW5nIHRoZXNvbHV0aW9uIHRvaGVpZ2h0PSIwIiBpbiBoaXMgYm9va21vcmUgdGhhbiBhZm9sbG93cyB0aGVjcmVhdGVkIHRoZXByZXNlbmNlIGluJm5ic3A7PC90ZD5uYXRpb25hbGlzdHRoZSBpZGVhIG9mYSBjaGFyYWN0ZXJ3ZXJlIGZvcmNlZCBjbGFzcz0iYnRuZGF5cyBvZiB0aGVmZWF0dXJlZCBpbnNob3dpbmcgdGhlaW50ZXJlc3QgaW5pbiBwbGFjZSBvZnR1cm4gb2YgdGhldGhlIGhlYWQgb2ZMb3JkIG9mIHRoZXBvbGl0aWNhbGx5aGFzIGl0cyBvd25FZHVjYXRpb25hbGFwcHJvdmFsIG9mc29tZSBvZiB0aGVlYWNoIG90aGVyLGJlaGF2aW9yIG9mYW5kIGJlY2F1c2VhbmQgYW5vdGhlcmFwcGVhcmVkIG9ucmVjb3JkZWQgaW5ibGFjayZxdW90O21heSBpbmNsdWRldGhlIHdvcmxkJ3NjYW4gbGVhZCB0b3JlZmVycyB0byBhYm9yZGVyPSIwIiBnb3Zlcm5tZW50IHdpbm5pbmcgdGhlcmVzdWx0ZWQgaW4gd2hpbGUgdGhlIFdhc2hpbmd0b24sdGhlIHN1YmplY3RjaXR5IGluIHRoZT48L2Rpdj4NCgkJcmVmbGVjdCB0aGV0byBjb21wbGV0ZWJlY2FtZSBtb3JlcmFkaW9hY3RpdmVyZWplY3RlZCBieXdpdGhvdXQgYW55aGlzIGZhdGhlcix3aGljaCBjb3VsZGNvcHkgb2YgdGhldG8gaW5kaWNhdGVhIHBvbGl0aWNhbGFjY291bnRzIG9mY29uc3RpdHV0ZXN3b3JrZWQgd2l0aGVyPC9hPjwvbGk+b2YgaGlzIGxpZmVhY2NvbXBhbmllZGNsaWVudFdpZHRocHJldmVudCB0aGVMZWdpc2xhdGl2ZWRpZmZlcmVudGx5dG9nZXRoZXIgaW5oYXMgc2V2ZXJhbGZvciBhbm90aGVydGV4dCBvZiB0aGVmb3VuZGVkIHRoZWUgd2l0aCB0aGUgaXMgdXNlZCBmb3JjaGFuZ2VkIHRoZXVzdWFsbHkgdGhlcGxhY2Ugd2hlcmV3aGVyZWFzIHRoZT4gPGEgaHJlZj0iIj48YSBocmVmPSJ0aGVtc2VsdmVzLGFsdGhvdWdoIGhldGhhdCBjYW4gYmV0cmFkaXRpb25hbHJvbGUgb2YgdGhlYXMgYSByZXN1bHRyZW1vdmVDaGlsZGRlc2lnbmVkIGJ5d2VzdCBvZiB0aGVTb21lIHBlb3BsZXByb2R1Y3Rpb24sc2lkZSBvZiB0aGVuZXdzbGV0dGVyc3VzZWQgYnkgdGhlZG93biB0byB0aGVhY2NlcHRlZCBieWxpdmUgaW4gdGhlYXR0ZW1wdHMgdG9vdXRzaWRlIHRoZWZyZXF1ZW5jaWVzSG93ZXZlciwgaW5wcm9ncmFtbWVyc2F0IGxlYXN0IGluYXBwcm94aW1hdGVhbHRob3VnaCBpdHdhcyBwYXJ0IG9mYW5kIHZhcmlvdXNHb3Zlcm5vciBvZnRoZSBhcnRpY2xldHVybmVkIGludG8+PGEgaHJlZj0iL3RoZSBlY29ub215aXMgdGhlIG1vc3Rtb3N0IHdpZGVseXdvdWxkIGxhdGVyYW5kIHBlcmhhcHNyaXNlIHRvIHRoZW9jY3VycyB3aGVudW5kZXIgd2hpY2hjb25kaXRpb25zLnRoZSB3ZXN0ZXJudGhlb3J5IHRoYXRpcyBwcm9kdWNlZHRoZSBjaXR5IG9maW4gd2hpY2ggaGVzZWVuIGluIHRoZXRoZSBjZW50cmFsYnVpbGRpbmcgb2ZtYW55IG9mIGhpc2FyZWEgb2YgdGhlaXMgdGhlIG9ubHltb3N0IG9mIHRoZW1hbnkgb2YgdGhldGhlIFdlc3Rlcm5UaGVyZSBpcyBub2V4dGVuZGVkIHRvU3RhdGlzdGljYWxjb2xzcGFuPTIgfHNob3J0IHN0b3J5cG9zc2libGUgdG90b3BvbG9naWNhbGNyaXRpY2FsIG9mcmVwb3J0ZWQgdG9hIENocmlzdGlhbmRlY2lzaW9uIHRvaXMgZXF1YWwgdG9wcm9ibGVtcyBvZlRoaXMgY2FuIGJlbWVyY2hhbmRpc2Vmb3IgbW9zdCBvZm5vIGV2aWRlbmNlZWRpdGlvbnMgb2ZlbGVtZW50cyBpbiZxdW90Oy4gVGhlY29tL2ltYWdlcy93aGljaCBtYWtlc3RoZSBwcm9jZXNzcmVtYWlucyB0aGVsaXRlcmF0dXJlLGlzIGEgbWVtYmVydGhlIHBvcHVsYXJ0aGUgYW5jaWVudHByb2JsZW1zIGludGltZSBvZiB0aGVkZWZlYXRlZCBieWJvZHkgb2YgdGhlYSBmZXcgeWVhcnNtdWNoIG9mIHRoZXRoZSB3b3JrIG9mQ2FsaWZvcm5pYSxzZXJ2ZWQgYXMgYWdvdmVybm1lbnQuY29uY2VwdHMgb2Ztb3ZlbWVudCBpbgkJPGRpdiBpZD0iaXQiIHZhbHVlPSJsYW5ndWFnZSBvZmFzIHRoZXkgYXJlcHJvZHVjZWQgaW5pcyB0aGF0IHRoZWV4cGxhaW4gdGhlZGl2PjwvZGl2PgpIb3dldmVyIHRoZWxlYWQgdG8gdGhlCTxhIGhyZWY9Ii93YXMgZ3JhbnRlZHBlb3BsZSBoYXZlY29udGludWFsbHl3YXMgc2VlbiBhc2FuZCByZWxhdGVkdGhlIHJvbGUgb2Zwcm9wb3NlZCBieW9mIHRoZSBiZXN0ZWFjaCBvdGhlci5Db25zdGFudGluZXBlb3BsZSBmcm9tZGlhbGVjdHMgb2Z0byByZXZpc2lvbndhcyByZW5hbWVkYSBzb3VyY2Ugb2Z0aGUgaW5pdGlhbGxhdW5jaGVkIGlucHJvdmlkZSB0aGV0byB0aGUgd2VzdHdoZXJlIHRoZXJlYW5kIHNpbWlsYXJiZXR3ZWVuIHR3b2lzIGFsc28gdGhlRW5nbGlzaCBhbmRjb25kaXRpb25zLHRoYXQgaXQgd2FzZW50aXRsZWQgdG90aGVtc2VsdmVzLnF1YW50aXR5IG9mcmFuc3BhcmVuY3l0aGUgc2FtZSBhc3RvIGpvaW4gdGhlY291bnRyeSBhbmR0aGlzIGlzIHRoZVRoaXMgbGVkIHRvYSBzdGF0ZW1lbnRjb250cmFzdCB0b2xhc3RJbmRleE9mdGhyb3VnaCBoaXNpcyBkZXNpZ25lZHRoZSB0ZXJtIGlzaXMgcHJvdmlkZWRwcm90ZWN0IHRoZW5nPC9hPjwvbGk+VGhlIGN1cnJlbnR0aGUgc2l0ZSBvZnN1YnN0YW50aWFsZXhwZXJpZW5jZSxpbiB0aGUgV2VzdHRoZXkgc2hvdWxkc2xvdmVuxI1pbmFjb21lbnRhcmlvc3VuaXZlcnNpZGFkY29uZGljaW9uZXNhY3RpdmlkYWRlc2V4cGVyaWVuY2lhdGVjbm9sb2fDrWFwcm9kdWNjacOzbnB1bnR1YWNpw7NuYXBsaWNhY2nDs25jb250cmFzZcOxYWNhdGVnb3LDrWFzcmVnaXN0cmFyc2Vwcm9mZXNpb25hbHRyYXRhbWllbnRvcmVnw61zdHJhdGVzZWNyZXRhcsOtYXByaW5jaXBhbGVzcHJvdGVjY2nDs25pbXBvcnRhbnRlc2ltcG9ydGFuY2lhcG9zaWJpbGlkYWRpbnRlcmVzYW50ZWNyZWNpbWllbnRvbmVjZXNpZGFkZXNzdXNjcmliaXJzZWFzb2NpYWNpw7NuZGlzcG9uaWJsZXNldmFsdWFjacOzbmVzdHVkaWFudGVzcmVzcG9uc2FibGVyZXNvbHVjacOzbmd1YWRhbGFqYXJhcmVnaXN0cmFkb3NvcG9ydHVuaWRhZGNvbWVyY2lhbGVzZm90b2dyYWbDrWFhdXRvcmlkYWRlc2luZ2VuaWVyw61hdGVsZXZpc2nDs25jb21wZXRlbmNpYW9wZXJhY2lvbmVzZXN0YWJsZWNpZG9zaW1wbGVtZW50ZWFjdHVhbG1lbnRlbmF2ZWdhY2nDs25jb25mb3JtaWRhZGxpbmUtaGVpZ2h0OmZvbnQtZmFtaWx5OiIgOiAiaHR0cDovL2FwcGxpY2F0aW9uc2xpbmsiIGhyZWY9InNwZWNpZmljYWxseS8vPCFbQ0RBVEFbCk9yZ2FuaXphdGlvbmRpc3RyaWJ1dGlvbjBweDsgaGVpZ2h0OnJlbGF0aW9uc2hpcGRldmljZS13aWR0aDxkaXYgY2xhc3M9IjxsYWJlbCBmb3I9InJlZ2lzdHJhdGlvbjwvbm9zY3JpcHQ+Ci9pbmRleC5odG1sIndpbmRvdy5vcGVuKCAhaW1wb3J0YW50O2FwcGxpY2F0aW9uL2luZGVwZW5kZW5jZS8vd3d3Lmdvb2dsZW9yZ2FuaXphdGlvbmF1dG9jb21wbGV0ZXJlcXVpcmVtZW50c2NvbnNlcnZhdGl2ZTxmb3JtIG5hbWU9ImludGVsbGVjdHVhbG1hcmdpbi1sZWZ0OjE4dGggY2VudHVyeWFuIGltcG9ydGFudGluc3RpdHV0aW9uc2FiYnJldmlhdGlvbjxpbWcgY2xhc3M9Im9yZ2FuaXNhdGlvbmNpdmlsaXphdGlvbjE5dGggY2VudHVyeWFyY2hpdGVjdHVyZWluY29ycG9yYXRlZDIwdGggY2VudHVyeS1jb250YWluZXIiPm1vc3Qgbm90YWJseS8+PC9hPjwvZGl2Pm5vdGlmaWNhdGlvbid1bmRlZmluZWQnKUZ1cnRoZXJtb3JlLGJlbGlldmUgdGhhdGlubmVySFRNTCA9IHByaW9yIHRvIHRoZWRyYW1hdGljYWxseXJlZmVycmluZyB0b25lZ290aWF0aW9uc2hlYWRxdWFydGVyc1NvdXRoIEFmcmljYXVuc3VjY2Vzc2Z1bFBlbm5zeWx2YW5pYUFzIGEgcmVzdWx0LDxodG1sIGxhbmc9IiZsdDsvc3VwJmd0O2RlYWxpbmcgd2l0aHBoaWxhZGVscGhpYWhpc3RvcmljYWxseSk7PC9zY3JpcHQ+CnBhZGRpbmctdG9wOmV4cGVyaW1lbnRhbGdldEF0dHJpYnV0ZWluc3RydWN0aW9uc3RlY2hub2xvZ2llc3BhcnQgb2YgdGhlID1mdW5jdGlvbigpe3N1YnNjcmlwdGlvbmwuZHRkIj4NCjxodGdlb2dyYXBoaWNhbENvbnN0aXR1dGlvbicsIGZ1bmN0aW9uKHN1cHBvcnRlZCBieWFncmljdWx0dXJhbGNvbnN0cnVjdGlvbnB1YmxpY2F0aW9uc2ZvbnQtc2l6ZTogMWEgdmFyaWV0eSBvZjxkaXYgc3R5bGU9IkVuY3ljbG9wZWRpYWlmcmFtZSBzcmM9ImRlbW9uc3RyYXRlZGFjY29tcGxpc2hlZHVuaXZlcnNpdGllc0RlbW9ncmFwaGljcyk7PC9zY3JpcHQ+PGRlZGljYXRlZCB0b2tub3dsZWRnZSBvZnNhdGlzZmFjdGlvbnBhcnRpY3VsYXJseTwvZGl2PjwvZGl2PkVuZ2xpc2ggKFVTKWFwcGVuZENoaWxkKHRyYW5zbWlzc2lvbnMuIEhvd2V2ZXIsIGludGVsbGlnZW5jZSIgdGFiaW5kZXg9ImZsb2F0OnJpZ2h0O0NvbW1vbndlYWx0aHJhbmdpbmcgZnJvbWluIHdoaWNoIHRoZWF0IGxlYXN0IG9uZXJlcHJvZHVjdGlvbmVuY3ljbG9wZWRpYTtmb250LXNpemU6MWp1cmlzZGljdGlvbmF0IHRoYXQgdGltZSI+PGEgY2xhc3M9IkluIGFkZGl0aW9uLGRlc2NyaXB0aW9uK2NvbnZlcnNhdGlvbmNvbnRhY3Qgd2l0aGlzIGdlbmVyYWxseXIiIGNvbnRlbnQ9InJlcHJlc2VudGluZyZsdDttYXRoJmd0O3ByZXNlbnRhdGlvbm9jY2FzaW9uYWxseTxpbWcgd2lkdGg9Im5hdmlnYXRpb24iPmNvbXBlbnNhdGlvbmNoYW1waW9uc2hpcG1lZGlhPSJhbGwiIHZpb2xhdGlvbiBvZnJlZmVyZW5jZSB0b3JldHVybiB0cnVlO1N0cmljdC8vRU4iIHRyYW5zYWN0aW9uc2ludGVydmVudGlvbnZlcmlmaWNhdGlvbkluZm9ybWF0aW9uIGRpZmZpY3VsdGllc0NoYW1waW9uc2hpcGNhcGFiaWxpdGllczwhW2VuZGlmXS0tPn0KPC9zY3JpcHQ+CkNocmlzdGlhbml0eWZvciBleGFtcGxlLFByb2Zlc3Npb25hbHJlc3RyaWN0aW9uc3N1Z2dlc3QgdGhhdHdhcyByZWxlYXNlZChzdWNoIGFzIHRoZXJlbW92ZUNsYXNzKHVuZW1wbG95bWVudHRoZSBBbWVyaWNhbnN0cnVjdHVyZSBvZi9pbmRleC5odG1sIHB1Ymxpc2hlZCBpbnNwYW4gY2xhc3M9IiI+PGEgaHJlZj0iL2ludHJvZHVjdGlvbmJlbG9uZ2luZyB0b2NsYWltZWQgdGhhdGNvbnNlcXVlbmNlczxtZXRhIG5hbWU9Ikd1aWRlIHRvIHRoZW92ZXJ3aGVsbWluZ2FnYWluc3QgdGhlIGNvbmNlbnRyYXRlZCwKLm5vbnRvdWNoIG9ic2VydmF0aW9uczwvYT4KPC9kaXY+CmYgKGRvY3VtZW50LmJvcmRlcjogMXB4IHtmb250LXNpemU6MXRyZWF0bWVudCBvZjAiIGhlaWdodD0iMW1vZGlmaWNhdGlvbkluZGVwZW5kZW5jZWRpdmlkZWQgaW50b2dyZWF0ZXIgdGhhbmFjaGlldmVtZW50c2VzdGFibGlzaGluZ0phdmFTY3JpcHQiIG5ldmVydGhlbGVzc3NpZ25pZmljYW5jZUJyb2FkY2FzdGluZz4mbmJzcDs8L3RkPmNvbnRhaW5lciI+CnN1Y2ggYXMgdGhlIGluZmx1ZW5jZSBvZmEgcGFydGljdWxhcnNyYz0naHR0cDovL25hdmlnYXRpb24iIGhhbGYgb2YgdGhlIHN1YnN0YW50aWFsICZuYnNwOzwvZGl2PmFkdmFudGFnZSBvZmRpc2NvdmVyeSBvZmZ1bmRhbWVudGFsIG1ldHJvcG9saXRhbnRoZSBvcHBvc2l0ZSIgeG1sOmxhbmc9ImRlbGliZXJhdGVseWFsaWduPWNlbnRlcmV2b2x1dGlvbiBvZnByZXNlcnZhdGlvbmltcHJvdmVtZW50c2JlZ2lubmluZyBpbkplc3VzIENocmlzdFB1YmxpY2F0aW9uc2Rpc2FncmVlbWVudHRleHQtYWxpZ246ciwgZnVuY3Rpb24oKXNpbWlsYXJpdGllc2JvZHk+PC9odG1sPmlzIGN1cnJlbnRseWFscGhhYmV0aWNhbGlzIHNvbWV0aW1lc3R5cGU9ImltYWdlL21hbnkgb2YgdGhlIGZsb3c6aGlkZGVuO2F2YWlsYWJsZSBpbmRlc2NyaWJlIHRoZWV4aXN0ZW5jZSBvZmFsbCBvdmVyIHRoZXRoZSBJbnRlcm5ldAk8dWwgY2xhc3M9Imluc3RhbGxhdGlvbm5laWdoYm9yaG9vZGFybWVkIGZvcmNlc3JlZHVjaW5nIHRoZWNvbnRpbnVlcyB0b05vbmV0aGVsZXNzLHRlbXBlcmF0dXJlcwoJCTxhIGhyZWY9ImNsb3NlIHRvIHRoZWV4YW1wbGVzIG9mIGlzIGFib3V0IHRoZShzZWUgYmVsb3cpLiIgaWQ9InNlYXJjaHByb2Zlc3Npb25hbGlzIGF2YWlsYWJsZXRoZSBvZmZpY2lhbAkJPC9zY3JpcHQ+CgoJCTxkaXYgaWQ9ImFjY2VsZXJhdGlvbnRocm91Z2ggdGhlIEhhbGwgb2YgRmFtZWRlc2NyaXB0aW9uc3RyYW5zbGF0aW9uc2ludGVyZmVyZW5jZSB0eXBlPSd0ZXh0L3JlY2VudCB5ZWFyc2luIHRoZSB3b3JsZHZlcnkgcG9wdWxhcntiYWNrZ3JvdW5kOnRyYWRpdGlvbmFsIHNvbWUgb2YgdGhlIGNvbm5lY3RlZCB0b2V4cGxvaXRhdGlvbmVtZXJnZW5jZSBvZmNvbnN0aXR1dGlvbkEgSGlzdG9yeSBvZnNpZ25pZmljYW50IG1hbnVmYWN0dXJlZGV4cGVjdGF0aW9ucz48bm9zY3JpcHQ+PGNhbiBiZSBmb3VuZGJlY2F1c2UgdGhlIGhhcyBub3QgYmVlbm5laWdoYm91cmluZ3dpdGhvdXQgdGhlIGFkZGVkIHRvIHRoZQk8bGkgY2xhc3M9Imluc3RydW1lbnRhbFNvdmlldCBVbmlvbmFja25vd2xlZGdlZHdoaWNoIGNhbiBiZW5hbWUgZm9yIHRoZWF0dGVudGlvbiB0b2F0dGVtcHRzIHRvIGRldmVsb3BtZW50c0luIGZhY3QsIHRoZTxsaSBjbGFzcz0iYWltcGxpY2F0aW9uc3N1aXRhYmxlIGZvcm11Y2ggb2YgdGhlIGNvbG9uaXphdGlvbnByZXNpZGVudGlhbGNhbmNlbEJ1YmJsZSBJbmZvcm1hdGlvbm1vc3Qgb2YgdGhlIGlzIGRlc2NyaWJlZHJlc3Qgb2YgdGhlIG1vcmUgb3IgbGVzc2luIFNlcHRlbWJlckludGVsbGlnZW5jZXNyYz0iaHR0cDovL3B4OyBoZWlnaHQ6IGF2YWlsYWJsZSB0b21hbnVmYWN0dXJlcmh1bWFuIHJpZ2h0c2xpbmsgaHJlZj0iL2F2YWlsYWJpbGl0eXByb3BvcnRpb25hbG91dHNpZGUgdGhlIGFzdHJvbm9taWNhbGh1bWFuIGJlaW5nc25hbWUgb2YgdGhlIGFyZSBmb3VuZCBpbmFyZSBiYXNlZCBvbnNtYWxsZXIgdGhhbmEgcGVyc29uIHdob2V4cGFuc2lvbiBvZmFyZ3VpbmcgdGhhdG5vdyBrbm93biBhc0luIHRoZSBlYXJseWludGVybWVkaWF0ZWRlcml2ZWQgZnJvbVNjYW5kaW5hdmlhbjwvYT48L2Rpdj4NCmNvbnNpZGVyIHRoZWFuIGVzdGltYXRlZHRoZSBOYXRpb25hbDxkaXYgaWQ9InBhZ3Jlc3VsdGluZyBpbmNvbW1pc3Npb25lZGFuYWxvZ291cyB0b2FyZSByZXF1aXJlZC91bD4KPC9kaXY+CndhcyBiYXNlZCBvbmFuZCBiZWNhbWUgYSZuYnNwOyZuYnNwO3QiIHZhbHVlPSIiIHdhcyBjYXB0dXJlZG5vIG1vcmUgdGhhbnJlc3BlY3RpdmVseWNvbnRpbnVlIHRvID4NCjxoZWFkPg0KPHdlcmUgY3JlYXRlZG1vcmUgZ2VuZXJhbGluZm9ybWF0aW9uIHVzZWQgZm9yIHRoZWluZGVwZW5kZW50IHRoZSBJbXBlcmlhbGNvbXBvbmVudCBvZnRvIHRoZSBub3J0aGluY2x1ZGUgdGhlIENvbnN0cnVjdGlvbnNpZGUgb2YgdGhlIHdvdWxkIG5vdCBiZWZvciBpbnN0YW5jZWludmVudGlvbiBvZm1vcmUgY29tcGxleGNvbGxlY3RpdmVseWJhY2tncm91bmQ6IHRleHQtYWxpZ246IGl0cyBvcmlnaW5hbGludG8gYWNjb3VudHRoaXMgcHJvY2Vzc2FuIGV4dGVuc2l2ZWhvd2V2ZXIsIHRoZXRoZXkgYXJlIG5vdHJlamVjdGVkIHRoZWNyaXRpY2lzbSBvZmR1cmluZyB3aGljaHByb2JhYmx5IHRoZXRoaXMgYXJ0aWNsZShmdW5jdGlvbigpe0l0IHNob3VsZCBiZWFuIGFncmVlbWVudGFjY2lkZW50YWxseWRpZmZlcnMgZnJvbUFyY2hpdGVjdHVyZWJldHRlciBrbm93bmFycmFuZ2VtZW50c2luZmx1ZW5jZSBvbmF0dGVuZGVkIHRoZWlkZW50aWNhbCB0b3NvdXRoIG9mIHRoZXBhc3MgdGhyb3VnaHhtbCIgdGl0bGU9IndlaWdodDpib2xkO2NyZWF0aW5nIHRoZWRpc3BsYXk6bm9uZXJlcGxhY2VkIHRoZTxpbWcgc3JjPSIvaWh0dHBzOi8vd3d3LldvcmxkIFdhciBJSXRlc3RpbW9uaWFsc2ZvdW5kIGluIHRoZXJlcXVpcmVkIHRvIGFuZCB0aGF0IHRoZWJldHdlZW4gdGhlIHdhcyBkZXNpZ25lZGNvbnNpc3RzIG9mIGNvbnNpZGVyYWJseXB1Ymxpc2hlZCBieXRoZSBsYW5ndWFnZUNvbnNlcnZhdGlvbmNvbnNpc3RlZCBvZnJlZmVyIHRvIHRoZWJhY2sgdG8gdGhlIGNzcyIgbWVkaWE9IlBlb3BsZSBmcm9tIGF2YWlsYWJsZSBvbnByb3ZlZCB0byBiZXN1Z2dlc3Rpb25zIndhcyBrbm93biBhc3ZhcmlldGllcyBvZmxpa2VseSB0byBiZWNvbXByaXNlZCBvZnN1cHBvcnQgdGhlIGhhbmRzIG9mIHRoZWNvdXBsZWQgd2l0aGNvbm5lY3QgYW5kIGJvcmRlcjpub25lO3BlcmZvcm1hbmNlc2JlZm9yZSBiZWluZ2xhdGVyIGJlY2FtZWNhbGN1bGF0aW9uc29mdGVuIGNhbGxlZHJlc2lkZW50cyBvZm1lYW5pbmcgdGhhdD48bGkgY2xhc3M9ImV2aWRlbmNlIGZvcmV4cGxhbmF0aW9uc2Vudmlyb25tZW50cyI+PC9hPjwvZGl2PndoaWNoIGFsbG93c0ludHJvZHVjdGlvbmRldmVsb3BlZCBieWEgd2lkZSByYW5nZW9uIGJlaGFsZiBvZnZhbGlnbj0idG9wInByaW5jaXBsZSBvZmF0IHRoZSB0aW1lLDwvbm9zY3JpcHQ+DXNhaWQgdG8gaGF2ZWluIHRoZSBmaXJzdHdoaWxlIG90aGVyc2h5cG90aGV0aWNhbHBoaWxvc29waGVyc3Bvd2VyIG9mIHRoZWNvbnRhaW5lZCBpbnBlcmZvcm1lZCBieWluYWJpbGl0eSB0b3dlcmUgd3JpdHRlbnNwYW4gc3R5bGU9ImlucHV0IG5hbWU9InRoZSBxdWVzdGlvbmludGVuZGVkIGZvcnJlamVjdGlvbiBvZmltcGxpZXMgdGhhdGludmVudGVkIHRoZXRoZSBzdGFuZGFyZHdhcyBwcm9iYWJseWxpbmsgYmV0d2VlbnByb2Zlc3NvciBvZmludGVyYWN0aW9uc2NoYW5naW5nIHRoZUluZGlhbiBPY2VhbiBjbGFzcz0ibGFzdHdvcmtpbmcgd2l0aCdodHRwOi8vd3d3LnllYXJzIGJlZm9yZVRoaXMgd2FzIHRoZXJlY3JlYXRpb25hbGVudGVyaW5nIHRoZW1lYXN1cmVtZW50c2FuIGV4dHJlbWVseXZhbHVlIG9mIHRoZXN0YXJ0IG9mIHRoZQo8L3NjcmlwdD4KCmFuIGVmZm9ydCB0b2luY3JlYXNlIHRoZXRvIHRoZSBzb3V0aHNwYWNpbmc9IjAiPnN1ZmZpY2llbnRseXRoZSBFdXJvcGVhbmNvbnZlcnRlZCB0b2NsZWFyVGltZW91dGRpZCBub3QgaGF2ZWNvbnNlcXVlbnRseWZvciB0aGUgbmV4dGV4dGVuc2lvbiBvZmVjb25vbWljIGFuZGFsdGhvdWdoIHRoZWFyZSBwcm9kdWNlZGFuZCB3aXRoIHRoZWluc3VmZmljaWVudGdpdmVuIGJ5IHRoZXN0YXRpbmcgdGhhdGV4cGVuZGl0dXJlczwvc3Bhbj48L2E+CnRob3VnaHQgdGhhdG9uIHRoZSBiYXNpc2NlbGxwYWRkaW5nPWltYWdlIG9mIHRoZXJldHVybmluZyB0b2luZm9ybWF0aW9uLHNlcGFyYXRlZCBieWFzc2Fzc2luYXRlZHMiIGNvbnRlbnQ9ImF1dGhvcml0eSBvZm5vcnRod2VzdGVybjwvZGl2Pgo8ZGl2ICI+PC9kaXY+DQogIGNvbnN1bHRhdGlvbmNvbW11bml0eSBvZnRoZSBuYXRpb25hbGl0IHNob3VsZCBiZXBhcnRpY2lwYW50cyBhbGlnbj0ibGVmdHRoZSBncmVhdGVzdHNlbGVjdGlvbiBvZnN1cGVybmF0dXJhbGRlcGVuZGVudCBvbmlzIG1lbnRpb25lZGFsbG93aW5nIHRoZXdhcyBpbnZlbnRlZGFjY29tcGFueWluZ2hpcyBwZXJzb25hbGF2YWlsYWJsZSBhdHN0dWR5IG9mIHRoZW9uIHRoZSBvdGhlcmV4ZWN1dGlvbiBvZkh1bWFuIFJpZ2h0c3Rlcm1zIG9mIHRoZWFzc29jaWF0aW9uc3Jlc2VhcmNoIGFuZHN1Y2NlZWRlZCBieWRlZmVhdGVkIHRoZWFuZCBmcm9tIHRoZWJ1dCB0aGV5IGFyZWNvbW1hbmRlciBvZnN0YXRlIG9mIHRoZXllYXJzIG9mIGFnZXRoZSBzdHVkeSBvZjx1bCBjbGFzcz0ic3BsYWNlIGluIHRoZXdoZXJlIGhlIHdhczxsaSBjbGFzcz0iZnRoZXJlIGFyZSBub3doaWNoIGJlY2FtZWhlIHB1Ymxpc2hlZGV4cHJlc3NlZCBpbnRvIHdoaWNoIHRoZWNvbW1pc3Npb25lcmZvbnQtd2VpZ2h0OnRlcnJpdG9yeSBvZmV4dGVuc2lvbnMiPlJvbWFuIEVtcGlyZWVxdWFsIHRvIHRoZUluIGNvbnRyYXN0LGhvd2V2ZXIsIGFuZGlzIHR5cGljYWxseWFuZCBoaXMgd2lmZShhbHNvIGNhbGxlZD48dWwgY2xhc3M9ImVmZmVjdGl2ZWx5IGV2b2x2ZWQgaW50b3NlZW0gdG8gaGF2ZXdoaWNoIGlzIHRoZXRoZXJlIHdhcyBub2FuIGV4Y2VsbGVudGFsbCBvZiB0aGVzZWRlc2NyaWJlZCBieUluIHByYWN0aWNlLGJyb2FkY2FzdGluZ2NoYXJnZWQgd2l0aHJlZmxlY3RlZCBpbnN1YmplY3RlZCB0b21pbGl0YXJ5IGFuZHRvIHRoZSBwb2ludGVjb25vbWljYWxseXNldFRhcmdldGluZ2FyZSBhY3R1YWxseXZpY3Rvcnkgb3ZlcigpOzwvc2NyaXB0PmNvbnRpbnVvdXNseXJlcXVpcmVkIGZvcmV2b2x1dGlvbmFyeWFuIGVmZmVjdGl2ZW5vcnRoIG9mIHRoZSwgd2hpY2ggd2FzIGZyb250IG9mIHRoZW9yIG90aGVyd2lzZXNvbWUgZm9ybSBvZmhhZCBub3QgYmVlbmdlbmVyYXRlZCBieWluZm9ybWF0aW9uLnBlcm1pdHRlZCB0b2luY2x1ZGVzIHRoZWRldmVsb3BtZW50LGVudGVyZWQgaW50b3RoZSBwcmV2aW91c2NvbnNpc3RlbnRseWFyZSBrbm93biBhc3RoZSBmaWVsZCBvZnRoaXMgdHlwZSBvZmdpdmVuIHRvIHRoZXRoZSB0aXRsZSBvZmNvbnRhaW5zIHRoZWluc3RhbmNlcyBvZmluIHRoZSBub3J0aGR1ZSB0byB0aGVpcmFyZSBkZXNpZ25lZGNvcnBvcmF0aW9uc3dhcyB0aGF0IHRoZW9uZSBvZiB0aGVzZW1vcmUgcG9wdWxhcnN1Y2NlZWRlZCBpbnN1cHBvcnQgZnJvbWluIGRpZmZlcmVudGRvbWluYXRlZCBieWRlc2lnbmVkIGZvcm93bmVyc2hpcCBvZmFuZCBwb3NzaWJseXN0YW5kYXJkaXplZHJlc3BvbnNlVGV4dHdhcyBpbnRlbmRlZHJlY2VpdmVkIHRoZWFzc3VtZWQgdGhhdGFyZWFzIG9mIHRoZXByaW1hcmlseSBpbnRoZSBiYXNpcyBvZmluIHRoZSBzZW5zZWFjY291bnRzIGZvcmRlc3Ryb3llZCBieWF0IGxlYXN0IHR3b3dhcyBkZWNsYXJlZGNvdWxkIG5vdCBiZVNlY3JldGFyeSBvZmFwcGVhciB0byBiZW1hcmdpbi10b3A6MS9eXHMrfFxzKyQvZ2Upe3Rocm93IGV9O3RoZSBzdGFydCBvZnR3byBzZXBhcmF0ZWxhbmd1YWdlIGFuZHdobyBoYWQgYmVlbm9wZXJhdGlvbiBvZmRlYXRoIG9mIHRoZXJlYWwgbnVtYmVycwk8bGluayByZWw9InByb3ZpZGVkIHRoZXRoZSBzdG9yeSBvZmNvbXBldGl0aW9uc2VuZ2xpc2ggKFVLKWVuZ2xpc2ggKFVTKdCc0L7QvdCz0L7Qu9Ch0YDQv9GB0LrQuNGB0YDQv9GB0LrQuNGB0YDQv9GB0LrQvtmE2LnYsdio2YrYqeato+mrlOS4reaWh+eugOS9k+S4reaWh+e5geS9k+S4reaWh+aciemZkOWFrOWPuOS6uuawkeaUv+W6nOmYv+mHjOW3tOW3tOekvuS8muS4u+S5ieaTjeS9nOezu+e7n+aUv+etluazleinhGluZm9ybWFjacOzbmhlcnJhbWllbnRhc2VsZWN0csOzbmljb2Rlc2NyaXBjacOzbmNsYXNpZmljYWRvc2Nvbm9jaW1pZW50b3B1YmxpY2FjacOzbnJlbGFjaW9uYWRhc2luZm9ybcOhdGljYXJlbGFjaW9uYWRvc2RlcGFydGFtZW50b3RyYWJhamFkb3Jlc2RpcmVjdGFtZW50ZWF5dW50YW1pZW50b21lcmNhZG9MaWJyZWNvbnTDoWN0ZW5vc2hhYml0YWNpb25lc2N1bXBsaW1pZW50b3Jlc3RhdXJhbnRlc2Rpc3Bvc2ljacOzbmNvbnNlY3VlbmNpYWVsZWN0csOzbmljYWFwbGljYWNpb25lc2Rlc2NvbmVjdGFkb2luc3RhbGFjacOzbnJlYWxpemFjacOzbnV0aWxpemFjacOzbmVuY2ljbG9wZWRpYWVuZmVybWVkYWRlc2luc3RydW1lbnRvc2V4cGVyaWVuY2lhc2luc3RpdHVjacOzbnBhcnRpY3VsYXJlc3N1YmNhdGVnb3JpYdGC0L7Qu9GM0LrQvtCg0L7RgdGB0LjQuNGA0LDQsdC+0YLRi9Cx0L7Qu9GM0YjQtdC/0YDQvtGB0YLQvtC80L7QttC10YLQtdC00YDRg9Cz0LjRhdGB0LvRg9GH0LDQtdGB0LXQudGH0LDRgdCy0YHQtdCz0LTQsNCg0L7RgdGB0LjRj9Cc0L7RgdC60LLQtdC00YDRg9Cz0LjQtdCz0L7RgNC+0LTQsNCy0L7Qv9GA0L7RgdC00LDQvdC90YvRhdC00L7Qu9C20L3Ri9C40LzQtdC90L3QvtCc0L7RgdC60LLRi9GA0YPQsdC70LXQudCc0L7RgdC60LLQsNGB0YLRgNCw0L3Ri9C90LjRh9C10LPQvtGA0LDQsdC+0YLQtdC00L7Qu9C20LXQvdGD0YHQu9GD0LPQuNGC0LXQv9C10YDRjNCe0LTQvdCw0LrQvtC/0L7RgtC+0LzRg9GA0LDQsdC+0YLRg9Cw0L/RgNC10LvRj9Cy0L7QvtCx0YnQtdC+0LTQvdC+0LPQvtGB0LLQvtC10LPQvtGB0YLQsNGC0YzQuNC00YDRg9Cz0L7QudGE0L7RgNGD0LzQtdGF0L7RgNC+0YjQvtC/0YDQvtGC0LjQstGB0YHRi9C70LrQsNC60LDQttC00YvQudCy0LvQsNGB0YLQuNCz0YDRg9C/0L/Ri9Cy0LzQtdGB0YLQtdGA0LDQsdC+0YLQsNGB0LrQsNC30LDQu9C/0LXRgNCy0YvQudC00LXQu9Cw0YLRjNC00LXQvdGM0LPQuNC/0LXRgNC40L7QtNCx0LjQt9C90LXRgdC+0YHQvdC+0LLQtdC80L7QvNC10L3RgtC60YPQv9C40YLRjNC00L7Qu9C20L3QsNGA0LDQvNC60LDRhdC90LDRh9Cw0LvQvtCg0LDQsdC+0YLQsNCi0L7Qu9GM0LrQvtGB0L7QstGB0LXQvNCy0YLQvtGA0L7QudC90LDRh9Cw0LvQsNGB0L/QuNGB0L7QutGB0LvRg9C20LHRi9GB0LjRgdGC0LXQvNC/0LXRh9Cw0YLQuNC90L7QstC+0LPQvtC/0L7QvNC+0YnQuNGB0LDQudGC0L7QstC/0L7Rh9C10LzRg9C/0L7QvNC+0YnRjNC00L7Qu9C20L3QvtGB0YHRi9C70LrQuNCx0YvRgdGC0YDQvtC00LDQvdC90YvQtdC80L3QvtCz0LjQtdC/0YDQvtC10LrRgtCh0LXQudGH0LDRgdC80L7QtNC10LvQuNGC0LDQutC+0LPQvtC+0L3Qu9Cw0LnQvdCz0L7RgNC+0LTQtdCy0LXRgNGB0LjRj9GB0YLRgNCw0L3QtdGE0LjQu9GM0LzRi9GD0YDQvtCy0L3Rj9GA0LDQt9C90YvRhdC40YHQutCw0YLRjNC90LXQtNC10LvRjtGP0L3QstCw0YDRj9C80LXQvdGM0YjQtdC80L3QvtCz0LjRhdC00LDQvdC90L7QudC30L3QsNGH0LjRgtC90LXQu9GM0LfRj9GE0L7RgNGD0LzQsNCi0LXQv9C10YDRjNC80LXRgdGP0YbQsNC30LDRidC40YLRi9Cb0YPRh9GI0LjQteCkqOCkueClgOCkguCkleCksOCkqOClh+CkheCkquCkqOClh+CkleCkv+Ckr+CkvuCkleCksOClh+CkguCkheCkqOCljeCkr+CkleCljeCkr+CkvuCkl+CkvuCkh+CkoeCkrOCkvuCksOClh+CkleCkv+CkuOClgOCkpuCkv+Ckr+CkvuCkquCkueCksuClh+CkuOCkv+CkguCkueCkreCkvuCksOCkpOCkheCkquCkqOClgOCkteCkvuCksuClh+CkuOClh+CkteCkvuCkleCksOCkpOClh+CkruClh+CksOClh+CkueCli+CkqOClh+CkuOCkleCkpOClh+CkrOCkueClgeCkpOCkuOCkvuCkh+Ckn+CkueCli+Ckl+CkvuCknOCkvuCkqOClh+CkruCkv+CkqOCkn+CkleCksOCkpOCkvuCkleCksOCkqOCkvuCkieCkqOCkleClh+Ckr+CkueCkvuCkgeCkuOCkrOCkuOClh+CkreCkvuCkt+CkvuCkhuCkquCkleClh+CksuCkv+Ckr+Clh+CktuClgeCksOClguCkh+CkuOCkleClh+CkmOCkguCkn+Clh+CkruClh+CksOClgOCkuOCkleCkpOCkvuCkruClh+CksOCkvuCksuClh+CkleCksOCkheCkp+Ckv+CkleCkheCkquCkqOCkvuCkuOCkruCkvuCknOCkruClgeCkneClh+CkleCkvuCksOCko+CkueCli+CkpOCkvuCkleCkoeCkvOClgOCkr+CkueCkvuCkguCkueCli+Ckn+CksuCktuCkrOCljeCkpuCksuCkv+Ckr+CkvuCknOClgOCkteCkqOCknOCkvuCkpOCkvuCkleCliOCkuOClh+CkhuCkquCkleCkvuCkteCkvuCksuClgOCkpuClh+CkqOClh+CkquClguCksOClgOCkquCkvuCkqOClgOCkieCkuOCkleClh+CkueCli+Ckl+ClgOCkrOCliOCkoOCkleCkhuCkquCkleClgOCkteCksOCljeCkt+Ckl+CkvuCkguCkteCkhuCkquCkleCli+CknOCkv+CksuCkvuCknOCkvuCkqOCkvuCkuOCkueCkruCkpOCkueCkruClh+CkguCkieCkqOCkleClgOCkr+CkvuCkueClguCkpuCksOCljeCknOCkuOClguCkmuClgOCkquCkuOCkguCkpuCkuOCkteCkvuCksuCkueCli+CkqOCkvuCkueCli+CkpOClgOCknOCliOCkuOClh+CkteCkvuCkquCkuOCknOCkqOCkpOCkvuCkqOClh+CkpOCkvuCknOCkvuCksOClgOCkmOCkvuCkr+CksuCknOCkv+CksuClh+CkqOClgOCkmuClh+CknOCkvuCkguCkmuCkquCkpOCljeCksOCkl+ClguCkl+CksuCknOCkvuCkpOClh+CkrOCkvuCkueCksOCkhuCkquCkqOClh+CkteCkvuCkueCkqOCkh+CkuOCkleCkvuCkuOClgeCkrOCkueCksOCkueCkqOClh+Ckh+CkuOCkuOClh+CkuOCkueCkv+CkpOCkrOCkoeCkvOClh+CkmOCkn+CkqOCkvuCkpOCksuCkvuCktuCkquCkvuCkguCkmuCktuCljeCksOClgOCkrOCkoeCkvOClgOCkueCli+CkpOClh+CkuOCkvuCkiOCkn+CktuCkvuCkr+CkpuCkuOCkleCkpOClgOCknOCkvuCkpOClgOCkteCkvuCksuCkvuCkueCknOCkvuCksOCkquCkn+CkqOCkvuCksOCkluCkqOClh+CkuOCkoeCkvOCkleCkruCkv+CksuCkvuCkieCkuOCkleClgOCkleClh+CkteCksuCksuCkl+CkpOCkvuCkluCkvuCkqOCkvuCkheCksOCljeCkpeCknOCkueCkvuCkguCkpuClh+CkluCkvuCkquCkueCksuClgOCkqOCkv+Ckr+CkruCkrOCkv+CkqOCkvuCkrOCliOCkguCkleCkleCkueClgOCkguCkleCkueCkqOCkvuCkpuClh+CkpOCkvuCkueCkruCksuClh+CkleCkvuCkq+ClgOCknOCkrOCkleCkv+CkpOClgeCksOCkpOCkruCkvuCkguCkl+CkteCkueClgOCkguCksOCli+CknOCkvOCkruCkv+CksuClgOCkhuCksOCli+CkquCkuOClh+CkqOCkvuCkr+CkvuCkpuCkteCksuClh+CkqOClh+CkluCkvuCkpOCkvuCkleCksOClgOCkrOCkieCkqOCkleCkvuCknOCkteCkvuCkrOCkquClguCksOCkvuCkrOCkoeCkvOCkvuCkuOCljOCkpuCkvuCktuClh+Ckr+CksOCkleCkv+Ckr+Clh+CkleCkueCkvuCkguCkheCkleCkuOCksOCkrOCkqOCkvuCkj+CkteCkueCkvuCkguCkuOCljeCkpeCksuCkruCkv+CksuClh+CksuClh+CkluCkleCkteCkv+Ckt+Ckr+CkleCljeCksOCkguCkuOCkruClguCkueCkpeCkvuCkqOCkvtiq2LPYqti32YrYudmF2LTYp9ix2YPYqdio2YjYp9iz2LfYqdin2YTYtdmB2K3YqdmF2YjYp9i22YrYudin2YTYrtin2LXYqdin2YTZhdiy2YrYr9in2YTYudin2YXYqdin2YTZg9in2KrYqNin2YTYsdiv2YjYr9io2LHZhtin2YXYrNin2YTYr9mI2YTYqdin2YTYudin2YTZhdin2YTZhdmI2YLYudin2YTYudix2KjZitin2YTYs9ix2YrYudin2YTYrNmI2KfZhNin2YTYsNmH2KfYqNin2YTYrdmK2KfYqdin2YTYrdmC2YjZgtin2YTZg9ix2YrZhdin2YTYudix2KfZgtmF2K3ZgdmI2LjYqdin2YTYq9in2YbZitmF2LTYp9mH2K/Yqdin2YTZhdix2KPYqdin2YTZgtix2KLZhtin2YTYtNio2KfYqNin2YTYrdmI2KfYsdin2YTYrNiv2YrYr9in2YTYo9iz2LHYqdin2YTYudmE2YjZhdmF2KzZhdmI2LnYqdin2YTYsdit2YXZhtin2YTZhtmC2KfYt9mB2YTYs9i32YrZhtin2YTZg9mI2YrYqtin2YTYr9mG2YrYp9io2LHZg9in2KrZh9in2YTYsdmK2KfYttiq2K3Zitin2KrZitio2KrZiNmC2YrYqtin2YTYo9mI2YTZidin2YTYqNix2YrYr9in2YTZg9mE2KfZhdin2YTYsdin2KjYt9in2YTYtNiu2LXZitiz2YrYp9ix2KfYqtin2YTYq9in2YTYq9in2YTYtdmE2KfYqdin2YTYrdiv2YrYq9in2YTYstmI2KfYsdin2YTYrtmE2YrYrNin2YTYrNmF2YrYudin2YTYudin2YXZh9in2YTYrNmF2KfZhNin2YTYs9in2LnYqdmF2LTYp9mH2K/Zh9in2YTYsdim2YrYs9in2YTYr9iu2YjZhNin2YTZgdmG2YrYqdin2YTZg9iq2KfYqNin2YTYr9mI2LHZitin2YTYr9ix2YjYs9in2LPYqti62LHZgtiq2LXYp9mF2YrZhdin2YTYqNmG2KfYqtin2YTYudi42YrZhWVudGVydGFpbm1lbnR1bmRlcnN0YW5kaW5nID0gZnVuY3Rpb24oKS5qcGciIHdpZHRoPSJjb25maWd1cmF0aW9uLnBuZyIgd2lkdGg9Ijxib2R5IGNsYXNzPSJNYXRoLnJhbmRvbSgpY29udGVtcG9yYXJ5IFVuaXRlZCBTdGF0ZXNjaXJjdW1zdGFuY2VzLmFwcGVuZENoaWxkKG9yZ2FuaXphdGlvbnM8c3BhbiBjbGFzcz0iIj48aW1nIHNyYz0iL2Rpc3Rpbmd1aXNoZWR0aG91c2FuZHMgb2YgY29tbXVuaWNhdGlvbmNsZWFyIj48L2Rpdj5pbnZlc3RpZ2F0aW9uZmF2aWNvbi5pY28iIG1hcmdpbi1yaWdodDpiYXNlZCBvbiB0aGUgTWFzc2FjaHVzZXR0c3RhYmxlIGJvcmRlcj1pbnRlcm5hdGlvbmFsYWxzbyBrbm93biBhc3Byb251bmNpYXRpb25iYWNrZ3JvdW5kOiNmcGFkZGluZy1sZWZ0OkZvciBleGFtcGxlLCBtaXNjZWxsYW5lb3VzJmx0Oy9tYXRoJmd0O3BzeWNob2xvZ2ljYWxpbiBwYXJ0aWN1bGFyZWFyY2giIHR5cGU9ImZvcm0gbWV0aG9kPSJhcyBvcHBvc2VkIHRvU3VwcmVtZSBDb3VydG9jY2FzaW9uYWxseSBBZGRpdGlvbmFsbHksTm9ydGggQW1lcmljYXB4O2JhY2tncm91bmRvcHBvcnR1bml0aWVzRW50ZXJ0YWlubWVudC50b0xvd2VyQ2FzZShtYW51ZmFjdHVyaW5ncHJvZmVzc2lvbmFsIGNvbWJpbmVkIHdpdGhGb3IgaW5zdGFuY2UsY29uc2lzdGluZyBvZiIgbWF4bGVuZ3RoPSJyZXR1cm4gZmFsc2U7Y29uc2Npb3VzbmVzc01lZGl0ZXJyYW5lYW5leHRyYW9yZGluYXJ5YXNzYXNzaW5hdGlvbnN1YnNlcXVlbnRseSBidXR0b24gdHlwZT0idGhlIG51bWJlciBvZnRoZSBvcmlnaW5hbCBjb21wcmVoZW5zaXZlcmVmZXJzIHRvIHRoZTwvdWw+CjwvZGl2PgpwaGlsb3NvcGhpY2FsbG9jYXRpb24uaHJlZndhcyBwdWJsaXNoZWRTYW4gRnJhbmNpc2NvKGZ1bmN0aW9uKCl7CjxkaXYgaWQ9Im1haW5zb3BoaXN0aWNhdGVkbWF0aGVtYXRpY2FsIC9oZWFkPg0KPGJvZHlzdWdnZXN0cyB0aGF0ZG9jdW1lbnRhdGlvbmNvbmNlbnRyYXRpb25yZWxhdGlvbnNoaXBzbWF5IGhhdmUgYmVlbihmb3IgZXhhbXBsZSxUaGlzIGFydGljbGUgaW4gc29tZSBjYXNlc3BhcnRzIG9mIHRoZSBkZWZpbml0aW9uIG9mR3JlYXQgQnJpdGFpbiBjZWxscGFkZGluZz1lcXVpdmFsZW50IHRvcGxhY2Vob2xkZXI9IjsgZm9udC1zaXplOiBqdXN0aWZpY2F0aW9uYmVsaWV2ZWQgdGhhdHN1ZmZlcmVkIGZyb21hdHRlbXB0ZWQgdG8gbGVhZGVyIG9mIHRoZWNyaXB0IiBzcmM9Ii8oZnVuY3Rpb24oKSB7YXJlIGF2YWlsYWJsZQoJPGxpbmsgcmVsPSIgc3JjPSdodHRwOi8vaW50ZXJlc3RlZCBpbmNvbnZlbnRpb25hbCAiIGFsdD0iIiAvPjwvYXJlIGdlbmVyYWxseWhhcyBhbHNvIGJlZW5tb3N0IHBvcHVsYXIgY29ycmVzcG9uZGluZ2NyZWRpdGVkIHdpdGh0eWxlPSJib3JkZXI6PC9hPjwvc3Bhbj48Ly5naWYiIHdpZHRoPSI8aWZyYW1lIHNyYz0idGFibGUgY2xhc3M9ImlubGluZS1ibG9jazthY2NvcmRpbmcgdG8gdG9nZXRoZXIgd2l0aGFwcHJveGltYXRlbHlwYXJsaWFtZW50YXJ5bW9yZSBhbmQgbW9yZWRpc3BsYXk6bm9uZTt0cmFkaXRpb25hbGx5cHJlZG9taW5hbnRseSZuYnNwO3wmbmJzcDsmbmJzcDs8L3NwYW4+IGNlbGxzcGFjaW5nPTxpbnB1dCBuYW1lPSJvciIgY29udGVudD0iY29udHJvdmVyc2lhbHByb3BlcnR5PSJvZzoveC1zaG9ja3dhdmUtZGVtb25zdHJhdGlvbnN1cnJvdW5kZWQgYnlOZXZlcnRoZWxlc3Msd2FzIHRoZSBmaXJzdGNvbnNpZGVyYWJsZSBBbHRob3VnaCB0aGUgY29sbGFib3JhdGlvbnNob3VsZCBub3QgYmVwcm9wb3J0aW9uIG9mPHNwYW4gc3R5bGU9Imtub3duIGFzIHRoZSBzaG9ydGx5IGFmdGVyZm9yIGluc3RhbmNlLGRlc2NyaWJlZCBhcyAvaGVhZD4KPGJvZHkgc3RhcnRpbmcgd2l0aGluY3JlYXNpbmdseSB0aGUgZmFjdCB0aGF0ZGlzY3Vzc2lvbiBvZm1pZGRsZSBvZiB0aGVhbiBpbmRpdmlkdWFsZGlmZmljdWx0IHRvIHBvaW50IG9mIHZpZXdob21vc2V4dWFsaXR5YWNjZXB0YW5jZSBvZjwvc3Bhbj48L2Rpdj5tYW51ZmFjdHVyZXJzb3JpZ2luIG9mIHRoZWNvbW1vbmx5IHVzZWRpbXBvcnRhbmNlIG9mZGVub21pbmF0aW9uc2JhY2tncm91bmQ6ICNsZW5ndGggb2YgdGhlZGV0ZXJtaW5hdGlvbmEgc2lnbmlmaWNhbnQiIGJvcmRlcj0iMCI+cmV2b2x1dGlvbmFyeXByaW5jaXBsZXMgb2ZpcyBjb25zaWRlcmVkd2FzIGRldmVsb3BlZEluZG8tRXVyb3BlYW52dWxuZXJhYmxlIHRvcHJvcG9uZW50cyBvZmFyZSBzb21ldGltZXNjbG9zZXIgdG8gdGhlTmV3IFlvcmsgQ2l0eSBuYW1lPSJzZWFyY2hhdHRyaWJ1dGVkIHRvY291cnNlIG9mIHRoZW1hdGhlbWF0aWNpYW5ieSB0aGUgZW5kIG9mYXQgdGhlIGVuZCBvZiIgYm9yZGVyPSIwIiB0ZWNobm9sb2dpY2FsLnJlbW92ZUNsYXNzKGJyYW5jaCBvZiB0aGVldmlkZW5jZSB0aGF0IVtlbmRpZl0tLT4NCkluc3RpdHV0ZSBvZiBpbnRvIGEgc2luZ2xlcmVzcGVjdGl2ZWx5LmFuZCB0aGVyZWZvcmVwcm9wZXJ0aWVzIG9maXMgbG9jYXRlZCBpbnNvbWUgb2Ygd2hpY2hUaGVyZSBpcyBhbHNvY29udGludWVkIHRvIGFwcGVhcmFuY2Ugb2YgJmFtcDtuZGFzaDsgZGVzY3JpYmVzIHRoZWNvbnNpZGVyYXRpb25hdXRob3Igb2YgdGhlaW5kZXBlbmRlbnRseWVxdWlwcGVkIHdpdGhkb2VzIG5vdCBoYXZlPC9hPjxhIGhyZWY9ImNvbmZ1c2VkIHdpdGg8bGluayBocmVmPSIvYXQgdGhlIGFnZSBvZmFwcGVhciBpbiB0aGVUaGVzZSBpbmNsdWRlcmVnYXJkbGVzcyBvZmNvdWxkIGJlIHVzZWQgc3R5bGU9JnF1b3Q7c2V2ZXJhbCB0aW1lc3JlcHJlc2VudCB0aGVib2R5Pgo8L2h0bWw+dGhvdWdodCB0byBiZXBvcHVsYXRpb24gb2Zwb3NzaWJpbGl0aWVzcGVyY2VudGFnZSBvZmFjY2VzcyB0byB0aGVhbiBhdHRlbXB0IHRvcHJvZHVjdGlvbiBvZmpxdWVyeS9qcXVlcnl0d28gZGlmZmVyZW50YmVsb25nIHRvIHRoZWVzdGFibGlzaG1lbnRyZXBsYWNpbmcgdGhlZGVzY3JpcHRpb24iIGRldGVybWluZSB0aGVhdmFpbGFibGUgZm9yQWNjb3JkaW5nIHRvIHdpZGUgcmFuZ2Ugb2YJPGRpdiBjbGFzcz0ibW9yZSBjb21tb25seW9yZ2FuaXNhdGlvbnNmdW5jdGlvbmFsaXR5d2FzIGNvbXBsZXRlZCAmYW1wO21kYXNoOyBwYXJ0aWNpcGF0aW9udGhlIGNoYXJhY3RlcmFuIGFkZGl0aW9uYWxhcHBlYXJzIHRvIGJlZmFjdCB0aGF0IHRoZWFuIGV4YW1wbGUgb2ZzaWduaWZpY2FudGx5b25tb3VzZW92ZXI9ImJlY2F1c2UgdGhleSBhc3luYyA9IHRydWU7cHJvYmxlbXMgd2l0aHNlZW1zIHRvIGhhdmV0aGUgcmVzdWx0IG9mIHNyYz0iaHR0cDovL2ZhbWlsaWFyIHdpdGhwb3NzZXNzaW9uIG9mZnVuY3Rpb24gKCkge3Rvb2sgcGxhY2UgaW5hbmQgc29tZXRpbWVzc3Vic3RhbnRpYWxseTxzcGFuPjwvc3Bhbj5pcyBvZnRlbiB1c2VkaW4gYW4gYXR0ZW1wdGdyZWF0IGRlYWwgb2ZFbnZpcm9ubWVudGFsc3VjY2Vzc2Z1bGx5IHZpcnR1YWxseSBhbGwyMHRoIGNlbnR1cnkscHJvZmVzc2lvbmFsc25lY2Vzc2FyeSB0byBkZXRlcm1pbmVkIGJ5Y29tcGF0aWJpbGl0eWJlY2F1c2UgaXQgaXNEaWN0aW9uYXJ5IG9mbW9kaWZpY2F0aW9uc1RoZSBmb2xsb3dpbmdtYXkgcmVmZXIgdG86Q29uc2VxdWVudGx5LEludGVybmF0aW9uYWxhbHRob3VnaCBzb21ldGhhdCB3b3VsZCBiZXdvcmxkJ3MgZmlyc3RjbGFzc2lmaWVkIGFzYm90dG9tIG9mIHRoZShwYXJ0aWN1bGFybHlhbGlnbj0ibGVmdCIgbW9zdCBjb21tb25seWJhc2lzIGZvciB0aGVmb3VuZGF0aW9uIG9mY29udHJpYnV0aW9uc3BvcHVsYXJpdHkgb2ZjZW50ZXIgb2YgdGhldG8gcmVkdWNlIHRoZWp1cmlzZGljdGlvbnNhcHByb3hpbWF0aW9uIG9ubW91c2VvdXQ9Ik5ldyBUZXN0YW1lbnRjb2xsZWN0aW9uIG9mPC9zcGFuPjwvYT48L2luIHRoZSBVbml0ZWRmaWxtIGRpcmVjdG9yLXN0cmljdC5kdGQiPmhhcyBiZWVuIHVzZWRyZXR1cm4gdG8gdGhlYWx0aG91Z2ggdGhpc2NoYW5nZSBpbiB0aGVzZXZlcmFsIG90aGVyYnV0IHRoZXJlIGFyZXVucHJlY2VkZW50ZWRpcyBzaW1pbGFyIHRvZXNwZWNpYWxseSBpbndlaWdodDogYm9sZDtpcyBjYWxsZWQgdGhlY29tcHV0YXRpb25hbGluZGljYXRlIHRoYXRyZXN0cmljdGVkIHRvCTxtZXRhIG5hbWU9ImFyZSB0eXBpY2FsbHljb25mbGljdCB3aXRoSG93ZXZlciwgdGhlIEFuIGV4YW1wbGUgb2Zjb21wYXJlZCB3aXRocXVhbnRpdGllcyBvZnJhdGhlciB0aGFuIGFjb25zdGVsbGF0aW9ubmVjZXNzYXJ5IGZvcnJlcG9ydGVkIHRoYXRzcGVjaWZpY2F0aW9ucG9saXRpY2FsIGFuZCZuYnNwOyZuYnNwOzxyZWZlcmVuY2VzIHRvdGhlIHNhbWUgeWVhckdvdmVybm1lbnQgb2ZnZW5lcmF0aW9uIG9maGF2ZSBub3QgYmVlbnNldmVyYWwgeWVhcnNjb21taXRtZW50IHRvCQk8dWwgY2xhc3M9InZpc3VhbGl6YXRpb24xOXRoIGNlbnR1cnkscHJhY3RpdGlvbmVyc3RoYXQgaGUgd291bGRhbmQgY29udGludWVkb2NjdXBhdGlvbiBvZmlzIGRlZmluZWQgYXNjZW50cmUgb2YgdGhldGhlIGFtb3VudCBvZj48ZGl2IHN0eWxlPSJlcXVpdmFsZW50IG9mZGlmZmVyZW50aWF0ZWJyb3VnaHQgYWJvdXRtYXJnaW4tbGVmdDogYXV0b21hdGljYWxseXRob3VnaHQgb2YgYXNTb21lIG9mIHRoZXNlCjxkaXYgY2xhc3M9ImlucHV0IGNsYXNzPSJyZXBsYWNlZCB3aXRoaXMgb25lIG9mIHRoZWVkdWNhdGlvbiBhbmRpbmZsdWVuY2VkIGJ5cmVwdXRhdGlvbiBhcwo8bWV0YSBuYW1lPSJhY2NvbW1vZGF0aW9uPC9kaXY+CjwvZGl2PmxhcmdlIHBhcnQgb2ZJbnN0aXR1dGUgZm9ydGhlIHNvLWNhbGxlZCBhZ2FpbnN0IHRoZSBJbiB0aGlzIGNhc2Usd2FzIGFwcG9pbnRlZGNsYWltZWQgdG8gYmVIb3dldmVyLCB0aGlzRGVwYXJ0bWVudCBvZnRoZSByZW1haW5pbmdlZmZlY3Qgb24gdGhlcGFydGljdWxhcmx5IGRlYWwgd2l0aCB0aGUKPGRpdiBzdHlsZT0iYWxtb3N0IGFsd2F5c2FyZSBjdXJyZW50bHlleHByZXNzaW9uIG9mcGhpbG9zb3BoeSBvZmZvciBtb3JlIHRoYW5jaXZpbGl6YXRpb25zb24gdGhlIGlzbGFuZHNlbGVjdGVkSW5kZXhjYW4gcmVzdWx0IGluIiB2YWx1ZT0iIiAvPnRoZSBzdHJ1Y3R1cmUgLz48L2E+PC9kaXY+TWFueSBvZiB0aGVzZWNhdXNlZCBieSB0aGVvZiB0aGUgVW5pdGVkc3BhbiBjbGFzcz0ibWNhbiBiZSB0cmFjZWRpcyByZWxhdGVkIHRvYmVjYW1lIG9uZSBvZmlzIGZyZXF1ZW50bHlsaXZpbmcgaW4gdGhldGhlb3JldGljYWxseUZvbGxvd2luZyB0aGVSZXZvbHV0aW9uYXJ5Z292ZXJubWVudCBpbmlzIGRldGVybWluZWR0aGUgcG9saXRpY2FsaW50cm9kdWNlZCBpbnN1ZmZpY2llbnQgdG9kZXNjcmlwdGlvbiI+c2hvcnQgc3Rvcmllc3NlcGFyYXRpb24gb2ZhcyB0byB3aGV0aGVya25vd24gZm9yIGl0c3dhcyBpbml0aWFsbHlkaXNwbGF5OmJsb2NraXMgYW4gZXhhbXBsZXRoZSBwcmluY2lwYWxjb25zaXN0cyBvZiBhcmVjb2duaXplZCBhcy9ib2R5PjwvaHRtbD5hIHN1YnN0YW50aWFscmVjb25zdHJ1Y3RlZGhlYWQgb2Ygc3RhdGVyZXNpc3RhbmNlIHRvdW5kZXJncmFkdWF0ZVRoZXJlIGFyZSB0d29ncmF2aXRhdGlvbmFsYXJlIGRlc2NyaWJlZGludGVudGlvbmFsbHlzZXJ2ZWQgYXMgdGhlY2xhc3M9ImhlYWRlcm9wcG9zaXRpb24gdG9mdW5kYW1lbnRhbGx5ZG9taW5hdGVkIHRoZWFuZCB0aGUgb3RoZXJhbGxpYW5jZSB3aXRod2FzIGZvcmNlZCB0b3Jlc3BlY3RpdmVseSxhbmQgcG9saXRpY2FsaW4gc3VwcG9ydCBvZnBlb3BsZSBpbiB0aGUyMHRoIGNlbnR1cnkuYW5kIHB1Ymxpc2hlZGxvYWRDaGFydGJlYXR0byB1bmRlcnN0YW5kbWVtYmVyIHN0YXRlc2Vudmlyb25tZW50YWxmaXJzdCBoYWxmIG9mY291bnRyaWVzIGFuZGFyY2hpdGVjdHVyYWxiZSBjb25zaWRlcmVkY2hhcmFjdGVyaXplZGNsZWFySW50ZXJ2YWxhdXRob3JpdGF0aXZlRmVkZXJhdGlvbiBvZndhcyBzdWNjZWVkZWRhbmQgdGhlcmUgYXJlYSBjb25zZXF1ZW5jZXRoZSBQcmVzaWRlbnRhbHNvIGluY2x1ZGVkZnJlZSBzb2Z0d2FyZXN1Y2Nlc3Npb24gb2ZkZXZlbG9wZWQgdGhld2FzIGRlc3Ryb3llZGF3YXkgZnJvbSB0aGU7Cjwvc2NyaXB0Pgo8YWx0aG91Z2ggdGhleWZvbGxvd2VkIGJ5IGFtb3JlIHBvd2VyZnVscmVzdWx0ZWQgaW4gYVVuaXZlcnNpdHkgb2ZIb3dldmVyLCBtYW55dGhlIHByZXNpZGVudEhvd2V2ZXIsIHNvbWVpcyB0aG91Z2h0IHRvdW50aWwgdGhlIGVuZHdhcyBhbm5vdW5jZWRhcmUgaW1wb3J0YW50YWxzbyBpbmNsdWRlcz48aW5wdXQgdHlwZT10aGUgY2VudGVyIG9mIERPIE5PVCBBTFRFUnVzZWQgdG8gcmVmZXJ0aGVtZXMvP3NvcnQ9dGhhdCBoYWQgYmVlbnRoZSBiYXNpcyBmb3JoYXMgZGV2ZWxvcGVkaW4gdGhlIHN1bW1lcmNvbXBhcmF0aXZlbHlkZXNjcmliZWQgdGhlc3VjaCBhcyB0aG9zZXRoZSByZXN1bHRpbmdpcyBpbXBvc3NpYmxldmFyaW91cyBvdGhlclNvdXRoIEFmcmljYW5oYXZlIHRoZSBzYW1lZWZmZWN0aXZlbmVzc2luIHdoaWNoIGNhc2U7IHRleHQtYWxpZ246c3RydWN0dXJlIGFuZDsgYmFja2dyb3VuZDpyZWdhcmRpbmcgdGhlc3VwcG9ydGVkIHRoZWlzIGFsc28ga25vd25zdHlsZT0ibWFyZ2luaW5jbHVkaW5nIHRoZWJhaGFzYSBNZWxheXVub3JzayBib2ttw6Vsbm9yc2sgbnlub3Jza3Nsb3ZlbsWhxI1pbmFpbnRlcm5hY2lvbmFsY2FsaWZpY2FjacOzbmNvbXVuaWNhY2nDs25jb25zdHJ1Y2Npw7NuIj48ZGl2IGNsYXNzPSJkaXNhbWJpZ3VhdGlvbkRvbWFpbk5hbWUnLCAnYWRtaW5pc3RyYXRpb25zaW11bHRhbmVvdXNseXRyYW5zcG9ydGF0aW9uSW50ZXJuYXRpb25hbCBtYXJnaW4tYm90dG9tOnJlc3BvbnNpYmlsaXR5PCFbZW5kaWZdLS0+CjwvPjxtZXRhIG5hbWU9ImltcGxlbWVudGF0aW9uaW5mcmFzdHJ1Y3R1cmVyZXByZXNlbnRhdGlvbmJvcmRlci1ib3R0b206PC9oZWFkPgo8Ym9keT49aHR0cCUzQSUyRiUyRjxmb3JtIG1ldGhvZD0ibWV0aG9kPSJwb3N0IiAvZmF2aWNvbi5pY28iIH0pOwo8L3NjcmlwdD4KLnNldEF0dHJpYnV0ZShBZG1pbmlzdHJhdGlvbj0gbmV3IEFycmF5KCk7PCFbZW5kaWZdLS0+DQpkaXNwbGF5OmJsb2NrO1VuZm9ydHVuYXRlbHksIj4mbmJzcDs8L2Rpdj4vZmF2aWNvbi5pY28iPj0nc3R5bGVzaGVldCcgaWRlbnRpZmljYXRpb24sIGZvciBleGFtcGxlLDxsaT48YSBocmVmPSIvYW4gYWx0ZXJuYXRpdmVhcyBhIHJlc3VsdCBvZnB0Ij48L3NjcmlwdD4KdHlwZT0ic3VibWl0IiAKKGZ1bmN0aW9uKCkge3JlY29tbWVuZGF0aW9uZm9ybSBhY3Rpb249Ii90cmFuc2Zvcm1hdGlvbnJlY29uc3RydWN0aW9uLnN0eWxlLmRpc3BsYXkgQWNjb3JkaW5nIHRvIGhpZGRlbiIgbmFtZT0iYWxvbmcgd2l0aCB0aGVkb2N1bWVudC5ib2R5LmFwcHJveGltYXRlbHkgQ29tbXVuaWNhdGlvbnNwb3N0IiBhY3Rpb249Im1lYW5pbmcgJnF1b3Q7LS08IVtlbmRpZl0tLT5QcmltZSBNaW5pc3RlcmNoYXJhY3RlcmlzdGljPC9hPiA8YSBjbGFzcz10aGUgaGlzdG9yeSBvZiBvbm1vdXNlb3Zlcj0idGhlIGdvdmVybm1lbnRocmVmPSJodHRwczovL3dhcyBvcmlnaW5hbGx5d2FzIGludHJvZHVjZWRjbGFzc2lmaWNhdGlvbnJlcHJlc2VudGF0aXZlYXJlIGNvbnNpZGVyZWQ8IVtlbmRpZl0tLT4KCmRlcGVuZHMgb24gdGhlVW5pdmVyc2l0eSBvZiBpbiBjb250cmFzdCB0byBwbGFjZWhvbGRlcj0iaW4gdGhlIGNhc2Ugb2ZpbnRlcm5hdGlvbmFsIGNvbnN0aXR1dGlvbmFsc3R5bGU9ImJvcmRlci06IGZ1bmN0aW9uKCkge0JlY2F1c2Ugb2YgdGhlLXN0cmljdC5kdGQiPgo8dGFibGUgY2xhc3M9ImFjY29tcGFuaWVkIGJ5YWNjb3VudCBvZiB0aGU8c2NyaXB0IHNyYz0iL25hdHVyZSBvZiB0aGUgdGhlIHBlb3BsZSBpbiBpbiBhZGRpdGlvbiB0b3MpOyBqcy5pZCA9IGlkIiB3aWR0aD0iMTAwJSJyZWdhcmRpbmcgdGhlIFJvbWFuIENhdGhvbGljYW4gaW5kZXBlbmRlbnRmb2xsb3dpbmcgdGhlIC5naWYiIHdpZHRoPSIxdGhlIGZvbGxvd2luZyBkaXNjcmltaW5hdGlvbmFyY2hhZW9sb2dpY2FscHJpbWUgbWluaXN0ZXIuanMiPjwvc2NyaXB0PmNvbWJpbmF0aW9uIG9mIG1hcmdpbndpZHRoPSJjcmVhdGVFbGVtZW50KHcuYXR0YWNoRXZlbnQoPC9hPjwvdGQ+PC90cj5zcmM9Imh0dHBzOi8vYUluIHBhcnRpY3VsYXIsIGFsaWduPSJsZWZ0IiBDemVjaCBSZXB1YmxpY1VuaXRlZCBLaW5nZG9tY29ycmVzcG9uZGVuY2Vjb25jbHVkZWQgdGhhdC5odG1sIiB0aXRsZT0iKGZ1bmN0aW9uICgpIHtjb21lcyBmcm9tIHRoZWFwcGxpY2F0aW9uIG9mPHNwYW4gY2xhc3M9InNiZWxpZXZlZCB0byBiZWVtZW50KCdzY3JpcHQnPC9hPgo8L2xpPgo8bGl2ZXJ5IGRpZmZlcmVudD48c3BhbiBjbGFzcz0ib3B0aW9uIHZhbHVlPSIoYWxzbyBrbm93biBhcwk8bGk+PGEgaHJlZj0iPjxpbnB1dCBuYW1lPSJzZXBhcmF0ZWQgZnJvbXJlZmVycmVkIHRvIGFzIHZhbGlnbj0idG9wIj5mb3VuZGVyIG9mIHRoZWF0dGVtcHRpbmcgdG8gY2FyYm9uIGRpb3hpZGUKCjxkaXYgY2xhc3M9ImNsYXNzPSJzZWFyY2gtL2JvZHk+CjwvaHRtbD5vcHBvcnR1bml0eSB0b2NvbW11bmljYXRpb25zPC9oZWFkPg0KPGJvZHkgc3R5bGU9IndpZHRoOlRp4bq/bmcgVmnhu4d0Y2hhbmdlcyBpbiB0aGVib3JkZXItY29sb3I6IzAiIGJvcmRlcj0iMCIgPC9zcGFuPjwvZGl2Pjx3YXMgZGlzY292ZXJlZCIgdHlwZT0idGV4dCIgKTsKPC9zY3JpcHQ+CgpEZXBhcnRtZW50IG9mIGVjY2xlc2lhc3RpY2FsdGhlcmUgaGFzIGJlZW5yZXN1bHRpbmcgZnJvbTwvYm9keT48L2h0bWw+aGFzIG5ldmVyIGJlZW50aGUgZmlyc3QgdGltZWluIHJlc3BvbnNlIHRvYXV0b21hdGljYWxseSA8L2Rpdj4KCjxkaXYgaXdhcyBjb25zaWRlcmVkcGVyY2VudCBvZiB0aGUiIC8+PC9hPjwvZGl2PmNvbGxlY3Rpb24gb2YgZGVzY2VuZGVkIGZyb21zZWN0aW9uIG9mIHRoZWFjY2VwdC1jaGFyc2V0dG8gYmUgY29uZnVzZWRtZW1iZXIgb2YgdGhlIHBhZGRpbmctcmlnaHQ6dHJhbnNsYXRpb24gb2ZpbnRlcnByZXRhdGlvbiBocmVmPSdodHRwOi8vd2hldGhlciBvciBub3RUaGVyZSBhcmUgYWxzb3RoZXJlIGFyZSBtYW55YSBzbWFsbCBudW1iZXJvdGhlciBwYXJ0cyBvZmltcG9zc2libGUgdG8gIGNsYXNzPSJidXR0b25sb2NhdGVkIGluIHRoZS4gSG93ZXZlciwgdGhlYW5kIGV2ZW50dWFsbHlBdCB0aGUgZW5kIG9mIGJlY2F1c2Ugb2YgaXRzcmVwcmVzZW50cyB0aGU8Zm9ybSBhY3Rpb249IiBtZXRob2Q9InBvc3QiaXQgaXMgcG9zc2libGVtb3JlIGxpa2VseSB0b2FuIGluY3JlYXNlIGluaGF2ZSBhbHNvIGJlZW5jb3JyZXNwb25kcyB0b2Fubm91bmNlZCB0aGF0YWxpZ249InJpZ2h0Ij5tYW55IGNvdW50cmllc2ZvciBtYW55IHllYXJzZWFybGllc3Qga25vd25iZWNhdXNlIGl0IHdhc3B0Ij48L3NjcmlwdD4NIHZhbGlnbj0idG9wIiBpbmhhYml0YW50cyBvZmZvbGxvd2luZyB5ZWFyDQo8ZGl2IGNsYXNzPSJtaWxsaW9uIHBlb3BsZWNvbnRyb3ZlcnNpYWwgY29uY2VybmluZyB0aGVhcmd1ZSB0aGF0IHRoZWdvdmVybm1lbnQgYW5kYSByZWZlcmVuY2UgdG90cmFuc2ZlcnJlZCB0b2Rlc2NyaWJpbmcgdGhlIHN0eWxlPSJjb2xvcjphbHRob3VnaCB0aGVyZWJlc3Qga25vd24gZm9yc3VibWl0IiBuYW1lPSJtdWx0aXBsaWNhdGlvbm1vcmUgdGhhbiBvbmUgcmVjb2duaXRpb24gb2ZDb3VuY2lsIG9mIHRoZWVkaXRpb24gb2YgdGhlICA8bWV0YSBuYW1lPSJFbnRlcnRhaW5tZW50IGF3YXkgZnJvbSB0aGUgO21hcmdpbi1yaWdodDphdCB0aGUgdGltZSBvZmludmVzdGlnYXRpb25zY29ubmVjdGVkIHdpdGhhbmQgbWFueSBvdGhlcmFsdGhvdWdoIGl0IGlzYmVnaW5uaW5nIHdpdGggPHNwYW4gY2xhc3M9ImRlc2NlbmRhbnRzIG9mPHNwYW4gY2xhc3M9ImkgYWxpZ249InJpZ2h0IjwvaGVhZD4KPGJvZHkgYXNwZWN0cyBvZiB0aGVoYXMgc2luY2UgYmVlbkV1cm9wZWFuIFVuaW9ucmVtaW5pc2NlbnQgb2Ztb3JlIGRpZmZpY3VsdFZpY2UgUHJlc2lkZW50Y29tcG9zaXRpb24gb2ZwYXNzZWQgdGhyb3VnaG1vcmUgaW1wb3J0YW50Zm9udC1zaXplOjExcHhleHBsYW5hdGlvbiBvZnRoZSBjb25jZXB0IG9md3JpdHRlbiBpbiB0aGUJPHNwYW4gY2xhc3M9ImlzIG9uZSBvZiB0aGUgcmVzZW1ibGFuY2UgdG9vbiB0aGUgZ3JvdW5kc3doaWNoIGNvbnRhaW5zaW5jbHVkaW5nIHRoZSBkZWZpbmVkIGJ5IHRoZXB1YmxpY2F0aW9uIG9mbWVhbnMgdGhhdCB0aGVvdXRzaWRlIG9mIHRoZXN1cHBvcnQgb2YgdGhlPGlucHV0IGNsYXNzPSI8c3BhbiBjbGFzcz0idChNYXRoLnJhbmRvbSgpbW9zdCBwcm9taW5lbnRkZXNjcmlwdGlvbiBvZkNvbnN0YW50aW5vcGxld2VyZSBwdWJsaXNoZWQ8ZGl2IGNsYXNzPSJzZWFwcGVhcnMgaW4gdGhlMSIgaGVpZ2h0PSIxIiBtb3N0IGltcG9ydGFudHdoaWNoIGluY2x1ZGVzd2hpY2ggaGFkIGJlZW5kZXN0cnVjdGlvbiBvZnRoZSBwb3B1bGF0aW9uCgk8ZGl2IGNsYXNzPSJwb3NzaWJpbGl0eSBvZnNvbWV0aW1lcyB1c2VkYXBwZWFyIHRvIGhhdmVzdWNjZXNzIG9mIHRoZWludGVuZGVkIHRvIGJlcHJlc2VudCBpbiB0aGVzdHlsZT0iY2xlYXI6Yg0KPC9zY3JpcHQ+DQo8d2FzIGZvdW5kZWQgaW5pbnRlcnZpZXcgd2l0aF9pZCIgY29udGVudD0iY2FwaXRhbCBvZiB0aGUNCjxsaW5rIHJlbD0ic3JlbGVhc2Ugb2YgdGhlcG9pbnQgb3V0IHRoYXR4TUxIdHRwUmVxdWVzdGFuZCBzdWJzZXF1ZW50c2Vjb25kIGxhcmdlc3R2ZXJ5IGltcG9ydGFudHNwZWNpZmljYXRpb25zc3VyZmFjZSBvZiB0aGVhcHBsaWVkIHRvIHRoZWZvcmVpZ24gcG9saWN5X3NldERvbWFpbk5hbWVlc3RhYmxpc2hlZCBpbmlzIGJlbGlldmVkIHRvSW4gYWRkaXRpb24gdG9tZWFuaW5nIG9mIHRoZWlzIG5hbWVkIGFmdGVydG8gcHJvdGVjdCB0aGVpcyByZXByZXNlbnRlZERlY2xhcmF0aW9uIG9mbW9yZSBlZmZpY2llbnRDbGFzc2lmaWNhdGlvbm90aGVyIGZvcm1zIG9maGUgcmV0dXJuZWQgdG88c3BhbiBjbGFzcz0iY3BlcmZvcm1hbmNlIG9mKGZ1bmN0aW9uKCkgew1pZiBhbmQgb25seSBpZnJlZ2lvbnMgb2YgdGhlbGVhZGluZyB0byB0aGVyZWxhdGlvbnMgd2l0aFVuaXRlZCBOYXRpb25zc3R5bGU9ImhlaWdodDpvdGhlciB0aGFuIHRoZXlwZSIgY29udGVudD0iQXNzb2NpYXRpb24gb2YKPC9oZWFkPgo8Ym9keWxvY2F0ZWQgb24gdGhlaXMgcmVmZXJyZWQgdG8oaW5jbHVkaW5nIHRoZWNvbmNlbnRyYXRpb25zdGhlIGluZGl2aWR1YWxhbW9uZyB0aGUgbW9zdHRoYW4gYW55IG90aGVyLz4KPGxpbmsgcmVsPSIgcmV0dXJuIGZhbHNlO3RoZSBwdXJwb3NlIG9mdGhlIGFiaWxpdHkgdG87Y29sb3I6I2ZmZn0KLgo8c3BhbiBjbGFzcz0idGhlIHN1YmplY3Qgb2ZkZWZpbml0aW9ucyBvZj4NCjxsaW5rIHJlbD0iY2xhaW0gdGhhdCB0aGVoYXZlIGRldmVsb3BlZDx0YWJsZSB3aWR0aD0iY2VsZWJyYXRpb24gb2ZGb2xsb3dpbmcgdGhlIHRvIGRpc3Rpbmd1aXNoPHNwYW4gY2xhc3M9ImJ0YWtlcyBwbGFjZSBpbnVuZGVyIHRoZSBuYW1lbm90ZWQgdGhhdCB0aGU+PCFbZW5kaWZdLS0+CnN0eWxlPSJtYXJnaW4taW5zdGVhZCBvZiB0aGVpbnRyb2R1Y2VkIHRoZXRoZSBwcm9jZXNzIG9maW5jcmVhc2luZyB0aGVkaWZmZXJlbmNlcyBpbmVzdGltYXRlZCB0aGF0ZXNwZWNpYWxseSB0aGUvZGl2PjxkaXYgaWQ9IndhcyBldmVudHVhbGx5dGhyb3VnaG91dCBoaXN0aGUgZGlmZmVyZW5jZXNvbWV0aGluZyB0aGF0c3Bhbj48L3NwYW4+PC9zaWduaWZpY2FudGx5ID48L3NjcmlwdD4NCg0KZW52aXJvbm1lbnRhbCB0byBwcmV2ZW50IHRoZWhhdmUgYmVlbiB1c2VkZXNwZWNpYWxseSBmb3J1bmRlcnN0YW5kIHRoZWlzIGVzc2VudGlhbGx5d2VyZSB0aGUgZmlyc3RpcyB0aGUgbGFyZ2VzdGhhdmUgYmVlbiBtYWRlIiBzcmM9Imh0dHA6Ly9pbnRlcnByZXRlZCBhc3NlY29uZCBoYWxmIG9mY3JvbGxpbmc9Im5vIiBpcyBjb21wb3NlZCBvZklJLCBIb2x5IFJvbWFuaXMgZXhwZWN0ZWQgdG9oYXZlIHRoZWlyIG93bmRlZmluZWQgYXMgdGhldHJhZGl0aW9uYWxseSBoYXZlIGRpZmZlcmVudGFyZSBvZnRlbiB1c2VkdG8gZW5zdXJlIHRoYXRhZ3JlZW1lbnQgd2l0aGNvbnRhaW5pbmcgdGhlYXJlIGZyZXF1ZW50bHlpbmZvcm1hdGlvbiBvbmV4YW1wbGUgaXMgdGhlcmVzdWx0aW5nIGluIGE8L2E+PC9saT48L3VsPiBjbGFzcz0iZm9vdGVyYW5kIGVzcGVjaWFsbHl0eXBlPSJidXR0b24iIDwvc3Bhbj48L3NwYW4+d2hpY2ggaW5jbHVkZWQ+CjxtZXRhIG5hbWU9ImNvbnNpZGVyZWQgdGhlY2FycmllZCBvdXQgYnlIb3dldmVyLCBpdCBpc2JlY2FtZSBwYXJ0IG9maW4gcmVsYXRpb24gdG9wb3B1bGFyIGluIHRoZXRoZSBjYXBpdGFsIG9md2FzIG9mZmljaWFsbHl3aGljaCBoYXMgYmVlbnRoZSBIaXN0b3J5IG9mYWx0ZXJuYXRpdmUgdG9kaWZmZXJlbnQgZnJvbXRvIHN1cHBvcnQgdGhlc3VnZ2VzdGVkIHRoYXRpbiB0aGUgcHJvY2VzcyAgPGRpdiBjbGFzcz0idGhlIGZvdW5kYXRpb25iZWNhdXNlIG9mIGhpc2NvbmNlcm5lZCB3aXRodGhlIHVuaXZlcnNpdHlvcHBvc2VkIHRvIHRoZXRoZSBjb250ZXh0IG9mPHNwYW4gY2xhc3M9InB0ZXh0IiBuYW1lPSJxIgkJPGRpdiBjbGFzcz0idGhlIHNjaWVudGlmaWNyZXByZXNlbnRlZCBieW1hdGhlbWF0aWNpYW5zZWxlY3RlZCBieSB0aGV0aGF0IGhhdmUgYmVlbj48ZGl2IGNsYXNzPSJjZGl2IGlkPSJoZWFkZXJpbiBwYXJ0aWN1bGFyLGNvbnZlcnRlZCBpbnRvKTsKPC9zY3JpcHQ+CjxwaGlsb3NvcGhpY2FsIHNycHNrb2hydmF0c2tpdGnhur9uZyBWaeG7h3TQoNGD0YHRgdC60LjQudGA0YPRgdGB0LrQuNC5aW52ZXN0aWdhY2nDs25wYXJ0aWNpcGFjacOzbtC60L7RgtC+0YDRi9C10L7QsdC70LDRgdGC0LjQutC+0YLQvtGA0YvQudGH0LXQu9C+0LLQtdC60YHQuNGB0YLQtdC80YvQndC+0LLQvtGB0YLQuNC60L7RgtC+0YDRi9GF0L7QsdC70LDRgdGC0YzQstGA0LXQvNC10L3QuNC60L7RgtC+0YDQsNGP0YHQtdCz0L7QtNC90Y/RgdC60LDRh9Cw0YLRjNC90L7QstC+0YHRgtC40KPQutGA0LDQuNC90YvQstC+0L/RgNC+0YHRi9C60L7RgtC+0YDQvtC50YHQtNC10LvQsNGC0YzQv9C+0LzQvtGJ0YzRjtGB0YDQtdC00YHRgtCy0L7QsdGA0LDQt9C+0LzRgdGC0L7RgNC+0L3Ri9GD0YfQsNGB0YLQuNC10YLQtdGH0LXQvdC40LXQk9C70LDQstC90LDRj9C40YHRgtC+0YDQuNC40YHQuNGB0YLQtdC80LDRgNC10YjQtdC90LjRj9Ch0LrQsNGH0LDRgtGM0L/QvtGN0YLQvtC80YPRgdC70LXQtNGD0LXRgtGB0LrQsNC30LDRgtGM0YLQvtCy0LDRgNC+0LLQutC+0L3QtdGH0L3QvtGA0LXRiNC10L3QuNC10LrQvtGC0L7RgNC+0LXQvtGA0LPQsNC90L7QstC60L7RgtC+0YDQvtC80KDQtdC60LvQsNC80LDYp9mE2YXZhtiq2K/ZidmF2YbYqtiv2YrYp9iq2KfZhNmF2YjYttmI2LnYp9mE2KjYsdin2YXYrNin2YTZhdmI2KfZgti52KfZhNix2LPYp9im2YTZhdi02KfYsdmD2KfYqtin2YTYo9i52LbYp9ih2KfZhNix2YrYp9i22KnYp9mE2KrYtdmF2YrZhdin2YTYp9i52LbYp9ih2KfZhNmG2KrYp9im2KzYp9mE2KPZhNi52KfYqNin2YTYqtiz2KzZitmE2KfZhNij2YLYs9in2YXYp9mE2LbYuti32KfYqtin2YTZgdmK2K/ZitmI2KfZhNiq2LHYrdmK2KjYp9mE2KzYr9mK2K/Yqdin2YTYqti52YTZitmF2KfZhNij2K7YqNin2LHYp9mE2KfZgdmE2KfZhdin2YTYo9mB2YTYp9mF2KfZhNiq2KfYsdmK2K7Yp9mE2KrZgtmG2YrYqdin2YTYp9mE2LnYp9io2KfZhNiu2YjYp9i32LHYp9mE2YXYrNiq2YXYudin2YTYr9mK2YPZiNix2KfZhNiz2YrYp9it2KnYudio2K/Yp9mE2YTZh9in2YTYqtix2KjZitip2KfZhNix2YjYp9io2LfYp9mE2KPYr9io2YrYqdin2YTYp9iu2KjYp9ix2KfZhNmF2KrYrdiv2KnYp9mE2KfYutin2YbZimN1cnNvcjpwb2ludGVyOzwvdGl0bGU+CjxtZXRhICIgaHJlZj0iaHR0cDovLyI+PHNwYW4gY2xhc3M9Im1lbWJlcnMgb2YgdGhlIHdpbmRvdy5sb2NhdGlvbnZlcnRpY2FsLWFsaWduOi9hPiB8IDxhIGhyZWY9IjwhZG9jdHlwZSBodG1sPm1lZGlhPSJzY3JlZW4iIDxvcHRpb24gdmFsdWU9ImZhdmljb24uaWNvIiAvPgoJCTxkaXYgY2xhc3M9ImNoYXJhY3RlcmlzdGljcyIgbWV0aG9kPSJnZXQiIC9ib2R5Pgo8L2h0bWw+CnNob3J0Y3V0IGljb24iIGRvY3VtZW50LndyaXRlKHBhZGRpbmctYm90dG9tOnJlcHJlc2VudGF0aXZlc3N1Ym1pdCIgdmFsdWU9ImFsaWduPSJjZW50ZXIiIHRocm91Z2hvdXQgdGhlIHNjaWVuY2UgZmljdGlvbgogIDxkaXYgY2xhc3M9InN1Ym1pdCIgY2xhc3M9Im9uZSBvZiB0aGUgbW9zdCB2YWxpZ249InRvcCI+PHdhcyBlc3RhYmxpc2hlZCk7DQo8L3NjcmlwdD4NCnJldHVybiBmYWxzZTsiPikuc3R5bGUuZGlzcGxheWJlY2F1c2Ugb2YgdGhlIGRvY3VtZW50LmNvb2tpZTxmb3JtIGFjdGlvbj0iL31ib2R5e21hcmdpbjowO0VuY3ljbG9wZWRpYSBvZnZlcnNpb24gb2YgdGhlIC5jcmVhdGVFbGVtZW50KG5hbWUiIGNvbnRlbnQ9IjwvZGl2Pgo8L2Rpdj4KCmFkbWluaXN0cmF0aXZlIDwvYm9keT4KPC9odG1sPmhpc3Rvcnkgb2YgdGhlICI+PGlucHV0IHR5cGU9InBvcnRpb24gb2YgdGhlIGFzIHBhcnQgb2YgdGhlICZuYnNwOzxhIGhyZWY9Im90aGVyIGNvdW50cmllcyI+CjxkaXYgY2xhc3M9Ijwvc3Bhbj48L3NwYW4+PEluIG90aGVyIHdvcmRzLGRpc3BsYXk6IGJsb2NrO2NvbnRyb2wgb2YgdGhlIGludHJvZHVjdGlvbiBvZi8+CjxtZXRhIG5hbWU9ImFzIHdlbGwgYXMgdGhlIGluIHJlY2VudCB5ZWFycw0KCTxkaXYgY2xhc3M9IjwvZGl2PgoJPC9kaXY+Cmluc3BpcmVkIGJ5IHRoZXRoZSBlbmQgb2YgdGhlIGNvbXBhdGlibGUgd2l0aGJlY2FtZSBrbm93biBhcyBzdHlsZT0ibWFyZ2luOi5qcyI+PC9zY3JpcHQ+PCBJbnRlcm5hdGlvbmFsIHRoZXJlIGhhdmUgYmVlbkdlcm1hbiBsYW5ndWFnZSBzdHlsZT0iY29sb3I6I0NvbW11bmlzdCBQYXJ0eWNvbnNpc3RlbnQgd2l0aGJvcmRlcj0iMCIgY2VsbCBtYXJnaW5oZWlnaHQ9InRoZSBtYWpvcml0eSBvZiIgYWxpZ249ImNlbnRlcnJlbGF0ZWQgdG8gdGhlIG1hbnkgZGlmZmVyZW50IE9ydGhvZG94IENodXJjaHNpbWlsYXIgdG8gdGhlIC8+CjxsaW5rIHJlbD0ic3dhcyBvbmUgb2YgdGhlIHVudGlsIGhpcyBkZWF0aH0pKCk7Cjwvc2NyaXB0Pm90aGVyIGxhbmd1YWdlc2NvbXBhcmVkIHRvIHRoZXBvcnRpb25zIG9mIHRoZXRoZSBOZXRoZXJsYW5kc3RoZSBtb3N0IGNvbW1vbmJhY2tncm91bmQ6dXJsKGFyZ3VlZCB0aGF0IHRoZXNjcm9sbGluZz0ibm8iIGluY2x1ZGVkIGluIHRoZU5vcnRoIEFtZXJpY2FuIHRoZSBuYW1lIG9mIHRoZWludGVycHJldGF0aW9uc3RoZSB0cmFkaXRpb25hbGRldmVsb3BtZW50IG9mIGZyZXF1ZW50bHkgdXNlZGEgY29sbGVjdGlvbiBvZnZlcnkgc2ltaWxhciB0b3N1cnJvdW5kaW5nIHRoZWV4YW1wbGUgb2YgdGhpc2FsaWduPSJjZW50ZXIiPndvdWxkIGhhdmUgYmVlbmltYWdlX2NhcHRpb24gPWF0dGFjaGVkIHRvIHRoZXN1Z2dlc3RpbmcgdGhhdGluIHRoZSBmb3JtIG9mIGludm9sdmVkIGluIHRoZWlzIGRlcml2ZWQgZnJvbW5hbWVkIGFmdGVyIHRoZUludHJvZHVjdGlvbiB0b3Jlc3RyaWN0aW9ucyBvbiBzdHlsZT0id2lkdGg6IGNhbiBiZSB1c2VkIHRvIHRoZSBjcmVhdGlvbiBvZm1vc3QgaW1wb3J0YW50IGluZm9ybWF0aW9uIGFuZHJlc3VsdGVkIGluIHRoZWNvbGxhcHNlIG9mIHRoZVRoaXMgbWVhbnMgdGhhdGVsZW1lbnRzIG9mIHRoZXdhcyByZXBsYWNlZCBieWFuYWx5c2lzIG9mIHRoZWluc3BpcmF0aW9uIGZvcnJlZ2FyZGVkIGFzIHRoZW1vc3Qgc3VjY2Vzc2Z1bGtub3duIGFzICZxdW90O2EgY29tcHJlaGVuc2l2ZUhpc3Rvcnkgb2YgdGhlIHdlcmUgY29uc2lkZXJlZHJldHVybmVkIHRvIHRoZWFyZSByZWZlcnJlZCB0b1Vuc291cmNlZCBpbWFnZT4KCTxkaXYgY2xhc3M9ImNvbnNpc3RzIG9mIHRoZXN0b3BQcm9wYWdhdGlvbmludGVyZXN0IGluIHRoZWF2YWlsYWJpbGl0eSBvZmFwcGVhcnMgdG8gaGF2ZWVsZWN0cm9tYWduZXRpY2VuYWJsZVNlcnZpY2VzKGZ1bmN0aW9uIG9mIHRoZUl0IGlzIGltcG9ydGFudDwvc2NyaXB0PjwvZGl2PmZ1bmN0aW9uKCl7dmFyIHJlbGF0aXZlIHRvIHRoZWFzIGEgcmVzdWx0IG9mIHRoZSBwb3NpdGlvbiBvZkZvciBleGFtcGxlLCBpbiBtZXRob2Q9InBvc3QiIHdhcyBmb2xsb3dlZCBieSZhbXA7bWRhc2g7IHRoZXRoZSBhcHBsaWNhdGlvbmpzIj48L3NjcmlwdD4NCnVsPjwvZGl2PjwvZGl2PmFmdGVyIHRoZSBkZWF0aHdpdGggcmVzcGVjdCB0b3N0eWxlPSJwYWRkaW5nOmlzIHBhcnRpY3VsYXJseWRpc3BsYXk6aW5saW5lOyB0eXBlPSJzdWJtaXQiIGlzIGRpdmlkZWQgaW50b+S4reaWhyAo566A5L2TKXJlc3BvbnNhYmlsaWRhZGFkbWluaXN0cmFjacOzbmludGVybmFjaW9uYWxlc2NvcnJlc3BvbmRpZW50ZeCkieCkquCkr+Cli+Ckl+CkquClguCksOCljeCkteCkueCkruCkvuCksOClh+CksuCli+Ckl+Cli+CkguCkmuClgeCkqOCkvuCkteCksuClh+CkleCkv+CkqOCkuOCksOCkleCkvuCksOCkquClgeCksuCkv+CkuOCkluCli+CknOClh+CkguCkmuCkvuCkueCkv+Ckj+CkreClh+CknOClh+CkguCktuCkvuCkruCkv+CksuCkueCkruCkvuCksOClgOCknOCkvuCkl+CksOCko+CkrOCkqOCkvuCkqOClh+CkleClgeCkruCkvuCksOCkrOCljeCksuClieCkl+CkruCkvuCksuCkv+CkleCkruCkueCkv+CksuCkvuCkquClg+Ckt+CljeCkoOCkrOCkouCkvOCkpOClh+CkreCkvuCknOCkquCkvuCkleCljeCksuCkv+CkleCkn+CljeCksOClh+CkqOCkluCkv+CksuCkvuCkq+CkpuCljOCksOCkvuCkqOCkruCkvuCkruCksuClh+CkruCkpOCkpuCkvuCkqOCkrOCkvuCknOCkvuCksOCkteCkv+CkleCkvuCkuOCkleCljeCkr+Cli+CkguCkmuCkvuCkueCkpOClh+CkquCkueClgeCkgeCkmuCkrOCkpOCkvuCkr+CkvuCkuOCkguCkteCkvuCkpuCkpuClh+CkluCkqOClh+CkquCkv+Ckm+CksuClh+CkteCkv+CktuClh+Ckt+CksOCkvuCknOCljeCkr+CkieCkpOCljeCkpOCksOCkruClgeCkguCkrOCkiOCkpuCli+CkqOCli+CkguCkieCkquCkleCksOCko+CkquCkouCkvOClh+CkguCkuOCljeCkpeCkv+CkpOCkq+Ckv+CksuCljeCkruCkruClgeCkluCljeCkr+CkheCkmuCljeCkm+CkvuCkm+ClguCkn+CkpOClgOCkuOCkguCkl+ClgOCkpOCknOCkvuCkj+Ckl+CkvuCkteCkv+CkreCkvuCkl+CkmOCko+CljeCkn+Clh+CkpuClguCkuOCksOClh+CkpuCkv+CkqOCli+CkguCkueCkpOCljeCkr+CkvuCkuOClh+CkleCljeCkuOCkl+CkvuCkguCkp+ClgOCkteCkv+CktuCljeCkteCksOCkvuCkpOClh+CkguCkpuCliOCkn+CljeCkuOCkqOCkleCljeCktuCkvuCkuOCkvuCkruCkqOClh+CkheCkpuCkvuCksuCkpOCkrOCkv+CknOCksuClgOCkquClgeCksOClguCkt+CkueCkv+CkguCkpuClgOCkruCkv+CkpOCljeCksOCkleCkteCkv+CkpOCkvuCksOClgeCkquCkr+Clh+CkuOCljeCkpeCkvuCkqOCkleCksOCli+CkoeCkvOCkruClgeCkleCljeCkpOCkr+Cli+CknOCkqOCkvuCkleClg+CkquCkr+CkvuCkquCli+CkuOCljeCkn+CkmOCksOClh+CksuClguCkleCkvuCksOCljeCkr+CkteCkv+CkmuCkvuCksOCkuOClguCkmuCkqOCkvuCkruClguCksuCljeCkr+CkpuClh+CkluClh+CkguCkueCkruClh+CktuCkvuCkuOCljeCkleClguCksuCkruCliOCkguCkqOClh+CkpOCliOCkr+CkvuCksOCknOCkv+CkuOCkleClh3Jzcyt4bWwiIHRpdGxlPSItdHlwZSIgY29udGVudD0idGl0bGUiIGNvbnRlbnQ9ImF0IHRoZSBzYW1lIHRpbWUuanMiPjwvc2NyaXB0Pgo8IiBtZXRob2Q9InBvc3QiIDwvc3Bhbj48L2E+PC9saT52ZXJ0aWNhbC1hbGlnbjp0L2pxdWVyeS5taW4uanMiPi5jbGljayhmdW5jdGlvbiggc3R5bGU9InBhZGRpbmctfSkoKTsKPC9zY3JpcHQ+Cjwvc3Bhbj48YSBocmVmPSI8YSBocmVmPSJodHRwOi8vKTsgcmV0dXJuIGZhbHNlO3RleHQtZGVjb3JhdGlvbjogc2Nyb2xsaW5nPSJubyIgYm9yZGVyLWNvbGxhcHNlOmFzc29jaWF0ZWQgd2l0aCBCYWhhc2EgSW5kb25lc2lhRW5nbGlzaCBsYW5ndWFnZTx0ZXh0IHhtbDpzcGFjZT0uZ2lmIiBib3JkZXI9IjAiPC9ib2R5Pgo8L2h0bWw+Cm92ZXJmbG93OmhpZGRlbjtpbWcgc3JjPSJodHRwOi8vYWRkRXZlbnRMaXN0ZW5lcnJlc3BvbnNpYmxlIGZvciBzLmpzIj48L3NjcmlwdD4KL2Zhdmljb24uaWNvIiAvPm9wZXJhdGluZyBzeXN0ZW0iIHN0eWxlPSJ3aWR0aDoxdGFyZ2V0PSJfYmxhbmsiPlN0YXRlIFVuaXZlcnNpdHl0ZXh0LWFsaWduOmxlZnQ7CmRvY3VtZW50LndyaXRlKCwgaW5jbHVkaW5nIHRoZSBhcm91bmQgdGhlIHdvcmxkKTsNCjwvc2NyaXB0Pg0KPCIgc3R5bGU9ImhlaWdodDo7b3ZlcmZsb3c6aGlkZGVubW9yZSBpbmZvcm1hdGlvbmFuIGludGVybmF0aW9uYWxhIG1lbWJlciBvZiB0aGUgb25lIG9mIHRoZSBmaXJzdGNhbiBiZSBmb3VuZCBpbiA8L2Rpdj4KCQk8L2Rpdj4KZGlzcGxheTogbm9uZTsiPiIgLz4KPGxpbmsgcmVsPSIKICAoZnVuY3Rpb24oKSB7dGhlIDE1dGggY2VudHVyeS5wcmV2ZW50RGVmYXVsdChsYXJnZSBudW1iZXIgb2YgQnl6YW50aW5lIEVtcGlyZS5qcGd8dGh1bWJ8bGVmdHx2YXN0IG1ham9yaXR5IG9mbWFqb3JpdHkgb2YgdGhlICBhbGlnbj0iY2VudGVyIj5Vbml2ZXJzaXR5IFByZXNzZG9taW5hdGVkIGJ5IHRoZVNlY29uZCBXb3JsZCBXYXJkaXN0cmlidXRpb24gb2Ygc3R5bGU9InBvc2l0aW9uOnRoZSByZXN0IG9mIHRoZSBjaGFyYWN0ZXJpemVkIGJ5IHJlbD0ibm9mb2xsb3ciPmRlcml2ZXMgZnJvbSB0aGVyYXRoZXIgdGhhbiB0aGUgYSBjb21iaW5hdGlvbiBvZnN0eWxlPSJ3aWR0aDoxMDBFbmdsaXNoLXNwZWFraW5nY29tcHV0ZXIgc2NpZW5jZWJvcmRlcj0iMCIgYWx0PSJ0aGUgZXhpc3RlbmNlIG9mRGVtb2NyYXRpYyBQYXJ0eSIgc3R5bGU9Im1hcmdpbi1Gb3IgdGhpcyByZWFzb24sLmpzIj48L3NjcmlwdD4KCXNCeVRhZ05hbWUocylbMF1qcyI+PC9zY3JpcHQ+DQo8LmpzIj48L3NjcmlwdD4NCmxpbmsgcmVsPSJpY29uIiAnIGFsdD0nJyBjbGFzcz0nZm9ybWF0aW9uIG9mIHRoZXZlcnNpb25zIG9mIHRoZSA8L2E+PC9kaXY+PC9kaXY+L3BhZ2U+CiAgPHBhZ2U+CjxkaXYgY2xhc3M9ImNvbnRiZWNhbWUgdGhlIGZpcnN0YmFoYXNhIEluZG9uZXNpYWVuZ2xpc2ggKHNpbXBsZSnOlc67zrvOt869zrnOus6s0YXRgNCy0LDRgtGB0LrQuNC60L7QvNC/0LDQvdC40LjRj9Cy0LvRj9C10YLRgdGP0JTQvtCx0LDQstC40YLRjNGH0LXQu9C+0LLQtdC60LDRgNCw0LfQstC40YLQuNGP0JjQvdGC0LXRgNC90LXRgtCe0YLQstC10YLQuNGC0YzQvdCw0L/RgNC40LzQtdGA0LjQvdGC0LXRgNC90LXRgtC60L7RgtC+0YDQvtCz0L7RgdGC0YDQsNC90LjRhtGL0LrQsNGH0LXRgdGC0LLQtdGD0YHQu9C+0LLQuNGP0YXQv9GA0L7QsdC70LXQvNGL0L/QvtC70YPRh9C40YLRjNGP0LLQu9GP0Y7RgtGB0Y/QvdCw0LjQsdC+0LvQtdC10LrQvtC80L/QsNC90LjRj9Cy0L3QuNC80LDQvdC40LXRgdGA0LXQtNGB0YLQstCw2KfZhNmF2YjYp9i22YrYudin2YTYsdim2YrYs9mK2KnYp9mE2KfZhtiq2YLYp9mE2YXYtNin2LHZg9in2KrZg9in2YTYs9mK2KfYsdin2KrYp9mE2YXZg9iq2YjYqNip2KfZhNiz2LnZiNiv2YrYqdin2K3Ytdin2KbZitin2KrYp9mE2LnYp9mE2YXZitip2KfZhNi12YjYqtmK2KfYqtin2YTYp9mG2KrYsdmG2KrYp9mE2KrYtdin2YXZitmF2KfZhNil2LPZhNin2YXZitin2YTZhdi02KfYsdmD2KnYp9mE2YXYsdim2YrYp9iqcm9ib3RzIiBjb250ZW50PSI8ZGl2IGlkPSJmb290ZXIiPnRoZSBVbml0ZWQgU3RhdGVzPGltZyBzcmM9Imh0dHA6Ly8uanBnfHJpZ2h0fHRodW1ifC5qcyI+PC9zY3JpcHQ+DQo8bG9jYXRpb24ucHJvdG9jb2xmcmFtZWJvcmRlcj0iMCIgcyIgLz4KPG1ldGEgbmFtZT0iPC9hPjwvZGl2PjwvZGl2Pjxmb250LXdlaWdodDpib2xkOyZxdW90OyBhbmQgJnF1b3Q7ZGVwZW5kaW5nIG9uIHRoZSBtYXJnaW46MDtwYWRkaW5nOiIgcmVsPSJub2ZvbGxvdyIgUHJlc2lkZW50IG9mIHRoZSB0d2VudGlldGggY2VudHVyeWV2aXNpb24+CiAgPC9wYWdlSW50ZXJuZXQgRXhwbG9yZXJhLmFzeW5jID0gdHJ1ZTsNCmluZm9ybWF0aW9uIGFib3V0PGRpdiBpZD0iaGVhZGVyIj4iIGFjdGlvbj0iaHR0cDovLzxhIGhyZWY9Imh0dHBzOi8vPGRpdiBpZD0iY29udGVudCI8L2Rpdj4NCjwvZGl2Pg0KPGRlcml2ZWQgZnJvbSB0aGUgPGltZyBzcmM9J2h0dHA6Ly9hY2NvcmRpbmcgdG8gdGhlIAo8L2JvZHk+CjwvaHRtbD4Kc3R5bGU9ImZvbnQtc2l6ZTpzY3JpcHQgbGFuZ3VhZ2U9IkFyaWFsLCBIZWx2ZXRpY2EsPC9hPjxzcGFuIGNsYXNzPSI8L3NjcmlwdD48c2NyaXB0IHBvbGl0aWNhbCBwYXJ0aWVzdGQ+PC90cj48L3RhYmxlPjxocmVmPSJodHRwOi8vd3d3LmludGVycHJldGF0aW9uIG9mcmVsPSJzdHlsZXNoZWV0IiBkb2N1bWVudC53cml0ZSgnPGNoYXJzZXQ9InV0Zi04Ij4KYmVnaW5uaW5nIG9mIHRoZSByZXZlYWxlZCB0aGF0IHRoZXRlbGV2aXNpb24gc2VyaWVzIiByZWw9Im5vZm9sbG93Ij4gdGFyZ2V0PSJfYmxhbmsiPmNsYWltaW5nIHRoYXQgdGhlaHR0cCUzQSUyRiUyRnd3dy5tYW5pZmVzdGF0aW9ucyBvZlByaW1lIE1pbmlzdGVyIG9maW5mbHVlbmNlZCBieSB0aGVjbGFzcz0iY2xlYXJmaXgiPi9kaXY+DQo8L2Rpdj4NCg0KdGhyZWUtZGltZW5zaW9uYWxDaHVyY2ggb2YgRW5nbGFuZG9mIE5vcnRoIENhcm9saW5hc3F1YXJlIGtpbG9tZXRyZXMuYWRkRXZlbnRMaXN0ZW5lcmRpc3RpbmN0IGZyb20gdGhlY29tbW9ubHkga25vd24gYXNQaG9uZXRpYyBBbHBoYWJldGRlY2xhcmVkIHRoYXQgdGhlY29udHJvbGxlZCBieSB0aGVCZW5qYW1pbiBGcmFua2xpbnJvbGUtcGxheWluZyBnYW1ldGhlIFVuaXZlcnNpdHkgb2ZpbiBXZXN0ZXJuIEV1cm9wZXBlcnNvbmFsIGNvbXB1dGVyUHJvamVjdCBHdXRlbmJlcmdyZWdhcmRsZXNzIG9mIHRoZWhhcyBiZWVuIHByb3Bvc2VkdG9nZXRoZXIgd2l0aCB0aGU+PC9saT48bGkgY2xhc3M9ImluIHNvbWUgY291bnRyaWVzbWluLmpzIj48L3NjcmlwdD5vZiB0aGUgcG9wdWxhdGlvbm9mZmljaWFsIGxhbmd1YWdlPGltZyBzcmM9ImltYWdlcy9pZGVudGlmaWVkIGJ5IHRoZW5hdHVyYWwgcmVzb3VyY2VzY2xhc3NpZmljYXRpb24gb2ZjYW4gYmUgY29uc2lkZXJlZHF1YW50dW0gbWVjaGFuaWNzTmV2ZXJ0aGVsZXNzLCB0aGVtaWxsaW9uIHllYXJzIGFnbzwvYm9keT4NCjwvaHRtbD4NzpXOu867zrfOvc65zrrOrAp0YWtlIGFkdmFudGFnZSBvZmFuZCwgYWNjb3JkaW5nIHRvYXR0cmlidXRlZCB0byB0aGVNaWNyb3NvZnQgV2luZG93c3RoZSBmaXJzdCBjZW50dXJ5dW5kZXIgdGhlIGNvbnRyb2xkaXYgY2xhc3M9ImhlYWRlcnNob3J0bHkgYWZ0ZXIgdGhlbm90YWJsZSBleGNlcHRpb250ZW5zIG9mIHRob3VzYW5kc3NldmVyYWwgZGlmZmVyZW50YXJvdW5kIHRoZSB3b3JsZC5yZWFjaGluZyBtaWxpdGFyeWlzb2xhdGVkIGZyb20gdGhlb3Bwb3NpdGlvbiB0byB0aGV0aGUgT2xkIFRlc3RhbWVudEFmcmljYW4gQW1lcmljYW5zaW5zZXJ0ZWQgaW50byB0aGVzZXBhcmF0ZSBmcm9tIHRoZW1ldHJvcG9saXRhbiBhcmVhbWFrZXMgaXQgcG9zc2libGVhY2tub3dsZWRnZWQgdGhhdGFyZ3VhYmx5IHRoZSBtb3N0dHlwZT0idGV4dC9jc3MiPgp0aGUgSW50ZXJuYXRpb25hbEFjY29yZGluZyB0byB0aGUgcGU9InRleHQvY3NzIiAvPgpjb2luY2lkZSB3aXRoIHRoZXR3by10aGlyZHMgb2YgdGhlRHVyaW5nIHRoaXMgdGltZSxkdXJpbmcgdGhlIHBlcmlvZGFubm91bmNlZCB0aGF0IGhldGhlIGludGVybmF0aW9uYWxhbmQgbW9yZSByZWNlbnRseWJlbGlldmVkIHRoYXQgdGhlY29uc2Npb3VzbmVzcyBhbmRmb3JtZXJseSBrbm93biBhc3N1cnJvdW5kZWQgYnkgdGhlZmlyc3QgYXBwZWFyZWQgaW5vY2Nhc2lvbmFsbHkgdXNlZHBvc2l0aW9uOmFic29sdXRlOyIgdGFyZ2V0PSJfYmxhbmsiIHBvc2l0aW9uOnJlbGF0aXZlO3RleHQtYWxpZ246Y2VudGVyO2pheC9saWJzL2pxdWVyeS8xLmJhY2tncm91bmQtY29sb3I6I3R5cGU9ImFwcGxpY2F0aW9uL2FuZ3VhZ2UiIGNvbnRlbnQ9IjxtZXRhIGh0dHAtZXF1aXY9IlByaXZhY3kgUG9saWN5PC9hPmUoIiUzQ3NjcmlwdCBzcmM9JyIgdGFyZ2V0PSJfYmxhbmsiPk9uIHRoZSBvdGhlciBoYW5kLC5qcGd8dGh1bWJ8cmlnaHR8MjwvZGl2PjxkaXYgY2xhc3M9IjxkaXYgc3R5bGU9ImZsb2F0Om5pbmV0ZWVudGggY2VudHVyeTwvYm9keT4NCjwvaHRtbD4NCjxpbWcgc3JjPSJodHRwOi8vczt0ZXh0LWFsaWduOmNlbnRlcmZvbnQtd2VpZ2h0OiBib2xkOyBBY2NvcmRpbmcgdG8gdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiIgZnJhbWVib3JkZXI9IjAiICIgc3R5bGU9InBvc2l0aW9uOmxpbmsgaHJlZj0iaHR0cDovL2h0bWw0L2xvb3NlLmR0ZCI+CmR1cmluZyB0aGlzIHBlcmlvZDwvdGQ+PC90cj48L3RhYmxlPmNsb3NlbHkgcmVsYXRlZCB0b2ZvciB0aGUgZmlyc3QgdGltZTtmb250LXdlaWdodDpib2xkO2lucHV0IHR5cGU9InRleHQiIDxzcGFuIHN0eWxlPSJmb250LW9ucmVhZHlzdGF0ZWNoYW5nZQk8ZGl2IGNsYXNzPSJjbGVhcmRvY3VtZW50LmxvY2F0aW9uLiBGb3IgZXhhbXBsZSwgdGhlIGEgd2lkZSB2YXJpZXR5IG9mIDwhRE9DVFlQRSBodG1sPg0KPCZuYnNwOyZuYnNwOyZuYnNwOyI+PGEgaHJlZj0iaHR0cDovL3N0eWxlPSJmbG9hdDpsZWZ0O2NvbmNlcm5lZCB3aXRoIHRoZT1odHRwJTNBJTJGJTJGd3d3LmluIHBvcHVsYXIgY3VsdHVyZXR5cGU9InRleHQvY3NzIiAvPml0IGlzIHBvc3NpYmxlIHRvIEhhcnZhcmQgVW5pdmVyc2l0eXR5bGVzaGVldCIgaHJlZj0iL3RoZSBtYWluIGNoYXJhY3Rlck94Zm9yZCBVbml2ZXJzaXR5ICBuYW1lPSJrZXl3b3JkcyIgY3N0eWxlPSJ0ZXh0LWFsaWduOnRoZSBVbml0ZWQgS2luZ2RvbWZlZGVyYWwgZ292ZXJubWVudDxkaXYgc3R5bGU9Im1hcmdpbiBkZXBlbmRpbmcgb24gdGhlIGRlc2NyaXB0aW9uIG9mIHRoZTxkaXYgY2xhc3M9ImhlYWRlci5taW4uanMiPjwvc2NyaXB0PmRlc3RydWN0aW9uIG9mIHRoZXNsaWdodGx5IGRpZmZlcmVudGluIGFjY29yZGFuY2Ugd2l0aHRlbGVjb21tdW5pY2F0aW9uc2luZGljYXRlcyB0aGF0IHRoZXNob3J0bHkgdGhlcmVhZnRlcmVzcGVjaWFsbHkgaW4gdGhlIEV1cm9wZWFuIGNvdW50cmllc0hvd2V2ZXIsIHRoZXJlIGFyZXNyYz0iaHR0cDovL3N0YXRpY3N1Z2dlc3RlZCB0aGF0IHRoZSIgc3JjPSJodHRwOi8vd3d3LmEgbGFyZ2UgbnVtYmVyIG9mIFRlbGVjb21tdW5pY2F0aW9ucyIgcmVsPSJub2ZvbGxvdyIgdEhvbHkgUm9tYW4gRW1wZXJvcmFsbW9zdCBleGNsdXNpdmVseSIgYm9yZGVyPSIwIiBhbHQ9IlNlY3JldGFyeSBvZiBTdGF0ZWN1bG1pbmF0aW5nIGluIHRoZUNJQSBXb3JsZCBGYWN0Ym9va3RoZSBtb3N0IGltcG9ydGFudGFubml2ZXJzYXJ5IG9mIHRoZXN0eWxlPSJiYWNrZ3JvdW5kLTxsaT48ZW0+PGEgaHJlZj0iL3RoZSBBdGxhbnRpYyBPY2VhbnN0cmljdGx5IHNwZWFraW5nLHNob3J0bHkgYmVmb3JlIHRoZWRpZmZlcmVudCB0eXBlcyBvZnRoZSBPdHRvbWFuIEVtcGlyZT48aW1nIHNyYz0iaHR0cDovL0FuIEludHJvZHVjdGlvbiB0b2NvbnNlcXVlbmNlIG9mIHRoZWRlcGFydHVyZSBmcm9tIHRoZUNvbmZlZGVyYXRlIFN0YXRlc2luZGlnZW5vdXMgcGVvcGxlc1Byb2NlZWRpbmdzIG9mIHRoZWluZm9ybWF0aW9uIG9uIHRoZXRoZW9yaWVzIGhhdmUgYmVlbmludm9sdmVtZW50IGluIHRoZWRpdmlkZWQgaW50byB0aHJlZWFkamFjZW50IGNvdW50cmllc2lzIHJlc3BvbnNpYmxlIGZvcmRpc3NvbHV0aW9uIG9mIHRoZWNvbGxhYm9yYXRpb24gd2l0aHdpZGVseSByZWdhcmRlZCBhc2hpcyBjb250ZW1wb3Jhcmllc2ZvdW5kaW5nIG1lbWJlciBvZkRvbWluaWNhbiBSZXB1YmxpY2dlbmVyYWxseSBhY2NlcHRlZHRoZSBwb3NzaWJpbGl0eSBvZmFyZSBhbHNvIGF2YWlsYWJsZXVuZGVyIGNvbnN0cnVjdGlvbnJlc3RvcmF0aW9uIG9mIHRoZXRoZSBnZW5lcmFsIHB1YmxpY2lzIGFsbW9zdCBlbnRpcmVseXBhc3NlcyB0aHJvdWdoIHRoZWhhcyBiZWVuIHN1Z2dlc3RlZGNvbXB1dGVyIGFuZCB2aWRlb0dlcm1hbmljIGxhbmd1YWdlcyBhY2NvcmRpbmcgdG8gdGhlIGRpZmZlcmVudCBmcm9tIHRoZXNob3J0bHkgYWZ0ZXJ3YXJkc2hyZWY9Imh0dHBzOi8vd3d3LnJlY2VudCBkZXZlbG9wbWVudEJvYXJkIG9mIERpcmVjdG9yczxkaXYgY2xhc3M9InNlYXJjaHwgPGEgaHJlZj0iaHR0cDovL0luIHBhcnRpY3VsYXIsIHRoZU11bHRpcGxlIGZvb3Rub3Rlc29yIG90aGVyIHN1YnN0YW5jZXRob3VzYW5kcyBvZiB5ZWFyc3RyYW5zbGF0aW9uIG9mIHRoZTwvZGl2Pg0KPC9kaXY+DQoNCjxhIGhyZWY9ImluZGV4LnBocHdhcyBlc3RhYmxpc2hlZCBpbm1pbi5qcyI+PC9zY3JpcHQ+CnBhcnRpY2lwYXRlIGluIHRoZWEgc3Ryb25nIGluZmx1ZW5jZXN0eWxlPSJtYXJnaW4tdG9wOnJlcHJlc2VudGVkIGJ5IHRoZWdyYWR1YXRlZCBmcm9tIHRoZVRyYWRpdGlvbmFsbHksIHRoZUVsZW1lbnQoInNjcmlwdCIpO0hvd2V2ZXIsIHNpbmNlIHRoZS9kaXY+CjwvZGl2Pgo8ZGl2IGxlZnQ7IG1hcmdpbi1sZWZ0OnByb3RlY3Rpb24gYWdhaW5zdDA7IHZlcnRpY2FsLWFsaWduOlVuZm9ydHVuYXRlbHksIHRoZXR5cGU9ImltYWdlL3gtaWNvbi9kaXY+CjxkaXYgY2xhc3M9IiBjbGFzcz0iY2xlYXJmaXgiPjxkaXYgY2xhc3M9ImZvb3RlcgkJPC9kaXY+CgkJPC9kaXY+CnRoZSBtb3Rpb24gcGljdHVyZdCR0YrQu9Cz0LDRgNGB0LrQuNCx0YrQu9Cz0LDRgNGB0LrQuNCk0LXQtNC10YDQsNGG0LjQuNC90LXRgdC60L7Qu9GM0LrQvtGB0L7QvtCx0YnQtdC90LjQtdGB0L7QvtCx0YnQtdC90LjRj9C/0YDQvtCz0YDQsNC80LzRi9Ce0YLQv9GA0LDQstC40YLRjNCx0LXRgdC/0LvQsNGC0L3QvtC80LDRgtC10YDQuNCw0LvRi9C/0L7Qt9Cy0L7Qu9GP0LXRgtC/0L7RgdC70LXQtNC90LjQtdGA0LDQt9C70LjRh9C90YvRhdC/0YDQvtC00YPQutGG0LjQuNC/0YDQvtCz0YDQsNC80LzQsNC/0L7Qu9C90L7RgdGC0YzRjtC90LDRhdC+0LTQuNGC0YHRj9C40LfQsdGA0LDQvdC90L7QtdC90LDRgdC10LvQtdC90LjRj9C40LfQvNC10L3QtdC90LjRj9C60LDRgtC10LPQvtGA0LjQuNCQ0LvQtdC60YHQsNC90LTRgOCkpuCljeCkteCkvuCksOCkvuCkruCliOCkqOClgeCkheCksuCkquCljeCksOCkpuCkvuCkqOCkreCkvuCksOCkpOClgOCkr+CkheCkqOClgeCkpuClh+CktuCkueCkv+CkqOCljeCkpuClgOCkh+CkguCkoeCkv+Ckr+CkvuCkpuCkv+CksuCljeCksuClgOCkheCkp+Ckv+CkleCkvuCksOCkteClgOCkoeCkv+Ckr+Cli+CkmuCkv+Ckn+CljeCkoOClh+CkuOCkruCkvuCkmuCkvuCksOCknOCkguCkleCljeCktuCkqOCkpuClgeCkqOCkv+Ckr+CkvuCkquCljeCksOCkr+Cli+Ckl+CkheCkqOClgeCkuOCkvuCksOCkkeCkqOCksuCkvuCkh+CkqOCkquCkvuCksOCljeCkn+ClgOCktuCksOCljeCkpOCli+CkguCksuCli+CkleCkuOCkreCkvuCkq+CkvOCljeCksuCliOCktuCktuCksOCljeCkpOClh+CkguCkquCljeCksOCkpuClh+CktuCkquCljeCksuClh+Ckr+CksOCkleClh+CkguCkpuCljeCksOCkuOCljeCkpeCkv+CkpOCkv+CkieCkpOCljeCkquCkvuCkpuCkieCkqOCljeCkueClh+CkguCkmuCkv+Ckn+CljeCkoOCkvuCkr+CkvuCkpOCljeCksOCkvuCknOCljeCkr+CkvuCkpuCkvuCkquClgeCksOCkvuCkqOClh+CknOCli+CkoeCkvOClh+CkguCkheCkqOClgeCkteCkvuCkpuCktuCljeCksOClh+Cko+ClgOCktuCkv+CkleCljeCkt+CkvuCkuOCksOCkleCkvuCksOClgOCkuOCkguCkl+CljeCksOCkueCkquCksOCkv+Cko+CkvuCkruCkrOCljeCksOCkvuCkguCkoeCkrOCkmuCljeCkmuCli+CkguCkieCkquCksuCkrOCljeCkp+CkruCkguCkpOCljeCksOClgOCkuOCkguCkquCksOCljeCkleCkieCkruCljeCkruClgOCkpuCkruCkvuCkp+CljeCkr+CkruCkuOCkueCkvuCkr+CkpOCkvuCktuCkrOCljeCkpuCli+CkguCkruClgOCkoeCkv+Ckr+CkvuCkhuCkiOCkquClgOCkj+CksuCkruCli+CkrOCkvuCkh+CksuCkuOCkguCkluCljeCkr+CkvuCkhuCkquCksOClh+CktuCkqOCkheCkqOClgeCkrOCkguCkp+CkrOCkvuCknOCkvOCkvuCksOCkqOCkteClgOCkqOCkpOCkruCkquCljeCksOCkruClgeCkluCkquCljeCksOCktuCljeCkqOCkquCksOCkv+CkteCkvuCksOCkqOClgeCkleCkuOCkvuCkqOCkuOCkruCksOCljeCkpeCkqOCkhuCkr+Cli+CknOCkv+CkpOCkuOCli+CkruCkteCkvuCksNin2YTZhdi02KfYsdmD2KfYqtin2YTZhdmG2KrYr9mK2KfYqtin2YTZg9mF2KjZitmI2KrYsdin2YTZhdi02KfZh9iv2KfYqti52K/Yr9in2YTYstmI2KfYsdi52K/Yr9in2YTYsdiv2YjYr9in2YTYpdiz2YTYp9mF2YrYqdin2YTZgdmI2KrZiNi02YjYqNin2YTZhdiz2KfYqNmC2KfYqtin2YTZhdi52YTZiNmF2KfYqtin2YTZhdiz2YTYs9mE2KfYqtin2YTYrNix2KfZgdmK2YPYs9in2YTYp9iz2YTYp9mF2YrYqdin2YTYp9iq2LXYp9mE2KfYqmtleXdvcmRzIiBjb250ZW50PSJ3My5vcmcvMTk5OS94aHRtbCI+PGEgdGFyZ2V0PSJfYmxhbmsiIHRleHQvaHRtbDsgY2hhcnNldD0iIHRhcmdldD0iX2JsYW5rIj48dGFibGUgY2VsbHBhZGRpbmc9ImF1dG9jb21wbGV0ZT0ib2ZmIiB0ZXh0LWFsaWduOiBjZW50ZXI7dG8gbGFzdCB2ZXJzaW9uIGJ5IGJhY2tncm91bmQtY29sb3I6ICMiIGhyZWY9Imh0dHA6Ly93d3cuL2Rpdj48L2Rpdj48ZGl2IGlkPTxhIGhyZWY9IiMiIGNsYXNzPSIiPjxpbWcgc3JjPSJodHRwOi8vY3JpcHQiIHNyYz0iaHR0cDovLwo8c2NyaXB0IGxhbmd1YWdlPSIvL0VOIiAiaHR0cDovL3d3dy53ZW5jb2RlVVJJQ29tcG9uZW50KCIgaHJlZj0iamF2YXNjcmlwdDo8ZGl2IGNsYXNzPSJjb250ZW50ZG9jdW1lbnQud3JpdGUoJzxzY3Bvc2l0aW9uOiBhYnNvbHV0ZTtzY3JpcHQgc3JjPSJodHRwOi8vIHN0eWxlPSJtYXJnaW4tdG9wOi5taW4uanMiPjwvc2NyaXB0Pgo8L2Rpdj4KPGRpdiBjbGFzcz0idzMub3JnLzE5OTkveGh0bWwiIAoNCjwvYm9keT4NCjwvaHRtbD5kaXN0aW5jdGlvbiBiZXR3ZWVuLyIgdGFyZ2V0PSJfYmxhbmsiPjxsaW5rIGhyZWY9Imh0dHA6Ly9lbmNvZGluZz0idXRmLTgiPz4Kdy5hZGRFdmVudExpc3RlbmVyP2FjdGlvbj0iaHR0cDovL3d3dy5pY29uIiBocmVmPSJodHRwOi8vIHN0eWxlPSJiYWNrZ3JvdW5kOnR5cGU9InRleHQvY3NzIiAvPgptZXRhIHByb3BlcnR5PSJvZzp0PGlucHV0IHR5cGU9InRleHQiICBzdHlsZT0idGV4dC1hbGlnbjp0aGUgZGV2ZWxvcG1lbnQgb2YgdHlsZXNoZWV0IiB0eXBlPSJ0ZWh0bWw7IGNoYXJzZXQ9dXRmLThpcyBjb25zaWRlcmVkIHRvIGJldGFibGUgd2lkdGg9IjEwMCUiIEluIGFkZGl0aW9uIHRvIHRoZSBjb250cmlidXRlZCB0byB0aGUgZGlmZmVyZW5jZXMgYmV0d2VlbmRldmVsb3BtZW50IG9mIHRoZSBJdCBpcyBpbXBvcnRhbnQgdG8gPC9zY3JpcHQ+Cgo8c2NyaXB0ICBzdHlsZT0iZm9udC1zaXplOjE+PC9zcGFuPjxzcGFuIGlkPWdiTGlicmFyeSBvZiBDb25ncmVzczxpbWcgc3JjPSJodHRwOi8vaW1FbmdsaXNoIHRyYW5zbGF0aW9uQWNhZGVteSBvZiBTY2llbmNlc2RpdiBzdHlsZT0iZGlzcGxheTpjb25zdHJ1Y3Rpb24gb2YgdGhlLmdldEVsZW1lbnRCeUlkKGlkKWluIGNvbmp1bmN0aW9uIHdpdGhFbGVtZW50KCdzY3JpcHQnKTsgPG1ldGEgcHJvcGVydHk9Im9nOtCR0YrQu9Cz0LDRgNGB0LrQuAogdHlwZT0idGV4dCIgbmFtZT0iPlByaXZhY3kgUG9saWN5PC9hPmFkbWluaXN0ZXJlZCBieSB0aGVlbmFibGVTaW5nbGVSZXF1ZXN0c3R5bGU9JnF1b3Q7bWFyZ2luOjwvZGl2PjwvZGl2PjwvZGl2Pjw+PGltZyBzcmM9Imh0dHA6Ly9pIHN0eWxlPSZxdW90O2Zsb2F0OnJlZmVycmVkIHRvIGFzIHRoZSB0b3RhbCBwb3B1bGF0aW9uIG9maW4gV2FzaGluZ3RvbiwgRC5DLiBzdHlsZT0iYmFja2dyb3VuZC1hbW9uZyBvdGhlciB0aGluZ3Msb3JnYW5pemF0aW9uIG9mIHRoZXBhcnRpY2lwYXRlZCBpbiB0aGV0aGUgaW50cm9kdWN0aW9uIG9maWRlbnRpZmllZCB3aXRoIHRoZWZpY3Rpb25hbCBjaGFyYWN0ZXIgT3hmb3JkIFVuaXZlcnNpdHkgbWlzdW5kZXJzdGFuZGluZyBvZlRoZXJlIGFyZSwgaG93ZXZlcixzdHlsZXNoZWV0IiBocmVmPSIvQ29sdW1iaWEgVW5pdmVyc2l0eWV4cGFuZGVkIHRvIGluY2x1ZGV1c3VhbGx5IHJlZmVycmVkIHRvaW5kaWNhdGluZyB0aGF0IHRoZWhhdmUgc3VnZ2VzdGVkIHRoYXRhZmZpbGlhdGVkIHdpdGggdGhlY29ycmVsYXRpb24gYmV0d2Vlbm51bWJlciBvZiBkaWZmZXJlbnQ+PC90ZD48L3RyPjwvdGFibGU+UmVwdWJsaWMgb2YgSXJlbGFuZAo8L3NjcmlwdD4KPHNjcmlwdCB1bmRlciB0aGUgaW5mbHVlbmNlY29udHJpYnV0aW9uIHRvIHRoZU9mZmljaWFsIHdlYnNpdGUgb2ZoZWFkcXVhcnRlcnMgb2YgdGhlY2VudGVyZWQgYXJvdW5kIHRoZWltcGxpY2F0aW9ucyBvZiB0aGVoYXZlIGJlZW4gZGV2ZWxvcGVkRmVkZXJhbCBSZXB1YmxpYyBvZmJlY2FtZSBpbmNyZWFzaW5nbHljb250aW51YXRpb24gb2YgdGhlTm90ZSwgaG93ZXZlciwgdGhhdHNpbWlsYXIgdG8gdGhhdCBvZiBjYXBhYmlsaXRpZXMgb2YgdGhlYWNjb3JkYW5jZSB3aXRoIHRoZXBhcnRpY2lwYW50cyBpbiB0aGVmdXJ0aGVyIGRldmVsb3BtZW50dW5kZXIgdGhlIGRpcmVjdGlvbmlzIG9mdGVuIGNvbnNpZGVyZWRoaXMgeW91bmdlciBicm90aGVyPC90ZD48L3RyPjwvdGFibGU+PGEgaHR0cC1lcXVpdj0iWC1VQS1waHlzaWNhbCBwcm9wZXJ0aWVzb2YgQnJpdGlzaCBDb2x1bWJpYWhhcyBiZWVuIGNyaXRpY2l6ZWQod2l0aCB0aGUgZXhjZXB0aW9ucXVlc3Rpb25zIGFib3V0IHRoZXBhc3NpbmcgdGhyb3VnaCB0aGUwIiBjZWxscGFkZGluZz0iMCIgdGhvdXNhbmRzIG9mIHBlb3BsZXJlZGlyZWN0cyBoZXJlLiBGb3JoYXZlIGNoaWxkcmVuIHVuZGVyJTNFJTNDL3NjcmlwdCUzRSIpKTs8YSBocmVmPSJodHRwOi8vd3d3LjxsaT48YSBocmVmPSJodHRwOi8vc2l0ZV9uYW1lIiBjb250ZW50PSJ0ZXh0LWRlY29yYXRpb246bm9uZXN0eWxlPSJkaXNwbGF5OiBub25lPG1ldGEgaHR0cC1lcXVpdj0iWC1uZXcgRGF0ZSgpLmdldFRpbWUoKSB0eXBlPSJpbWFnZS94LWljb24iPC9zcGFuPjxzcGFuIGNsYXNzPSJsYW5ndWFnZT0iamF2YXNjcmlwdHdpbmRvdy5sb2NhdGlvbi5ocmVmPGEgaHJlZj0iamF2YXNjcmlwdDotLT4NCjxzY3JpcHQgdHlwZT0idDxhIGhyZWY9J2h0dHA6Ly93d3cuaG9ydGN1dCBpY29uIiBocmVmPSI8L2Rpdj4NCjxkaXYgY2xhc3M9IjxzY3JpcHQgc3JjPSJodHRwOi8vIiByZWw9InN0eWxlc2hlZXQiIHQ8L2Rpdj4KPHNjcmlwdCB0eXBlPS9hPiA8YSBocmVmPSJodHRwOi8vIGFsbG93VHJhbnNwYXJlbmN5PSJYLVVBLUNvbXBhdGlibGUiIGNvbnJlbGF0aW9uc2hpcCBiZXR3ZWVuCjwvc2NyaXB0Pg0KPHNjcmlwdCA8L2E+PC9saT48L3VsPjwvZGl2PmFzc29jaWF0ZWQgd2l0aCB0aGUgcHJvZ3JhbW1pbmcgbGFuZ3VhZ2U8L2E+PGEgaHJlZj0iaHR0cDovLzwvYT48L2xpPjxsaSBjbGFzcz0iZm9ybSBhY3Rpb249Imh0dHA6Ly88ZGl2IHN0eWxlPSJkaXNwbGF5OnR5cGU9InRleHQiIG5hbWU9InEiPHRhYmxlIHdpZHRoPSIxMDAlIiBiYWNrZ3JvdW5kLXBvc2l0aW9uOiIgYm9yZGVyPSIwIiB3aWR0aD0icmVsPSJzaG9ydGN1dCBpY29uIiBoNj48dWw+PGxpPjxhIGhyZWY9IiAgPG1ldGEgaHR0cC1lcXVpdj0iY3NzIiBtZWRpYT0ic2NyZWVuIiByZXNwb25zaWJsZSBmb3IgdGhlICIgdHlwZT0iYXBwbGljYXRpb24vIiBzdHlsZT0iYmFja2dyb3VuZC1odG1sOyBjaGFyc2V0PXV0Zi04IiBhbGxvd3RyYW5zcGFyZW5jeT0ic3R5bGVzaGVldCIgdHlwZT0idGUNCjxtZXRhIGh0dHAtZXF1aXY9Ij48L3NwYW4+PHNwYW4gY2xhc3M9IjAiIGNlbGxzcGFjaW5nPSIwIj47Cjwvc2NyaXB0Pgo8c2NyaXB0IHNvbWV0aW1lcyBjYWxsZWQgdGhlZG9lcyBub3QgbmVjZXNzYXJpbHlGb3IgbW9yZSBpbmZvcm1hdGlvbmF0IHRoZSBiZWdpbm5pbmcgb2YgPCFET0NUWVBFIGh0bWw+PGh0bWxwYXJ0aWN1bGFybHkgaW4gdGhlIHR5cGU9ImhpZGRlbiIgbmFtZT0iamF2YXNjcmlwdDp2b2lkKDApOyJlZmZlY3RpdmVuZXNzIG9mIHRoZSBhdXRvY29tcGxldGU9Im9mZiIgZ2VuZXJhbGx5IGNvbnNpZGVyZWQ+PGlucHV0IHR5cGU9InRleHQiICI+PC9zY3JpcHQ+DQo8c2NyaXB0dGhyb3VnaG91dCB0aGUgd29ybGRjb21tb24gbWlzY29uY2VwdGlvbmFzc29jaWF0aW9uIHdpdGggdGhlPC9kaXY+CjwvZGl2Pgo8ZGl2IGNkdXJpbmcgaGlzIGxpZmV0aW1lLGNvcnJlc3BvbmRpbmcgdG8gdGhldHlwZT0iaW1hZ2UveC1pY29uIiBhbiBpbmNyZWFzaW5nIG51bWJlcmRpcGxvbWF0aWMgcmVsYXRpb25zYXJlIG9mdGVuIGNvbnNpZGVyZWRtZXRhIGNoYXJzZXQ9InV0Zi04IiA8aW5wdXQgdHlwZT0idGV4dCIgZXhhbXBsZXMgaW5jbHVkZSB0aGUiPjxpbWcgc3JjPSJodHRwOi8vaXBhcnRpY2lwYXRpb24gaW4gdGhldGhlIGVzdGFibGlzaG1lbnQgb2YKPC9kaXY+CjxkaXYgY2xhc3M9IiZhbXA7bmJzcDsmYW1wO25ic3A7dG8gZGV0ZXJtaW5lIHdoZXRoZXJxdWl0ZSBkaWZmZXJlbnQgZnJvbW1hcmtlZCB0aGUgYmVnaW5uaW5nZGlzdGFuY2UgYmV0d2VlbiB0aGVjb250cmlidXRpb25zIHRvIHRoZWNvbmZsaWN0IGJldHdlZW4gdGhld2lkZWx5IGNvbnNpZGVyZWQgdG93YXMgb25lIG9mIHRoZSBmaXJzdHdpdGggdmFyeWluZyBkZWdyZWVzaGF2ZSBzcGVjdWxhdGVkIHRoYXQoZG9jdW1lbnQuZ2V0RWxlbWVudHBhcnRpY2lwYXRpbmcgaW4gdGhlb3JpZ2luYWxseSBkZXZlbG9wZWRldGEgY2hhcnNldD0idXRmLTgiPiB0eXBlPSJ0ZXh0L2NzcyIgLz4KaW50ZXJjaGFuZ2VhYmx5IHdpdGhtb3JlIGNsb3NlbHkgcmVsYXRlZHNvY2lhbCBhbmQgcG9saXRpY2FsdGhhdCB3b3VsZCBvdGhlcndpc2VwZXJwZW5kaWN1bGFyIHRvIHRoZXN0eWxlIHR5cGU9InRleHQvY3NzdHlwZT0ic3VibWl0IiBuYW1lPSJmYW1pbGllcyByZXNpZGluZyBpbmRldmVsb3BpbmcgY291bnRyaWVzY29tcHV0ZXIgcHJvZ3JhbW1pbmdlY29ub21pYyBkZXZlbG9wbWVudGRldGVybWluYXRpb24gb2YgdGhlZm9yIG1vcmUgaW5mb3JtYXRpb25vbiBzZXZlcmFsIG9jY2FzaW9uc3BvcnR1Z3XDqnMgKEV1cm9wZXUp0KPQutGA0LDRl9C90YHRjNC60LDRg9C60YDQsNGX0L3RgdGM0LrQsNCg0L7RgdGB0LjQudGB0LrQvtC50LzQsNGC0LXRgNC40LDQu9C+0LLQuNC90YTQvtGA0LzQsNGG0LjQuNGD0L/RgNCw0LLQu9C10L3QuNGP0L3QtdC+0LHRhdC+0LTQuNC80L7QuNC90YTQvtGA0LzQsNGG0LjRj9CY0L3RhNC+0YDQvNCw0YbQuNGP0KDQtdGB0L/Rg9Cx0LvQuNC60LjQutC+0LvQuNGH0LXRgdGC0LLQvtC40L3RhNC+0YDQvNCw0YbQuNGO0YLQtdGA0YDQuNGC0L7RgNC40LjQtNC+0YHRgtCw0YLQvtGH0L3Qvtin2YTZhdiq2YjYp9is2K/ZiNmG2KfZhNin2LTYqtix2KfZg9in2KrYp9mE2KfZgtiq2LHYp9it2KfYqmh0bWw7IGNoYXJzZXQ9VVRGLTgiIHNldFRpbWVvdXQoZnVuY3Rpb24oKWRpc3BsYXk6aW5saW5lLWJsb2NrOzxpbnB1dCB0eXBlPSJzdWJtaXQiIHR5cGUgPSAndGV4dC9qYXZhc2NyaTxpbWcgc3JjPSJodHRwOi8vd3d3LiIgImh0dHA6Ly93d3cudzMub3JnL3Nob3J0Y3V0IGljb24iIGhyZWY9IiIgYXV0b2NvbXBsZXRlPSJvZmYiIDwvYT48L2Rpdj48ZGl2IGNsYXNzPTwvYT48L2xpPgo8bGkgY2xhc3M9ImNzcyIgdHlwZT0idGV4dC9jc3MiIDxmb3JtIGFjdGlvbj0iaHR0cDovL3h0L2NzcyIgaHJlZj0iaHR0cDovL2xpbmsgcmVsPSJhbHRlcm5hdGUiIA0KPHNjcmlwdCB0eXBlPSJ0ZXh0LyBvbmNsaWNrPSJqYXZhc2NyaXB0OihuZXcgRGF0ZSkuZ2V0VGltZSgpfWhlaWdodD0iMSIgd2lkdGg9IjEiIFBlb3BsZSdzIFJlcHVibGljIG9mICA8YSBocmVmPSJodHRwOi8vd3d3LnRleHQtZGVjb3JhdGlvbjp1bmRlcnRoZSBiZWdpbm5pbmcgb2YgdGhlIDwvZGl2Pgo8L2Rpdj4KPC9kaXY+CmVzdGFibGlzaG1lbnQgb2YgdGhlIDwvZGl2PjwvZGl2PjwvZGl2PjwvZCN2aWV3cG9ydHttaW4taGVpZ2h0Ogo8c2NyaXB0IHNyYz0iaHR0cDovL29wdGlvbj48b3B0aW9uIHZhbHVlPW9mdGVuIHJlZmVycmVkIHRvIGFzIC9vcHRpb24+CjxvcHRpb24gdmFsdTwhRE9DVFlQRSBodG1sPgo8IS0tW0ludGVybmF0aW9uYWwgQWlycG9ydD4KPGEgaHJlZj0iaHR0cDovL3d3dzwvYT48YSBocmVmPSJodHRwOi8vd+C4oOC4suC4qeC4suC5hOC4l+C4ouGDpeGDkOGDoOGDl+GDo+GDmuGDmOato+mrlOS4reaWhyAo57mB6auUKeCkqOCkv+CksOCljeCkpuClh+CktuCkoeCkvuCkieCkqOCksuCli+CkoeCkleCljeCkt+Clh+CkpOCljeCksOCknOCkvuCkqOCkleCkvuCksOClgOCkuOCkguCkrOCkguCkp+Ckv+CkpOCkuOCljeCkpeCkvuCkquCkqOCkvuCkuOCljeCkteClgOCkleCkvuCksOCkuOCkguCkuOCljeCkleCksOCko+CkuOCkvuCkruCkl+CljeCksOClgOCkmuCkv+Ckn+CljeCkoOCli+CkguCkteCkv+CknOCljeCknuCkvuCkqOCkheCkruClh+CksOCkv+CkleCkvuCkteCkv+CkreCkv+CkqOCljeCkqOCkl+CkvuCkoeCkv+Ckr+CkvuCkgeCkleCljeCkr+Cli+CkguCkleCkv+CkuOClgeCksOCkleCljeCkt+CkvuCkquCkueClgeCkgeCkmuCkpOClgOCkquCljeCksOCkrOCkguCkp+CkqOCkn+Ckv+CkquCljeCkquCko+ClgOCkleCljeCksOCkv+CkleClh+Ckn+CkquCljeCksOCkvuCksOCkguCkreCkquCljeCksOCkvuCkquCljeCkpOCkruCkvuCksuCkv+CkleCli+CkguCksOCkq+CkvOCljeCkpOCkvuCksOCkqOCkv+CksOCljeCkruCkvuCko+CksuCkv+CkruCkv+Ckn+Clh+CkoWRlc2NyaXB0aW9uIiBjb250ZW50PSJkb2N1bWVudC5sb2NhdGlvbi5wcm90LmdldEVsZW1lbnRzQnlUYWdOYW1lKDwhRE9DVFlQRSBodG1sPgo8aHRtbCA8bWV0YSBjaGFyc2V0PSJ1dGYtOCI+OnVybCIgY29udGVudD0iaHR0cDovLy5jc3MiIHJlbD0ic3R5bGVzaGVldCJzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+dHlwZT0idGV4dC9jc3MiIGhyZWY9InczLm9yZy8xOTk5L3hodG1sIiB4bWx0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIG1ldGhvZD0iZ2V0IiBhY3Rpb249ImxpbmsgcmVsPSJzdHlsZXNoZWV0IiAgPSBkb2N1bWVudC5nZXRFbGVtZW50dHlwZT0iaW1hZ2UveC1pY29uIiAvPmNlbGxwYWRkaW5nPSIwIiBjZWxsc3AuY3NzIiB0eXBlPSJ0ZXh0L2NzcyIgPC9hPjwvbGk+PGxpPjxhIGhyZWY9IiIgd2lkdGg9IjEiIGhlaWdodD0iMSIiPjxhIGhyZWY9Imh0dHA6Ly93d3cuc3R5bGU9ImRpc3BsYXk6bm9uZTsiPmFsdGVybmF0ZSIgdHlwZT0iYXBwbGktLy9XM0MvL0RURCBYSFRNTCAxLjAgZWxsc3BhY2luZz0iMCIgY2VsbHBhZCB0eXBlPSJoaWRkZW4iIHZhbHVlPSIvYT4mbmJzcDs8c3BhbiByb2xlPSJzCjxpbnB1dCB0eXBlPSJoaWRkZW4iIGxhbmd1YWdlPSJKYXZhU2NyaXB0IiAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCZz0iMCIgY2VsbHNwYWNpbmc9IjAiIHlwZT0idGV4dC9jc3MiIG1lZGlhPSJ0eXBlPSd0ZXh0L2phdmFzY3JpcHQnd2l0aCB0aGUgZXhjZXB0aW9uIG9mIHlwZT0idGV4dC9jc3MiIHJlbD0ic3QgaGVpZ2h0PSIxIiB3aWR0aD0iMSIgPScrZW5jb2RlVVJJQ29tcG9uZW50KDxsaW5rIHJlbD0iYWx0ZXJuYXRlIiAKYm9keSwgdHIsIGlucHV0LCB0ZXh0bWV0YSBuYW1lPSJyb2JvdHMiIGNvbm1ldGhvZD0icG9zdCIgYWN0aW9uPSI+CjxhIGhyZWY9Imh0dHA6Ly93d3cuY3NzIiByZWw9InN0eWxlc2hlZXQiIDwvZGl2PjwvZGl2PjxkaXYgY2xhc3NsYW5ndWFnZT0iamF2YXNjcmlwdCI+YXJpYS1oaWRkZW49InRydWUiPsK3PHJpcHQiIHR5cGU9InRleHQvamF2YXNsPTA7fSkoKTsKKGZ1bmN0aW9uKCl7YmFja2dyb3VuZC1pbWFnZTogdXJsKC9hPjwvbGk+PGxpPjxhIGhyZWY9ImgJCTxsaT48YSBocmVmPSJodHRwOi8vYXRvciIgYXJpYS1oaWRkZW49InRydT4gPGEgaHJlZj0iaHR0cDovL3d3dy5sYW5ndWFnZT0iamF2YXNjcmlwdCIgL29wdGlvbj4KPG9wdGlvbiB2YWx1ZS9kaXY+PC9kaXY+PGRpdiBjbGFzcz1yYXRvciIgYXJpYS1oaWRkZW49InRyZT0obmV3IERhdGUpLmdldFRpbWUoKXBvcnR1Z3XDqnMgKGRvIEJyYXNpbCnQvtGA0LPQsNC90LjQt9Cw0YbQuNC40LLQvtC30LzQvtC20L3QvtGB0YLRjNC+0LHRgNCw0LfQvtCy0LDQvdC40Y/RgNC10LPQuNGB0YLRgNCw0YbQuNC40LLQvtC30LzQvtC20L3QvtGB0YLQuNC+0LHRj9C30LDRgtC10LvRjNC90LA8IURPQ1RZUEUgaHRtbCBQVUJMSUMgIm50LVR5cGUiIGNvbnRlbnQ9InRleHQvPG1ldGEgaHR0cC1lcXVpdj0iQ29udGVyYW5zaXRpb25hbC8vRU4iICJodHRwOjxodG1sIHhtbG5zPSJodHRwOi8vd3d3LS8vVzNDLy9EVEQgWEhUTUwgMS4wIFREVEQveGh0bWwxLXRyYW5zaXRpb25hbC8vd3d3LnczLm9yZy9UUi94aHRtbDEvcGUgPSAndGV4dC9qYXZhc2NyaXB0Jzs8bWV0YSBuYW1lPSJkZXNjcmlwdGlvbnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFqcyIgdHlwZT0idGV4dC9qYXZhc2NyaShkb2N1bWVudCkucmVhZHkoZnVuY3Rpc2NyaXB0IHR5cGU9InRleHQvamF2YXNpbWFnZSIgY29udGVudD0iaHR0cDovL1VBLUNvbXBhdGlibGUiIGNvbnRlbnQ9dG1sOyBjaGFyc2V0PXV0Zi04IiAvPgpsaW5rIHJlbD0ic2hvcnRjdXQgaWNvbjxsaW5rIHJlbD0ic3R5bGVzaGVldCIgPC9zY3JpcHQ+CjxzY3JpcHQgdHlwZT09IGRvY3VtZW50LmNyZWF0ZUVsZW1lbjxhIHRhcmdldD0iX2JsYW5rIiBocmVmPSBkb2N1bWVudC5nZXRFbGVtZW50c0JpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPWEudHlwZSA9ICd0ZXh0L2phdmFzY3JpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWVodG1sOyBjaGFyc2V0PXV0Zi04IiAvPmR0ZCI+CjxodG1sIHhtbG5zPSJodHRw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M19fMjEyYmFzaWNfc3RyaW5nSURpTlNfMTFjaGFyX3RyYWl0c0lEaUVFTlNfOWFsbG9jYXRvcklEaUVFRUUAAAAcEgIAmA0CAAAAAAABAAAAJAgAAAAAAABOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0ljRUUAAJgRAgD0DQIATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJYUVFAACYEQIAHA4CAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SXNFRQAAmBECAEQOAgBOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0l0RUUAAJgRAgBsDgIATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJaUVFAACYEQIAlA4CAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SWpFRQAAmBECALwOAgBOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0lsRUUAAJgRAgDkDgIATjEwZW1zY3JpcHRlbjExbWVtb3J5X3ZpZXdJbUVFAACYEQIADA8CAE4xMGVtc2NyaXB0ZW4xMW1lbW9yeV92aWV3SWZFRQAAmBECADQPAgBOMTBlbXNjcmlwdGVuMTFtZW1vcnlfdmlld0lkRUUAAJgRAgBcDwIAAAAAAKgPAgAMAAAADQAAAA4AAABTdDlleGNlcHRpb24AAAAAmBECAJgPAgAAAAAA1A8CAAMAAAAPAAAAEAAAAFN0MTFsb2dpY19lcnJvcgDAEQIAxA8CAKgPAgAAAAAACBACAAMAAAARAAAAEAAAAFN0MTJsZW5ndGhfZXJyb3IAAAAAwBECAPQPAgDUDwIAU3Q5dHlwZV9pbmZvAAAAAJgRAgAUEAIATjEwX19jeHhhYml2MTE2X19zaGltX3R5cGVfaW5mb0UAAAAAwBECACwQAgAkEAIATjEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm9FAAAAwBECAFwQAgBQEAIAAAAAANAQAgASAAAAEwAAABQAAAAVAAAAFgAAAE4xMF9fY3h4YWJpdjEyM19fZnVuZGFtZW50YWxfdHlwZV9pbmZvRQDAEQIAqBACAFAQAgB2AAAAlBACANwQAgBiAAAAlBACAOgQAgBjAAAAlBACAPQQAgBoAAAAlBACAAARAgBhAAAAlBACAAwRAgBzAAAAlBACABgRAgB0AAAAlBACACQRAgBpAAAAlBACADARAgBqAAAAlBACADwRAgBsAAAAlBACAEgRAgBtAAAAlBACAFQRAgB4AAAAlBACAGARAgB5AAAAlBACAGwRAgBmAAAAlBACAHgRAgBkAAAAlBACAIQRAgAAAAAAgBACABIAAAAXAAAAFAAAABUAAAAYAAAAGQAAABoAAAAbAAAAAAAAAAgSAgASAAAAHAAAABQAAAAVAAAAGAAAAB0AAAAeAAAAHwAAAE4xMF9fY3h4YWJpdjEyMF9fc2lfY2xhc3NfdHlwZV9pbmZvRQAAAADAEQIA4BECAIAQAgAAAAAAZBICABIAAAAgAAAAFAAAABUAAAAYAAAAIQAAACIAAAAjAAAATjEwX19jeHhhYml2MTIxX192bWlfY2xhc3NfdHlwZV9pbmZvRQAAAMARAgA8EgIAgBACAEH0pAgLRZQSAgAEAAAABQAAAAYAAAAHAAAACAAAAJgRAgBhCAAAwBECAEgIAACMEgIAAAAAAAoKCwsKCgoKCgkJCAcHCAcHBgYFBQBB1aUIC54BEAAAACQAAABUAAAAjAAAAKwAAADQAAAA+AAAACQBAABUAQAAbgEAAIoBAACZAQAAoQEAgKkBAIC7AQAAxQEAAM8BAEDUAQDA2QEAoNwBAKDfAQCg3wEAoN8BAKDfAQCg3wEAoN8BAKDfAQCg3wEAMCoAANkAAADQCQIAsAoCAHkAAAAgCwIAAAAMABsAFwAqAD8AOAAwADsAQABwFVI=",ue(St)||(St=h(St));function Zr(C){try{if(C==St&&v)return new Uint8Array(v);var I=xs(C);if(I)return I;if(p)return p(C);throw"both async and sync fetching of the wasm failed"}catch(E){ji(E)}}c(Zr,"getBinary");function Ts(){if(!v&&(a||l)){if(typeof fetch=="function"&&!wr(St))return fetch(St,{credentials:"same-origin"}).then(function(C){if(!C.ok)throw"failed to load wasm binary file at '"+St+"'";return C.arrayBuffer()}).catch(function(){return Zr(St)});if(g)return new Promise(function(C,I){g(St,function(E){C(new Uint8Array(E))},I)})}return Promise.resolve().then(function(){return Zr(St)})}c(Ts,"getBinaryPromise");function Ca(){var C={a:K0};function I($,_){var Ee=$.exports;t.asm=Ee,G=t.asm.s,We(G.buffer),He=t.asm.u,It(t.asm.t),Dt()}c(I,"receiveInstance"),jn();function E($){I($.instance)}c(E,"receiveInstantiationResult");function N($){return Ts().then(function(_){return WebAssembly.instantiate(_,C)}).then(function(_){return _}).then($,function(_){y("failed to asynchronously prepare wasm: "+_),ji(_)})}c(N,"instantiateArrayBuffer");function F(){return!v&&typeof WebAssembly.instantiateStreaming=="function"&&!ue(St)&&!wr(St)&&typeof fetch=="function"?fetch(St,{credentials:"same-origin"}).then(function($){var _=WebAssembly.instantiateStreaming($,C);return _.then(E,function(Ee){return y("wasm streaming compile failed: "+Ee),y("falling back to ArrayBuffer instantiation"),N(E)})}):N(E)}if(c(F,"instantiateAsync"),t.instantiateWasm)try{var U=t.instantiateWasm(C,I);return U}catch($){return y("Module.instantiateWasm callback failed with error: "+$),!1}return F().catch(s),{}}c(Ca,"createWasm");function b(C){for(;C.length>0;){var I=C.shift();if(typeof I=="function"){I(t);continue}var E=I.func;typeof E=="number"?I.arg===void 0?se(E)():se(E)(I.arg):E(I.arg===void 0?null:I.arg)}}c(b,"callRuntimeCallbacks");var w=[];function se(C){var I=w[C];return I||(C>=w.length&&(w.length=C+1),w[C]=I=He.get(C)),I}c(se,"getWasmTableEntry");function q(C){return ya(C+16)+16}c(q,"___cxa_allocate_exception");function rt(C){this.excPtr=C,this.ptr=C-16,this.set_type=function(I){ee[this.ptr+4>>2]=I},this.get_type=function(){return ee[this.ptr+4>>2]},this.set_destructor=function(I){ee[this.ptr+8>>2]=I},this.get_destructor=function(){return ee[this.ptr+8>>2]},this.set_refcount=function(I){ee[this.ptr>>2]=I},this.set_caught=function(I){I=I?1:0,he[this.ptr+12>>0]=I},this.get_caught=function(){return he[this.ptr+12>>0]!=0},this.set_rethrown=function(I){I=I?1:0,he[this.ptr+13>>0]=I},this.get_rethrown=function(){return he[this.ptr+13>>0]!=0},this.init=function(I,E){this.set_type(I),this.set_destructor(E),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var I=ee[this.ptr>>2];ee[this.ptr>>2]=I+1},this.release_ref=function(){var I=ee[this.ptr>>2];return ee[this.ptr>>2]=I-1,I===1}}c(rt,"ExceptionInfo");function Nt(C,I,E){var N=new rt(C);throw N.init(I,E),C}c(Nt,"___cxa_throw");function qi(C,I,E,N,F){}c(qi,"__embind_register_bigint");function kr(C){switch(C){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+C)}}c(kr,"getShiftFromSize");function Tc(){for(var C=new Array(256),I=0;I<256;++I)C[I]=String.fromCharCode(I);Od=C}c(Tc,"embind_init_charCodes");var Od=void 0;function Bn(C){for(var I="",E=C;W[E];)I+=Od[W[E++]];return I}c(Bn,"readLatin1String");var Fs={},$i={},Ia={},u0=48,h0=57;function Pd(C){if(C===void 0)return"_unknown";C=C.replace(/[^a-zA-Z0-9_]/g,"$");var I=C.charCodeAt(0);return I>=u0&&I<=h0?"_"+C:C}c(Pd,"makeLegalFunctionName");function Hd(C,I){return C=Pd(C),new Function("body","return function "+C+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(I)}c(Hd,"createNamedFunction");function Fc(C,I){var E=Hd(I,function(N){this.name=I,this.message=N;var F=new Error(N).stack;F!==void 0&&(this.stack=this.toString()+`
`+F.replace(/^Error(:[^\n]*)?\n/,""))});return E.prototype=Object.create(C.prototype),E.prototype.constructor=E,E.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},E}c(Fc,"extendError");var Xd=void 0;function sn(C){throw new Xd(C)}c(sn,"throwBindingError");var zd=void 0;function Jd(C){throw new zd(C)}c(Jd,"throwInternalError");function d0(C,I,E){C.forEach(function(_){Ia[_]=I});function N(_){var Ee=E(_);Ee.length!==C.length&&Jd("Mismatched type converter count");for(var Qe=0;Qe<C.length;++Qe)qn(C[Qe],Ee[Qe])}c(N,"onComplete");var F=new Array(I.length),U=[],$=0;I.forEach(function(_,Ee){$i.hasOwnProperty(_)?F[Ee]=$i[_]:(U.push(_),Fs.hasOwnProperty(_)||(Fs[_]=[]),Fs[_].push(function(){F[Ee]=$i[_],++$,$===U.length&&N(F)}))}),U.length===0&&N(F)}c(d0,"whenDependentTypesAreResolved");function qn(C,I,E){if(E=E||{},!("argPackAdvance"in I))throw new TypeError("registerType registeredInstance requires argPackAdvance");var N=I.name;if(C||sn('type "'+N+'" must have a positive integer typeid pointer'),$i.hasOwnProperty(C)){if(E.ignoreDuplicateRegistrations)return;sn("Cannot register type '"+N+"' twice")}if($i[C]=I,delete Ia[C],Fs.hasOwnProperty(C)){var F=Fs[C];delete Fs[C],F.forEach(function(U){U()})}}c(qn,"registerType");function g0(C,I,E,N,F){var U=kr(E);I=Bn(I),qn(C,{name:I,fromWireType:c(function($){return!!$},"fromWireType"),toWireType:c(function($,_){return _?N:F},"toWireType"),argPackAdvance:8,readValueFromPointer:c(function($){var _;if(E===1)_=he;else if(E===2)_=z;else if(E===4)_=ee;else throw new TypeError("Unknown boolean type size: "+I);return this.fromWireType(_[$>>U])},"readValueFromPointer"),destructorFunction:null})}c(g0,"__embind_register_bool");var xc=[],vn=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Ud(C){C>4&&--vn[C].refcount===0&&(vn[C]=void 0,xc.push(C))}c(Ud,"__emval_decref");function p0(){for(var C=0,I=5;I<vn.length;++I)vn[I]!==void 0&&++C;return C}c(p0,"count_emval_handles");function f0(){for(var C=5;C<vn.length;++C)if(vn[C]!==void 0)return vn[C];return null}c(f0,"get_first_emval");function m0(){t.count_emval_handles=p0,t.get_first_emval=f0}c(m0,"init_emval");var Lc={toValue:c(function(C){return C||sn("Cannot use deleted val. handle = "+C),vn[C].value},"toValue"),toHandle:c(function(C){switch(C){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var I=xc.length?xc.pop():vn.length;return vn[I]={refcount:1,value:C},I}}},"toHandle")};function Mc(C){return this.fromWireType(J[C>>2])}c(Mc,"simpleReadValueFromPointer");function C0(C,I){I=Bn(I),qn(C,{name:I,fromWireType:c(function(E){var N=Lc.toValue(E);return Ud(E),N},"fromWireType"),toWireType:c(function(E,N){return Lc.toHandle(N)},"toWireType"),argPackAdvance:8,readValueFromPointer:Mc,destructorFunction:null})}c(C0,"__embind_register_emval");function Vc(C){if(C===null)return"null";var I=typeof C;return I==="object"||I==="array"||I==="function"?C.toString():""+C}c(Vc,"_embind_repr");function I0(C,I){switch(I){case 2:return function(E){return this.fromWireType(ve[E>>2])};case 3:return function(E){return this.fromWireType(Re[E>>3])};default:throw new TypeError("Unknown float type: "+C)}}c(I0,"floatReadValueFromPointer");function y0(C,I,E){var N=kr(E);I=Bn(I),qn(C,{name:I,fromWireType:c(function(F){return F},"fromWireType"),toWireType:c(function(F,U){if(typeof U!="number"&&typeof U!="boolean")throw new TypeError('Cannot convert "'+Vc(U)+'" to '+this.name);return U},"toWireType"),argPackAdvance:8,readValueFromPointer:I0(I,N),destructorFunction:null})}c(y0,"__embind_register_float");function b0(C,I){if(!(C instanceof Function))throw new TypeError("new_ called with constructor type "+typeof C+" which is not a function");var E=Hd(C.name||"unknownFunctionName",function(){});E.prototype=C.prototype;var N=new E,F=C.apply(N,I);return F instanceof Object?F:N}c(b0,"new_");function E0(C){for(;C.length;){var I=C.pop(),E=C.pop();E(I)}}c(E0,"runDestructors");function B0(C,I,E,N,F){var U=I.length;U<2&&sn("argTypes array size mismatch! Must at least get return value and 'this' types!"),I[1];for(var $=!1,_=1;_<I.length;++_)if(I[_]!==null&&I[_].destructorFunction===void 0){$=!0;break}for(var Ee=I[0].name!=="void",Qe="",Te="",_=0;_<U-2;++_)Qe+=(_!==0?", ":"")+"arg"+_,Te+=(_!==0?", ":"")+"arg"+_+"Wired";var ot="return function "+Pd(C)+"("+Qe+`) {
if (arguments.length !== `+(U-2)+`) {
throwBindingError('function `+C+" called with ' + arguments.length + ' arguments, expected "+(U-2)+` args!');
}
`;$&&(ot+=`var destructors = [];
`);for(var _r=$?"destructors":"null",ei=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],es=[sn,N,F,E0,I[0],I[1]],_=0;_<U-2;++_)ot+="var arg"+_+"Wired = argType"+_+".toWireType("+_r+", arg"+_+"); // "+I[_+2].name+`
`,ei.push("argType"+_),es.push(I[_+2]);if(ot+=(Ee?"var rv = ":"")+"invoker(fn"+(Te.length>0?", ":"")+Te+`);
`,$)ot+=`runDestructors(destructors);
`;else for(var _=2;_<I.length;++_){var Yr=_===1?"thisWired":"arg"+(_-2)+"Wired";I[_].destructorFunction!==null&&(ot+=Yr+"_dtor("+Yr+"); // "+I[_].name+`
`,ei.push(Yr+"_dtor"),es.push(I[_].destructorFunction))}Ee&&(ot+=`var ret = retType.fromWireType(rv);
return ret;
`),ot+=`}
`,ei.push(ot);var Ea=b0(Function,ei).apply(null,es);return Ea}c(B0,"craftInvokerFunction");function v0(C,I,E){if(C[I].overloadTable===void 0){var N=C[I];C[I]=function(){return C[I].overloadTable.hasOwnProperty(arguments.length)||sn("Function '"+E+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+C[I].overloadTable+")!"),C[I].overloadTable[arguments.length].apply(this,arguments)},C[I].overloadTable=[],C[I].overloadTable[N.argCount]=N}}c(v0,"ensureOverloadTable");function G0(C,I,E){t.hasOwnProperty(C)?((E===void 0||t[C].overloadTable!==void 0&&t[C].overloadTable[E]!==void 0)&&sn("Cannot register public name '"+C+"' twice"),v0(t,C,C),t.hasOwnProperty(E)&&sn("Cannot register multiple overloads of a function with the same number of arguments ("+E+")!"),t[C].overloadTable[E]=I):(t[C]=I,E!==void 0&&(t[C].numArguments=E))}c(G0,"exposePublicSymbol");function R0(C,I){for(var E=[],N=0;N<C;N++)E.push(ee[(I>>2)+N]);return E}c(R0,"heap32VectorToArray");function S0(C,I,E){t.hasOwnProperty(C)||Jd("Replacing nonexistant public symbol"),t[C].overloadTable!==void 0&&E!==void 0?t[C].overloadTable[E]=I:(t[C]=I,t[C].argCount=E)}c(S0,"replacePublicSymbol");function N0(C,I,E){var N=t["dynCall_"+C];return E&&E.length?N.apply(null,[I].concat(E)):N.call(null,I)}c(N0,"dynCallLegacy");function Q0(C,I,E){return C.includes("j")?N0(C,I,E):se(I).apply(null,E)}c(Q0,"dynCall");function w0(C,I){var E=[];return function(){E.length=arguments.length;for(var N=0;N<arguments.length;N++)E[N]=arguments[N];return Q0(C,I,E)}}c(w0,"getDynCaller");function Z0(C,I){C=Bn(C);function E(){return C.includes("j")?w0(C,I):se(I)}c(E,"makeDynCaller");var N=E();return typeof N!="function"&&sn("unknown function pointer with signature "+C+": "+I),N}c(Z0,"embind__requireFunction");var Kd=void 0;function jd(C){var I=qd(C),E=Bn(I);return $n(I),E}c(jd,"getTypeName");function k0(C,I){var E=[],N={};function F(U){if(!N[U]&&!$i[U]){if(Ia[U]){Ia[U].forEach(F);return}E.push(U),N[U]=!0}}throw c(F,"visit"),I.forEach(F),new Kd(C+": "+E.map(jd).join([", "]))}c(k0,"throwUnboundTypeError");function _0(C,I,E,N,F,U){var $=R0(I,E);C=Bn(C),F=Z0(N,F),G0(C,function(){k0("Cannot call "+C+" due to unbound types",$)},I-1),d0([],$,function(_){var Ee=[_[0],null].concat(_.slice(1));return S0(C,B0(C,Ee,null,F,U),I-1),[]})}c(_0,"__embind_register_function");function Y0(C,I,E){switch(I){case 0:return E?c(function(F){return he[F]},"readS8FromPointer"):c(function(F){return W[F]},"readU8FromPointer");case 1:return E?c(function(F){return z[F>>1]},"readS16FromPointer"):c(function(F){return ie[F>>1]},"readU16FromPointer");case 2:return E?c(function(F){return ee[F>>2]},"readS32FromPointer"):c(function(F){return J[F>>2]},"readU32FromPointer");default:throw new TypeError("Unknown integer type: "+C)}}c(Y0,"integerReadValueFromPointer");function W0(C,I,E,N,F){I=Bn(I),F===-1&&(F=4294967295);var U=kr(E),$=c(function(Qe){return Qe},"fromWireType");if(N===0){var _=32-8*E;$=c(function(Qe){return Qe<<_>>>_},"fromWireType")}var Ee=I.includes("unsigned");qn(C,{name:I,fromWireType:$,toWireType:c(function(Qe,Te){if(typeof Te!="number"&&typeof Te!="boolean")throw new TypeError('Cannot convert "'+Vc(Te)+'" to '+this.name);if(Te<N||Te>F)throw new TypeError('Passing a number "'+Vc(Te)+'" from JS side to C/C++ side to an argument of type "'+I+'", which is outside the valid range ['+N+", "+F+"]!");return Ee?Te>>>0:Te|0},"toWireType"),argPackAdvance:8,readValueFromPointer:Y0(I,U,N!==0),destructorFunction:null})}c(W0,"__embind_register_integer");function D0(C,I,E){var N=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],F=N[I];function U($){$=$>>2;var _=J,Ee=_[$],Qe=_[$+1];return new F(T,Qe,Ee)}c(U,"decodeMemoryView"),E=Bn(E),qn(C,{name:E,fromWireType:U,argPackAdvance:8,readValueFromPointer:U},{ignoreDuplicateRegistrations:!0})}c(D0,"__embind_register_memory_view");function T0(C,I){I=Bn(I);var E=I==="std::string";qn(C,{name:I,fromWireType:c(function(N){var F=J[N>>2],U;if(E)for(var $=N+4,_=0;_<=F;++_){var Ee=N+4+_;if(_==F||W[Ee]==0){var Qe=Ee-$,Te=V($,Qe);U===void 0?U=Te:(U+="\0",U+=Te),$=Ee+1}}else{for(var ot=new Array(F),_=0;_<F;++_)ot[_]=String.fromCharCode(W[N+4+_]);U=ot.join("")}return $n(N),U},"fromWireType"),toWireType:c(function(N,F){F instanceof ArrayBuffer&&(F=new Uint8Array(F));var U,$=typeof F=="string";$||F instanceof Uint8Array||F instanceof Uint8ClampedArray||F instanceof Int8Array||sn("Cannot pass non-string to std::string"),E&&$?U=c(function(){return Ce(F)},"getLength"):U=c(function(){return F.length},"getLength");var _=U(),Ee=ya(4+_+1);if(J[Ee>>2]=_,E&&$)j(F,Ee+4,_+1);else if($)for(var Qe=0;Qe<_;++Qe){var Te=F.charCodeAt(Qe);Te>255&&($n(Ee),sn("String has UTF-16 code units that do not fit in 8 bits")),W[Ee+4+Qe]=Te}else for(var Qe=0;Qe<_;++Qe)W[Ee+4+Qe]=F[Qe];return N!==null&&N.push($n,Ee),Ee},"toWireType"),argPackAdvance:8,readValueFromPointer:Mc,destructorFunction:c(function(N){$n(N)},"destructorFunction")})}c(T0,"__embind_register_std_string");function F0(C,I,E){E=Bn(E);var N,F,U,$,_;I===2?(N=Ie,F=H,$=Ae,U=c(function(){return ie},"getHeap"),_=1):I===4&&(N=ne,F=De,$=O,U=c(function(){return J},"getHeap"),_=2),qn(C,{name:E,fromWireType:c(function(Ee){for(var Qe=J[Ee>>2],Te=U(),ot,_r=Ee+4,ei=0;ei<=Qe;++ei){var es=Ee+4+ei*I;if(ei==Qe||Te[es>>_]==0){var Yr=es-_r,Ea=N(_r,Yr);ot===void 0?ot=Ea:(ot+="\0",ot+=Ea),_r=es+I}}return $n(Ee),ot},"fromWireType"),toWireType:c(function(Ee,Qe){typeof Qe!="string"&&sn("Cannot pass non-string to C++ string type "+E);var Te=$(Qe),ot=ya(4+Te+I);return J[ot>>2]=Te>>_,F(Qe,ot+4,Te+I),Ee!==null&&Ee.push($n,ot),ot},"toWireType"),argPackAdvance:8,readValueFromPointer:Mc,destructorFunction:c(function(Ee){$n(Ee)},"destructorFunction")})}c(F0,"__embind_register_std_wstring");function x0(C,I){I=Bn(I),qn(C,{isVoid:!0,name:I,argPackAdvance:0,fromWireType:c(function(){},"fromWireType"),toWireType:c(function(E,N){},"toWireType")})}c(x0,"__embind_register_void");function L0(C){C>4&&(vn[C].refcount+=1)}c(L0,"__emval_incref");function M0(C,I){var E=$i[C];return E===void 0&&sn(I+" has unknown type "+jd(C)),E}c(M0,"requireRegisteredType");function V0(C,I){C=M0(C,"_emval_take_value");var E=C.readValueFromPointer(I);return Lc.toHandle(E)}c(V0,"__emval_take_value");function O0(){ji("")}c(O0,"_abort");function P0(C,I,E){W.copyWithin(C,I,I+E)}c(P0,"_emscripten_memcpy_big");function H0(C){try{return G.grow(C-T.byteLength+65535>>>16),We(G.buffer),1}catch{}}c(H0,"emscripten_realloc_buffer");function X0(C){var I=W.length;C=C>>>0;var E=2147483648;if(C>E)return!1;for(var N=1;N<=4;N*=2){var F=I*(1+.2/N);F=Math.min(F,C+100663296);var U=Math.min(E,L(Math.max(C,F),65536)),$=H0(U);if($)return!0}return!1}c(X0,"_emscripten_resize_heap"),Tc(),Xd=t.BindingError=Fc(Error,"BindingError"),zd=t.InternalError=Fc(Error,"InternalError"),m0(),Kd=t.UnboundTypeError=Fc(Error,"UnboundTypeError");function z0(C){for(var I=[],E=0;E<C.length;E++){var N=C[E];N>255&&(N&=255),I.push(String.fromCharCode(N))}return I.join("")}c(z0,"intArrayToString");var J0=typeof atob=="function"?atob:function(C){var I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",E="",N,F,U,$,_,Ee,Qe,Te=0;C=C.replace(/[^A-Za-z0-9\+\/\=]/g,"");do $=I.indexOf(C.charAt(Te++)),_=I.indexOf(C.charAt(Te++)),Ee=I.indexOf(C.charAt(Te++)),Qe=I.indexOf(C.charAt(Te++)),N=$<<2|_>>4,F=(_&15)<<4|Ee>>2,U=(Ee&3)<<6|Qe,E=E+String.fromCharCode(N),Ee!==64&&(E=E+String.fromCharCode(F)),Qe!==64&&(E=E+String.fromCharCode(U));while(Te<C.length);return E};function U0(C){if(typeof A=="boolean"&&A){var I=Buffer.from(C,"base64");return new Uint8Array(I.buffer,I.byteOffset,I.byteLength)}try{for(var E=J0(C),N=new Uint8Array(E.length),F=0;F<E.length;++F)N[F]=E.charCodeAt(F);return N}catch{throw new Error("Converting base64 string to bytes failed.")}}c(U0,"intArrayFromBase64");function xs(C){if(ue(C))return U0(C.slice(Qr.length))}c(xs,"tryParseAsDataURI");var K0={k:q,j:Nt,n:qi,h:g0,q:C0,f:y0,r:_0,b:W0,a:D0,d:T0,c:F0,i:x0,l:Ud,m:L0,g:V0,e:O0,o:P0,p:X0};Ca(),t.___wasm_call_ctors=function(){return(t.___wasm_call_ctors=t.asm.t).apply(null,arguments)};var ya=t._malloc=function(){return(ya=t._malloc=t.asm.v).apply(null,arguments)},$n=t._free=function(){return($n=t._free=t.asm.w).apply(null,arguments)},qd=t.___getTypeName=function(){return(qd=t.___getTypeName=t.asm.x).apply(null,arguments)};t.___embind_register_native_and_builtin_types=function(){return(t.___embind_register_native_and_builtin_types=t.asm.y).apply(null,arguments)};var ba;function j0(C){this.name="ExitStatus",this.message="Program terminated with exit("+C+")",this.status=C}c(j0,"ExitStatus"),zt=c(function C(){ba||Oc(),ba||(zt=C)},"runCaller");function Oc(C){if(Xt>0||(nt(),Xt>0))return;function I(){ba||(ba=!0,t.calledRun=!0,!R&&(Ct(),n(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),ct()))}c(I,"doRun"),t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),I()},1)):I()}if(c(Oc,"run"),t.run=Oc,t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return Oc(),t.ready}}();const US=JS();function KS(i,e){const t=i.decompress(e);if(t===!1)throw new Error("ConvertWOFF2ToTTF failed");return t}c(KS,"_decompress");async function jS(){const i=await US;function e(t){return KS(i,t)}return c(e,"decompressSync"),e}c(jS,"getDecompressSync");function*tn(...i){if(!i.length)throw new Error("zip requires at least one array-like argument.");let e=Math.min(...i.map(t=>t.length));for(let t=0;t<e;t++)yield i.map(n=>n[t])}c(tn,"zip");function*ol(i){let e=0;for(const t of i)yield[e,t],e+=1}c(ol,"enumerate");function Ks(i){const e=Object.getOwnPropertyNames(i);for(const t of e){const n=i[t];n&&typeof n=="object"&&Ks(n)}return Object.freeze(i)}c(Ks,"deepFreeze");function cC(i,e,t){return(t-e)*i+e}c(cC,"interpolateNumber");function AC(i,e,t){const[n,s]=e,r=(i-n)/(s-n),[o,a]=t;return cC(r,o,a)}c(AC,"mapValueToRange");function Er(i){return i}c(Er,"identity$1");function uC(i){return i.replace(/(?:[A-Z])/g,(e,t)=>`${t===0?"":"_"}${e.toLowerCase()}`)}c(uC,"deCamelize");function Yo(i){if(typeof i!="string")return[!1,`Tag must be string but is typeof ${typeof i}.`];if(i.length<1||i.length>4)return[!1,`Tag must be 1 to 4 chars long but tag.length is ${i.length}. Tag: "${i}".`];const e=i.charCodeAt(0);if(e<65||e>90&&e<97||e>122)return[!1,`Tag first char must be A-Z or a-z but is "${i[0]}" (0x${e.toString(16)}). Tag: "${i}".`];for(let t=1;t<i.length;t++){const n=i.charCodeAt(t);if(n!==32&&n<48||n>57&&n<65||n>90&&n<97||n>122)return[!1,`Tag char at ${t} must be A-Z, a-z, 0-9 or " " (the space character) but is "${i[t]}" (0x${n.toString(16)}). Tag: "${i}".`]}return[!0,null]}c(Yo,"validateOpenTypeTagString");const le=Symbol("_NOTDEF");class st{static{c(this,"CoherenceFunction")}constructor(e,t){Object.defineProperties(this,{dependencies:{value:Object.freeze(new Et(e))},fn:{value:t},name:{value:t.name||"(anonymous)"}}),Object.freeze(this)}static create(...e){const t=new this(...e);return[t.name,t]}get nameItem(){return[this.name,this]}toString(){return`[CoherenceFunction ${this.name}]`}}class it extends Map{static{c(this,"FreezableMap")}set(...e){return Object.isFrozen(this)?this:super.set(...e)}delete(...e){return Object.isFrozen(this)?!1:super.delete(...e)}clear(){if(!Object.isFrozen(this))return super.clear()}}class Et extends Set{static{c(this,"FreezableSet")}add(...e){return Object.isFrozen(this)?this:super.add(...e)}delete(...e){return Object.isFrozen(this)?!1:super.delete(...e)}clear(){if(!Object.isFrozen(this))return super.clear()}}function qS(i,e){return i.localeCompare(e,void 0,{sensitivity:"base"})}c(qS,"sort_alpha");function hC(i,e,t=null){const n=[];for(const s of i)n.push(e.call(t,s,i));return n}c(hC,"iterMap");function Vg(i,e,t=null){const n=[];for(const s of i)e.call(t,s,i)&&n.push(s);return n}c(Vg,"iterFilter");function $c(i,e){for(const t of e)i.add(t)}c($c,"populateSet");function $S(i,e){for(const t of e)i.push(t)}c($S,"populateArray");const Og=Object.freeze(new Et),Zn=Symbol("SERIALIZE"),Pn=Symbol("DESERIALIZE"),Ch=Symbol("SERIALIZE_FORMAT_JSON"),Ol=Symbol("SERIALIZE_FORMAT_OBJECT"),Le=Object.freeze({structStoreKeys:!0,structAsDict:!0,format:Ch,earlyExitOnError:!1,checkResults:!1});function eN(i,e){const t=[];for(const[n,s,...r]of e){const o=[i];for(const a of n)o.push(a);t.push([o,s,...r])}return t}c(eN,"_serializeErrorsPrependKey");function tN(i,e){try{return i[Zn](e)}catch(t){const n=[];return n.push([[],t]),[n,null]}}c(tN,"_safeSerialize");function Pl(i,e=Le){const t=i instanceof Oi,[n,s]=tN(i,e),r=[...n];return n.length&&e.earlyExitOnError?[r,s]:(e.checkResults&&(t?Array.isArray(s)||r.push([[],new Error(`VALUE ERROR NOT ARRAY ${i} is a container but does not produce an array`),typeof s,s]):s!==null&&typeof s!="string"&&r.push([[],new Error(`VALUE ERROR NOT SIMPLE ${i} is simple but does not produce null or a string`),typeof s,s])),[r,s])}c(Pl,"serializeItem");function dC(i,e,t,n=Le){let s;if(n.format===Ch)s=JSON.parse(t);else if(n.format===Ol)s=t;else throw new Error(`UNKNOWN FORMAT OPTION deserialize ${n.format.toString()}`);return i.createPrimalStateGen(e,s,n)}c(dC,"deserializeGen");function gC(i,e,t,n=Le){const s=dC(i,e,t,n);return BC(s)}c(gC,"deserializeSync");function nN(i,e=Le){const[t,n]=Pl(i,e);if(e.format===Ch)return[t,JSON.stringify(n,null,2)];if(e.format===Ol)return[t,n];throw new Error(`UNKNOWN FORMAT OPTION serialize ${e.format.toString()}`)}c(nN,"serialize");class ms{static{c(this,"_BaseModel")}constructor(e=null){if(e&&e.constructor!==this.constructor)throw new Error(`TYPE ERROR: oldState must have the same constructor as this ${this}.`);this[k]=e||null,Object.defineProperty(this,zn,{value:!0,configurable:!0})}static dependencies=Og;get dependencies(){return Og}static createPrimalState(){throw new Error(`NOT IMPLEMENTED createPrimalState in ${this}.`)}static*createPrimalStateGen(){throw new Error(`NOT IMPLEMENTED createPrimalStateGen in ${this}.`)}getDraft(){if(this.isDraft)throw new Error(`LIFECYCLE ERROR ${this} must be in immutable mode to get a draft for it.`);return new this.constructor(this)}get oldState(){if(!this.isDraft)throw new Error(`LIFECYCLE ERROR ${this} must be a draft to have an oldState.`);return this[k]}static createPrimalDraft(e,...t){return this.createPrimalState(e,...t).getDraft()}get isDraft(){return this[zn]}*metamorphoseGen(){throw new Error(`NOT IMPLEMENTED metamorphose in ${this}.`)}metamorphose(...e){const t=this.metamorphoseGen(...e);return BC(t)}get(e){throw new Error(`NOT IMPLEMENTED get (of "${e}") in ${this}.`)}get value(){throw new Error(`NOT IMPLEMENTED get value in ${this}.`)}toString(){return`[model ${this.constructor.name}:${this.isDraft?"draft":"immutable"}]`}toObject(){throw new Error(`NOT IMPLEMENTED toObject in ${this}.`)}fromRawValue(e){if(!("fromRawValue"in this.constructor))throw new Error(`NOT IMPLEMENTED static fromRawValue in ${this.constructor}.`);return this.constructor.fromRawValue(e)}[Zn](){throw new Error(`NOT IMPLEMENTED [SERIALIZE] in ${this}.`)}[Pn](){throw new Error(`NOT IMPLEMENTED [DESERIALIZE] in ${this}.`)}}class Cs extends ms{static{c(this,"_BaseSimpleModel")}static createPrimalState(e,t=null,n=Le){return new this(null,t,n)}static*createPrimalStateGen(e,t=null,n=Le){return this.createPrimalState(null,t,n)}}function Ih(i,e,t,n=Le){const s=[],r=[];for(const[o,a]of i){const[l,A]=Pl(a,n);if(s.push(...eN(o,l)),l.length&&n.earlyExitOnError)break;A===null||Array.isArray(A)&&A.length===0?t?e&&r.push(t?[o,null]:null):r.push(null):r.push(t?[o,A]:A)}return[s,r.length?r:null]}c(Ih,"_serializeContainer");class Oi extends ms{static{c(this,"_BaseContainerModel")}static createPrimalState(e,t=null,n=Le){return new this(null,e,t,n)}static*createPrimalStateGen(e,t=null,n=Le){return yield*new this(null,To,t,n).metamorphoseGen(e)}*[Symbol.iterator](){yield*this.value.entries()}get(){throw new Error(`NOT IMPLEMENTED get(key) in ${this}.`)}set(){throw new Error(`NOT IMPLEMENTED get(key) in ${this}.`)}hasOwn(e){throw new Error(`NOT IMPLEMENTED hasOwn(key) in ${this} for "${e}".`)}ownKeys(){throw new Error(`NOT IMPLEMENTED ownKeys() in ${this}.`)}has(e){return this.hasOwn(e)}keys(){return this.ownKeys()}*entries(){yield*this}*allEntries(){yield*this.entries()}}const Pg=Symbol("NO_ACTION"),Hg=Symbol("SET_NULL"),Xg=Symbol("SET_DEFAULT_FIRST"),zg=Symbol("SET_DEFAULT_LAST"),Jg=Symbol("SET_DEFAULT_FIRST_OR_NULL"),Ug=Symbol("SET_DEFAULT_LAST_OR_NULL"),Kg=Symbol("SET_DEFAULT_VALUE"),jg=Symbol("SET_DEFAULT_VALUE_OR_NULL"),qg=Symbol("CUSTOM");class ce{static{c(this,"ForeignKey")}static NULL=Symbol("NULL");static NOT_NULL=Symbol("NOT_NULL");static ALLOW_NULL=Symbol("ALLOW_NULL");static INVALID=Symbol("INVALID");static NO_ACTION=Pg;static SET_NULL=Hg;static SET_DEFAULT_FIRST=Xg;static SET_DEFAULT_LAST=zg;static SET_DEFAULT_FIRST_OR_NULL=Jg;static SET_DEFAULT_LAST_OR_NULL=Ug;static SET_DEFAULT_VALUE=Kg;static SET_DEFAULT_VALUE_OR_NULL=jg;static CUSTOM=qg;constructor(e,t,n,...s){Object.defineProperty(this,"NULL",{value:this.constructor.NULL}),Object.defineProperty(this,"INVALID",{value:this.constructor.INVALID}),Object.defineProperty(this,"targetName",{value:e}),Object.defineProperty(this,"dependencies",{value:Object.freeze(new Et([e]))});{const r=t===this.constructor.NOT_NULL,o=t===this.constructor.ALLOW_NULL;if(!r&&!o)throw new Error(`TYPE ERROR ForeignKey for ${e} nullConstraint is neither NOT_NULL nor ALLOW_NULL which is ambigous.`);Object.defineProperty(this,"notNull",{value:r}),Object.defineProperty(this,"allowNull",{value:o})}if(!new Set([this.constructor.NO_ACTION,this.constructor.SET_NULL,this.constructor.SET_DEFAULT_FIRST,this.constructor.SET_DEFAULT_LAST,this.constructor.SET_DEFAULT_FIRST_OR_NULL,this.constructor.SET_DEFAULT_LAST_OR_NULL,this.constructor.SET_DEFAULT_VALUE,this.constructor.SET_DEFAULT_VALUE_OR_NULL,this.constructor.CUSTOM]).has(n))throw new Error(`TYPE ERROR ${this} defaultConstraint is unknown: "${n}".`);if(Object.defineProperty(this,"defaultConstraint",{value:n}),n===this.constructor.SET_DEFAULT_VALUE||n===this.constructor.SET_DEFAULT_VALUE_OR_NULL){const r=s[0];Object.defineProperty(this,"defaultValue",{value:r})}else if(n===this.constructor.CUSTOM){const r=s[0];if(typeof r!="function")throw new Error(`TYPE ERROR ${this} constraint is CUSTOM, but the custom argument is not a function: (${typeof r}) "${r}"`);Object.defineProperty(this,qg,{value:r})}}toString(){return`[${this.constructor.name}:${this.targetName} ${this.notNull?"NOT NULL":"or NULL"}]`}[Pg](e,t){return t}[Hg](){return this.NULL}[Xg](e){const t=$g(e.keys(),this.NULL);if(t===this.NULL)throw js(new Error(`CONSTRAINT ERROR ${this} Can't set first key, there is no first entry.`));return t}[Jg](e){return $g(e.keys(),this.NULL)}[zg](e){const t=ep(e.keys(),this.NULL);if(t===this.NULL)throw new js(Error(`CONSTRAINT ERROR ${this} Can't set last key, there is no last entry.`));return t}[Ug](e){return ep(e.keys(),this.NULL)}[Kg](e){if(!e.has(this.defaultValue))throw js(new Error(`CONSTRAINT ERROR ${this} Can't set defaultValue "${this.defaultValue}" as key, there is no entry.`));return this.defaultValue}[jg](e){return e.has(this.defaultValue)?this.defaultValue:this.NULL}constraint(e,t){return!t||!e.has(t)?this[this.defaultConstraint](e,t):t}}class pC{static{c(this,"_BaseLink")}constructor(e){Object.defineProperty(this,"keyName",{value:e}),Object.defineProperty(this,"dependencies",{value:Object.freeze(new Et([e]))})}toString(){return`[${this.constructor.name} for Key: ${this.keyName}]`}}class Xn extends pC{static{c(this,"ValueLink")}}class fC{static{c(this,"FallBackValue")}constructor(e,t,n){Object.defineProperty(this,"Model",{value:n}),Object.defineProperty(this,"primaryName",{value:e}),Object.defineProperty(this,"fallBackName",{value:t}),Object.defineProperty(this,"dependencies",{value:Object.freeze(new Et([e,t]))})}toString(){return`[${this.constructor.name} for ${Array.from(this.dependencies)}]`}}class $t{static{c(this,"InternalizedDependency")}constructor(e,t){Object.defineProperty(this,"Model",{value:t}),Object.defineProperty(this,"dependencyName",{value:e}),Object.defineProperty(this,"dependencies",{value:Object.freeze(new Et([e]))}),Object.freeze(this)}toString(){return`[${this.constructor.name} for ${Array.from(this.dependencies)}]`}}class Pi{static{c(this,"StaticDependency")}constructor(e,t,n=le){if(Object.defineProperty(this,"dependencyName",{value:e}),!(t instanceof ms))throw new Error(`TYPE ERROR state (${t.toString()}) must be a _BaseModel in ${this}.`);if(t.isDraft)throw new Error(`VALUE ERROR state (${t.toString()}) must be immutable, but it is a draft in ${this}.`);if(Object.defineProperty(this,"state",{value:t}),n!==le){if(!(t instanceof n))throw new Error(`TYPE ERROR state (${t.toString()}) must be a ${n.name} in ${this}.`);Object.defineProperty(this,"Model",{value:n})}Object.freeze(this)}toString(){return this.dependencyName?`[${this.constructor.name} ${this.dependencyName}]`:`[${this.constructor.name}]`}static createWithInternalizedDependency(e,...t){const[n,s,r]=typeof t[0]=="string"?t:[e,...t];return[new this(e,r,s),[n,new $t(e,s)]]}}function $g(i,e=le){for(const t of i)return t;if(e!==le)return e;throw new Error("KEY ERROR not found first item of iterator.")}c($g,"getFirst");function ep(i,e=le){const t=Array.from(i);if(t.length)return t.at(-1);if(e!==le)return e;throw new Error("KEY ERROR not found last item of iterator.")}c(ep,"getLast");function iN(i){let e;for(e of i)break;return i.delete(e),e}c(iN,"setPop");function sN(i,e,t){let n=i.get(e);return n===void 0&&(n=t(),i.set(e,n)),n}c(sN,"_mapGetOrInit");function mC(i,e,t){const n=[];for(;i.size;){const s=iN(i);if(n.push(s),!!e.has(s))for(const r of e.get(s)){const o=t.get(r);o.delete(s),o.size===0&&(i.add(r),t.delete(r))}}if(t.size){const s=Array.from(t).map(([r,o])=>`"${r}"(${Array.from(o).join(", ")})`);throw new Error(`CYCLIC DEPENDENCIES ERROR unresolvable:
    ${s.join(`
    `)}
Topological order so far: ${n.join(", ")}`)}return n}c(mC,"topologicalSortKahn");function*CC(...i){for(const e of i)yield*e.entries()}c(CC,"allEntries");function*rN(...i){for(const e of i)yield*e.keys()}c(rN,"allKeys");function oN(i,e,t,n,s,r,o){const a=new Set(rN(o,i,e,t,n,s,r)),l=new Map,A=new Map;for(const[u,h]of CC(i,e,t,n,s,r))if(h.dependencies.size!==0&&!s.has(u)){a.delete(u),A.set(u,new Set(h.dependencies));for(const d of h.dependencies)sN(l,d,()=>[]).push(u)}return mC(a,l,A)}c(oN,"getTopologicallySortedInitOrder");const IC=Symbol("IMMUTABLE_WRITE_ERROR"),je=Symbol("_LOCAL_PROXIES"),ze=Symbol("_OLD_TO_NEW_SLOT"),yC=Symbol("KEY_CONSTRAINT_ERROR"),Wo=Symbol("_HAS_DRAFT_FOR_PROXY"),ur=Symbol("_HAS_DRAFT_FOR_OLD_STATE_KEY"),Yi=Symbol("_GET_DRAFT_FOR_PROXY"),hr=Symbol("_GET_DRAFT_FOR_OLD_STATE_KEY"),bC=Symbol("DRAFT_KEY_ERROR"),EC=Symbol("DELIBERATE_RESOURCE_RESOLVE_ERROR");function tp(i){return!(!(i instanceof ms)||i.isDraft)}c(tp,"_requiresPotentialWriteProxy");function Hl(i,e,t=null){return e[i]=t||!0,e}c(Hl,"_markError");function Xl(i,e){return Object.hasOwn(e,i)}c(Xl,"_isMarkedError");const Mt=Hl.bind(null,IC),js=Hl.bind(null,yC),aN=Hl.bind(null,bC),lN=Hl.bind(null,EC),np=Xl.bind(null,IC);Xl.bind(null,yC);const cN=Xl.bind(null,bC),AN=Xl.bind(null,EC);class _e{static{c(this,"_PotentialWriteProxy")}static IS_PROXY=Symbol("_POTENTIAL_WRITE_PROXY_IS_PROXY");static GET_IMMUTABLE=Symbol("_POTENTIAL_WRITE_PROXY_GET_IMMUTABLE");static GET_DRAFT=Symbol("_POTENTIAL_WRITE_PROXY_GET_DRAFT");static GET=Symbol("_POTENTIAL_WRITE_PROXY_GET");static isProxy(e){return e&&e[this.IS_PROXY]||!1}static create(e,t,n=null){if(_e.isProxy(t)||!tp(t)||e instanceof nn&&t instanceof e.WrappedType&&kt(e).wrapped===t)return t;if(_e.isProxy(e)){if(t!==e[_e.GET_IMMUTABLE].get(n))throw new Error(`ASSERTION ERROR: immutable must be at ${n} of parent immutable!`);return e.hasOwn(n)?e[ur](n)?e[hr](n):new _e(e,t,n):t}if(e.isDraft)return new _e(e,t);throw new Error("TYPE ERROR parent must be a draft or a potential write proxy of an immutable.")}createMethodProxy(e,t){if(_e.isProxy(t))throw new Error(`TOO MUCH PROXYIFICATIAN on a function that is already a proxy: "${e}".`);const n=new Set(["get"]),s={get:c(function(r,o,a){return o===_e._IS_PROXY?!0:o===_e.GET?r:Reflect.get(r,o,a)},"get"),apply:c(function(r,o,a){const l=this.hasDraft()?this.getDraft():o;let A;try{A=Reflect.apply(r,l,a)}catch(h){if(np(h)){const d=this.getDraft();return Reflect.apply(r,d,a)}else throw h}if(!n.has(e)||!tp(A))return A;if(!n.has(e))throw new Error(`UNKOWN GETTER API don't know how to get arguments for method "${e}" from parent ${o} arguments: ${a.join(", ")}.`);const u=a[0];return this.getPotentialWriteProxy(u,A)},"apply")};return new Proxy(t,{get:s.get.bind(this),apply:s.apply.bind(this)})}constructor(e,t,n=null){if(this.immutable=t,this.parent=e,n!==null&&(!_e.isProxy(e)||e[_e.GET_IMMUTABLE].get(n)!==t))throw new Error(`PROXY ERROR can't specify key "${n}" when parent is not a proxy or when immutable is not at parent.get(key).`);return this.key=n,this.draft=null,this.proxy=new Proxy(t,{get:this._handlerGet.bind(this),set:this._handlerSet.bind(this)}),this.proxy}hasDraft(){return this.draft!==null?!0:this.key!==null?this.parent[ur](this.key):this.parent[Wo](this.proxy)}getDraft(){if(this.draft!==null)return this.draft;let e=!1;if(this.key!==null?e=this.parent[hr](this.key):this.parent.isDraft&&(e=this.parent[Yi](this.proxy)),e===!1&&(e=this.immutable.getDraft()),e[k]!==this.immutable)throw new Error("ASSERTION FAILED draft[OLD_STATE] must be equal to this.immutable but is not.");return this.draft=e,this.draft}getPotentialWriteProxy(e,t){return this.constructor.create(this.proxy,t,e)}_handlerGet(e,t,n){if(t===_e.IS_PROXY)return!0;if(t===_e.GET_IMMUTABLE)return this.immutable;if(t===_e.GET_DRAFT)return this.hasDraft()?this.getDraft():void 0;if(t===_e.GET)return this.hasDraft()?this.getDraft():this.immutable;const s=n[_e.IS_PROXY]&&n[_e.GET_DRAFT]||n,r=Reflect.get(e,t,s);return typeof r=="function"?this.createMethodProxy(t,r):r}_handlerSet(e,t,n,s){const r=this.hasDraft()?this.getDraft():e;try{return Reflect.set(r,t,n,s)}catch(o){if(np(o)){const a=this.getDraft();return Reflect.set(a,t,n)}throw o}}}function kt(i,e=null){return _e.isProxy(i)?e==="immutable"?i[_e.GET_IMMUTABLE]:e==="draft"?i[_e.GET_DRAFT]:i[_e.GET]:i}c(kt,"unwrapPotentialWriteProxy");function Is(i,e){const t=Object.keys(i),n=Object.keys(e);if(t.length!==n.length)return!1;for(const s of t)if(!n.includes(s)||i[s]!==e[s])return!1;return!0}c(Is,"objectEntriesAreEqual");function zl(i,e,t=null,n=null){const s=Object.fromEntries([...Object.entries(t||{}),...Object.entries(e||{})].filter(([r])=>i.has(r)));{const r=new Set;for(const o of i.keys())Object.hasOwn(s,o)||r.add(o);if(r.size!==0)throw new Error(`VALUE ERROR missing dependencies: ${[...r].join(", ")}`)}if(n!==null)for(const[r,o]of n)s[r]=o.state;for(const r of Object.keys(s)){const o=s[r];_e.isProxy(o)&&(s[r]=kt(o))}return Object.freeze(s),s}c(zl,"collectDependencies");class Do{static{c(this,"ResourceRequirement")}constructor(...e){this.description=e}toString(){return`[${this.constructor.name} with description: ${this.description.map(e=>e&&e.toString()).join(", ")}]`}}function uN(i){throw new lN(Error(`FAILING DELIBERATELY failingResourceResolve with resource requirement: ${i}`))}c(uN,"failingResourceResolve");function hN(i,e){let t,n;do if(t=e.next(n),n=void 0,t.value instanceof Do)n=i(t.value);else if(!t.done)throw new Error(`VALUE ERROR Don't know how to handle genereator result with value ${t.value}`);while(!t.done);return t.value}c(hN,"driveResolverGenSync");function BC(i){return hN(uN,i)}c(BC,"driveResolverGenSyncFailing");async function dN(i,e){let t,n;do if(t=e.next(n),n=void 0,t.value instanceof Do)n=await i(t.value);else if(!t.done)throw new Error("VALUE ERROR Don't know how to handle genereator result with value {result.value}");while(!t.done);return t.value}c(dN,"driveResolveGenAsync");const k=Symbol("OLD_STATE"),zn=Symbol("_IS_DRAFT_MARKER"),Me=Symbol("_PRIMARY_SERIALIZED_VALUE"),To=Symbol("_DEFERRED_DEPENDENCIES"),gN=Symbol("WITH_SELF_REFERENCE");class ye extends Oi{static{c(this,"_AbstractStructModel")}static WITH_SELF_REFERENCE=gN;static has(e){for(const t of[this.fields,this.foreignKeys,this.links,this.internalizedDependencies,this.fallBackValues])if(t.has(e))return!0;return!1}static get(e){for(const t of[this.fields,this.foreignKeys,this.links,this.internalizedDependencies,this.fallBackValues])if(t.has(e))return t.get(e);throw new Error(`KEY ERROR "${e}" not found in local namespace of ${this.constructor.name}.`)}static*entries(){yield*CC(this.fields,this.foreignKeys,this.links,this.internalizedDependencies,this.fallBackValues)}static createClass(e,...t){if(typeof e!="string")throw new Error(`className must be string but is ${typeof e}`);const n=new it,s=new it,r=new it,o=new it,a=new it,l=new it,A=new Et,u=new Et,h=new it,d=new Et,g=new Et,p=new Et,f=[],m=new Set,y={[e]:class extends this{static fields=n;static foreignKeys=s;static links=r;static coherenceFunctions=o;static internalizedDependencies=a;static fallBackValues=l;static staticDependencies=h;static ownDependencies=d;static childrenExternalDependencies=g;static dependencies=p;static initOrder=f}},v=y[e];for(const R of t){if(R instanceof Pi){if(h.has(R.dependencyName))throw new Error(`VALUE ERROR ${e} multiple definitions for static dependency name "${R.dependencyName}".`);h.set(R.dependencyName,R);continue}let[Q,S]=R;if(m.has(Q))throw new Error(`VALUE ERROR ${e} multiple definitions for name "${Q}" in "${e}".`);if(m.add(Q),typeof Q!="string")throw new Error(`VALUE ERROR ${e} definition name must be string but is ${typeof Q}.`);if(S===this.WITH_SELF_REFERENCE){const[,,M]=R;S=M(v)}if(S instanceof st){o.set(Q,S);for(const M of S.dependencies)u.add(M)}else if(S instanceof $t){a.set(Q,S);for(const M of S.dependencies)A.add(M)}else if(S instanceof ce)s.set(Q,S);else if(S instanceof pC)r.set(Q,S);else if(S instanceof fC)l.set(Q,S);else if(S.prototype instanceof ms){n.set(Q,S);for(const M of S.dependencies)u.add(M)}else throw new Error(`VALUE ERROR: don't know how to handle defintion for ${e} ${Q}:${S}`)}for(const[R,Q]of s)if(!n.has(Q.targetName)&&!a.has(Q.targetName))throw new Error(`KEY ERROR: ${e} foreignKey "${R}" doesn't reference an existing field: ${Q}.`);for(const[R,Q]of r)for(const S of Q.dependencies)if(!s.has(S))throw new Error(`LINK ERROR: ${e} link "${R}" ${Q} foreign key "${S}" does not exist.`);for(const[R,Q]of l)for(const S of Q.dependencies)if(!r.has(S)&&!a.has(S))throw new Error(`KEY ERROR: ${e} fallBackValue "${R}" ${Q} name "${S}" does not exist.`);const G=this.has.bind({fields:n,foreignKeys:s,links:r,internalizedDependencies:a,fallBackValues:l});$c(d,Vg(A,R=>!h.has(R))),$c(g,Vg(u,R=>!G(R))),$c(p,[...d,...g]),$S(f,oN(o,n,s,r,a,l,g));for(const R of Object.values(v))Object.freeze(R);return Object.freeze(v),v}constructor(e=null,t=null,n=null,s=Le){if(super(e),e===null&&t===null)throw new Error(`TYPE ERROR either oldState or dependencies are required in ${this.constructor.name}.`);if(e!==null&&t!==null)throw new Error("TYPE ERROR can't constuct with both oldState and dependencies");if(e&&e.isDraft)throw new Error(`LIFECYCLE ERROR [${this.constructor.name}] oldState ${e} is draft but must be immutable.`);if(Object.defineProperty(this,"_value",{value:new it,configurable:!0}),Object.defineProperty(this,"dependencies",{get:c(()=>{if(this[k]===null)throw new Error("Primal State has no dependencies yet!");return this[k].dependencies},"get"),configurable:!0}),this[je]={byProxy:new Map,byKey:new Map,changedBySetter:new Set},t!==null&&(n!==null&&(this[Me]=[this._deserializeToMap(n,s),s]),t!==To))return this.metamorphose(t)}_getChangedDependencies(){if(this[k]===null)return new Set(this.constructor.dependencies);const e=new Set;for(const t of this.constructor.dependencies.keys())this[k].dependencies[t]!==this.dependencies[t]&&e.add(t);return e}collectChildDependencies(e,t){return Object.fromEntries(hC(t.dependencies,n=>{const s=e.get(n);if(s===void 0)throw new Error(`VALUE ERROR in ${this} dependency "${n}" for child "${t}" is undefined.`);return[n,s]}))}*_lockItem(e,t,n,s){if(t.has(s)||(t.add(s),!this.hasOwn(s)))return;const r=this._value.has(s)?this._value.get(s):this[k].get(s),o=this.constructor.get(s);yield*this._lockDependencies(e,t,n,o.dependencies);let a;if(o instanceof ce){const l=o,A=e.get(l.targetName),u=l.constraint(A,r.value),h=u?.next instanceof Function?yield*u:u;let d=null;h!==r.value&&(d=r.isDraft?r:r.getDraft(),d.value=h),a=d!==null?d.metamorphose():r.isDraft?r.metamorphose():r}else{const l=this.collectChildDependencies(e,o);a=r.isDraft?yield*r.metamorphoseGen(l):Is(l,r.dependencies)?r:yield*r.getDraft().metamorphoseGen(l)}(!this[k]||this[k].get(s)!==a)&&n.add(s),e.set(s,a)}*_lockDependencies(e,t,n,s){for(const r of s)yield*this._lockItem(e,t,n,r)}_deserializeToMap(e,t){const n=t?.structStoreKeys,s=t?.structAsDict,r=new Map;if(n){const o=s?Object.entries(e):e;for(const[a,l]of o){if(!this.hasOwn(a)){if(t.strict)throw new Error(`VALUE ERROR serializedValue has key "${a}" but that is not owned by this struct. Own keys: ${this.ownKeys().join(", ")}.`);continue}l!=null&&r.set(a,l)}}else for(const[o,a]of this.ownKeys().entries()){const l=e[o];l!=null&&r.set(a,l)}return r}*#e(e={}){const[t,n]=this[Me]||[new Map],s=c(A=>{if(!t||!t.has(A))return[];const u=t.get(A);return t.delete(A),[u,n]},"getSerialized");delete this[Me];const r=zl(this.constructor.dependencies,e,this[k]?.dependencies,this.constructor.staticDependencies);for(const[A,u]of Object.entries(r)){if(_e.isProxy(u)&&this[k]!==null)throw new Error(`VALUE ERROR ${this} dependency "${A}" is a _PotentialWriteProxy but this is not a primal draft this[OLD_STATE]:${this[k]}.`);if(u===void 0)throw new Error(`VALUE ERROR dependency "${A}" cannot be undefined.`)}Object.defineProperty(this,"dependencies",{value:Object.freeze(r),writable:!0,configurable:!0});const o=this._getChangedDependencies();if(this[k]!==null&&o.size===0&&this._value.size===0)return this[k];const a=new Map,l=new Set;for(const A of this.constructor.initOrder)if(this.constructor.childrenExternalDependencies.has(A)){if(!(A in this.dependencies)||this.dependencies[A]===void 0)throw new Error(`DEPENDENCY ERROR ${this.constructor.name} requires "${A}" in dependenciesData.`);a.set(A,this.dependencies[A])}else if(this.constructor.internalizedDependencies.has(A)){const u=this.constructor.internalizedDependencies.get(A);if(!(u.dependencyName in this.dependencies)||this.dependencies[u.dependencyName]===void 0)throw new Error(`DEPENDENCY ERROR ${this.constructor.name} requires "${u.dependencyName}" in dependenciesData. for "${A}": ${u}.`);a.set(A,this.dependencies[u.dependencyName])}else if(this.constructor.fields.has(A)){if(this[k]===null&&!this._value.has(A)){const u=this.constructor.fields.get(A),h=this.collectChildDependencies(a,u);for(const[g,p]of Object.entries(h)){if(!this.hasOwn(g))continue;const f=h[g]=kt(p);f.isDraft&&(h[g]=f.metamorphose({}),this.set(g,f),a.set(g,this.get(g)))}const d=yield*u.createPrimalStateGen(h,...s(A));this._value.set(A,d)}a.set(A,this.get(A))}else if(this.constructor.coherenceFunctions.has(A)){const u=this.constructor.coherenceFunctions.get(A),h=this.collectChildDependencies(a,u),d=u.fn(h);d?.next instanceof Function&&(yield*d)}else if(this.constructor.foreignKeys.has(A)){const u=this.constructor.foreignKeys.get(A);if(yield*this._lockDependencies(a,l,o,u.dependencies),this[k]===null&&!this._value.has(A)){const d=yield*ip.createPrimalStateGen(null,...s(A));this._value.set(A,d)}const h=this.get(A);a.set(A,h)}else if(this.constructor.links.has(A)){const u=this.constructor.links.get(A);try{yield*this._lockDependencies(a,l,o,u.dependencies)}catch(f){throw f.message=`${f.message} (in ${this})`,f}const h=this.constructor.foreignKeys.get(u.keyName),d=a.get(u.keyName).value,g=a.get(h.targetName);let p;if(d===h.NULL)if(h.allowNull)p=h.NULL;else throw new Error(`INTERNAL LOGIC ERROR ${this.constructor.name} can't resolve link "${A}" ${u}: key-value for key ${u.keyName} is null but null is not allowed.`);else if(g.has(d))p=g.get(d);else if(this[k]===null)p=h.INVALID;else throw new Error(`KEY ERROR ${this.constructor.name} not found key "${u.keyName}" (is ${d.toString()}) in ${h.targetName}.`);a.set(A,p)}else if(this.constructor.fallBackValues.has(A)){const u=this.constructor.fallBackValues.get(A),h=a.get(u.primaryName),d=h!==ce.NULL?h:a.get(u.fallBackName);if(d===ce.NULL)throw new Error(`VALUE ERROR fall back value "${u.fallBackName}" is NULL`);if(kt(d).constructor!==u.Model)throw new Error(`TYPE ERROR fall back value is not a ${u.Model.name} but a ${d.constructor.name}.`);a.set(A,d)}else throw new Error(`UNKOWN NAME ${this.constructor.name} Don't know how to treat "${A}".`);if(t.size)throw new Error(`VALUE ERROR a serialized value was given, but not all keys were used, unused keys: ${Array.from(t.keys()).join(",")}`);for(const A of this.ownKeys())yield*this._lockItem(a,l,o,A);if(this[k]&&o.size===0)return this[k];for(const A of this.ownKeys())this._value.set(A,a.get(A));{const A=[];for(const[u,h]of this.constructor.fields.entries()){const d=this._value.get(u);d.constructor!==h&&A.push(`"${u}" ${d} is not a ${h.name} (but a ${d.constructor.name}).`)}if(A.length)throw new Error(`TYPE ERROR can't metamorphose ${this}wrong types: ${A.join(", ")}.`)}for(const A of this.constructor.foreignKeys.keys()){const u=this._value.get(A);if(u.constructor!==ip)throw new Error(`TYPE ERROR can't metamorphose ${this} key "${A}" ${u} is not a KeyValueModel (but a ${u.constructor.name}).`)}return this}#t(){Object.defineProperty(this,"dependencies",{value:Object.freeze(this.dependencies),writable:!1,configurable:!1}),delete this[k],Object.defineProperty(this,"_value",{value:Object.freeze(this._value),writable:!1,configurable:!1}),Object.defineProperty(this,zn,{value:!1,configurable:!1}),delete this[je],Object.freeze(this)}#n(){delete this.dependencies}*metamorphoseGen(e={}){if(!this.isDraft)throw new Error(`LIFECYCLE ERROR ${this} must be in draft mode to metamorphose.`);let t;try{t=yield*this.#e(e)}finally{t===this?this.#t():this.#n()}return t}get value(){if(this.isDraft)throw new Error(`LIFECYCLE ERROR ${this} will only return this.value when immutable/not a draft..`);return this._value}*[Symbol.iterator](){for(const e of this.ownKeys())yield[e,this.get(e)]}*allEntries(){for(const e of this.keys())yield[e,this.get(e)]}get size(){return this.constructor.fields.size+this.constructor.foreignKeys.size}hasOwn(e){return this.constructor.fields.has(e)||this.constructor.foreignKeys.has(e)}has(e){return this.hasOwn(e)||this.constructor.links.has(e)||this.constructor.internalizedDependencies.has(e)||this.constructor.fallBackValues.has(e)}static ownKeys(){return[...this.fields.keys(),...this.foreignKeys.keys()]}ownKeys(){return this.constructor.ownKeys()}keys(){return[...this.ownKeys(),...this.constructor.links.keys(),...this.constructor.internalizedDependencies.keys(),...this.constructor.fallBackValues.keys()]}[Wo](e){if(!this.isDraft||!this[je].byProxy.has(e))return!1;const t=this[je].byProxy.get(e),n=this._value.get(t);return!(!n||!n.isDraft)}[ur](e){if(!this.isDraft||!this._value.has(e)||this[je].changedBySetter.has(e))return!1;const t=this._value.get(e);return!(!t||!t.isDraft)}[hr](e){if(!this.isDraft)throw Mt(new Error(`IMMUTABLE WRITE ATTEMPT ${this}[_GET_DRAFT_FOR_OLD_STATE_KEY](${e}) is immutable, not a draft.`));if(!this.hasOwn(e))throw new Error(`KEY ERROR "${e}" not found in ${this}.`);if(this[k]===null)throw new Error("ASSERTION FAILED this[OLD_STATE] should exist in this method.");if(this[je].changedBySetter.has(e))return!1;const t=this._value.has(e)?this._value.get(e):this[k].get(e);if(t.isDraft)return t;const n=t.getDraft();return this._value.set(e,n),n}[Yi](e){if(!this.isDraft)throw Mt(new Error(`IMMUTABLE WRITE ATTEMPT ${this} is immutable, not a draft in [_GET_DRAFT_FOR_PROXY].`));if(!this[je].byProxy.has(e))return!1;const t=this[je].byProxy.get(e),n=this._value.has(t)?this._value.get(t):this[k].get(t);if(n.isDraft)return n;const s=n.getDraft();return this._value.set(t,s),s}getDraftFor(e,t=le){let n;try{n=this._getOwn(e,t)}catch(s){throw s.message.startsWith("KEY ERROR")?aN(s):s}return _e.isProxy(n)?this[Yi](n):n}_getOwn(e){if(!this.hasOwn(e))throw new Error(`KEY ERROR "${e}" not found in ${this}.`);let t=this._value.has(e)&&this._value.get(e);if(!t&&this[k]!==null&&(t=this[k].get(e)),!t)throw new Error(`INTERNAL LOGIC ERROR "${e}" should exist, but it doesn't`);if(!this.isDraft)return t;if(!t.isDraft&&this[je].byKey.has(e))return this[je].byKey.get(e);const n=_e.create(this,t);return _e.isProxy(n)&&(this[je].byKey.set(e,n),this[je].byProxy.set(n,e)),n}_getLink(e){if(!this.constructor.links.has(e))throw new Error(`KEY ERROR "${e}" is not a link found in ${this}.`);const t=this.constructor.links.get(e),n=this.constructor.foreignKeys.get(t.keyName),s=this.get(t.keyName),r=this.get(n.targetName);return s.value===ce.NULL?ce.NULL:r.get(s.value)}_getFallBackValue(e){if(!this.constructor.fallBackValues.has(e))throw new Error(`KEY ERROR "${e}" is not a fallBackValues found in ${this}.`);const t=this.constructor.fallBackValues.get(e),n=this.get(t.primaryName);return n!==ce.NULL?n:this.get(t.fallBackName)}get(e,t=le){if(this.hasOwn(e))return this._getOwn(e);if(this.constructor.internalizedDependencies.has(e))return this.dependencies[this.constructor.internalizedDependencies.get(e).dependencyName];if(this.constructor.links.has(e))return this._getLink(e);if(this.constructor.fallBackValues.has(e))return this._getFallBackValue(e);if(t!==le)return t;throw new Error(`KEY ERROR "${e}" not found in ${this}.`)}set(e,t){if(!this.isDraft)throw Mt(new Error(`NOT DRAFT ERROR: ${this} can't call set when not in draft phase.`));if(!this.hasOwn(e))throw new Error(`KEY ERROR trying to set not owned (or unknown) "${e}" in ${this}.`);if(this._value.set(e,kt(t)),this[je].changedBySetter.add(e),this[je].byKey.has(e)){const n=this[je].byKey.get(e);this[je].byKey.delete(e),this[je].byProxy.delete(n)}}[Zn](e=Le){const[t,n]=Ih(this,!1,Le.structStoreKeys,e);return[t,n!==null&&e?.structAsDict&&Le.structStoreKeys?Object.fromEntries(n):n]}}class vt extends Oi{static{c(this,"_AbstractListModel")}static get Model(){throw new Error(`NOT IMPLEMENTED Model is not defined in ${this.name}`)}static get dependencies(){return this.Model.dependencies}static createClass(e,t){const n={[e]:class extends this{static Model=t}};return Object.freeze(n[e]),n[e]}constructor(e=null,t=null,n=null,s=Le){if(e===null&&t===null)throw new Error("TYPE ERROR either oldState or dependencies are required.");if(e!==null&&t!==null)throw new Error("TYPE ERROR can't constuct with both oldState and dependencies");if(e&&e.isDraft)throw new Error(`LIFECYCLE ERROR oldState ${e} is draft but must be immutable.`);if(super(e),Object.defineProperty(this,"_value",{value:new Array(this[k]!==null?this[k].length:0),writable:!1,configurable:!0}),Object.defineProperty(this,"dependencies",{get:c(()=>{if(this[k]===null)throw new Error("Primal State has no dependencies yet!");return this[k].dependencies},"get"),configurable:!0}),this[ze]=[...this._value.keys()].map(r=>[r,null]),t!==null&&(n!==null&&(this[Me]=[n,s]),t!==To))return this.metamorphose(t)}*#e(e={}){const t=zl(this.constructor.dependencies,e,this[k]?.dependencies);if(Object.defineProperty(this,"dependencies",{value:Object.freeze(t),writable:!0,configurable:!0}),this[Me]){const[s,r]=this[Me],o=[];for(const a of s){const l=yield*this.constructor.Model.createPrimalStateGen(this.dependencies,a,r);o.push(l)}this.push(...o)}delete this[Me];const n=this[k]!==null&&Is(this[k].dependencies,this.dependencies);if(n&&this.size===this[k].size&&Object.values(this._value).length===0)return this[k];for(const s of this._value.keys()){let r=Object.hasOwn(this._value,s)&&this._value[s];if(!r&&this[k]!==null){const[a]=this[ze][s];r=this[k].get(a)}if(!(r instanceof this.constructor.Model))throw new Error(`TYPE ERROR ${this.constructor.name} expects ${this.constructor.Model.name} wrong type in ${s} ("${r}" typeof ${typeof r}).`);const o=r.isDraft?yield*r.metamorphoseGen(this.dependencies):Is(this.dependencies,r.dependencies)?r:yield*r.getDraft().metamorphoseGen(this.dependencies);this._value[s]=o}return this[k]!==null&&n&&this.size===this[k].size&&this._value.every((s,r)=>s===this[k].get(r))?this[k]:this}#t(){Object.defineProperty(this,"dependencies",{value:Object.freeze(this.dependencies),writable:!0,configurable:!0}),delete this[k],Object.defineProperty(this,"_value",{value:Object.freeze(this._value),writable:!1,configurable:!1}),Object.defineProperty(this,zn,{value:!1,configurable:!1}),delete this[ze],Object.freeze(this)}#n(){delete this.dependencies}*metamorphoseGen(e={}){if(!this.isDraft)throw new Error(`LIFECYCLE ERROR ${this} must be in draft mode to metamorphose.`);let t;try{t=yield*this.#e(e)}finally{t===this?this.#t():this.#n()}return t}get value(){if(this.isDraft)throw new Error(`LIFECYCLE ERROR ${this} will only return this.value when immutable/not a draft..`);return this._value}get length(){return this._value.length}get size(){return this._value.length}hasOwn(e){const[t]=this.keyToIndex(e);return t!==null}ownKeys(){return[...this._value.keys()].map(e=>e.toString(10))}*[Symbol.iterator](){for(const e of this.ownKeys())yield[e,this.get(e)]}[Wo](e){if(!this.isDraft)return!1;const t=this[ze].findIndex(([,s])=>s===e);if(t===-1)return!1;const n=Object.hasOwn(this._value,t)&&this._value[t];return!(!n||!n.isDraft)}[ur](e){if(!this.isDraft)return!1;const[t,n]=this[k].keyToIndex(e);if(t===null)throw new Error(n);const s=this[ze].findIndex(([o])=>o===t);if(s===-1)return!1;const r=Object.hasOwn(this._value,s)&&this._value[s];return!(!r||!r.isDraft)}[hr](e){if(!this.isDraft)throw Mt(new Error(`IMMUTABLE WRITE ATTEMPT ${this}[_GET_DRAFT_FOR_OLD_STATE_KEY](${e}) is immutable, not a draft.`));const[t,n]=this[k].keyToIndex(e);if(t===null)throw new Error(n);const s=this[ze].findIndex(([a])=>a===t);if(s===-1)return!1;let r=Object.hasOwn(this._value,s)&&this._value[s];if(r||(r=this[k].get(t)),r.isDraft)return r;const o=r.getDraft();return this._value[s]=o,o}[Yi](e){if(!this.isDraft)throw Mt(new Error(`IMMUTABLE WRITE ATTEMPT ${this} is immutable, not a draft in [_GET_DRAFT_FOR_PROXY].`));const t=this[ze].findIndex(([,r])=>r===e);if(t===-1)return!1;let n=Object.hasOwn(this._value,t)&&this._value[t];if(!n){const[r]=this[ze][t];n=this[k].get(r)}if(n.isDraft)return n;const s=n.getDraft();return this._value[t]=s,s}getDraftFor(e,t=le){const n=this.get(e,t);return _e.isProxy(n)?this[Yi](n):n}keyToIndex(e){if(e===ce.NULL)return[null,"KEY ERROR ForeignKey.NULL is not a key."];if(e===void 0)return[null,"KEY ERROR key is undefined."];const t=e.toString();let n=parseInt(t,10);return isNaN(n)?[null,`KEY ERROR can't parse "${t}" as integer.`]:(n<0&&(n=n+this._value.length),n<0||n>=this._value.length?[null,`KEY ERROR NOT FOUND key "${t}" is not an index (parseInt: ${n}) (index < 0 || index >= lenght ${this._value.length}). in ${this}`]:[n,null])}indexOf(e,t){return this._value.indexOf(e,t)}get(e,t=le){const[n,s]=this.keyToIndex(e);if(n===null){if(t!==le)return t;throw new Error(s)}if(!this.isDraft)return this._value[n];let r=Object.hasOwn(this._value,n)&&this._value[n];if(!r){const[a,l]=this[ze][n];if(l)return l;r=this[k].get(a)}const o=_e.create(this,r);return _e.isProxy(o)&&(this[ze][n][1]=o),o}set(e,t){const[n,s]=this.keyToIndex(e);if(n===null)throw new Error(s);this.splice(n,1,t)}push(...e){return this.splice(1/0,0,...e),this.length}unshift(...e){return this.splice(0,0,...e),this.length}pop(){return this.splice(-1,1)[0]}shift(){return this.splice(0,1)[0]}delete(e){const[t]=this.keyToIndex(e);if(t!==null)return this.splice(t,1)[0]}splice(e,t,...n){if(!this.isDraft)throw Mt(new Error(`NOT DRAFT ERROR: ${this} can't call splice when not in draft phase.`));const s=this._value.splice(e,t,...n.map(o=>kt(o))),r=this[ze].splice(e,t,...new Array(n.length).fill(null).map(()=>[]));for(let o=0;o<s.length;o++)if(!Object.hasOwn(s,o)){const[a]=r[o];s[o]=this[k].get(a)}return s}[Zn](e=Le){return Ih(this,!0,!1,e)}}const Dr=Object.freeze({KEYS_ALPHA:Symbol("ORDER_KEYS_ALPHA"),KEYS_ALPHA_REVERSE:Symbol("ORDER_KEYS_ALPHA_REVERSE"),CUSTOM:Symbol("ORDER_CUSTOM"),CUSTOM_REVERSE:Symbol("ORDER_CUSTOM_REVERSE")});class Ue extends Oi{static{c(this,"_AbstractOrderedMapModel")}static get Model(){throw new Error(`NOT IMPLEMENTED Model is not defined in ${this.name}`)}static get dependencies(){return this.Model.dependencies}static ORDER=Dr;static[Dr.KEYS_ALPHA](e){const t=new Map,n=[];for(const[s,r]of e)t.set(s,[s,r]),n.push(s);return n.sort(qS).map(s=>t.get(s))}static[Dr.KEYS_ALPHA_REVERSE](e){return this[this.ORDER.KEYS_ALPHA](e).reverse()}static[Dr.CUSTOM](e){return this._customOrderingFn(e)}static[Dr.CUSTOM_REVERSE](e){return this._customOrderingFn(e).reverse()}static createClass(e,t,n={}){if(n={ordering:le,customOrderingFn:le,validateKeyFn:le,...n},n.ordering!==le){if(!new Set(Object.values(this.ORDER)).has(n.ordering))throw new Error(`KEY ERROR setup.ordering unknown "${n.ordering.toString()}" allowed values are ${this.name}.ORDER.(${Object.keys(this.ORDER).join("|")}).`);if(n.ordering===this.ORDER.CUSTOM||n.ordering===this.ORDER.CUSTOM_REVERSE){if(n.customOrderingFn===le)throw new Error(`VALUE ERROR setup.ordering is "${n.ordering.toString()}" but setup.customOrderingFn is not specified`);if(typeof n.customOrderingFn!="function")throw new Error(`VALUE ERROR setup.customOrderingFn must be a function but is "${typeof n.customOrderingFn}".`)}}if(n.validateKeyFn!==le&&typeof n.validateKeyFn!="function")throw new Error(`VALUE ERROR setup.validateKeyFn must be a function but is "${typeof n.validateKeyFn}".`);return{[e]:class extends this{static Model=t;static ORDERING=n.ordering===le?null:n.ordering;static _customOrderingFn=n.customOrderingFn===le?function(){throw new Error(`NOT IMPLEMENTED _customOrderingFn is not defined in ${this.name}`)}:n.customOrderingFn;static validateKeyFn=n.validateKeyFn===le?null:n.validateKeyFn}}[e]}constructor(e=null,t=null,n=null,s=Le){if(e===null&&t===null)throw new Error("TYPE ERROR either oldState or dependencies are required.");if(e!==null&&t!==null)throw new Error("TYPE ERROR can't constuct with both oldState and dependencies");if(e&&e.isDraft)throw new Error(`LIFECYCLE ERROR oldState ${e} is draft but must be immutable.`);if(super(e),Object.defineProperty(this,"_value",{value:new Array(this[k]!==null?this[k].length:0),writable:!1,configurable:!0}),Object.defineProperty(this,"_keys",{value:new it,writable:!1,configurable:!0}),Object.defineProperty(this,"dependencies",{get:c(()=>{if(this[k]===null)throw new Error("Primal State has no dependencies yet!");return this[k].dependencies},"get"),configurable:!0}),this[ze]=this[k]!==null?[...this[k]].map(([r],o)=>[o,r,null]):[],this._updateKeys(),t!==null&&(n!==null&&(this[Me]=[n,s]),t!==To))return this.metamorphose(t)}*#e(e={}){const t=zl(this.constructor.dependencies,e,this[k]?.dependencies);if(Object.defineProperty(this,"dependencies",{value:Object.freeze(t),writable:!0,configurable:!0}),this[Me]){const[s,r]=this[Me],o=[];for(const[a,l]of s){const A=yield*this.constructor.Model.createPrimalStateGen(this.dependencies,l,r);o.push([a,A])}this.push(...o)}delete this[Me];const n=this[k]!==null&&Is(this[k].dependencies,this.dependencies);if(n&&this.size===this[k].size&&Object.values(this._value).length===0)return this[k];for(const s of this._value.keys()){let r=Object.hasOwn(this._value,s)?this._value[s]:this[k].value[this[ze][s][0]];const[o,a]=r||[];if(!(a instanceof this.constructor.Model))throw new Error(`TYPE ERROR ${this.constructor.name} expects ${this.constructor.Model.name} wrong type at ${o} in ${s} ("${a}" typeof ${typeof a}).`);const l=a.isDraft?yield*a.metamorphoseGen(this.dependencies):Is(this.dependencies,a.dependencies)?a:yield*a.getDraft().metamorphoseGen(this.dependencies);this._value[s]=Object.freeze([o,l])}if(this.constructor.ORDERING!==null){const s=this.constructor[this.constructor.ORDERING](this._value);this._value.splice(0,1/0);for(const r of s)this._value.push(r)}return this[k]!==null&&n&&this.size===this[k].size&&this._value.every((s,r)=>{const[o,a]=s,[l,A]=this[k].value[r];return o===l&&a===A})?this[k]:this}#t(){Object.defineProperty(this,"dependencies",{value:Object.freeze(this.dependencies),writable:!0,configurable:!0}),delete this[k],Object.defineProperty(this,"_value",{value:Object.freeze(this._value),writable:!1,configurable:!1}),this._updateKeys(),Object.defineProperty(this,"_keys",{value:Object.freeze(this._keys),writable:!1,configurable:!1}),Object.defineProperty(this,zn,{value:!1,configurable:!1}),delete this[ze],Object.freeze(this)}#n(){delete this.dependencies}*metamorphoseGen(e={}){if(!this.isDraft)throw new Error(`LIFECYCLE ERROR ${this} must be in draft mode to metamorphose.`);let t;try{t=yield*this.#e(e)}finally{t===this?this.#t():this.#n()}return t}_updateKeys(){this._keys.clear();for(const e of this._value.keys()){const t=Object.hasOwn(this._value,e)?this._value[e][0]:this[ze][e][1];this._keys.set(t,e)}}get value(){if(this.isDraft)throw new Error(`LIFECYCLE ERROR ${this} will only return this.value when immutable/not a draft..`);return this._value}*[Symbol.iterator](){for(const e of this.ownKeys())yield[e,this.get(e)]}*indexedEntries(){for(const[e,t]of this){const[n]=this.keyToIndex(e);yield[n,[e,t]]}}get length(){return this._value.length}get size(){return this._value.length}hasOwn(e){return this._keys.has(e)}[Wo](e){if(!this.isDraft)return!1;const t=this[ze].findIndex(([,,s])=>s===e);if(t===-1)return!1;const[,n]=Object.hasOwn(this._value,t)&&this._value[t]||[null,null];return!(!n||!n.isDraft)}[ur](e){if(!this.isDraft)return!1;const[t,n]=this[k].keyToIndex(e);if(t===null)throw new Error(n);const s=this[ze].findIndex(([,o])=>o===e);if(s===-1)return!1;const[,r]=Object.hasOwn(this._value,s)&&this._value[s]||[null,null];return!(!r||!r.isDraft)}[hr](e){if(!this.isDraft)throw Mt(new Error(`IMMUTABLE WRITE ATTEMPT ${this}[_GET_DRAFT_FOR_OLD_STATE_KEY](${e}) is immutable, not a draft.`));const[t,n]=this[k].keyToIndex(e);if(t===null)throw new Error(n);const s=this[ze].findIndex(([,A])=>A===e);if(s===-1)return!1;let r=Object.hasOwn(this._value,s)&&this._value[s];if(!r){const A=this[k].get(e);r=[e,A]}const[o,a]=r;if(a.isDraft)return a;const l=a.getDraft();return this._value[s]=Object.freeze([o,l]),l}[Yi](e){if(!this.isDraft)throw Mt(new Error(`IMMUTABLE WRITE ATTEMPT ${this} is immutable, not a draft in [_GET_DRAFT_FOR_PROXY].`));const t=this[ze].findIndex(([,,a])=>a===e);if(t===-1)return!1;let n=Object.hasOwn(this._value,t)&&this._value[t];if(!n){const[,a]=this[ze][t],l=this[k].get(a);n=[a,l]}const[s,r]=n;if(r.isDraft)return r;const o=r.getDraft();return this._value[t]=Object.freeze([s,o]),o}getDraftFor(e,t=le){const n=this.get(e,t);return _e.isProxy(n)?this[Yi](n):n}get(e,t=le){const[n,s]=this.keyToIndex(e);if(n===null){if(t!==le)return t;throw new Error(s)}if(!this.isDraft)return this._value[n][1];let r=Object.hasOwn(this._value,n)&&this._value[n][1];if(!r){const[a,,l]=this[ze][n];if(l)return l;r=this[k].getIndex(a)}const o=_e.create(this,r);return _e.isProxy(o)&&(this[ze][n][2]=o),o}keyToIndex(e){return this._keys.has(e)?[this._keys.get(e),null]:[null,`KEY ERROR "${e}" not found.`]}indexOfKey(e){return this._keys.has(e)?this._keys.get(e):-1}indexToKey(e){let t=parseInt(e,10);return isNaN(t)?[null,`KEY ERROR can't parse "${e}" as integer.`]:(t<0&&(t=t+this._value.length),t<0||t>=this._value.length?[null,`KEY ERROR NOT FOUND index "${e}" is not an index (= ${t}) (index > 0 && index < ${this._value.length}.`]:[Object.hasOwn(this._value,t)?this._value[t][0]:this[ze][t][1],null])}keyOfIndex(e,t=le){const[n,s]=this.indexToKey(e);if(n===null){if(t!==le)return t;throw new Error(s)}return n}getIndex(e,t=le){const n=this.keyOfIndex(e,t);return this.get(n,t)}ownKeys(){return this._keys.keys()}indexOf(e,t){if(t>=this._value.length)return-1;t<0&&(t=t+this._value.length),(t===void 0||t<0)&&(t=0);let s=(t===0?this._value:this._value.slice(t)).findIndex(([,r])=>r===e);return s!==-1&&t&&(s=s+t),s}static validateKey(e){const t=typeof e;return(new Set(["string","number","boolean"]).has(t)||e===null)&&(t!=="number"||isFinite(e))?e.indexOf(D.SEPARATOR)!=-1?[!1,`key can't contain the path separator "${D.SEPARATOR}" as path parts are not reliably escaped so far. Key is "${e}". (FIXME)`]:this.validateKeyFn!==null?this.validateKeyFn(e):[!0,null]:[!1,`the type of a key must be string, a finite number, boolean or null but key "${e}" is ${t}`]}_validateKey(e){return this.constructor.validateKey(e)}arraySplice(e,t,...n){if(!this.isDraft)throw Mt(new Error(`NOT DRAFT ERROR: ${this} can't call arraySplice when not in draft phase.`));const s=n.map((l,A)=>{if(!Array.isArray(l))throw new Error(`VALUE ERROR key-value pair must be an array, entry ${A}: ${l}`);const u=Array.from(l);if(!u.length>=2)throw new Error(`TYPE ERROR Key-Value pair must a length of at least 2 [key, value] but entry ${A} ${u} length is ${u.length}`);const[h,d]=this._validateKey(u[0]);if(!h)throw new Error(`TYPE ERROR in entry ${A}: ${d}`);return Object.freeze(u)}),r=this._value.splice(e,t,...s.map(l=>{const A=kt(l[1]);return l[1]!==A?[l[0],A]:l}));this[ze].splice(e,t,...new Array(n.length).fill(null).map(()=>[]));const o=new Set,a=[];for(let l=this._value.length-1;l>=0;l--){let A=Object.hasOwn(this._value,l)?this._value[l]:this[k].value[this[ze][l][0]],[u]=A;if(o.has(u)){a.push(...this._value.splice(l,1)),this[ze].splice(l,1);continue}o.add(u),Object.isFrozen(A)||(this._value[l]=Object.freeze(A.slice()))}return a.reverse(),r.push(...a),this._updateKeys(),r}splice(e,t,...n){const[s,r]=this.keyToIndex(e);if(s===null)throw new Error(r);return this.arraySplice(s,t,...n)}set(e,t){const[n]=this.keyToIndex(e);this.arraySplice(n===null?1/0:n,1,[e,t])}delete(e){const[t]=this.keyToIndex(e);if(t!==null)return this.arraySplice(t,1)[0]}push(...e){return this.arraySplice(1/0,0,...e),this.size}unshift(...e){return this.arraySplice(0,0,...e),this.size}pop(){return this.arraySplice(-1,1)[0]}shift(){return this.arraySplice(0,1)[0]}setSimpleValue(e,t){this.has(e)||this.set(e,this.constructor.Model.createPrimalDraft()),this.get(e).set(t)}[Zn](e=Le){return Ih(this,!0,!0,e)}}class nn extends Oi{static{c(this,"_AbstractDynamicStructModel")}static get BaseType(){throw new Error(`NOT IMPLEMENTED BaseType is not defined in ${this.name}`)}static get availableTypesDependencyName(){throw new Error(`NOT IMPLEMENTED availableTypesDependencyName is not defined in ${this.name}`)}static get dependencies(){return this.dependenciesNames}static createClass(e,t,n,s){let r=null,o=null,a=[];typeof t=="string"?(a.push(t),o=t):r=t;const l={[e]:class extends this{static BaseType=r;static availableTypesDependencyName=o;static modelDependencyName=n;static dependenciesNames=Object.freeze(new Et([n,...a,...s]))}};return Object.freeze(l[e]),l[e]}constructor(e=null,t=null,n=null,s=Le){if(super(e),e===null&&t===null)throw new Error(`TYPE ERROR either oldState or dependencies are required in ${this.constructor.name}.`);if(e!==null&&t!==null)throw new Error("TYPE ERROR can't constuct with both oldState and dependencies");if(e&&e.isDraft)throw new Error(`LIFECYCLE ERROR [${this.constructor.name}] oldState ${e} is draft but must be immutable.`);if(Object.defineProperty(this,"_value",{value:this[k]!==null&&this[k].hasWrapped?this[k].wrapped.getDraft():null,configurable:!0}),Object.defineProperty(this,"dependencies",{get:c(()=>{if(this[k]===null)throw new Error("Primal State has no dependencies yet!");return this[k].dependencies},"get"),configurable:!0}),this[je]={byProxy:new Map,byKey:new Map,changedBySetter:new Set},t!==null&&(n!==null&&(this[Me]=[n,s]),t!==To))return this.metamorphose(t)}*#e(e={}){const t=zl(this.constructor.dependencies,e,this[k]?.dependencies);Object.defineProperty(this,"dependencies",{value:Object.freeze(t),writable:!0,configurable:!0});const n=this[k]!==null&&Is(this[k].dependencies,this.dependencies);if(n&&this[k].wrapped===this._value)return this[k];const s=this.WrappedType?Object.fromEntries(hC(this.WrappedType.dependencies,r=>{if(this.dependencies[r]===void 0)throw new Error(`VALUE ERROR in ${this} WrappedType "${this.WrappedType.name}" dependency "${r}" is undefined.`);return[r,this.dependencies[r]]})):{};return this._value===null||this._value.constructor!==this.WrappedType?(this._value&&console.warn(`${this} overriding wrapped value from ${this._value} to WrappedType ${this.WrappedType&&this.WrappedType.name||this.WrappedType}. Is a draft: ${this._value.isDraft} `),Object.defineProperty(this,"_value",{value:this.WrappedType?yield*this.WrappedType.createPrimalStateGen(s,...this[Me]||[]):null,configureable:!0})):Object.defineProperty(this,"_value",{value:this._value.isDraft?yield*this._value.metamorphoseGen(s):Is(s,this._value.dependencies)?this._value:yield*this._value.getDraft().metamorphoseGen(s),configureable:!0}),delete this[Me],n&&this[k].wrapped===this._value?this[k]:this}#t(){Object.defineProperty(this,"dependencies",{value:Object.freeze(this.dependencies),writable:!1,configurable:!1}),delete this[k],Object.defineProperty(this,"_value",{value:this._value,writable:!1,configurable:!1}),Object.defineProperty(this,zn,{value:!1,configurable:!1}),delete this[je],Object.freeze(this)}#n(){delete this.dependencies}*metamorphoseGen(e={}){if(!this.isDraft)throw new Error(`LIFECYCLE ERROR ${this} must be in draft mode to metamorphose.`);let t;try{t=yield*this.#e(e)}finally{t===this?this.#t():this.#n()}return t}get hasWrapped(){return this._value!==null}get wrapped(){if(this._value===null)throw new Error(`LIFECYCLE ERROR ${this} has no value element, it's probably primal state.`);return this._value}get WrappedType(){return this.dependencies[this.constructor.modelDependencyName]===ce.NULL?null:this.dependencies[this.constructor.modelDependencyName].get("typeClass").value}get availableTypes(){return this.dependencies[this.constructor.availableTypesDependencyName]}set wrapped(e){if(!this.isDraft)throw Mt(new Error(`IMMUTABLE WRITE ATTEMPT ${this} is immutable, not a draft, can't set value.`));if(this.constructor.availableTypesDependencyName!==null){let n=!1,s=[];for(const[,r]of this.availableTypes){const o=r.get("typeClass").value;if(s.push(o.name),o===e.constructor){n=!0;break}}if(!n)throw new Error(`TYPE ERROR ${this} expects an instance of "${s.join(", ")}" but state item is "${e}".`)}if(this.constructor.BaseType!==null&&!(e instanceof this.constructor.BaseType))throw new Error(`TYPE ERROR ${this} expects an instance of "${this.constructor.BaseType.name}" but state item is "${e}".`);if(e.constructor!==this.WrappedType&&this.WrappedType!==null)throw new Error(`TYPE ERROR ${this} expects a direct instance of "${this.WrappedType&&this.WrappedType.name||this.WrappedType}" but state item is "${e}".`);const t=e.isDraft?e:e.toDraft();Object.defineProperty(this,"_value",{value:t,configureable:!0})}[Wo](e){if(!this.isDraft||!this[je].byProxy.has(e))return!1;const t=this[je].byProxy.get(e),n=this.get(t);return!(!n||!n.isDraft)}[ur](e){if(!this.isDraft||!this.has(e)||this[je].changedBySetter.has(e))return!1;const t=this.get(e);return!(!t||!t.isDraft)}[hr](e){if(!this.isDraft)throw Mt(new Error(`IMMUTABLE WRITE ATTEMPT ${this}[_GET_DRAFT_FOR_OLD_STATE_KEY](${e}) is immutable, not a draft.`));if(!this.hasOwn(e))throw new Error(`KEY ERROR "${e}" not found in ${this}.`);if(this[k]===null)throw new Error("ASSERTION FAILED this[OLD_STATE] should exist in this method.");if(this[je].changedBySetter.has(e))return!1;const t=this.has(e)?this.get(e):this[k].get(e);if(t.isDraft)return t;const n=kt(t).getDraft();return this.set(e,n),n}[Yi](e){if(!this.isDraft)throw Mt(new Error(`IMMUTABLE WRITE ATTEMPT ${this} is immutable, not a draft in [_GET_DRAFT_FOR_PROXY].`));if(!this[je].byProxy.has(e))return!1;const t=this[je].byProxy.get(e),n=this.has(t)?this.get(t):this[k].get(t);if(n.isDraft)return n;const s=kt(n).getDraft();return this.set(t,s),s}*[Symbol.iterator](){this.hasWrapped&&(yield*this.wrapped.entries())}getDraftFor(e,t=le){return this.wrapped.getDraftFor(e,t)}get(e,t=le){return this.wrapped.get(e,t)}set(e,t){return this.wrapped.set(e,t)}hasOwn(e){return this.wrapped.hasOwn(e)}ownKeys(){return this.wrapped.ownKeys()}has(e){return this.wrapped.has(e)}keys(){return this.wrapped.keys()}*entries(){this.hasWrapped&&(yield*this.wrapped.entries())}*allEntries(){this.hasWrapped&&(yield*this.wrapped.allEntries())}get size(){return this.wrapped.size}[Zn](e=Le){return this.hasWrapped?Pl(this.wrapped,e):[[],null]}}class Pt extends Cs{static{c(this,"_AbstractGenericModel")}static createClass(e,t={}){t={sanitizeFN:le,validateFN:le,defaultValue:le,serializeFN:le,deserializeFN:le,...t};for(const s of["sanitizeFN","validateFN","serializeFN"])if(t[s]!==le&&typeof t[s]!="function")throw new Error(`TYPE ERROR ${s}, if specified, must be a function but is ${typeof t[s]} (${t[s]}).`);if(t.validateFN!==le&&t.defaultValue!==le){const[s,r]=t.validateFN(t.defaultValue);if(!s||r)throw new Error(`TYPE ERROR defaultValue does not validate: ${r}`)}const n={[e]:class extends this{static sanitizeFN=t.sanitizeFN===le?null:t.sanitizeFN;static validateFN=t.validateFN===le?null:t.validateFN;static defaultValue=t.defaultValue===le?void 0:t.defaultValue;static serializeFN=t.serializeFN===le?null:t.serializeFN;static deserializeFN=t.deserializeFN===le?null:t.deserializeFN}};return Object.freeze(n[e]),n[e]}constructor(e=null,t=null,n=Le){if(super(e),Object.defineProperty(this,"_value",{value:this[k]===null?this.constructor.defaultValue:this[k].value,configurable:!0,writable:!0}),this[k]===null)return t!==null&&(this[Me]=[t,n]),this.metamorphose()}static sanitize(e){return this.sanitizeFN===null?[e,null]:this.sanitizeFN(e)}static validate(e){return this.validateFN===null?[!0,null]:this.validateFN(e)}*metamorphoseGen(){if(!this.isDraft)throw new Error(`LIFECYCLE ERROR ${this} must be in draft mode to metamorphose.`);return this[k]&&this[k].value===this._value?this[k]:(delete this[k],this[Me]&&this[Pn](...this[Me]),delete this[Me],Object.defineProperty(this,"_value",{value:this._value,writable:!1,configurable:!1}),Object.defineProperty(this,zn,{value:!1,configurable:!1}),Object.freeze(this),this)}get value(){return this._value}set value(e){this.set(e)}set(e,t=le){if(!this.isDraft)throw Mt(new Error(`IMMUTABLE WRITE ATTEMPT ${this} is immutable, not a draft, can't set value.`));let n=e;if(t!==le&&t||t===le&&this.constructor.sanitizeFN!==null){const[o,a]=this.constructor.sanitize(e);if(o===null)throw new Error(`SANITIZATION ERROR ${this}: ${a}.`);n=o}const[s,r]=this.constructor.validate(n);if(!s)throw new Error(`VALIDATION ERROR ${this}: ${r}. (Maybe try setting sanitize to true.)`);this._value=n}get(){return this.value}[Zn](e=Le){return this.constructor.serializeFN!==null?[[],this.constructor.serializeFN(this.value,e)]:super[Zn](e)}[Pn](e,t=Le){return this.constructor.deserializeFN!==null?(this.value=this.constructor.deserializeFN(e,t),[]):super[Pn](e,t)}}class Wt extends Cs{static{c(this,"_AbstractEnumModel")}static createClass(e,t,n,s){const r=new Set(t);if(!r.size)throw new Error(`VALUE ERROR ${this.name} enumItems is empty.`);if(r.size!==t.length)throw new Error(`VALUE ERROR ${this.name} enumItems must not have duplicates ${t.join(", ")}.`);if(!r.has(n))throw new Error(`VALUE ERROR ${this.name} defaultValue "${n}" must be in enumItems (${t.join(", ")} but is not.`);const o={[e]:class extends this{static enumItems=Object.freeze(Array.from(t));static _enumItemsReverseMap=Object.freeze(new it(t.map((a,l)=>[a,l])));static defaultValue=n}};if(s)for(const[a,l]of Object.entries(s)){if(Object.hasOwn(o[e],a))throw new Error(`VALUE ERROR can't attachs static property "${a}," it's already defined.`);Object.defineProperty(o[e],a,l)}return Object.freeze(o[e]),o[e]}constructor(e=null,t=null,n=Le){if(super(e),Object.defineProperty(this,"_value",{value:this[k]===null?this.constructor.defaultValue:this[k].value,configurable:!0,writable:!0}),this[k]===null)return t!==null&&(this[Me]=[t,n]),this.metamorphose()}*metamorphoseGen(){if(!this.isDraft)throw new Error(`LIFECYCLE ERROR ${this} must be in draft mode to metamorphose.`);return this[k]&&this[k].value===this._value?this[k]:(delete this[k],this[Me]&&this[Pn](...this[Me]),delete this[Me],Object.defineProperty(this,"_value",{value:this._value,writable:!1,configurable:!1}),Object.defineProperty(this,zn,{value:!1,configurable:!1}),Object.freeze(this),this)}get value(){return this._value}set value(e){this.set(e)}set(e){if(!this.isDraft)throw Mt(new Error(`IMMUTABLE WRITE ATTEMPT ${this} is immutable, not a draft, can't set value.`));if(!this.constructor._enumItemsReverseMap.has(e))throw new Error(`VALIDATION ERROR ${this}: "${e}" is not a valid member value.`);this._value=e}get(){return this.value}[Zn](){return[[],`${this.value}`]}[Pn](e){return this.value=e,[]}}class ke extends Cs{static{c(this,"_AbstractSimpleOrEmptyModel")}static _EMPTY=Symbol("_EMPTY");static get Model(){throw new Error(`NOT IMPLEMENTED Model is not defined in ${this.name}`)}static createClass(e,t=null){if(!(e.prototype instanceof Cs))throw new Error(`TYPE ERROR Model (${e.name}) is not a subclass of _BaseSimpleModel`);t===null&&(t=`${e.name.slice(0,e.name.indexOf("Model"))}OrEmptyModel`);const n={[t]:class extends this{static Model=e}};return Object.freeze(n[t]),n[t]}constructor(e=null,t=null,n=Le){if(super(e),Object.defineProperty(this,"_value",{value:this[k]===null?this.constructor._EMPTY:this[k].rawValue,configurable:!0,writable:!0}),this[k]===null)return t!==null&&(this[Me]=[t,n]),this.metamorphose()}*metamorphoseGen(){if(!this.isDraft)throw new Error(`LIFECYCLE ERROR ${this} must be in draft mode to metamorphose.`);if(this[k]){if(this[k].isEmpty&&this.isEmpty)return this[k];if(!this[k].isEmpty&&this[k].value===kt(this._value))return this[k]}if(this[Me]&&this[Pn](...this[Me]),delete this[Me],this._value!==this.constructor._EMPTY)if(this._value instanceof this.constructor.Model){const e=this._value.isDraft?this._value.metamorphose():this._value;this._value=kt(e)}else throw new Error(`TYPE ERROR ${this.constructor.name} expects ${this.constructor.Model.name} as valuewrong type: ("${this._value}" typeof ${typeof this._value}).`);return this[k]&&!this[k].isEmpty&&this[k].value===this._value?this[k]:(delete this[k],Object.defineProperty(this,"_value",{value:this._value,writable:!1,configurable:!1}),Object.defineProperty(this,zn,{value:!1,configurable:!1}),Object.freeze(this),this)}get isEmpty(){return this._value===this.constructor._EMPTY}clear(){this.set(this.constructor._EMPTY)}get rawValue(){return this._value}get value(){return this.get()}set value(e){this.set(e)}set(e){if(!this.isDraft)throw Mt(new Error(`IMMUTABLE WRITE ATTEMPT ${this} is immutable, not a draft, can't set value.`));if(e===this.constructor._EMPTY){this._value=this.constructor._EMPTY;return}this.isEmpty&&(this._value=this.constructor.Model.createPrimalState()),this._value.isDraft||(this._value=this._value.getDraft()),this._value.value=e}get(e=le){if(this._value===this.constructor._EMPTY){if(e!==le)return e;throw new Error(`VALUE ERROR ${this.constructor.name} is EMPTY, use that.isEmpty to check instead of trying to read that.value or use that.get(defaultVal) to receive the default when value is empty`)}return this._value.value}[Zn](e=Le){return this.isEmpty?[[],null]:Pl(this._value,e)}[Pn](e,t=Le){e!==null&&(this._value=this.constructor.Model.createPrimalDraft(this.dependencies,e,t))}}class Gt extends Cs{static{c(this,"_AbstractNumberModel")}static createClass(e,t={}){t={min:le,max:le,toFixedDigits:le,defaultValue:le,validateFN:le,sanitizeFN:le,sanitzeByDefault:!0,...t};for(const s of["min","max","toFixedDigits","defaultValue"]){const r=t[s];if(r===le)continue;const[o,a]=this.isNumeric(r);if(!o)throw new Error(`${this}.createClass ${e} setup value "${s}" is not numeric: ${a}`)}if(t.toFixedDigits!==le){if(!Number.isSafeInteger(t.toFixedDigits)||t.toFixedDigits<0||t.toFixedDigits>100)throw new Error(`${this}.createClass ${e} setup value "toFixedDigits" is not an integer between 0 and 100 (inclusive): ${t.toFixedDigits}`);for(const s of["min","max","defaultValue"]){const r=t[s];if(r===le)continue;const o=parseFloat(r.toFixed(t.toFixedDigits));if(o!==r)throw new Error(`${this}.createClass ${e} setup value "${s}" (setupValue) is not stable in toFixed(${t.toFixedDigits}) conversion: "${r.toFixed(t.toFixedDigits)}" ${o}`)}}if(t.defaultValue!==le){const s=t.toFixedDigits!==le?parseFloat(t.defaultValue.toFixed(t.toFixedDigits)):t.defaultValue;if(t.min!==le&&s<t.min)throw new Error(`${this}.createClass ${e} setup value "defaultValue" (${t.defaultValue} as fixed ${s}) is smaller than setup value "min" (${t.min}).`);if(t.max!==le&&s>t.max)throw new Error(`${this}.createClass ${e} setup value "defaultValue" (${t.defaultValue} as fixed ${s}) is bigger than setup value "max" (${t.max}).`);t.defaultValue=s}t.sanitzeByDefault=!!t.sanitzeByDefault;const n={[e]:class extends this{static minVal=t.min===le?null:t.min;static maxVal=t.max===le?null:t.max;static toFixedDigits=t.toFixedDigits===le?null:t.toFixedDigits;static defaultValue=t.defaultValue===le?null:t.defaultValue;static sanitizeFN=t.sanitizeFN===le?null:t.sanitizeFN;static validateFN=t.validateFN===le?null:t.validateFN;static sanitzeByDefault=t.sanitzeByDefault}};return Object.freeze(n[e]),n[e]}static isNumeric(e){return typeof e!="number"?[!1,`is not typeof number "${typeof e}" raw value: "${e.toString()}"`]:Number.isNaN(e)?[!1,"raw value is NaN (not a number)"]:[!0,null]}static sanitize(e){const[t,n]=this.isNumeric(e);if(!t)return[null,n];let s;if(this.sanitizeFN){let r;if([s,r]=this.sanitizeFN(e),r)return[s,r]}else s=e;return this.minVal!==null&&s<this.minVal&&(s=this.minVal),this.maxVal!==null&&s>this.maxVal&&(s=this.maxVal),this.toFixedDigits!==null&&(s=parseFloat(s.toFixed(this.toFixedDigits))),[s,null]}static validate(e){const[t,n]=this.isNumeric(e);return t?this.minVal!==null&&e<this.minVal?[!1,`value (${e}) is smaller than min value (${this.minVal})`]:this.maxVal!==null&&e>this.maxVal?[null,`value (${e}) is bigger than max value (${this.maxVal})`]:this.toFixedDigits!==null&&parseFloat(e.toFixed(this.toFixedDigits))!==e?[null,`value (${e}) is not equal to fixed-point notation "${e.toFixed(this.toFixedDigits)} (toFixedDigits: ${this.toFixedDigits})"`]:this.validateFN===null?[!0,null]:this.validateFN(e):[!1,n]}static get ppsDefaultSettings(){const e=[];for(const[t,n]of[["maxVal","max"],["minVal","min"],["defaultValue","default"]])this[t]!==null&&e.push([n,this[t]]);return Object.fromEntries(e)}constructor(e=null,t=null,n=Le){if(super(e),Object.defineProperty(this,"_value",{value:this[k]===null?this.constructor.defaultValue!==null?this.constructor.defaultValue:void 0:this[k].value,configurable:!0,writable:!0}),this[k]===null)return t!==null&&(this[Me]=[t,n]),this.metamorphose()}*metamorphoseGen(){if(!this.isDraft)throw new Error(`LIFECYCLE ERROR ${this} must be in draft mode to metamorphose.`);return this[k]&&this[k].value===this._value?this[k]:(delete this[k],this[Me]&&this[Pn](...this[Me]),delete this[Me],Object.defineProperty(this,"_value",{value:this._value,writable:!1,configurable:!1}),Object.defineProperty(this,zn,{value:!1,configurable:!1}),Object.freeze(this),this)}get value(){return this._value}set value(e){this.set(e)}set(e,t=le){if(!this.isDraft)throw Mt(new Error(`IMMUTABLE WRITE ATTEMPT ${this} is immutable, not a draft, can't set value.`));let n=e;if(t!==le&&t||t===le&&this.constructor.sanitzeByDefault){const[o,a]=this.constructor.sanitize(e);if(o===null||a)throw new Error(`SANITIZATION ERROR ${this}: ${a}.`);n=o}const[s,r]=this.constructor.validate(n);if(!s)throw new Error(`VALIDATION ERROR ${this}: ${r}. (Maybe try setting sanitize to true.)`);this._value=n}get(){return this.value}[Zn](){return[[],this.constructor.toFixedDigits!==null?this.value.toFixed(this.constructor.toFixedDigits):this.value.toString()]}[Pn](e){return this.value=parseFloat(e),[]}}Pt.createClass("AnyModel");Gt.createClass("IntegerModel",{defaultValue:0,min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,toFixedDigits:0});const ws=Gt.createClass("NumberModel",{}),ut=Pt.createClass("BooleanModel",{sanitizeFN:c(function(i){return[!!i,null]},"sanitizeFN"),validateFN:c(function(i){return typeof i!="boolean"?[!1,`value is not typeof boolean: ${typeof i} (${i})`]:[!0,null]},"validateFN"),defaultValue:!1,serializeFN:c(function(i){return i===this.defaultValue?null:i?"1":"0"},"serializeFN"),deserializeFN:c(function(i){return!new Set(["","0","false","False","FALSE"]).has(i)},"deserializeFN")});class ys extends ut{static{c(this,"BooleanDefaultTrueModel")}}Object.defineProperties(ys,{defaultValue:{value:!0}});Object.freeze(ys);const qe=Pt.createClass("StringModel",{sanitizeFN:c(function(i){if(typeof i=="string")return[i,null];try{return[`${i.toString()}`,null]}catch(e){return[null,`Can't stringify rawValue with message: ${e.message}`]}},"sanitizeFN"),validateFN:c(function(i){return typeof i!="string"?[!1,`value is not typeof string: ${typeof i} (${i})`]:[!0,null]},"validateFN"),defaultValue:"",serializeFN:c(function(i){return i},"serializeFN"),deserializeFN:c(function(i){return i},"deserializeFN")}),ip=Pt.createClass("KeyValueModel",{validateFN:c(function(i){return typeof i!="string"&&i!==ce.NULL?[!1,`NOT A VALID KEY must be string or ForeignKey.NULL: ${i.toString()}`]:[!0,null]},"validateFN"),serializeFN:c(function(i){if(typeof i=="string")return i;if(i===ce.NULL)return null;throw new Error(`UNKOWN VALUE TYPE (in ${this.name})`)},"serializeFN"),deserializeFN:c(function(i){return i},"deserializeFN")}),pN=Pt.createClass("PathModel",{sanitizeFN:c(function(i){return typeof i=="string"?[D.fromString(i),null]:[i,null]},"sanitizeFN"),validateFN:c(function(i){return i instanceof D?[!0,null]:[!1,`Value must be an instance of Path but is not: "${i?.toString()||i}" (typeof: ${typeof i}; constructor name: ${i?.constructor.name}).`]},"validateFN"),serializeFN:c(function(i){return i.toString()},"serializeFN"),deserializeFN:c(function(i){return D.fromString(i)},"deserializeFN")}),Va=ke.createClass(pN);function Jl(i,e){const t=i.createPrimalDraft({}),n=new Map,s=i.Model;for(const[o,a,l]of e){const A=s.createPrimalDraft({});A.get("typeClass").value=l,A.get("label").value=a,t.push([o,A]),n.set(l,o)}return[t.metamorphose(),n]}c(Jl,"createAvailableTypes");function Fo(i,e,t,n){const s=i.foreignKeys.get(e).targetName,r=i.staticDependencies.has(s)?i.staticDependencies.get(s).state:n[s],o=c(u=>r.get(u).value.get("typeClass").value,"getTypeFor"),a=c((u,h)=>o(u).createPrimalDraft(h),"getDraftFor"),l=a(t,n),A=i.createPrimalDraft(n);return A.get(e).value=t,A.get("instance").wrapped=l,A}c(Fo,"createDynamicType");function vC(i){const e=i.prototype instanceof ke?i.Model:i;return[e.minVal,e.maxVal]}c(vC,"getMinMaxRangeFromType");function*yh(i,e){for(const[t,n]of i.fields)n===e&&(yield t)}c(yh,"getFieldsByType");class D{static{c(this,"Path")}static SEPARATOR="/";static RELATIVE=".";static ROOT="/";static PARENT="..";static sanitize(...e){const t=e.map(s=>typeof s!="number"?s.split(this.SEPARATOR):s.toString(10)).flat(),n=[];for(const[s,r]of t.entries()){if(r===this.RELATIVE){s===0&&n.length===0&&n.push(r);continue}if(r===""){s===0&&n.length===0&&n.push(this.ROOT);continue}if(r!==this.PARENT){n.push(r);continue}if(n.length===0){n.push(r);continue}const o=n.at(-1);if(o==this.RELATIVE){n.splice(-1,1,r);continue}if(o===this.PARENT){n.push(r);continue}n.pop()}return n}static stringSanitize(e){return this.fromString(e).toString()}constructor(...e){const[t,...n]=this.constructor.sanitize(...e),s=t===this.constructor.ROOT||t===this.constructor.RELATIVE?t:null;e.length&&s===null&&n.unshift(t),Object.defineProperty(this,"explicitAnchoring",{value:s,enumerable:!0}),Object.defineProperty(this,"isExplicitlyRelative",{value:s===this.constructor.RELATIVE,enumerable:!0}),Object.defineProperty(this,"isExplicitlyAbsolute",{value:s===this.constructor.ROOT,enumerable:!0}),Object.defineProperty(this,"parts",{value:Object.freeze(n),enumerable:!0})}static fromParts(...e){return new this(...e)}static fromString(e){const t=e===""?[]:e.split(this.SEPARATOR);return this.fromParts(...t)}fromString(e){return this.constructor.fromString(e)}fromParts(...e){return this.constructor.fromParts(...e)}toString(e=null){if(e!==null&&e!==this.constructor.RELATIVE&&e!==this.constructor.ROOT)throw new Error(`TYPE ERROR defaultAnchoring must be either null, ${this.constructor.name}.RELATIVE or ${this.constructor.name}.ROOT but it is: "${e}".`);const t=this.explicitAnchoring===null?e:this.explicitAnchoring;return t===null?this.parts.join(this.constructor.SEPARATOR):this.parts.length===null?t:[t===this.constructor.SEPARATOR?"":t,...this.parts].join(this.constructor.SEPARATOR)}*[Symbol.iterator](){this.explicitAnchoring!==null&&(yield this.explicitAnchoring),yield*this.parts}appendString(e){return this.append(...this.fromString(e).parts)}append(...e){return this.fromParts(...this,...e)}get isBase(){return this.parts.length===0}slice(e,t){return this.fromParts(this.explicitAnchoring||"",...this.parts.slice(e,t))}get parent(){if(this.isBase)throw new Error("Can't get parent path is a base path.");return this.slice(0,-1)}startsWith(e){const t=[...this];for(const n of e)if(t.shift()!==n)return!1;return!0}isRootOf(e){return(typeof e=="string"?D.fromString(e):e).startsWith(this)}equals(e){if(e===this)return!0;const t=typeof e=="string"?D.fromString(e):e;return t.startsWith(this)&&this.startsWith(t)}toRelative(e){if(!this.startsWith(e))throw new Error(`VALUE ERROR ${this.constructor.name}.toRelative this ${this} does not start with rootPath ${e}`);const t=[...this],n=[...e],s=t.slice(n.length);return D.fromParts(".",...s)}}function*GC(i){if(i instanceof Oi){i.allEntries||console.warn(`!state.allEntries ${i}`,i);for(const[e,t]of i.allEntries())for(const[n,...s]of GC(t))yield[n,e,...s]}else yield[i]}c(GC,"getAllPathsAndValues");function RC(i,e,t,n=le){const s=typeof t=="string"?D.fromString(t):t;try{return[...s.parts].reduce((o,a)=>{if(!(o instanceof Oi))throw new Error(`CONTAINER ENTRY ERROR no container at ${a} in ${o} path: ${s.toString()}.`);return o[i](a)},e)}catch(r){if(n!==le)return n;throw r.message+=` (path: ${t});`,r}}c(RC,"_getEntry");function xo(i,e,t=le){return RC("getDraftFor",i,e,t)}c(xo,"getDraftEntry");function Je(i,e,t=le){return RC("get",i,e,t)}c(Je,"getEntry");class fN{static{c(this,"CompareStatus")}constructor(e){this.name=e,Object.freeze(this)}toString(){return`[compare ${this.name}]`}}const qs=Object.freeze(Object.fromEntries(["EQUALS","CHANGED","NEW","DELETED","MOVED","LIST_NEW_ORDER"].map(i=>[i,new fN(i)])));function*Oa(i,e){if(!(i instanceof ms)||!(e instanceof ms))throw new Error(`TYPE ERROR oldState ${i} and newState ${e} must be instances of _BaseModel.`);if(i.isDraft||e.isDraft)throw new Error(`TYPE ERROR oldState ${i} and newState ${e} must not be drafts.`);const{EQUALS:t,CHANGED:n,NEW:s,DELETED:r,MOVED:o,LIST_NEW_ORDER:a}=qs;if(i===e){yield[t,null];return}if(i.constructor!==e.constructor){yield[n,null];return}if(i instanceof nn&&i.WrappedType!==e.WrappedType){yield[s,null];return}if(yield[n,null],!(i instanceof Cs)){if(i instanceof ye||i instanceof nn){for(const[l,A]of i.allEntries()){const u=e.get(l),h=A===ce.NULL,d=u===ce.NULL;if(h&&!d){yield[s,null,l];continue}if(!h&&d){yield[r,null,l];continue}if(h&&d){yield[t,null,l];continue}for(const[g,p,...f]of Oa(A,u))yield[g,p,l,...f]}return}if(i instanceof vt){const l=[],A=new Set;for(const[u,h]of e){const[d]=e.keyToIndex(u);l[d]===void 0&&(i.has(d)&&i.get(d)===h?l[d]=[t]:l[d]=d>=i.length||A.has(d)?[s]:[n])}Object.freeze(l),yield[a,l];for(const[u,[h]]of l.entries()){const d=u.toString(10);if(h===t||h===o||h===s){yield[h,null,d];continue}if(h===n){const g=i.get(u),p=e.get(u);for(const[f,m,...y]of Oa(g,p))yield[f,m,d,...y];continue}throw new Error(`Don't know how to handle status ${h}`)}return}if(i instanceof Ue){for(const[l]of i)e.has(l)||(yield[r,null,l]);for(const[l,A]of e){if(!i.has(l)){yield[s,null,l];continue}const u=i.get(l);if(u===A){yield[t,null,l];continue}for(const[h,d,...g]of Oa(u,A))yield[h,d,l,...g]}return}throw new Error(`VALUE ERROR Don't know how to compare ${i}`)}}c(Oa,"rawCompare");function*mN(i,e){for(const[t,n,...s]of Oa(i,e))yield[t,n,D.fromParts("/",...s)]}c(mN,"compare");class ln{static{c(this,"StateComparison")}static COMPARE_STATUSES=qs;constructor(e,t){Object.defineProperties(this,{oldState:{value:e,enumerable:!0},newState:{value:t,enumerable:!0}}),e!==null&&Object.defineProperty(this,"compareResult",{value:Object.freeze([...mN(e,t)]),enumerable:!0}),this._compareDetailsMap=null,this._rootChangedMap=null}static createInitial(e,t=null,n=D.ROOT){return new CN(e,t,n)}map(e){return this.compareResult.map(e)}*[Symbol.iterator](){yield*this.compareResult}toLog(){console.log(`>>> ${this.constructor.name}.toLog ...`);for(const[e,t,n]of this)if(e===qs.LIST_NEW_ORDER){console.log(`    ${e}: ${n} ;;`);for(let[s,[r,...o]]of t.entries())console.log(`        #${s} ${r} data:`,...o,";;")}else console.log(`    ${e}: ${n}${t!==null?" (data: "+t+")":""} ;;`);console.log(`<<< ${this.constructor.name}.toLog DONE!`)}getDetaislMap(){if(this._compareDetailsMap!==null)return this._compareDetailsMap;const e=new it;for(const[t,n,s]of this){const r=s.toString();e.has(r)||e.set(r,new Map),e.get(r).set(t,n)}return Object.defineProperty(this,"_compareDetailsMap",{value:Object.freeze(e)}),this._compareDetailsMap}_getRootChangedMap(){const{CHANGED:e,NEW:t,EQUALS:n,DELETED:s,MOVED:r,LIST_NEW_ORDER:o}=qs,a=new Set([e,t,r,n,s]),l=new Set([o]),A=new it;for(const[u,,h]of this){const d=h.toString();if(l.has(u))continue;if(a.has(u)){if(u===n||u===s)continue}else throw new Error(`NOT IMPLEMENTED don't know how to handle ${u} #${d}`);if(A.has(d))continue;const g=Je(this.newState,d);A.set(d,g)}return A}getChangedMap(e=null,t=!0){if(this._rootChangedMap===null&&Object.defineProperty(this,"_rootChangedMap",{value:Object.freeze(this._getRootChangedMap())}),e===null)return this._rootChangedMap;const n=new it;for(const[s,r]of e.entries())this._rootChangedMap.has(s)&&n.set(t?r:s,this._rootChangedMap.get(s));return Object.freeze(n)}get isInitial(){return!1}}class CN extends ln{static{c(this,"InitialStateComparison")}constructor(e,t=null,n=D.ROOT){super(null,e);const s=[],r=t===null?this._getPathsFromState(e,n):Array.from(t.keys()).map(D.fromString,D);for(let o of r)s.push([qs.NEW,void 0,o]);Object.defineProperty(this,"compareResult",{value:Object.freeze(s),enumerable:!0})}_getPathsFromState(e,t=null){const n=[];for(const[,...s]of GC(e)){const r=t===null?D.fromParts(...s):D.fromParts(t,...s);n.push(r)}return n}get isInitial(){return!0}}const Z=Object.create(null),Ur=Object.freeze(new it([["LIGA",{label:"Ligation and Alternate Forms"}],["CASED",{label:"Caps etc."}],["DIGITS",{label:"Digits and Math"}],["POS",{label:"Positioning"}],["STYLISTIC_SETS",{label:"Stylistic Sets"}],["CHARACTER_VARIANTS",{label:"Character Variants"}],["CJK",{label:"CJK: Chinese, Japanese, Korean"}],["CURSIVE",{label:"Cursive Scripts or Fonts"}],["DIR",{label:"Writing Direction"}],["NO_UI",{label:"(not accessible via the UI)"}]].map(([i,e],t)=>(e.members=[],e.index=t,[i,e]))));Z.aalt={friendlyName:"Access All Alternates",uiBoolean:null,slSensitivity:[]};Z.abvf={friendlyName:"Above-base Forms",uiBoolean:null,slSensitivity:["Khmer script"]};Z.abvm={friendlyName:"Above-base Mark Positioning",uiBoolean:null,slSensitivity:["Indic scripts"]};Z.abvs={friendlyName:"Above-base Substitutions",uiBoolean:null,slSensitivity:["Indic scripts"]};Z.afrc={friendlyName:"Alternative Fractions",uiBoolean:!1,slSensitivity:[],group:"DIGITS"};Z.akhn={friendlyName:"Akhands",uiBoolean:null,slSensitivity:["Indic scripts"]};Z.blwf={friendlyName:"Below-base Forms",uiBoolean:null,slSensitivity:["Indic scripts"]};Z.blwm={friendlyName:"Below-base Mark Positioning",uiBoolean:null,slSensitivity:["Indic scripts"]};Z.blws={friendlyName:"Below-base Substitutions",uiBoolean:null,slSensitivity:["Indic scripts"]};Z.calt={friendlyName:"Contextual Alternates",uiBoolean:!0,slSensitivity:[],group:"LIGA"};Z.case={friendlyName:"Case-Sensitive Forms",uiBoolean:!1,slSensitivity:["European scripts","Spanish Language"],exampleText:"¡!(H-{E[L]L}O)",group:"CASED"};Z.ccmp={friendlyName:"Glyph Composition / Decomposition",uiBoolean:null,slSensitivity:[]};Z.cfar={friendlyName:"Conjunct Form After Ro",uiBoolean:null,slSensitivity:["Khmer scripts"]};Z.chws={friendlyName:"Contextual Half-width Spacing",uiBoolean:null,slSensitivity:["CJKV"]};Z.cjct={friendlyName:"Conjunct Forms",uiBoolean:null,slSensitivity:[" Indic scripts that show similarity to Devanagari"]};Z.clig={friendlyName:"Contextual Ligatures",uiBoolean:!0,slSensitivity:[],group:"LIGA"};Z.cpct={friendlyName:"Centered CJK Punctuation",uiBoolean:!1,slSensitivity:["Chinese"],group:"CJK"};Z.cpsp={friendlyName:"Capital Spacing",uiBoolean:!0,slSensitivity:["Should not be used in connecting scripts (e.g. most Arabic)"],group:"CASED"};Z.cswh={friendlyName:"Contextual Swash",uiBoolean:null,slSensitivity:[],group:"LIGA"};Z.curs={friendlyName:"Cursive Positioning",uiBoolean:null,slSensitivity:[]};(function(i){var e,t,n;for(e=1;e<100;e++)t=("0"+e).slice(-2),n="cv"+t,i[n]={friendlyName:"Character Variants "+e,uiBoolean:!1,slSensitivity:[],group:"CHARACTER_VARIANTS"}})(Z);Z.c2pc={friendlyName:"Petite Capitals From Capitals",uiBoolean:!1,slSensitivity:["scripts with both upper- and lowercase forms","Latin","Cyrillic","Greek"],group:"CASED"};Z.c2sc={friendlyName:"Small Capitals From Capitals",uiBoolean:!1,slSensitivity:["bicameral scripts","Latin","Greek","Cyrillic","Armenian"],exampleText:"HELLO WORLD",group:"CASED"};Z.dist={friendlyName:"Distances",uiBoolean:null,slSensitivity:["Indic scripts"]};Z.dlig={friendlyName:"Discretionary Ligatures",uiBoolean:!1,slSensitivity:[],exampleText:"act stand (1) (7)",group:"LIGA"};Z.dnom={friendlyName:"Denominators",uiBoolean:null,slSensitivity:[]};Z.dtls={friendlyName:"Dotless Forms",uiBoolean:null,slSensitivity:["math formula layout"]};Z.expt={friendlyName:"Expert Forms",uiBoolean:null,slSensitivity:["Japanese"]};Z.falt={friendlyName:"Final Glyph on Line Alternates",uiBoolean:null,slSensitivity:["any cursive script","Arabic"]};Z.fin2={friendlyName:"Terminal Forms #2",uiBoolean:null,slSensitivity:["Syriac"]};Z.fin3={friendlyName:"Terminal Forms #3",uiBoolean:null,slSensitivity:["Syriac"]};Z.fina={friendlyName:"Terminal Forms",uiBoolean:null,slSensitivity:["script with joining behavior","Arabic"]};Z.flac={friendlyName:"Flattened accent forms",uiBoolean:null,slSensitivity:["math formula layout"]};Z.frac={friendlyName:"Fractions",uiBoolean:!1,slSensitivity:[],exampleText:"1/2 1/4",group:"DIGITS"};Z.fwid={friendlyName:"Full Widths",uiBoolean:!1,slSensitivity:["scripts which can use monospaced forms"],group:"CJK"};Z.half={friendlyName:"Half Forms",uiBoolean:null,slSensitivity:[" Indic scripts that show similarity to Devanagari"]};Z.haln={friendlyName:"Halant Forms",uiBoolean:null,slSensitivity:["Indic scripts"]};Z.halt={friendlyName:"Alternate Half Widths",uiBoolean:!1,slSensitivity:["CJKV"],group:"CJK"};Z.hist={friendlyName:"Historical Forms",uiBoolean:!1,slSensitivity:[],exampleText:"basic",group:"LIGA"};Z.hkna={friendlyName:"Horizontal Kana Alternates",uiBoolean:!1,slSensitivity:["hiragana","katakana"],group:"CJK"};Z.hlig={friendlyName:"Historical Ligatures",uiBoolean:!1,slSensitivity:[],exampleText:"baſic ſs ſl",group:"LIGA"};Z.hngl={friendlyName:"Hangul",uiBoolean:null,slSensitivity:["Korean"]};Z.hojo={friendlyName:"Hojo Kanji Forms (JIS X 0212-1990 Kanji Forms)",uiBoolean:!1,slSensitivity:["Kanji"],group:"CJK"};Z.hwid={friendlyName:"Half Widths",uiBoolean:!1,slSensitivity:["CJKV"],group:"CJK"};Z.init={friendlyName:"Initial Forms",uiBoolean:null,slSensitivity:["script with joining behavior","Arabic"]};Z.isol={friendlyName:"Isolated Forms",uiBoolean:null,slSensitivity:["script with joining behavior","Arabic"]};Z.ital={friendlyName:"Italics",uiBoolean:!1,slSensitivity:["mostly Latin"],group:"CASED"};Z.jalt={friendlyName:"Justification Alternates",uiBoolean:!1,slSensitivity:["any cursive script"],group:"CURSIVE"};Z.jp78={friendlyName:"JIS78 Forms",uiBoolean:!1,slSensitivity:["Japanese"],group:"CJK"};Z.jp83={friendlyName:"JIS83 Forms",uiBoolean:!1,slSensitivity:["Japanese"],group:"CJK"};Z.jp90={friendlyName:"JIS90 Forms",uiBoolean:!1,slSensitivity:["Japanese"],group:"CJK"};Z.jp04={friendlyName:"JIS2004 Forms",uiBoolean:!1,slSensitivity:["Kanji"],group:"CJK"};Z.kern={friendlyName:"Kerning",uiBoolean:!0,slSensitivity:[],group:"POS"};Z.lfbd={friendlyName:"Left Bounds",uiBoolean:null,slSensitivity:[],group:"POS"};Z.liga={friendlyName:"Standard Ligatures",uiBoolean:!0,slSensitivity:[],group:"LIGA"};Z.ljmo={friendlyName:"Leading Jamo Forms",uiBoolean:null,slSensitivity:["Hangul + Ancient Hangul"],group:"CJK"};Z.lnum={friendlyName:"Lining Figures",uiBoolean:!1,slSensitivity:[],exampleText:"31337 H4X0R",group:"DIGITS"};Z.locl={friendlyName:"Localized Forms",uiBoolean:null,slSensitivity:[]};Z.ltra={friendlyName:"Left-to-right alternates",uiBoolean:null,slSensitivity:["Left-to-right runs of text"]};Z.ltrm={friendlyName:"Left-to-right mirrored forms",uiBoolean:null,slSensitivity:["Left-to-right runs of text"]};Z.mark={friendlyName:"Mark Positioning",uiBoolean:null,slSensitivity:[]};Z.med2={friendlyName:"Medial Forms #2",uiBoolean:null,slSensitivity:["Syriac"]};Z.medi={friendlyName:"Medial Forms",uiBoolean:null,slSensitivity:["script with joining behavior","Arabic"]};Z.mgrk={friendlyName:"Mathematical Greek",uiBoolean:!1,slSensitivity:["Greek script"],group:"DIGITS"};Z.mkmk={friendlyName:"Mark to Mark Positioning",uiBoolean:null,slSensitivity:[]};Z.mset={friendlyName:"Mark Positioning via Substitution",uiBoolean:null,slSensitivity:["Arabic"]};Z.nalt={friendlyName:"Alternate Annotation Forms",uiBoolean:!1,slSensitivity:["CJKV","European scripts"],exampleText:"359264",group:"LIGA"};Z.nlck={friendlyName:"NLC Kanji Forms",uiBoolean:!1,slSensitivity:["Kanji"],group:"CJK"};Z.nukt={friendlyName:"Nukta Forms",uiBoolean:null,slSensitivity:["Indic scripts"]};Z.numr={friendlyName:"Numerators",uiBoolean:null,slSensitivity:[]};Z.onum={friendlyName:"Oldstyle Figures",uiBoolean:!1,slSensitivity:[],exampleText:"123678",group:"DIGITS"};Z.opbd={friendlyName:"Optical Bounds",uiBoolean:null,slSensitivity:[],group:"POS"};Z.ordn={friendlyName:"Ordinals",uiBoolean:!1,slSensitivity:["Latin"],exampleText:"1a 9a 2o 7o",group:"CASED"};Z.ornm={friendlyName:"Ornaments",uiBoolean:!1,slSensitivity:[],group:"LIGA"};Z.palt={friendlyName:"Proportional Alternate Widths",uiBoolean:!1,slSensitivity:["CJKV"],group:"CJK"};Z.pcap={friendlyName:"Petite Capitals",uiBoolean:!1,slSensitivity:["scripts with both upper- and lowercase forms","Latin","Cyrillic","Greek"],group:"CASED"};Z.pkna={friendlyName:"Proportional Kana",uiBoolean:!1,slSensitivity:["Japanese"],group:"CJK"};Z.pnum={friendlyName:"Proportional Figures",uiBoolean:!1,slSensitivity:[],exampleText:"123678",group:"DIGITS"};Z.pref={friendlyName:"Pre-Base Forms",uiBoolean:null,slSensitivity:["Khmer and Myanmar (Burmese) scripts"]};Z.pres={friendlyName:"Pre-base Substitutions",uiBoolean:null,slSensitivity:["Indic scripts"]};Z.pstf={friendlyName:"Post-base Forms",uiBoolean:null,slSensitivity:["scripts of south and southeast Asia that have post-base forms for consonants","Gurmukhi","Malayalam","Khmer"]};Z.psts={friendlyName:"Post-base Substitutions",uiBoolean:null,slSensitivity:["any alphabetic script","Indic scripts"]};Z.pwid={friendlyName:"Proportional Widths",uiBoolean:null,slSensitivity:["CJKV","European scripts"]};Z.qwid={friendlyName:"Quarter Widths",uiBoolean:!1,slSensitivity:["CJKV"],group:"CJK"};Z.rand={friendlyName:"Randomize",uiBoolean:!0,slSensitivity:[],group:"LIGA"};Z.rclt={friendlyName:"Required Contextual Alternates",uiBoolean:null,slSensitivity:["any script","important for many styles of Arabic"]};Z.rkrf={friendlyName:"Rakar Forms",uiBoolean:null,slSensitivity:["Devanagari","Gujarati"]};Z.rlig={friendlyName:"Required Ligatures",uiBoolean:null,slSensitivity:["Arabic","Syriac","May apply to some other scripts"]};Z.rphf={friendlyName:"Reph Forms",uiBoolean:null,slSensitivity:["Indic scripts","Devanagari","Kannada"]};Z.rtbd={friendlyName:"Right Bounds",uiBoolean:null,slSensitivity:[],group:"POS"};Z.rtla={friendlyName:"Right-to-left alternates",uiBoolean:null,slSensitivity:["Right-to-left runs of text"]};Z.rtlm={friendlyName:"Right-to-left mirrored forms",uiBoolean:null,slSensitivity:["Right-to-left runs of text"]};Z.ruby={friendlyName:"Ruby Notation Forms",uiBoolean:!1,slSensitivity:["Japanese"],group:"CJK"};Z.rvrn={friendlyName:"Required Variation Alternates",uiBoolean:null,slSensitivity:[]};Z.salt={friendlyName:"Stylistic Alternates",uiBoolean:null,slSensitivity:[],group:"LIGA"};Z.sinf={friendlyName:"Scientific Inferiors",uiBoolean:!1,slSensitivity:[],exampleText:"1902835746",group:"DIGITS"};Z.size={friendlyName:"Optical size",uiBoolean:null,slSensitivity:[]};Z.smcp={friendlyName:"Small Capitals",uiBoolean:!1,slSensitivity:[" bicameral scripts","Latin","Greek","Cyrillic","Armenian"],exampleText:"Hello World",group:"CASED"};Z.smpl={friendlyName:"Simplified Forms",uiBoolean:!1,slSensitivity:["Chinese","Japanese"],group:"CJK"};(function(i){var e,t,n;for(e=1;e<21;e++)t=("0"+e).slice(-2),n="ss"+t,i[n]={friendlyName:"Stylistic Set "+e,uiBoolean:!1,slSensitivity:[],group:"STYLISTIC_SETS"}})(Z);Z.ssty={friendlyName:"Math script style alternates",uiBoolean:null,slSensitivity:["math formula layout"]};Z.stch={friendlyName:"Stretching Glyph Decomposition",uiBoolean:null,slSensitivity:[]};Z.subs={friendlyName:"Subscript",uiBoolean:!1,slSensitivity:[],exampleText:"a1 b4 c9",group:"LIGA"};Z.sups={friendlyName:"Superscript",uiBoolean:!1,slSensitivity:[],exampleText:"x2 y5 z7",group:"LIGA"};Z.swsh={friendlyName:"Swash",uiBoolean:!1,slSensitivity:["Does not apply to ideographic scripts"],group:"LIGA"};Z.titl={friendlyName:"Titling",uiBoolean:!1,slSensitivity:[],group:"LIGA"};Z.tjmo={friendlyName:"Trailing Jamo Forms",uiBoolean:null,slSensitivity:["Hangul + Ancient Hangul"]};Z.tnam={friendlyName:"Traditional Name Forms",uiBoolean:!1,slSensitivity:["Japanese"],group:"CJK"};Z.tnum={friendlyName:"Tabular Figures",uiBoolean:!1,slSensitivity:[],exampleText:"123678",group:"DIGITS"};Z.trad={friendlyName:"Traditional Forms",uiBoolean:null,slSensitivity:["Chinese","Japanese"]};Z.twid={friendlyName:"Third Widths",uiBoolean:!1,slSensitivity:["CJKV"],group:"CJK"};Z.unic={friendlyName:"Unicase",uiBoolean:!1,slSensitivity:["scripts with both upper- and lowercase forms","Latin","Cyrillic","Greek"],group:"CASED"};Z.valt={friendlyName:"Alternate Vertical Metrics",uiBoolean:null,slSensitivity:["scripts with vertical writing modes"]};Z.vatu={friendlyName:"Vattu Variants",uiBoolean:null,slSensitivity:["Indic scripts","Devanagari"]};Z.vchw={friendlyName:"Vertical Contextual Half-width Spacing",uiBoolean:null,slSensitivity:["CJKV"]};Z.vert={friendlyName:"Vertical Alternates",uiBoolean:null,slSensitivity:["scripts with vertical writing capability."]};Z.vhal={friendlyName:"Alternate Vertical Half Metrics",uiBoolean:!1,slSensitivity:["CJKV"],group:"CJK"};Z.vjmo={friendlyName:"Vowel Jamo Forms",uiBoolean:null,slSensitivity:["Hangul + Ancient Hangul"]};Z.vkna={friendlyName:"Vertical Kana Alternates",uiBoolean:!1,slSensitivity:["hiragana","katakana"],group:"CJK"};Z.vkrn={friendlyName:"Vertical Kerning",uiBoolean:!0,slSensitivity:[],group:"DIR"};Z.vpal={friendlyName:"Proportional Alternate Vertical Metrics",uiBoolean:!1,slSensitivity:["CJKV"],group:"DIR"};Z.vrt2={friendlyName:"Vertical Alternates and Rotation",uiBoolean:!0,slSensitivity:["scripts with vertical writing capability"],group:"DIR"};Z.vrtr={friendlyName:"Vertical Alternates for Rotation",uiBoolean:!0,slSensitivity:[],group:"DIR"};Z.zero={friendlyName:"Slashed Zero",uiBoolean:!1,slSensitivity:[],exampleText:"0123",group:"DIGITS"};function bh(i){const e=Object.getOwnPropertyNames(i);for(const t of e){const n=i[t];n&&typeof n=="object"&&bh(n)}return Object.freeze(i)}c(bh,"_deepFreeze");for(const[i,e]of Object.entries(Z)){let t;if("group"in e)e.uiBoolean===null?t="NO_UI":t=e.group;else if(e.uiBoolean===null)t="NO_UI";else throw new Error(`VALUE ERROR tag "${i}" has a UI (${e.uiBoolean}) but doesn't define a group.`);if(!Ur.has(t))throw new Error(`KEY ERROR group name "${t}" in tag "${i}" is unkown in GROUPS: ${Array.from(Ur.keys()).join(", ")}.`);Ur.get(t).members.push(i)}for(const i of Ur.values())bh(i);bh(Z);function Na(i){const e=Object.create(null);for(const t of Object.keys(Z))i(Z[t])&&(e[t]=Z[t]);return Object.freeze(e),e}c(Na,"_getSubset");const kn={all:Z,optional:Na(i=>i.uiBoolean===!1),defaults:Na(i=>i.uiBoolean===!0),unknown:Na(i=>i.uiBoolean===null),ui:Na(i=>i.uiBoolean!==null),groups:Ur,getFeature(i){return Z[i]}};Object.freeze(kn);function IN(i){return Object.hasOwn(kn.all,i)?Object.hasOwn(kn.ui,i)?[!0,null]:[!1,`No Effect: OpenType feature tag must be user controllable (default or discretionary). Tag: "${i}".`]:[!1,`Unkown OpenType feature tag: "${i}"`]}c(IN,"validateOpenTypeUIFeatureTag");function yN(i){let e={},t=i.tables?.fvar?.axes;if(!t)return e;for(let n of t)e[n.tag]=Object.freeze({name:"name"in n?n.name.en:n.tag,min:n.minValue,max:n.maxValue,default:n.defaultValue});return e}c(yN,"_getFontAxisRanges");function bN(i,e){const t=i.uiName||i.featUiLabelName||{};for(const n of["unicode","windows","macintosh",...Object.keys(t)]){if(!(n in t))continue;const s=t[n];for(const r of["en",...Object.keys(s)])if(r in s)return s[r]}return e}c(bN,"_getUINameFromFeature");function EN(i){const e=kn.all,t={},n=c(r=>{const o={tables:new Set,langSys:new Set,info:e[r],uiName:null,bestName:null};return t[r]=o,o},"_getNewFeature"),s=c((r,o,a,l)=>{for(const A of l){const{tag:u,feature:h}=o[A],d=Object.hasOwn(t,u)?t[u]:n(u);d.tables.add(r),d.langSys.add(a),(d.uiName===null&&u.startsWith("ss")||u.startsWith("cv"))&&(d.uiName=bN(h,null)),d.bestName=d.uiName||d.info.friendlyName}},"_setFeaturesFromFont");for(const r of["GSUB","GPOS"]){const o=r.toLowerCase();if(!(o in i.tables)||!i.tables[o].scripts)continue;const a=i.tables[o],l=a.scripts;for(const A of l){const u=A.script,h=A.tag;if(u.defaultLangSys){const d="Default",g=u.defaultLangSys;s(r,a.features,[h,d].join(":"),g.featureIndexes)}if(u.langSysRecords)for(const{tag:d,langSys:g}of u.langSysRecords)s(r,a.features,[h,d].join(":"),g.featureIndexes)}}return t}c(EN,"_getFontFeaturesInfo");function BN(i){let e=i.split(".").pop(),t={ttf:"truetype",otf:"opentype",woff:"woff",woff2:"woff2"}[e];if(!t)throw new Error(`FORMAT NOT FOUND for "${i}" with extension "${e}"`);return t}c(BN,"getSrcFormatFromFileName");class Eh{static{c(this,"FontOrigin")}valueOf(){throw new Error(`NOT IMPLEMENTED: "valueOf" in ${this.constructor.name}`)}toString(){return`[${this.constructor.name} ${this.valueOf()}]`}get type(){throw new Error(`NOT IMPLEMENTED: "get type" in ${this.constructor.name}`)}get payload(){throw new Error(`NOT IMPLEMENTED: "get payload" in ${this.constructor.name}`)}get fileName(){throw new Error(`NOT IMPLEMENTED: "get fileName" in ${this.constructor.name}`)}get sourceFormat(){return BN(this.fileName)}toDB(){return[this.type,this.payload]}static fromDB([e,t]){const n={"from-url":Au,"from-file":uu}[e];return new n(t,!0)}}class Au extends Eh{static{c(this,"FontOriginUrl")}constructor(e,t=!1){super(),Object.defineProperties(this,{type:{value:"from-url",writable:!1,enumerable:!0},url:{value:e,writable:!1,enumerable:!0},fromDB:{value:t,writable:!1,enumerable:!0}})}get fileName(){return this.url.split("/").pop()}get payload(){return this.url}valueOf(){return`${this.type}::${this.url}`}}class uu extends Eh{static{c(this,"FontOriginFile")}constructor(e,t=!1){super(),Object.defineProperties(this,{type:{value:"from-file",writable:!1,enumerable:!0},fileName:{value:e,writable:!1,enumerable:!0},fromDB:{value:t,writable:!1,enumerable:!0}})}get payload(){return this.fileName}valueOf(){return`${this.type}::${this.fileName}`}}class pi{static{c(this,"VideoProofFont")}constructor(e,t,n,s=null,r=null,o=null,a=null){this._document=o,this._widgetBus=e,Object.defineProperties(this,{fontObject:{value:t,writable:!1,enumerable:!0},fontFace:{value:r,writable:!1,enumerable:!0},buffer:{value:s,writable:!1,enumerable:!0},origin:{value:n,writable:!1,enumerable:!0}}),a&&Object.defineProperty(this,"fullName",{value:a,writable:!1,enumerable:!0}),this._axisRangesCache=null,this._featuresCache=null,this._instancesCache=null,this._hbCache=null,console.info("...created VideoProofFont",`
    {name: "${this.name}", version: "${this.version}", fullName: "${this.fullName}"}
 origin: ${this.origin}`)}_getNameEntry(e,...t){for(const n of[e,...t]){let s=this.fontObject.getEnglishName(n);if(s)return s;const r=this.fontObject.names.unicode?.[n]||this.fontObject.names.macintosh?.[n]||this.fontObject.names.windows?.[n];if(r&&typeof r=="object")for(let o of Object.keys(r))return r[o]}throw new Error(`KEY ERROR name "${e}" and fall-back keys "${t.join(", ")}" not found in font.`)}get name(){return this._getNameEntry("fullName","fontFamily","postScriptName")}get version(){return this._getNameEntry("version")}static nameVersion(e,t){return[e,t].join(" – ")}get nameVersion(){return this.constructor.nameVersion(this.name,this.version)}toString(){return`[Font ${this.nameVersion}]`}static massageVersion(e){let t=e.replaceAll(".","-").replaceAll(" ","_").replaceAll(";"," ").replaceAll("[","_").replaceAll("]","_").replaceAll(/[^\w -]/g,"X");return t.match(/^[A-Z]/i)||(t=`Version_${t}`),t}static fullName(e,t,n){const s=this.massageVersion(t);return[n,e,s].join(" ")}get fullName(){return this.constructor.fullName(this.name,this.version,this.origin.type)}get serializationNameParticles(){return[this.name,this.version]}get axisRanges(){return this._axisRangesCache||Object.defineProperty(this,"_axisRangesCache",{value:Object.freeze(yN(this.fontObject))}),this._axisRangesCache}get features(){if(!this._featuresCache){const e=EN(this.fontObject);Object.defineProperty(this,"_featuresCache",{value:Ks(e)})}return this._featuresCache}get instances(){if(!this._instancesCache){let e=this.fontObject.tables?.fvar?.instances||[],t=[];for(const{name:n,coordinates:s}of e){const r="en"in n?n.en:Object.entries(n)[1];t.push([r,Object.assign({},s)])}Object.defineProperty(this,"_instancesCache",{value:Ks(t)})}return this._instancesCache}get hbFace(){if(this._hbCache===null){const e=this._widgetBus.harfbuzz.hbjs.createBlob(this.buffer),t=this._widgetBus.harfbuzz.hbjs.createFace(e,0);this._hbCache={blob:e,face:t}}return this._hbCache.face}destroy(){this._document.fonts.delete(this.fontFace),this._hbCache!==null&&(this._hbCache.face.destroy(),this._hbCache.blob.destroy(),this._hbCache=null)}}class Qa{static{c(this,"VideoProofDeferredFont")}static fromFontObject(e,t,n=null){const s=new pi({},e,t);return new this(t,s.fullName,s.nameVersion,s.serializationNameParticles,n)}constructor(e,t,n,s,r=null){Object.defineProperties(this,{fullName:{value:t,writable:!1,enumerable:!0},nameVersion:{value:n,writable:!1,enumerable:!0},serializationNameParticles:{value:s,writable:!1,enumerable:!0},origin:{value:e,writable:!1,enumerable:!0},buffer:{value:r,writable:!1,enumerable:!0}})}}function eA(){throw new Error("Markdown parser `marked` is not available")}c(eA,"marked");function al(i){this.name="ValueError",this.message=i||"(No message for ValueError)",this.stack=new Error().stack}c(al,"ValueError");al.prototype=Object.create(Error.prototype);al.prototype.constructor=al;class ae{static{c(this,"DOMTool")}constructor(e){this.document=e}get window(){return this.document.defaultView}get documentElement(){return this.document.documentElement}static appendChildren(e,t,n){var s=t==null?[]:t instanceof Array?t:[t];for(let r of s)!r||typeof r.nodeType!="number"?r=ae.createTextNode(e.ownerDocument,r):n&&(r=r.cloneNode(!0)),e.appendChild(r)}static createTextNode(e,t){return e.createTextNode(t)}createTextNode(e){return ae.createTextNode(this.document,e)}static createElement(e,t,n,s,r){var o=n&&"xmlns"in n?e.createElementNS(n.xmlns,t):e.createElement(t);if(n){for(let a in n)if(a!=="xmlns"){if(a.startsWith("on")&&typeof n[a]=="function"){const l=a.slice(2).toLowerCase();o.addEventListener(l,n[a]);continue}o.setAttribute(a,n[a])}}return ae.appendChildren(o,s,r),o}createElement(e,t,n,s){return ae.createElement(this.document,e,t,n,s)}_h(e,t={},...n){return this.createElement(e,t,n)}get h(){return this._h.bind(this)}static createChildElement(e,t,n,s,r){var o=ae.createElement(e.ownerDocument,t,n,s,r);return e.appendChild(o),o}createChildElement(e,t,n,s,r){return ae.createChildElement(e,t,n,s,r)}static createElementFromHTML(e,t,n,s){var r=ae.createFragmentFromHTML(e,s);return ae.createElement(e,t,n,r)}static createElementfromHTML(...e){return this.createElementFromHTML(...e)}createElementFromHTML(e,t,n){return ae.createElementFromHTML(this.document,e,t,n)}createElementfromHTML(...e){return this.createElementFromHTML(...e)}static createElementFromMarkdown(e,t,n,s){return ae.createElementfromHTML(e,t,n,eA())}static createElementfromMarkdown(...e){return this.createElementfromMarkdown(...e)}createElementFromMarkdown(e,t,n,s){return ae.createElementfromMarkdown(this.document,t,n,s)}createElementfromMarkdown(...e){return this.createElementFromMarkdown(...e)}static createFragmentFromMarkdown(e,t){return ae.createFragmentFromHTML(e,eA())}createFragmentFromMarkdown(e){return ae.createFragmentFromMarkdown(this.document,e)}static appendHTML(e,t,n){var s=ae.createFragmentFromHTML(e,n);t.appendChild(s)}appendHTML(e,t){ae.appendHTML(this.document,e,t)}static appendMarkdown(e,t,n){ae.appendHTML(e,t,eA())}appendMarkdown(e,t){return ae.appendMarkdown(this.document,e,t)}static createFragmentFromHTML(e,t){return e.createRange().createContextualFragment(t)}createFragmentFromHTML(e){return ae.createFragmentFromHTML(this.document,e)}static createFragment(e,t,n){var s=e.createDocumentFragment();return ae.appendChildren(s,t,n),s}createFragment(e,t){return ae.createFragment(this.document,e,t)}static createComment(e,t){return e.createComment(t)}createComment(e){return ae.createComment(this.document,e)}static isDOMElement(e){return e&&e.nodeType&&e.nodeType===1}static replaceNode(e,t){t.parentNode&&t.parentNode.replaceChild(e,t)}static removeNode(e){e.parentNode&&e.parentNode.removeChild(e)}static insertBefore(e,t){t.parentElement&&e!==t&&t.parentElement.insertBefore(e,t)}static insertAfter(e,t){t.nextSibling?ae.insertBefore(e,t.nextSibling):t.parentElement.appendChild(e)}static insert(e,t,n){switch(typeof n=="string"&&(n=ae.createTextNode(e.ownerDocument,n)),t){case"append":e.appendChild(n);break;case"prepend":e.firstChild?ae.insertBefore(n,e.firstChild):e.appendChild(n);break;case"before":ae.insertBefore(n,e);break;case"after":ae.insertAfter(n,e);break;default:throw new al('Unknown position keyword "'+t+'".')}}static getChildElementForSelector(e,t,n){var s=Array.prototype.slice.call(e.querySelectorAll(t));return n||(s=s.filter(r=>r.parentNode===e)),s[0]||null}static getMarkerComment(e,t){for(var n=[[e&&e.childNodes,0]],s,r,o,a,l;(s=n.pop())!==void 0;)for(r=s[0],o=s[1],a=r.length;o<a;o++){if(l=r[o],l.nodeType===8&&l.textContent.trim()===t)return l;if(l.nodeType===1){n.push([r,o+1]),n.push([l.childNodes,0]);break}}return null}static insertAtMarkerComment(e,t,n,s){var r=ae.getMarkerComment(e,t);if(r)ae.insert(r,"after",n);else if(s!==!1)ae.insert(e,s||"append",n);else throw new Error("Marker <!-- "+t+" --> not found")}static insertBeforeMarkerComment(e,t,n,s){var r=ae.getMarkerComment(e,t);if(r)ae.insert(r,"before",n);else if(s!==!1)ae.insert(e,s||"append",n);else throw new Error("Marker <!-- "+t+" --> not found")}static dispatchEvent(e,t,n){const{Event:s}=e.ownerDocument.defaultView;return e.dispatchEvent(new s(t,n))}static clear(e,t){for(;e.lastChild;)t&&ae.dispatchEvent(e.lastChild,t),ae.removeNode(e.lastChild)}static validateChildEvent(e,t,...n){var s=e.target,r;if(!e.defaultPrevented){e:for(;;){if(s===t.parentElement||!s)return;for(let o of n)if(s.hasAttribute(o))break e;s=s.parentElement}if(e.preventDefault(),n.length===1)return s.getAttribute(n[0]);r={};for(let o of n)r[o]=s.getAttribute(o);return r}}static getComputedStyle(e){return e.ownerDocument.defaultView.getComputedStyle(e)}static getComputedPropertyValues(e,...t){var n=ae.getComputedStyle(e),s=[];for(let r of t)s.push(n.getPropertyValue(r));return s}static getElementSizesInPx(e,...t){var n=[];for(let[s,r]of ae.getComputedPropertyValues(e,...t).entries()){let o=t[s];if(r.slice(-2)!=="px")throw new Error(`Computed style of "${o}" did not yield a "px" value: ${r}`);let a=parseFloat(r.slice(0,-2));if(a!==a)throw new Error(`Computed style of "${o}" did not parse to a float: ${r}`);n.push(a)}return n}}ae.prototype.appendChildren=ae.appendChildren;ae.prototype.isDOMElement=ae.isDOMElement;ae.prototype.replaceNode=ae.replaceNode;ae.prototype.removeNode=ae.removeNode;ae.prototype.insertBefore=ae.insertBefore;ae.prototype.insertAfter=ae.insertAfter;ae.prototype.insert=ae.insert;ae.prototype.getChildElementForSelector=ae.getChildElementForSelector;ae.prototype.getMarkerComment=ae.getMarkerComment;ae.prototype.insertAtMarkerComment=ae.insertAtMarkerComment;ae.prototype.insertBeforeMarkerComment=ae.insertBeforeMarkerComment;ae.prototype.dispatchEvent=ae.dispatchEvent;ae.prototype.clear=ae.clear;ae.prototype.validateChildEvent=ae.validateChildEvent;ae.prototype.getElementSizesInPx=ae.getElementSizesInPx;ae.getComputedStyle;ae.getComputedPropertyValues;ae.getElementSizesInPx;const SC=Symbol("UPDATE_SIMPLE"),ll=Symbol("UPDATE_COMPARE"),Lo=Symbol("NO_UPDATE"),fn=Symbol("UPDATE_STRATEGY"),Zs=Symbol("HANDLE_CHANGED_AS_NEW"),hu=Symbol("REINSERT_API");class me{static{c(this,"_BaseComponent")}[fn]=SC;static REINSERT_API=hu;get _domTool(){return this.widgetBus.domTool}_insertElement(...e){return this.widgetBus.insertElement(...e)}getEntry(...e){try{return this.widgetBus.getEntry(...e)}catch(t){throw t.message=`${t.message} in: ${this}`,t}}getEntryRaw(...e){return this.widgetBus.getEntryRaw(...e)}_changeState(e){return this.widgetBus.changeState(e)}_getChangedMapFromCompareResult(e,...t){return this.widgetBus.wrapper.getChangedMapFromCompareResult(e.isInitial,e,...t)}_changeStateHandler(e){return(...t)=>this._changeState(()=>e(...t))}constructor(e){this.widgetBus=e}toString(){return`[Component ${this.constructor.name}]`}destroy(){}update(e){throw new Error(`NOT IMPLEMENTED: ${this.constructor.name}.update! (with changedMap ${e})`)}set value(e){throw new Error(`DEPRECATED: ${this.constructor.name}.set value!`)}get value(){throw new Error(`DEPRECATED: ${this.constructor.name}.get value!`)}}class Ul{static{c(this,"_ProtocolHandler")}static checkProtocolName(e){return e.endsWith("@")?e.indexOf("@")!==e.length-1?[!1,`ProtocolHandler protocol-name must contain only one "@" at the end but got "${e}"`]:[!0,null]:[!1,`ProtocolHandler protocol-name must end with "@" but got "${e}"`]}static create(e,...t){return[e,new this(e,...t)]}constructor(e,t={}){const[n,s]=Ul.checkProtocolName(e);if(!n)throw new Error(`VALUE ERROR ${s} in constructor ${this.name}`);Object.defineProperty(this,"protocolName",{value:e}),Object.defineProperty(this,"treatAdressAsRootPath",{value:t.treatAdressAsRootPath!==!1})}toString(){return`[ProtocolHandler ${this.protocolName}]`}register(e,t){throw new Error(`NOT IMPLEMENTED: ${this}.register called with identifier: ${e} value: ${t}`)}hasRegistered(e){throw new Error(`NOT IMPLEMENTED: ${this}.hasRegistered called with identifier: ${e}`)}getRegistered(e){throw new Error(`NOT IMPLEMENTED: ${this}.getRegistered called with identifier: ${e}`)}getUpdated(e){throw new Error(`NOT IMPLEMENTED: ${this}.getUpdated called with identifier: ${e}`)}}class Nn extends Ul{static{c(this,"SimpleProtocolHandler")}constructor(e,t={}){super(e,t),Object.defineProperty(this,"notFoundFallbackValue",{value:"notFoundFallbackValue"in t?t.notFoundFallbackValue:Ei}),this._registeredValues=new Map,this._updatedLog=new Set}getId(e){return e.startsWith&&e.startsWith(this.protocolName)?e:`${this.protocolName}${e}`}register(e,t){const n=this.getId(e);if(this._registeredValues.has(n))throw new Error(`VALUE ERROR identifier "${n}" already exists in ${this}.`);return this._registeredValues.set(n,t),this._unregister.bind(this,n)}_unregister(e){const t=this.getId(e);this._registeredValues.delete(t)}hasRegistered(e){const t=this.getId(e);return this._registeredValues.has(t)}getRegistered(e){const t=this.getId(e);if(!this._registeredValues.has(t)){if(this.notFoundFallbackValue!==Ei)return this.notFoundFallbackValue;throw new Error(`KEY ERROR not found identifier "${t}" in ${this}: ${Array.from(this._registeredValues.keys()).join(", ")}.`)}return this._registeredValues.get(t)}resetUpdatedLog(){this._updatedLog.clear()}setUpdated(e){const t=this.getId(e);this._updatedLog.add(t)}getUpdated(e){const t=this.getId(e),n=this._updatedLog.has(t),s=this.getRegistered(t);return[n,s]}}const sp=Symbol("DEFAULT");class vN{static{c(this,"ComponentWrapper")}static DEPENDECIES_ALL="all";static DEPENDECIES_DEFAULT="default";constructor(e,t,{hostElement:n=null,rootPath:s=null,relativeRootPath:r=null,activationTest:o=null,onInit:a=null,onDestroy:l=null,id:A=null,protocolHandlers:u=[],...h},d,...g){if(this.WidgetClass=d,this.host=n,this._placemarker=null,this._activationTest=o,this._onInitFn=a,this._onDestroyFn=l,this.id=A,u.length){for(const[p]of u){const[f,m]=Ul.checkProtocolName(p);if(!f)throw new Error(`VALUE ERROR ${m} in wrapper for ${this.WidgetClass.name} at rootPath: ${s||e.rootPath}`)}this._protocolHandlers=new Map([...e.protocolHandlers||[],...u])}else this._protocolHandlers=new Map(e.protocolHandlers);this._protocolHandlerRegistrations=new Map;for(const[p,f]of Object.entries(h))this._protocolHandlers.has(p)&&this._protocolHandlerRegistrations.set(p,{identifier:f,unregister:null});this.insertedElements=[],this._rawDependencyMapping=t,Object.defineProperty(this,"dependencies",{get(){throw new Error(`NOT IMPLEMENTED getter "dependencies" in [object ${this.constructor.name}]`)}}),Object.defineProperty(this,"_fullDependencyMappings",{get:c(()=>{throw new Error("LIFCYCLE ERROR _fullDependencyMappings is available after updateRootPath.")},"get"),configurable:!0}),this.dependencyReverseMapping=null,this.widgetBus=Object.assign(Object.create(e),{insertElement:this.insertElement.bind(this),rootPath:null,getEntryRaw:e.getEntry,getEntry(p){const f=this.getExternalName(p),m=typeof f=="string"?f.slice(0,f.indexOf("@")+1):"";return m.length&&this.protocolHandlers.has(m)?this.protocolHandlers.get(m).getRegistered(f):e.getEntry(f)},getExternalName:c(p=>{if(this.dependencyReverseMapping.has(p))return this.dependencyReverseMapping.get(p);const f=p instanceof D?p:typeof p=="string"?D.fromString(p):null;return f!==null&&f.isExplicitlyRelative?this.widgetBus.rootPath.append(...f.parts).toString():p},"getExternalName"),grandWidgetBus:e,wrapper:this,protocolHandlers:this._protocolHandlers,getProtocolHandlerRegistration:this.getProtocolHandlerRegistration.bind(this),getProtocolHandlerImplementation:this.getProtocolHandlerImplementation.bind(this)}),this._widgetArgs=g,this.widget=null,this._unsetProtocolHandlerImplementation=new Map,this._explicitAbsoluteRootPath=null,this._explicitRelativeRootPath=null,this.updateRootPath(s,r)}toString(){return`[${this.constructor.name} for WidgetClass: ${this.WidgetClass.name}]`}getDependencyMapping(e=super.DEPENDECIES_ALL){if(!Object.hasOwn(this._fullDependencyMappings,e))throw new Error(`KEY ERROR getDependencyMapping type "${e}" not found.`);return this._fullDependencyMappings[e]}get dependencyMapping(){return this.getDependencyMapping(this.constructor.DEPENDECIES_DEFAULT)}getProtocolHandlerImplementation(e,t=Ei){if(!this._protocolHandlers.has(e)){if(t!==Ei)return t;throw new Error(`KEY ERROR protocolHandler "${e}" not found for this ${this.WidgetClass.name}.`)}return this._protocolHandlers.get(e)}getProtocolHandlerRegistration(e){if(!this._protocolHandlerRegistrations.has(e))throw new Error(`KEY ERROR protocolHandler "${e}" not found for this ${this.WidgetClass.name}.`);const{identifier:t}=this._protocolHandlerRegistrations.get(e),n=this._protocolHandlers.get(e);return[t,n]}setProtocolHandlerImplementation(e,t){if(this._unsetProtocolHandlerImplementation.has(e))throw new Error(`PROTOCOL ERROR setProtocolHandlerImplementation for "${e}" must be called only once by widget.`);const n=this._protocolHandlers.has(e)?[e,this._protocolHandlers.get(e)]:null;this._protocolHandlers.set(e,t),this._unsetProtocolHandlerImplementation.set(e,n)}static absPathDependencies(e,t,n){let s={[this.DEPENDECIES_DEFAULT]:new Map,[this.DEPENDECIES_ALL]:new Map};for(const r of t.keys())s[r]=new Map;for(const r of n){if(r===void 0)throw new Error(`VALUE ERROR dependencyMappings in absPathDependencies has an empty entry, in ${this.name} at ${e}.`);const o=Array.isArray(r)?r:[r],a=o.at(0),l=o.at(1)===void 0?a:o.at(1),A=a.slice(0,a.indexOf("@")+1);let u,h;if(A.length&&t.has(A)){if(u=A,h=a,t.get(A).treatAdressAsRootPath){const g=a.slice(A.length),p=D.fromString(g),f=p.isExplicitlyAbsolute?D.stringSanitize(g):e.append(...p).toString();h=`${A}${f}`}}else{u=this.DEPENDECIES_DEFAULT;const d=D.fromString(a);h=d.isExplicitlyAbsolute?d.toString():e.append(...d).toString()}s[u].set(h,l),s[this.DEPENDECIES_ALL].set(h,l)}return s}_absPathDependencies(e){return this.constructor.absPathDependencies(this.widgetBus.rootPath,this._protocolHandlers,e)}updateRootPath(e=null,t=null){if(e instanceof D&&e.isExplicitlyRelative){if(t!==null)throw new Error(`VALUE ERROR when rootPathArgument ("${e}") is relative,  relativeRootPath ("${t}") must not be set`);t=e,e=null}if(e===sp)this._explicitAbsoluteRootPath=null;else if(e!==null){if(!(e instanceof D))throw new Error(`VALUE ERROR rootPathArgument if set must be a Path but is ${typeof e} (${e}).`);if(!e.isExplicitlyAbsolute)throw new Error(`VALUE ERROR rootPathArgument if set must be explicitly absolutely anchored (start with "/") but is "${e}"`);this._explicitAbsoluteRootPath=e}if(t===sp)this._explicitRelativeRootPath=null;else if(t!==null){if(!(t instanceof D))throw new Error(`VALUE ERROR relativeRootPath if set must bea Path but is ${typeof t} (${t}).`);if(t.isExplicitlyAbsolute)throw new Error(`VALUE ERROR relativeRootPath if set must not beexplicitly absolutely anchored (start with "/") but is "${t}"`);this._explicitRelativeRootPath=t}const n=this._explicitAbsoluteRootPath===null?this.widgetBus.grandWidgetBus.rootPath:this._explicitAbsoluteRootPath,s=this._explicitRelativeRootPath===null?[]:this._explicitRelativeRootPath,r=n.append(...s);if(this.widgetBus.rootPath!==null&&this.widgetBus.rootPath.equals(r))return;this.widgetBus.rootPath=r;const o=this._absPathDependencies(this._rawDependencyMapping);Object.getOwnPropertyDescriptor(this,"_fullDependencyMappings").configurable?Object.defineProperty(this,"_fullDependencyMappings",{value:o,configurable:!1}):Object.assign(this._fullDependencyMappings,o),this.dependencyReverseMapping=new Map([...this._fullDependencyMappings[this.constructor.DEPENDECIES_ALL]].map(([a,l])=>[l,a])),this.widget&&this.widget.updateRootPath&&this.widget.updateRootPath()}getRootPathSetup(){return[this._explicitAbsoluteRootPath,this._explicitRelativeRootPath,this.widgetBus.rootPath]}static getChangedMapFromCompareResult(e,t,n,s,r=!0){let o;try{o=s.getChangedMap(e[this.DEPENDECIES_DEFAULT],r)}catch(l){throw new Error(`[${this.name}] Can't get changedMap, see cause.`,{cause:l})}const a=new it(o);for(const[l,A]of t){const u=e[l]||new Map;for(const[h,d]of u.entries()){let g,p;n?(g=!0,p=A.getRegistered(h)):[g,p]=A.getUpdated(h),g&&a.set(r?d:h,p)}}return Object.freeze(a)}getChangedMapFromCompareResult(e,t,n=!0){return this.constructor.getChangedMapFromCompareResult(this._fullDependencyMappings,this._protocolHandlers,e,t,n)}setPlacemarker(e){this._placemarker=e}static insertElement(e,t,n){const s=[];n.nodeType===t.DOCUMENT_FRAGMENT_NODE?s.push(...n.childNodes):s.push(n),e.push(...s),t.nodeType===8?s.forEach(r=>ae.insertBefore(r,t)):t.append(...s)}insertElement(e){if((this._placemarker||this.host)===null)throw new Error(`${this.constructor.name} no place to insert element for a ${this.WidgetClass.name} ${this.host===null?"host":"placemaker"} is not defined.`);this.constructor.insertElement(this.insertedElements,this._placemarker||this.host,e)}reinsert(e=null){e!==null&&(this.host=e);const t=this.insertedElements.splice(0,1/0);for(const n of t)this.insertElement(n);this.widget[hu]&&this.widget[hu]()}activationTest(){return this._activationTest?this._activationTest():!0}get hasActivationTest(){return!!this._activationTest}create(){if(this.widget!==null)throw new Error(`Widget, a ${this.WidgetClass.name}, is already created.`);this.widget=new this.WidgetClass(this.widgetBus,...this._widgetArgs);for(const[e,t]of this._protocolHandlerRegistrations){const n=this._protocolHandlers.get(e);t.unregister=n.register(t.identifier,this.widget)}return this._onInitFn&&this._onInitFn(this.widget),this.widget}destroy(){this.widget&&this.widget.destroy();for(const[,e]of this._protocolHandlerRegistrations)e.unregister!==null&&e.unregister(),e.unregister=null;for(const[e,t]of this._unsetProtocolHandlerImplementation)t!==null?this._protocolHandlers.set(e,t):this._protocolHandlers.delete(e);this._unsetProtocolHandlerImplementation.clear();for(const e of this.insertedElements)e.parentNode.removeChild(e);this.insertedElements.splice(0,1/0),this._onDestroyFn&&this._onDestroyFn(this.widget),this.widget=null}}const Ei=Symbol("_NOTDEF");class Br extends me{static{c(this,"_CommonContainerComponent")}[fn]=ll;constructor(e,t,n=[]){super(e),this._zones=t,this._idToWidget=new Map,this._widgets=[],this._childrenWidgetBus=Object.assign(Object.create(e),{getWidgetById:this.getWidgetById.bind(this)}),this._widgetsPlacemarker=new Map,this._initWidgets(n)}_initWrapper(e,t,n,s,...r){const o=t.zone?this._zones.get(t.zone):null;if(t.zone&&!o)throw new Error(`KEY ERROR target zone element "${t.zone}" not found, available zones are: ${[...this._zones].map(([l,A])=>l+":"+typeof A).join(", ")}. In ${this} for a ${s.name}`);return new vN(e,n,{hostElement:o,...t},s,...r)}_initWidgets(e){for(const[t,n,s,...r]of e){const o=this._initWrapper(this._childrenWidgetBus,t,n,s,...r);this._widgets.push(o)}}*widgets(){yield*this._widgets.entries()}updateRootPath(){throw new Error(`NOT IMPLEMENTED: ${this}.updateRootPath`)}destroy(){for(const e of this._widgets)this._destroyWidget(e);for(const e of this._widgetsPlacemarker.values())ae.removeNode(e);this._widgetsPlacemarker.clear()}*activeWidgets(){for(const e of this._widgets)e.widget!==null&&(yield e)}get dependencies(){const e=new Set;for(const t of this.activeWidgets())for(const n of t.dependencyReverseMapping.values())e.add(n);return e}get modelDependencies(){const e=new Set;for(const t of this.activeWidgets())for(const n of t.dependencyMapping.keys())e.add(n);return e}getWidgetWrapperById(e,t=Ei){if(this._idToWidget.has(e))return this._idToWidget.get(e);if(t!==Ei)return t;throw new Error(`KEY ERROR id "${e}" not found in ${this}.`)}getWidgetById(e,t=Ei){if(this._idToWidget.has(e))return this.getWidgetWrapperById(e).widget;if(this.widgetBus.getWidgetById)return this.widgetBus.getWidgetById(e,t);if(t!==Ei)return t;throw new Error(`KEY ERROR id "${e}" not found in a ${this.constructor.name}.`)}_createWidget(e){if(e.id!==null)if(!this._idToWidget.has(e.id))this._idToWidget.set(e.id,e);else{const t=this._idToWidget.get(e.id),n=this._widgets.indexOf(t),s=this._widgets.indexOf(e);throw new Error(`ID IS TAKEN "${e.id}" is already taken by a ${t.WidgetClass.name} at #${n} but claimed by a ${e.WidgetClass.name} at #${s}`)}e.create()}_destroyWidget(e){e.id!==null&&this._idToWidget.delete(e.id),e.destroy()}_provisionWidgets(){throw new Error(`NOT IMPLEMENTED ${this.constructor.name}._provisionWidgets.`)}initialUpdate(e){throw new Error(`NOT IMPLEMENTED ${this.constructor.name}.initialUpdate (called with rootState: ${e}).`)}update(e){const t=this._provisionWidgets(e);this._update(e,t,!1)}_update(e,t,n){for(const s of this.activeWidgets()){const r=t.has(s),o=s.widget;if(o[fn]===SC){const a=!n&&r?ln.createInitial(e.newState,s.dependencyMapping):e,l=s.getChangedMapFromCompareResult(r,a);l.size&&o.update(l)}else if(o[fn]===ll)r?o.initialUpdate(e.newState):o.update(e);else{if(o[fn]===Lo)continue;throw new Error(`UPDATE_STRATEGY unknown for ${o}: ${o?.[fn]?.toString()} in ${this}`)}}}}class we extends Br{static{c(this,"_BaseContainerComponent")}_provisionWidgets(){const e=new Set;for(const t of this._widgets){const n=t.activationTest(),s=t.widget!==null;if(t.host&&t.hasActivationTest&&!this._widgetsPlacemarker.has(t)){const r=this.widgetBus.domTool.createComment(`widget placeholder ${this}: ${t}`);this._widgetsPlacemarker.set(t,r),t.host.append(r),t.setPlacemarker(r)}n!==s&&(!n&&s?this._destroyWidget(t):n&&!s&&(this._createWidget(t),e.add(t)))}return e}initialUpdate(e){const t=this._provisionWidgets(),n=ln.createInitial(e,this.modelDependencies);this._update(n,t,!0)}}class dn extends Br{static{c(this,"_BaseDynamicCollectionContainerComponent")}get dependencies(){const e=super.dependencies;for(const t of this.widgetBus.wrapper.dependencyReverseMapping.values())e.add(t);return e}get modelDependencies(){const e=super.modelDependencies;for(const t of this.widgetBus.wrapper.dependencyMapping.keys())e.add(t);return e}_createWrapper(e){throw new Error(`NOT IMPLEMENTED ${this.constructor.name}._createWrapper (called with rootPath: ${e}).`)}_provisionWidgets(e){const{LIST_NEW_ORDER:t,EQUALS:n,MOVED:s,NEW:r,CHANGED:o}=ln.COMPARE_STATUSES,a=new Set,l=this.widgetBus.getExternalName("collection"),A=D.fromString(l),u=e.getDetaislMap(),h=u.has(l)?u.get(l):new Map;for(const[d,g]of h){let p;if(d===r){const G=Je(e.newState,A);if(G.size===0)continue;p=new Map;for(const R of G.keys())p.set(R,[r])}else if(d===t)p=g;else continue;const f=[],m=new Set(this._widgets),y=new Set;for(const[G,[R]]of p.entries()){const Q=A.append(G);if(R===n){const S=this._widgets[G];f[G]=S,y.add(G),m.delete(S)}else if(R===o)if(this[Zs])f[G]=this._createWrapper(Q);else{const S=this._widgets[G],[,M]=S.getRootPathSetup();let V=!1;if(M!==null){let K=Q;for(const j of M){K=K.append(j);const Ce=K.toString();if(u.has(Ce)&&u.get(Ce).has(r)){V=!0;break}}}V?f[G]=this._createWrapper(Q):(f[G]=S,S.updateRootPath(Q),m.delete(S))}else if(R===r||R===s)f[G]=this._createWrapper(Q);else throw new Error(`UNHANDLED CASE ${this} itemStatus: ${R.toString()} rootPath: ${Q}.`);if(!f[G])throw new Error(`UNFULLFILLED CONTRACT ${this} wrapper was not produced ${R.toString()} rootPath: ${Q}.`)}for(const G of m)this._destroyWidget(G);this._widgets.splice(0,1/0,...f);let v=!1;for(const G of this._widgets)G.widget!==null?v&&G.reinsert():(this._createWidget(G),a.add(G),v=!0);break}return a}initialUpdate(e){let t=ln.createInitial(e,this.modelDependencies);const n=this._provisionWidgets(t);n.size&&(t=ln.createInitial(e,this.modelDependencies)),this._update(t,n,!0)}}class Mo extends dn{static{c(this,"_BaseDynamicMapContainerComponent")}constructor(e,t){super(e,t),this._keyToWidget=new Map}_provisionWidgets(e){const{EQUALS:t,NEW:n,CHANGED:s,DELETED:r}=ln.COMPARE_STATUSES,o=new Set([t,n,s,r]),a=new Set,l=this.widgetBus.getExternalName("collection"),A=D.fromString(l),u=e.getDetaislMap(),h=u.has(l)?u.get(l):new Map,d=new Map,g=Je(e.newState,A);let p=0;if(!h.size)return a;for(const[Q]of h){if(Q===t)return a;if(Q===n){for(const S of g.keys())d.set(S,n);break}else if(Q===s){for(const S of g.keys()){const M=A.append(S).toString();if(u.has(M)){const V=u.get(M);for(const[K]of V.entries())if(o.has(K)){K===r&&(p+=1),d.set(S,K);break}if(!d.has(S))throw new Error(`ASSERTION FAILED: missing basisc statuses don't know how to handle item at key "${S}" ${V.map(([K])=>K.toString()).join(", ")}.`)}}break}else throw new Error(`UNKNOWN STATUS don't know how to handle ${Q.toString()}.`)}if(d.size-p!==g.size)throw new Error(`ASSERTION FAILED: missmatch between items.size (${g.size}) and itemChangeStatuses.size (${d.size}) - deletedCount (${p}) (= ${d.size-p}).`);const f=new Set(this._widgets);for(const[Q,S]of d.entries()){if(S===r){this._keyToWidget.delete(Q);continue}const M=A.append(Q);if(S===t){const V=this._keyToWidget.get(Q);f.delete(V)}else if(!this[Zs]&&S===s){const V=this._keyToWidget.get(Q);f.delete(V)}else if(S===n||S===s){const V=this._createWrapper(M);this._keyToWidget.set(Q,V)}else throw new Error(`UNHANDLED CASE ${this} itemStatus: ${S.toString()} rootPath: ${M}.`);if(!this._keyToWidget.has(Q))throw new Error(`UNFULLFILLED CONTRACT ${this} wrapper was not produced ${S.toString()} rootPath: ${M}.`)}for(const Q of f)this._destroyWidget(Q);const m=Array.from(g.keys()).map(Q=>this._keyToWidget.get(Q)),y=this._widgets.splice(0,1/0,...m);let v=!1,G=0,R=new Set;for(const[Q,S]of this._widgets.entries()){if(!(S.widget!==null)){this._createWidget(S),a.add(S),v||(G=Q),v=!0,R.add("new");continue}!v&&y[Q]!==S&&(G=Q,v=!0,R.add("changed")),v&&S.reinsert()}return v&&this._reorderChildren&&this._reorderChildren(R,G),a}}class Kl extends me{static{c(this,"UIBaseMapKey")}static BASE_CLASS="ui_base_map-key";constructor(e,t,n={}){super(e),[this.element,this._input]=this._initTemplate(t,n),this.reset()}static TEMPLATE=`<label
        ><!-- insert: label--><input
            type="text"
            minlength="1"
            /></label>`;_initTemplate(e,t){const n=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE).firstElementChild,s=n.querySelector("input"),r=[this.constructor.BASE_CLASS];t.rootClass&&r.push(t.rootClass);for(const o of r)n.classList.add(o),s.classList.add(`${o}-input`);if(t.inputAttributes)for(const[o,a]of Object.entries(t.inputAttributes))s.setAttribute(o,a);for(const[o,a,...l]of e)s.addEventListener(o,a,...l);return t.labelContent&&this._domTool.insertAtMarkerComment(n,"insert: label",t.labelContent),this._insertElement(n),[n,s]}isFocused(){return this._input===this._domTool.document.activeElement}focus(){this._input.focus()}setCustomValidity(e=""){this._input.setCustomValidity(e),this._input.reportValidity()}reset(){this._input.value="",this._input.setCustomValidity("")}get value(){return this._input.value}set value(e){this._input.value=e}set display(e){this.element.style.display=e?"":"none"}}class GN extends me{static{c(this,"_BaseUIButton")}static ROOT_CLASS="ui-button";constructor(e,t,n){super(e),Object.defineProperties(this,{BASE_CLASS:{value:`${this.constructor.ROOT_CLASS}_${this.constructor.TYPE_CLASS_PART}`}}),[this.element,this._input]=this._initTemplate(t,n)}static TEMPLATE="<button><!-- insert: label --></button>";_setClassesHelper(e){for(const t of[this.constructor.ROOT_CLASS,this.BASE_CLASS])for(const[n,...s]of e)n.classList.add([t,...s].join("-"))}_initTemplate(e,t){const n=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE).firstElementChild,s=n;this._domTool.insertAtMarkerComment(n,"insert: label",e),this._setClassesHelper([[n],[s,"input"]]);for(const[r,o,...a]of t)s.addEventListener(r,o,...a);return this._insertElement(n),[n,s]}set passive(e){this._input.disabled=!!e}get passive(){return!!this._input.disabled}}class RN extends GN{static{c(this,"UIBaseMapKeyAddButton")}static TYPE_CLASS_PART="add_button"}class SN extends Kl{static{c(this,"UIBaseMapKeyCreate")}}class NN extends Kl{static{c(this,"UIBaseMapKeyChange")}constructor(e,t,...n){super(e,t,...n),this._lastValue=null}_initTemplate(e,...t){const[n,s]=super._initTemplate(e,...t);return s.addEventListener("blur",()=>{this._lastValue!==null&&(this._input.value=this._lastValue),this._lastValue=null}),[n,s]}update(e){e.has("key@")&&(this.isFocused()||(this._input.value=e.get("key@").value),this._lastValue=e.get("key@").value)}}function jl(i){const e=[...this.constructor.BASE_CLASSES,this.constructor.ROOT_CLASS];this.constructor.ROOT_CLASS!==this.BASE_CLASS&&this.BASE_CLASS&&e.push(this.BASE_CLASS);for(const t of e)for(const[n,...s]of i)n.classList.add([t,...s].join("-"))}c(jl,"_setClassesHelperMethod");class _t extends dn{static{c(this,"_UIBaseMap")}static ROOT_CLASS="ui_base_map";static BASE_CLASSES=[];static UIKeyCreate=SN;static UIKeyChange=NN;static UIKeyAddButton=RN;static KEY_ADD_BUTTON_LABEL="add item";static VISUAL_ORDER_STRATEGY_NATURAL=Symbol("VISUAL_ORDER_STRATEGY_NATURAL");static VISUAL_ORDER_STRATEGY_ALPHA=Symbol("VISUAL_ORDER_STRATEGY_ALPHA");static get TYPE_CLASS_PART(){throw new Error(`NOT IMPLEMENTED ${this.name} static TYPE_CLASS_PART`)}static get VISUAL_ORDER_STRATEGY(){throw new Error(`NOT IMPLEMENTED ${this.name} static VISUAL_ORDER_STRATEGY`)}static get KEY_DATA_TRANSFER_TYPE(){throw new Error(`NOT IMPLEMENTED ${this.name} static KEY_DATA_TRANSFER_TYPE`)}static ITEM_DATA_TRANSFER_TYPE=null;_createWrapperValue(e,t){throw new Error(`NOT IMPLEMENTED ${this}._createWrapperValue (for keyId: "${e}" key: "${t}").`)}constructor(e,t,n,s=null,r=!1){const o=s&&e.domTool.createElement("span",{class:"typeroof-ui-label"},s),a=e.domTool.createElement("span",{class:"drag_handle",draggable:"true"},"✥"),l=e.domTool.createElement("div",{class:"tools"}),A=e.domTool.createElement("ol"),u=e.domTool.createElement("div",{tabindex:"0"},[a,...s?[o]:[],l,A]),h=new Map([...t,["local",u],["tools",l],["main",A]]);e.wrapper.setProtocolHandlerImplementation(...Nn.create("key@",{treatAdressAsRootPath:!1})),super(e,h),this.MapModel=this.getEntry("childrenOrderedMap")?.constructor||null;const d=this.constructor.ITEM_DATA_TRANSFER_TYPE!==null;d||a.remove();const g=r?_t.VISUAL_ORDER_STRATEGY_NATURAL:this.constructor.VISUAL_ORDER_STRATEGY||_t.VISUAL_ORDER_STRATEGY_NATURAL;if(Object.defineProperties(this,{BASE_CLASS:{value:this.constructor.TYPE_CLASS_PART?`${this.constructor.ROOT_CLASS}_${this.constructor.TYPE_CLASS_PART}`:this.constructor.ROOT_CLASS},VISUAL_ORDER_STRATEGY:{value:g},DRAG_ENTRIES:{value:!!r}}),this._setClassesHelper([[u],...s?[[o,"label"]]:[],...d?[[a,"drag_handle"]]:[],[l,"tools"],[A,"items"]]),d)for(const f of[["dragstart",this._dragstartHandler.bind(this)],["dragend",this._dragendHandler.bind(this)]])a.addEventListener(...f);for(const f of n)u.addEventListener(...f);const p=c(f=>m=>{const y=D.fromString(this.widgetBus.getExternalName("childrenOrderedMap"));if(this.getEntry(y).size!==0)return;const G={rootPath:y,isEmptyLayerContainer:!0};return f.call(this,G,m)},"wrapChildrenContainerHandler");for(const f of[["dragenter",p(this._dragenterHandler)],["dragover",p(this._dragoverHandler)],["dragleave",this._dragleaveHandler.bind(this)],["drop",p(this._dropHandler)]])A.addEventListener(...f);this.widgetBus.insertElement(u),this.element=u,this._locationSetWidgets=new Map,this._keySlots=[],this._postponedKeyIdOrder=null;{const f=this._initialWidgets;this._initialWidgetsAmount=f.length,this._initWidgets(f)}this._removeDragIndicatorTimeoutId=null}get _initialWidgets(){return[[{zone:"tools",id:"key-create-input"},[],this.constructor.UIKeyCreate,[["input",this._keyCreateInputHandler.bind(this)],["keyup",t=>{t.key==="Enter"&&this._keyCreateSubmitHandler(t)}]]],[{zone:"tools",id:"key-add-button"},[],this.constructor.UIKeyAddButton,this.constructor.KEY_ADD_BUTTON_LABEL,[["click",this._keyCreateSubmitHandler.bind(this)]]]]}_createWrapperKey(e,t){const n=this._childrenWidgetBus,s={zone:e},r=[[e,"key@"]],o=this.constructor.UIKeyChange,a=[["input",this._keyChangeHandler.bind(this,t)],["blur",this._keyBlurHandler.bind(this,t)]],l=[a];return this._initWrapper(n,s,r,o,...l)}_dragstartHandler(e){if(this.constructor.ITEM_DATA_TRANSFER_TYPE===null)throw new Error(`MISCONFIGURATION attempting to drag ${this} but ITEM_DATA_TRANSFER_TYPE is not configured.`);const t=this.widgetBus.rootPath.parent;e.dataTransfer.setData(this.constructor.ITEM_DATA_TRANSFER_TYPE,`${t}`),e.dataTransfer.setData("text/plain",`[TypeRoof ${this.constructor.ITEM_DATA_TRANSFER_TYPE}: ${t}]`),this.element.classList.add("dragging"),e.dataTransfer.effectAllowed="all",e.dataTransfer.setDragImage(this.element,0,0)}_dragendHandler(){this.element.classList.remove("dragging")}_validateKeyString(e){return typeof e!="string"?[!1,`Key must be string but is typeof ${typeof e}.`]:e.length<1?[!1,`Key must be at least 1 char long but key.length is ${e.length}. Tag: "${e}".`]:this.MapModel&&this.MapModel.validateKey?this.MapModel.validateKey(e):[!0,null]}#e=Symbol("REDIRECT_LAST_KEY");async _keyChangeHandler(e,t){t.preventDefault();const n=t.target.value.trim(),[s,r]=this._validateKeyString(n),o=this._keySlots[e].widgetWrapper.widget;if(!s){o.setCustomValidity(r);return}return await this._changeState(()=>{const a=this.getEntry("childrenOrderedMap");if(a.has(n)){o.setCustomValidity(`Key "${n}" already exists.`);return}if(a.constructor.ORDERING!==null&&o.isFocused()){const A=o[this.#e];if(A!==void 0){const u=a.indexOfKey(A);if(u===-1){o.setCustomValidity(`Lost (moving) target redirection "${A}" no longer found.`);return}e=u}o[this.#e]=n}o.setCustomValidity("");const l=a.getIndex(e);a.arraySplice(e,1,[n,l])})}_keyBlurHandler(e){const{keyId:t,widgetWrapper:n}=this._keySlots[e],s=n.widget,r=this.widgetBus.wrapper.getProtocolHandlerImplementation("key@"),o=r.getRegistered(t).value;delete s[this.#e],this._postponedKeyIdOrder!==null&&(this._reorderContainers(this._postponedKeyIdOrder),this._postponedKeyIdOrder=null),s.value=o}_keyDragstartHandler(e,t,n){const s=this._zones.get(t);s.classList.add("dragging");const r=this.widgetBus.wrapper.getProtocolHandlerImplementation("key@"),o=r.getRegistered(t).value,a=e.append(o);n.dataTransfer.setData(this.constructor.KEY_DATA_TRANSFER_TYPE,`${a}`),n.dataTransfer.setData("text/plain",`[TypeRoof ${this.constructor.KEY_DATA_TRANSFER_TYPE}: ${a}]`),n.dataTransfer.effectAllowed="all",n.dataTransfer.setDragImage(s,0,0)}_keyDragendHandler(e){const t=this._zones.get(e);t&&t.classList.remove("dragging")}*_alphaOrderingGenerator(e){const t=new Map;for(const[s,[r,o]]of e)t.set(r,[s,o]);const n=Array.from(t.keys()).sort((s,r)=>s.localeCompare(r,void 0,{sensitivity:"base"}));for(const s of n){const[r,o]=t.get(s);yield[r,[s,o]]}}_reorderContainers(e){const t=this._zones.get("main"),n=t.children;for(const[s,r]of e.entries()){const o=this._zones.get(r);if(n[s]!==o){const a=e.slice(s).map(l=>this._zones.get(l));t.append(...a);break}}}update(...e){this.widgetBus.wrapper.getProtocolHandlerImplementation("key@").resetUpdatedLog(),super.update(...e)}initialUpdate(...e){this.widgetBus.wrapper.getProtocolHandlerImplementation("key@").resetUpdatedLog(),super.initialUpdate(...e)}_takeDragEventOrLeaveIt(e){const t=[this.constructor.KEY_DATA_TRANSFER_TYPE];for(const n of t)if(e.dataTransfer.types.includes(n))return e.preventDefault(),e.stopPropagation(),[!0,n];return[!1,null]}_getDropTargetInsertPosition(e,t){if(e.isEmptyLayerContainer)return"insert";const{height:n,top:s}=t.currentTarget.getBoundingClientRect(),{clientY:r}=t,o=r-s,a=o/n,l=e.isEmptyLayerItem?.8:.5;return a<l?"before":"after"}_setDropTargetIndicator(e,t=null){if(this._removeDragIndicatorTimeoutId!==null){const{clearTimeout:l}=this._domTool.window;l(this._removeDragIndicatorTimeoutId),this._removeDragIndicatorTimeoutId=null}const n="drop_target_indicator-",s=`${n}marked`,r=this._zones.get("main");for(const l of r.querySelectorAll(`:scope > .${s}`))for(const A of[...l.classList])A.startsWith(n)&&l.classList.remove(A);if(t===null)return;if(!["before","after","insert"].includes(t))throw new Error(`NOT IMPLEMENTED ${this} insert position "${t}".`);const[o,a]=[e,t];o.classList.add(`${n}${a}`),o.classList.add(s)}_dragoverHandler(e,t){const[n,s]=this._takeDragEventOrLeaveIt(t);if(!n)return;t.dataTransfer.dropEffect=s===this.constructor.KEY_DATA_TRANSFER_TYPE?"move":"copy";const r=this._getDropTargetInsertPosition(e,t);this._setDropTargetIndicator(t.currentTarget,r)}_dragenterHandler(e,t){const[n,s]=this._takeDragEventOrLeaveIt(t);if(!n)return;t.dataTransfer.dropEffect=s===this.constructor.KEY_DATA_TRANSFER_TYPE?"move":"copy";const r=this._getDropTargetInsertPosition(e,t);this._setDropTargetIndicator(t.currentTarget,r)}_dragleaveHandler(e){if(!this._takeDragEventOrLeaveIt(e)[0])return;const{setTimeout:t}=this._domTool.window;this._removeDragIndicatorTimeoutId=t(this._setDropTargetIndicator.bind(this,e.currentTarget),100)}_dropHandler(e,t){const[n,s]=this._takeDragEventOrLeaveIt(t);if(!n)return;this._setDropTargetIndicator(t.currentTarget);const{rootPath:r}=e,o=this._getDropTargetInsertPosition(e,t);let a=r;if(o!=="insert"){const l=e.keyId,A=this.widgetBus.wrapper.getProtocolHandlerImplementation("key@"),u=A.getRegistered(l).value;a=r.append(u)}if(s===this.constructor.KEY_DATA_TRANSFER_TYPE){const l=t.dataTransfer.getData(this.constructor.KEY_DATA_TRANSFER_TYPE),A=D.fromString(l);return this._move(A,a,o)}else console.error(`NOT IMPLEMENTED ${this}_dropHandler for type "${s}"`)}_move(e,t,n){return this._changeState(()=>{const s=n==="insert"?this.getEntry(t):this.getEntry(t.parent),r=this.getEntry(e.parent),o=e.parts.at(-1),a=r.get(o),l=[o,a];if(n==="insert"){s.push(l),r.delete(o);return}const A=t.parts.at(-1),[u]=s.keyToIndex(A),[h]=r.keyToIndex(o);if(s===r){if(h===u)return;let d;if(n==="after")d=u+1;else if(n==="before")d=u;else throw new Error(`NOT IMPLEMENTED ${this} insert position "${n}".`);h<u&&(d=d-1),r.delete(o),s.arraySplice(d,0,l);return}if(r.delete(o),n==="after")s.arraySplice(u+1,0,l);else if(n==="before")s.arraySplice(u,0,l);else throw new Error(`NOT IMPLEMENTED insert position "${n}".`)})}_keyCreateInputHandler(){const e=this.getWidgetById("key-add-button"),t=this.getWidgetById("key-create-input"),n=t.value.trim(),[s,r]=this._validateKeyString(n);if(!s){e.passive=!0,t.setCustomValidity(r);return}if(this.getEntry("childrenOrderedMap").has(n)){e.passive=!0,t.setCustomValidity(`Key "${n}" already exists.`);return}e.passive=!1,t.setCustomValidity("")}async _keyCreateSubmitHandler(e){e.preventDefault();const t=this.getWidgetById("key-add-button"),n=this.getWidgetById("key-create-input"),s=n.value.trim(),[r,o]=this._validateKeyString(s);if(!r){t.passive=!0,n.setCustomValidity(o);return}return await this._changeState(()=>{const a=this.getEntry("childrenOrderedMap");if(a.has(s)){n.setCustomValidity(`Key "${s}" already exists.`);return}const l=this._createKeyValue?this._createKeyValue(a):a.constructor.Model.createPrimalDraft(a.dependencies);a.push([s,l]),n.reset(),this._onItemCreated(s)})}_onItemCreated(){}_provisionWidgets(){this._widgets.splice(this._initialWidgetsAmount||0,1/0);const e=we.prototype._provisionWidgets.call(this),t=[],n=this.getEntry("childrenOrderedMap"),s=this.widgetBus.wrapper.getProtocolHandlerImplementation("key@"),r=D.fromString(this.widgetBus.getExternalName("childrenOrderedMap"));for(const l of this._locationSetWidgets.keys()){if(n.has(l))continue;const A=this._locationSetWidgets.get(l);this._destroyWidget(A),this._locationSetWidgets.delete(l)}for(const{keyId:l,widgetWrapper:A,unregister:u}of this._keySlots.splice(n.size,1/0))u(),this._zones.get(l).remove(),this._zones.delete(l),this._destroyWidget(A);const o=this.VISUAL_ORDER_STRATEGY===this.constructor.VISUAL_ORDER_STRATEGY_ALPHA?this._alphaOrderingGenerator(n.indexedEntries()):n.indexedEntries(),a=[];for(const[l,[A]]of o){const u=s.getId(l);if(a.push(u),s.hasRegistered(u)){const{widgetWrapper:d}=this._keySlots[l];t.push(d)}else{const d={value:null},g=s.register(u,d),p=this._domTool.createElement("li"),f=[[p,"item"]],m={rootPath:r,keyId:u,key:A},y=[["dragenter",this._dragenterHandler.bind(this,m)],["dragover",this._dragoverHandler.bind(this,m)],["dragleave",this._dragleaveHandler.bind(this)],["drop",this._dropHandler.bind(this,m)]];for(const R of y)p.addEventListener(...R);let v=null;if(this.DRAG_ENTRIES){v=this._domTool.createElement("span",{class:"drag_handle",draggable:"true"},"✥");const R=[["dragstart",this._keyDragstartHandler.bind(this,r,u)],["dragend",this._keyDragendHandler.bind(this,u)]];for(const Q of R)v.addEventListener(...Q);f.push([v,"item","drag_handle"])}this._setClassesHelper(f),this._zones.set(u,p),this._zones.get("main").append(p);const G=this._createWrapperKey(u,l);t.push(G),e.add(G),this._createWidget(G),v&&p.append(v),this._keySlots[l]={keyId:u,widgetWrapper:G,unregister:g}}const h=s.getRegistered(u);h.value!==A&&(h.value=A,s.setUpdated(u));{let d;if(this._locationSetWidgets.has(A)){d=this._locationSetWidgets.get(A);const g=this._zones.get(u);d.host!==g&&d.reinsert(g)}else d=this._createWrapperValue(u,A),this._createWidget(d),this._locationSetWidgets.set(A,d),e.add(d);t.push(d)}}{this._postponedKeyIdOrder=null;const l=this._zones.get("main"),A=[...l.children];let u=!1;for(const[h,d]of a.entries()){const g=this._zones.get(d);if(A[h]!==g){u=!0;break}}if(u){for(const{widgetWrapper:h}of this._keySlots)if(h.widget.isFocused()){this._postponedKeyIdOrder=a;break}this._postponedKeyIdOrder===null&&this._reorderContainers(a)}}return this._widgets.push(...t),e}}_t.prototype._setClassesHelper=jl;class Vo{static{c(this,"_DialogBase")}constructor(e){this._domTool=e,this._resolvers=null}toString(){return`[Dialog ${this.constructor.name}]`}_initTemplate(){const e=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE).firstElementChild;return e.addEventListener("close",()=>{this._resolve(e.returnValue)}),this._domTool.document.body.append(e),[e]}async show(){if(this._resolvers)throw new Error("Dialog is already waiting for input.");return new Promise((e,t)=>{this._resolvers={resolve:e,reject:t}})}_resolve(e){if(!this._resolvers)throw new Error("Dialog is not active.");const t=this._resolvers.resolve;this._resolvers=null,t(e)}_reject(e){if(!this._resolvers)throw new Error("Dialog is not active.");const t=this._resolvers.reject;this._resolvers=null,t(e)}destroy(){this._resolvers&&this._reject("Dialog destroyed."),this.element.remove()}}class Oo extends me{static{c(this,"_UIAbstractPlainInputWrapper")}static createClass(e,t){const n={[e]:class extends this{static PlainInput=t}};return Object.freeze(n[e]),n[e]}constructor(e,...t){super(e);const n=this._changeStateHandler(s=>this.getEntry("value").set(s));this._ui=new this.constructor.PlainInput(this._domTool,n,...t),this._insertElement(this._ui.element)}update(e){e.has("value")&&this._ui.update(e.get("value").value)}set passive(e){this._ui.passive=!!e}get passive(){return this._ui.passive}setDisplay(e){this._ui.setDisplay(e)}}const NC='<span class="drag_handle" draggable="true">✥</span>';function QC(i){const e=this.widgetBus.rootPath;i.dataTransfer.setData(this.constructor.ITEM_DATA_TRANSFER_TYPE_PATH,`${e}`),i.dataTransfer.setData("text/plain",`[TypeRoof ${this.constructor.ITEM_DATA_TRANSFER_TYPE_PATH}: ${e}]`),this.element.classList.add("dragging"),i.dataTransfer.effectAllowed="all",i.dataTransfer.setDragImage(this.element,0,0),this.element.matches(":focus-within")&&this._domTool.document.activeElement.blur()}c(QC,"_dragstartHandlerMethod");function wC(){this.element.classList.remove("dragging")}c(wC,"_dragendHandlerMethod");function ZC(){const i=this._domTool.createFragmentFromHTML(this.constructor.DRAGHANDLE_TEMPLATE).firstElementChild;for(const e of[["dragstart",this._dragstartHandler.bind(this)],["dragend",this._dragendHandler.bind(this)]])i.addEventListener(...e),this._setClassesHelper([[i,"drag_handle"]]);return i}c(ZC,"_createDragHandleMethod");class Po extends me{static{c(this,"_UIBaseListItem")}static ROOT_CLASS="ui_base_list_simple_item";static BASE_CLASSES=["ui_base_list_item"];static get TYPE_CLASS_PART(){throw new Error(`NOT IMPLEMENTED ${this.name} static TYPE_CLASS_PART`)}static get ITEM_DATA_TRANSFER_TYPE_PATH(){throw new Error(`NOT IMPLEMENTED ${this.name} static ITEM_DATA_TRANSFER_TYPE_PATH`)}static TEMPLATE=`<div
        tabindex="0"
        ><!-- insert: label-element --><!-- insert: drag-handle -->
        <output>(UNINITIALIZED)</output></div>`;static DRAGHANDLE_TEMPLATE=NC;static additionalDependencies=[];constructor(e,t=[],n=!1,s=null){super(e),Object.defineProperties(this,{BASE_CLASS:{value:this.constructor.TYPE_CLASS_PART?`${this.constructor.ROOT_CLASS}_${this.constructor.TYPE_CLASS_PART}`:this.constructor.ROOT_CLASS}}),Object.assign(this,this._initTemplate()),this._setClassesHelper([[this.element]]),this._dragHandle=this._initDragHandle(n),s!==null&&(this._label=this._initLabel(s));for(const r of t)this.element.addEventListener(...r)}_initTemplate(){const e=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE).firstElementChild,t=e.querySelector("output");return this._setClassesHelper([[t,"output"]]),this._insertElement(e),{element:e,_output:t}}_initDragHandle(e){if(!e)return null;const t=this._createDragHandle();return this._domTool.insertAtMarkerComment(this.element,"insert: drag-handle",t),t}_initLabel(e){if(e===null)return null;const t=this.widgetBus.domTool.createElement("span",{class:"typeroof-ui-label"},e);return this._setClassesHelper([[t,"label"]]),this._domTool.insertAtMarkerComment(this.element,"insert: label-element",t),t}update(e){if(e.has("value")){const t=e.get("value");this._output.textContent=t.value}}}Po.prototype._setClassesHelper=jl;Po.prototype._dragstartHandler=QC;Po.prototype._dragendHandler=wC;Po.prototype._createDragHandle=ZC;class Ho extends we{static{c(this,"_UIBaseListContainerItem")}static ROOT_CLASS="ui_base_list_container_item";static BASE_CLASSES=["ui_base_list_item"];static REQUIRE_ZONES_ARGUMENT=!0;static get TYPE_CLASS_PART(){throw new Error(`NOT IMPLEMENTED ${this.name} static TYPE_CLASS_PART`)}static get ITEM_DATA_TRANSFER_TYPE_PATH(){throw new Error(`NOT IMPLEMENTED ${this.name} static ITEM_DATA_TRANSFER_TYPE_PATH`)}static DRAGHANDLE_TEMPLATE=NC;static additionalDependencies=[];constructor(e,t,n=[],s=!1){const r=e.domTool.createElement("div"),o=new Map([...t,["local",r]]);if(super(e,o),Object.defineProperties(this,{BASE_CLASS:{value:this.constructor.TYPE_CLASS_PART?`${this.constructor.ROOT_CLASS}_${this.constructor.TYPE_CLASS_PART}`:this.constructor.ROOT_CLASS}}),this.element=r,this._insertElement(this.element),this._setClassesHelper([[this.element]]),s){const a=this._createDragHandle();this.element.append(a)}for(const a of n)this.element.addEventListener(...a)}}Ho.prototype._setClassesHelper=jl;Ho.prototype._dragstartHandler=QC;Ho.prototype._dragendHandler=wC;Ho.prototype._createDragHandle=ZC;const tA=Symbol("DROP_INSERT_DIRECTION_VERTICAL"),rp=Symbol("DROP_INSERT_DIRECTION_HORIZONTAL");class bs extends dn{static{c(this,"_UIBaseList")}static ROOT_CLASS="ui_base_list";static BASE_CLASSES=[];static UIItem=Po;static DROP_INSERT_DIRECTION_VERTICAL=tA;static DROP_INSERT_DIRECTION_HORIZONTAL=rp;DROP_INSERT_DIRECTION=tA;static get TYPE_CLASS_PART(){throw new Error(`NOT IMPLEMENTED ${this.name} static TYPE_CLASS_PART`)}static get ITEM_DATA_TRANSFER_TYPE_PATH(){throw new Error(`NOT IMPLEMENTED ${this.name} static ITEM_DATA_TRANSFER_TYPE_PATH`)}static get ITEM_DATA_TRANSFER_TYPE_CREATE(){throw new Error(`NOT IMPLEMENTED ${this.name} static KEY_DATA_TRANSFER_TYPE`)}constructor(e,t,n="local"){const s=e.domTool.createElement("div"),r=new Map([...t,["local",s]]);super(e,r),this._childrenMainZone=n,this._childrensMainZoneElement=this._zones.get(n),Object.defineProperties(this,{BASE_CLASS:{value:this.constructor.TYPE_CLASS_PART?`${this.constructor.ROOT_CLASS}_${this.constructor.TYPE_CLASS_PART}`:this.constructor.ROOT_CLASS}}),this._setClassesHelper([[s]]);const o=c(a=>l=>{const A=D.fromString(this.widgetBus.getExternalName("collection"));if(this.getEntry(A).size!==0)return;const h={rootPath:A,isEmptyLayerContainer:!0};return a.call(this,h,l)},"wrapChildrenContainerHandler");for(const a of[["dragenter",o(this._dragenterHandler)],["dragover",o(this._dragoverHandler)],["dragleave",this._dragleaveHandler.bind(this)],["drop",o(this._dropHandler)]])this._childrensMainZoneElement.addEventListener(...a);this._insertElement(s),this.element=s,this._removeDragIndicatorTimeoutId=null}_takeDragEventOrLeaveIt(e){const t=[this.constructor.ITEM_DATA_TRANSFER_TYPE_PATH,this.constructor.ITEM_DATA_TRANSFER_TYPE_CREATE];for(const n of t)if(e.dataTransfer.types.includes(n))return e.preventDefault(),e.stopPropagation(),[!0,n];return[!1,null]}[rp](e,t){if(e.isEmptyLayerContainer)return"insert";const{width:n,left:s}=t.currentTarget.getBoundingClientRect(),{clientX:r}=t,o=r-s,a=o/n,l=e.isEmptyLayerItem?.8:.5;return a<l?"before":"after"}[tA](e,t){if(e.isEmptyLayerContainer)return"insert";const{height:n,top:s}=t.currentTarget.getBoundingClientRect(),{clientY:r}=t,o=r-s,a=o/n,l=e.isEmptyLayerItem?.8:.5;return a<l?"before":"after"}_getDropTargetInsertPosition(e,t){return this[this.DROP_INSERT_DIRECTION](e,t)}_setDropTargetIndicator(e,t=null){if(this._removeDragIndicatorTimeoutId!==null){const{clearTimeout:a}=this._domTool.window;a(this._removeDragIndicatorTimeoutId),this._removeDragIndicatorTimeoutId=null}const n="drop_target_indicator-",s=`${n}marked`;for(const a of[this._childrensMainZoneElement,...this._childrensMainZoneElement.querySelectorAll(`:scope > .${s}`)])for(const l of[...a.classList])l.startsWith(n)&&a.classList.remove(l);if(t===null)return;if(!["before","after","insert"].includes(t))throw new Error(`NOT IMPLEMENTED ${this} insert position "${t}".`);const[r,o]=[e,t];r.classList.add(`${n}${o}`),r.classList.add(s)}_dragoverHandler(e,t){const[n,s]=this._takeDragEventOrLeaveIt(t);if(!n)return;t.dataTransfer.dropEffect=s===this.constructor.ITEM_DATA_TRANSFER_TYPE_PATH?"move":"copy";const r=this._getDropTargetInsertPosition(e,t);this._setDropTargetIndicator(t.currentTarget,r)}_dragenterHandler(e,t){const[n,s]=this._takeDragEventOrLeaveIt(t);if(!n)return;t.dataTransfer.dropEffect=s===this.constructor.ITEM_DATA_TRANSFER_TYPE_PATH?"move":"copy";const r=this._getDropTargetInsertPosition(e,t);this._setDropTargetIndicator(t.currentTarget,r)}_dragleaveHandler(e){if(!this._takeDragEventOrLeaveIt(e)[0])return;const{setTimeout:t}=this._domTool.window;this._removeDragIndicatorTimeoutId=t(this._setDropTargetIndicator.bind(this,e.currentTarget),100)}_dropHandler(e,t){const[n,s]=this._takeDragEventOrLeaveIt(t);if(!n)return;this._setDropTargetIndicator(t.currentTarget);const r=t.dataTransfer.getData(s),{rootPath:o}=e,a=this._getDropTargetInsertPosition(e,t);if(s===this.constructor.ITEM_DATA_TRANSFER_TYPE_PATH){const l=r,A=D.fromString(l);return this._move(A,o,a)}else if(s===this.constructor.ITEM_DATA_TRANSFER_TYPE_CREATE){const l=r;this._create(o,a,l)}else console.error(`NOT IMPLEMENTED ${this}._dropHandler type: "${s}"`)}_createWrapper(e){const t=this._childrenWidgetBus,n={rootPath:e,zone:this._childrenMainZone},s=[["./","value"]],r=this.constructor.UIItem,o=!0,a={rootPath:e},l=[["dragenter",this._dragenterHandler.bind(this,a)],["dragover",this._dragoverHandler.bind(this,a)],["dragleave",this._dragleaveHandler.bind(this)],["drop",this._dropHandler.bind(this,a)]],A=[...this.constructor.UIItem.REQUIRE_ZONES_ARGUMENT?[this._zones]:[],l,o];for(const u of this.constructor.UIItem.additionalDependencies){if(u===void 0)throw new Error(`VALUE ERROR additionalDependencies  has an empty entry in ${this} UIItem.additionalDependencies`);const h=Array.isArray(u)?u.slice():[u],d=h.at(0),g=h.at(1)===void 0?d:h.at(1);s.push([this.widgetBus.getExternalName(d),g])}return this._initWrapper(t,n,s,r,...A)}_move(e,t,n){if(!!e.isRootOf(t)){console.warn(`${this}._move can't move source into target as source path "${e}" is root of target path "${t}".`);return}return this._changeState(()=>{const r=n==="insert"?this.getEntry(t):this.getEntry(t.parent),o=this.getEntry(e.parent),a=e.parts.at(-1),l=o.get(a);if(n==="insert"){r.push(l),o.delete(a);return}const A=t.parts.at(-1),u=parseInt(A,10),h=parseInt(a,10);if(r===o){if(h===u)return;let d;if(n==="after")d=u+1;else if(n==="before")d=u;else throw new Error(`NOT IMPLEMENTED ${this} insert position "${n}".`);h<u&&(d=d-1),o.delete(a),r.splice(d,0,l);return}if(o.delete(a),n==="after")r.splice(u+1,0,l);else if(n==="before")r.splice(u,0,l);else throw new Error(`NOT IMPLEMENTED insert position "${n}".`)})}_createNewItem(e,t,n,s){throw new Error(`NOT IMPLEMENTED ${this}._createNewItem (for targetPath: "${e}", insertPosition: "${t}", value: "${s}"; with items ${n}).`)}_create(e,t,n){return this._changeState(()=>{const s=t==="insert"?this.getEntry(e):this.getEntry(e.parent),r=this._createNewItem(e,t,s,n);if(t==="insert"){s.push(r);return}const o=e.parts.at(-1),a=parseInt(o,10);let l;if(t==="after")l=a+1;else if(t==="before")l=a;else throw new Error(`NOT IMPLEMENTED ${this} insert position "${t}".`);s.splice(l,0,r)})}}bs.prototype._setClassesHelper=jl;class Xo extends me{static{c(this,"_UIAbstractPlainOrEmptyInputWrapper")}static createClass(e,t){const n={[e]:class extends this{static PlainOrEmptyInput=t}};return Object.freeze(n[e]),n[e]}constructor(e,t,n,...s){super(e),this._getDefault=t||null,this._requireUpdateDefaults=n||(()=>!1);const r=this._changeStateHandler(a=>this.getEntry("value").set(a)),o=this._changeStateHandler(()=>{const a=this.getEntry("value");a.isEmpty?a.set(this._getDefault?this._getDefault():void 0):a.clear()});this._ui=new this.constructor.PlainOrEmptyInput(this._domTool,r,o,...s),this._insertElement(this._ui.element)}update(e){const t=this._requireUpdateDefaults(e);if(e.has("value")||t){const n=e.has("value")?e.get("value"):this.getEntry("value");let s,r;n.isEmpty?(s=!1,r=this._getDefault?this._getDefault():void 0):(s=!0,r=n.value),this._ui.update(s,r)}}}function QN(i,e,t,n){var s=e.ownerDocument.createElement("input");s.setAttribute("type","file"),s.setAttribute("multiple","multiple"),s.style.display="none";function r(){i(this.files)}c(r,"fileInputChange");function o(){s.click()}c(o,"forwardClick");function a(g){g.stopPropagation(),g.preventDefault()}c(a,"stopEvent");function l(g){a(g),n.dragenter&&n.dragenter(g)}c(l,"dragenter");function A(g){a(g),n.dragover&&n.dragover(g)}c(A,"dragover");function u(g){n.dragleave&&n.dragleave(g)}c(u,"dragleave");function h(g){n.dragend&&n.dragend(g)}c(h,"dragend");function d(g){a(g),i(g.dataTransfer.files),n.drop&&n.drop(g)}c(d,"drop"),s.addEventListener("change",r),e&&e.addEventListener("click",o),t&&(t.addEventListener("dragenter",l),t.addEventListener("dragover",A),t.addEventListener("dragleave",u),t.addEventListener("dragend",h),t.addEventListener("drop",d))}c(QN,"makeFileInput");class ql extends me{static{c(this,"FontSelect")}static TEMPLATE=`<label class="ui_font-select">
    <span class="ui_font-select_label">Family</span>
    <select class="ui_font-select_select"></select>
</label>`;constructor(e,t=!1){super(e),this._allowNoneSelect=!!t,[this.element,this._label,this._select]=this.initTemplate()}initTemplate(){const e=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE),t=e.querySelector(".ui_font-select"),n=e.querySelector(".ui_font-select_label"),s=e.querySelector(".ui_font-select_select");return this._insertElement(t),s.addEventListener("change",this._changeStateHandler(async()=>{const r=this._allowNoneSelect&&this._select.value===""?ce.NULL:this._select.value;this.widgetBus.requireReviewResources(),this.getEntry("activeFontKey").set(r)})),[t,n,s]}update(e){e.has("options")&&this._updateOptions(e.get("options")),e.has("activeFontKey")&&this._updateValue(e.get("activeFontKey"))}_updateOptions(e){const t=this._select.value,n={},s=c(a=>{const l=this._domTool.createElement("optgroup");switch(a){case"from-url":l.label="Included fonts";break;case"from-file":l.label="Your local fonts";break;default:l.label=`Origin: ${a}`}const A=this._domTool.createElement("legend");return A.textContent=l.label,l.append(A),l},"createOptGroup"),r=c(a=>(a in n||(n[a]=s(a)),n[a]),"getOptGroup");for(const[a,{value:l}]of e){const A=r(l.origin.type),u=l.nameVersion,h=this._domTool.createElement("option");h.value=a,h.textContent=u,A.append(h)}this._domTool.clear(this._select);const o=new Set;if(this._allowNoneSelect){const a=this._domTool.createElement("option");a.value="",a.textContent="(no selection)",this._select.append(a)}for(const a of["from-url","from-file",...Object.keys(n)])o.has(a)||(o.add(a),a in n&&this._select.append(n[a]));this._select.value=t}_updateValue(e){e.value===ce.NULL?this._allowNoneSelect?this._select.value="":console.warn(`${this} activeFontKey is ForeignKey.NULL but allowNoneSelect is false.`):this._select.value=e.value}}function wN(i,e=null){const t=c(async n=>{const s=await i.loadFontsFromFiles(...n);if(!s.length)return;const r=s.at(-1);i.requireReviewResources(),i.getEntry("activeFontKey").set(r),e?.()},"handleFiles");return async(...n)=>i.changeState(()=>t(...n))}c(wN,"_getFilesHandler");class kC{static{c(this,"PlainAddFonts")}static TEMPLATE='<button class="ui_font-select">+ Add local fonts</button>';constructor(e,t,n=null,s=null){[this.element,this.dropElement]=this.initTemplate(e,t,n,s)}initTemplate(e,t,n=null,s=null){const r=e.domTool.createFragmentFromHTML(this.constructor.TEMPLATE),o=r.firstElementChild,a=c(()=>t.classList.add("dropzone"),"dragAddClass"),l=c(()=>t.classList.remove("dropzone"),"dragRemoveClass"),A={dragenter:a,dragover:c(h=>{h.dataTransfer.dropEffect="copy",a()},"dragover"),dragleave:c(h=>{h.target===t&&l()},"dragleave"),dragend:l,drop:l};n!==null&&o.setAttribute("title",n);const u=wN(e,s);return QN(u,o,t,A),[o,t]}destroy(){throw new Error("NOT IMPLEMENTED but there are event listeners attached to <body> that must get removed.")}}class AL extends me{static{c(this,"AddFonts")}constructor(e,t,n=null){super(e),this._plainAddFonts=new kC(this.widgetBus,t,n),this._insertElement(this._plainAddFonts.element)}update(){}destroy(){this._plainAddFonts.destroy()}}const ZN=`<dialog>
    <form method="dialog">
      <fieldset>
        <legend>Font Exists</legend>
        <p>A font with the name<br />
        <code class="dialog-font_name"></code><br />
        is already loaded.
        </p>
        <menu>
          <p>Keep the loaded font or replace it with the new font:</p>
          <button type="submit" value="keep">Keep</button>
          <button type="submit" value="replace">Replace</button>
        </menu>
      </fieldset>
    </form>
  </dialog>
`;class kN extends Vo{static{c(this,"UIDialogFontExists")}static TEMPLATE=ZN;constructor(e){super(e),[this.element,this._name]=this._initTemplate()}_initTemplate(){const[e]=super._initTemplate(),t=e.querySelector(".dialog-font_name");return[e,t]}async show(e){const t=super.show(),n=this.element;return this._name.append(`"${e.nameVersion}"`,this._domTool.createElement("br"),`(key: ${e.fullName})`),n.returnValue="initial",n.showModal(),t}}const _N=`<dialog>
    <form method="dialog">
      <fieldset>
        <legend>Manage fonts</legend>
        <!-- insert: addFonts -->
        <p>Select fonts for removal from local storage:</p>
        <ul class="dialog-multi_select_fonts"></ul>
        <p class="dialog-action_description"></p>
        <menu>
          <button type="submit" value="remove">Remove</button>
          <button type="submit" value="cancel">Cancel</button>
        </menu>
      </fieldset>
    </form>
  </dialog>
`;class uL extends Vo{static{c(this,"UIDialogManageFonts")}static TEMPLATE=_N;static hostInit(){const e=[],t=[],n=this.getEntry("availableFonts"),s=[];for(const[o,{value:a}]of n)a.origin.type==="from-file"&&s.push([o,a.nameVersion]);const r=c(async o=>{if(console.log(`${this} remove fonts callback args:`,o),!!o.length)return await this.widgetBus.changeState(async()=>await this.widgetBus.removeFontsFromFiles(...o).then(a=>(console.log("removeFontsFromFiles result:",a),{result:a,augmented:!0})))},"removeFontsFN");return e.push(this.widgetBus,r),t.push(s),[e,t]}constructor(e,t,n){super(e),this._removeFonts=n,[this.element,this._form,this._fonts,this._actionDescription,this._removeButton,this._plainAddFonts]=this._initTemplate(t)}_initTemplate(e){const[t]=super._initTemplate(),n=t.querySelector("form"),s=t.querySelector(".dialog-multi_select_fonts"),r=t.querySelector(".dialog-action_description"),o=t.querySelector('button[value="remove"]');s.addEventListener("change",this._fontsChangeHandler.bind(this));const a=new kC(e,n,"… or drag a font onto the dialog",()=>{this._resolve("add-fonts")});return this._domTool.insertAtMarkerComment(t,"insert: addFonts",a.element),[t,n,s,r,o,a]}_getSelectedFonts(){return new this._domTool.window.FormData(this._form).getAll("dialog_multi-select-fonts")}_fontsChangeHandler(){const e=this._getSelectedFonts();e.length>0?(this._actionDescription.textContent=`Remove ${e.length} font${e.length===1?"":"s"}.`,this._removeButton.removeAttribute("disabled")):(this._actionDescription.textContent="Nothing selected, nothing to do.",this._removeButton.setAttribute("disabled",""))}async show(e){const t=super.show(),n=this.element;return this._fonts.append(...e.map(([s,r])=>{const o=this._domTool.createElement("input",{type:"checkbox"}),a=this._domTool.createElement("label",null,[o," ",r]),l=this._domTool.createElement("li",null,a);return o.value=s,o.name="dialog_multi-select-fonts",l})),this._fontsChangeHandler(),n.returnValue=null,n.showModal(),await t.then(s=>{if(s!=="remove")return s;if(e=this._getSelectedFonts(),e.length)return this._removeFonts(e)})}}function nA(i){return new Promise((e,t)=>{i.onsuccess=e,i.onerror=t})}c(nA,"promiseWrap");function YN(i,e){return new Promise((t,n)=>{i.onsuccess=s=>t(s.target.result),i.onerror=n,i.onblocked=s=>{n(s)},i.onupgradeneeded=s=>e(s)})}c(YN,"promiseWrapOpenDBRequest");class WN{static{c(this,"LocalFontStorage")}static _onUpgradeNeededHandler(e){const t=e.target.result;t.onerror=n=>console.warn(`CAUTION: _onUpgradeNeeded onerror: ${n}. IS this handler required?`),t.createObjectStore("fonts",{keyPath:"fullName"})}static init(e){const t=e.indexedDB.open("LocalFontStorage",1);return YN(t,this._onUpgradeNeededHandler).then(s=>new this(s)).catch(s=>{const r=`${this.name} init failed.`;throw console.error(`${r} with ${s}:`,s),new Error(r)})}constructor(e){this.db=e}async put(e){const t=this.db.transaction(["fonts"],"readwrite").objectStore("fonts").put({fullName:e.fullName,nameVersion:e.nameVersion,serializationNameParticles:e.serializationNameParticles,buffer:e.buffer,origin:e.origin.toDB()});return(await nA(t)).target.result}async delete(e){const t=this.db.transaction(["fonts"],"readwrite").objectStore("fonts").delete(e);return(await nA(t)).target.result}async get(e){const t=this.db.transaction(["fonts"],"readonly").objectStore("fonts").get(e);return(await nA(t)).target.result}async*getAll(){const e=this.db.transaction(["fonts"],"readonly").objectStore("fonts").openCursor(),t={};for(e.onsuccess=n=>{const s=n.target.result;s?(t.resolve(s.value),s.continue()):t.resolve(null)},e.onerror=n=>t.reject(n);;){const n=await new Promise((s,r)=>{t.resolve=s,t.reject=r});if(n!==null)yield n;else break}}}class ks extends ye{static{c(this,"_BaseLayoutModel")}}const ao=Pt.createClass("InstalledFontModel"),du=Pt.createClass("DeferredFontModel"),DN=Pt.createClass("LayoutTypeModel"),TN=Pt.createClass("LayoutGroupKeyModel"),_C=ye.createClass("AvailableLayoutModel",["label",qe],["typeClass",DN],["groupKey",TN]),YC=Ue.createClass("AvailableLayoutsModel",_C),Pr=Ue.createClass("AvailableFontsModel",du),lo=Ue.createClass("InstalledFontsModel",ao),iA=ye.createClass("ApplicationModel",st.create(["activeState","layoutTypeModel"],c(function({activeState:e,layoutTypeModel:t}){const n=t.get("typeClass").value,s=kt(e).WrappedType;s!==n&&console.warn(`TYPE WARNING activeState wrapped type "${s.name}" must equal layout type "${t.get("label").value}" (${n.name})`)},"checkTypes")),["availableLayouts",new $t("availableLayouts",YC)],["activeLayoutKey",new ce("availableLayouts",ce.NOT_NULL,ce.SET_DEFAULT_LAST)],["layoutTypeModel",new Xn("activeLayoutKey")],["activeState",nn.createClass("DynamicLayoutModel",ks,"layoutTypeModel",["font","installedFonts"])],["availableFonts",new $t("availableFonts",Pr)],["installedFonts",new $t("installedFonts",lo)],["activeFontKey",new ce("installedFonts",ce.NOT_NULL,ce.CUSTOM,function*(i,e){const t=yield new Do(this,i,e,ce.SET_DEFAULT_FIRST);if(!i.has(t)){if(this.allowNull)return ce.NULL;throw js(new Error(`CONSTRAINT ERROR ${this} Can't set key from requested ResourceRequirement ${t.toString()} is not in targetContainer "${this.targetName}" or NULL.`))}return t})],["font",new Xn("activeFontKey")]);function WC(i){var e=i.wasmExports,t=i.HEAPU8,n=i.HEAPU32,s=i.HEAP32,r=i.HEAPF32,o=new TextDecoder("utf8");let a=i.addFunction;var l=a(function(O){e.free(O)},"vi"),A=2,u=-1,h=2,d=0,g=1,p=2;function f(O){return(O.charCodeAt(0)&255)<<24|(O.charCodeAt(1)&255)<<16|(O.charCodeAt(2)&255)<<8|(O.charCodeAt(3)&255)<<0}c(f,"hb_tag");var m=f("JSON"),y=4;function v(O){return[String.fromCharCode(O>>24&255),String.fromCharCode(O>>16&255),String.fromCharCode(O>>8&255),String.fromCharCode(O>>0&255)].join("")}c(v,"_hb_untag");function G(O){return O=="BOT"?1:O=="EOT"?2:O=="PRESERVE_DEFAULT_IGNORABLES"?4:O=="REMOVE_DEFAULT_IGNORABLES"?8:O=="DO_NOT_INSERT_DOTTED_CIRCLE"?16:O=="PRODUCE_UNSAFE_TO_CONCAT"?64:0}c(G,"_buffer_flag");function R(O){var L=e.malloc(O.byteLength);t.set(new Uint8Array(O),L);var T=e.hb_blob_create(L,O.byteLength,A,L,l);return{ptr:T,destroy:c(function(){e.hb_blob_destroy(T)},"destroy")}}c(R,"createBlob");function Q(O,L){let T=t;L===Uint32Array?T=n:L===Int32Array?T=s:L===Float32Array&&(T=r);const he=L.BYTES_PER_ELEMENT,W=e.hb_set_get_population(O),z=e.malloc(W*he),ie=z/he,ee=T.subarray(ie,ie+W);return T.set(ee,ie),e.hb_set_next_many(O,u,z,W),ee}c(Q,"typedArrayFromSet");function S(O,L){var T=e.hb_face_create(O.ptr,L);const he=e.hb_face_get_upem(T);return{ptr:T,upem:he,reference_table:c(function(W){var z=e.hb_face_reference_table(T,f(W)),ie=e.hb_blob_get_length(z);if(ie){var ee=e.hb_blob_get_data(z,null),J=t.subarray(ee,ee+ie);return J}},"reference_table"),getAxisInfos:c(function(){var W=e.malloc(2048),z=e.malloc(4);n[z/4]=64,e.hb_ot_var_get_axis_infos(T,0,z,W);var ie={};return Array.from({length:n[z/4]}).forEach(function(ee,J){ie[v(n[W/4+J*8+1])]={min:r[W/4+J*8+4],default:r[W/4+J*8+5],max:r[W/4+J*8+6]}}),e.free(z),e.free(W),ie},"getAxisInfos"),collectUnicodes:c(function(){var W=e.hb_set_create();e.hb_face_collect_unicodes(T,W);var z=Q(W,Uint32Array);return e.hb_set_destroy(W),z},"collectUnicodes"),destroy:c(function(){e.hb_face_destroy(T)},"destroy")}}c(S,"createFace");var M="",V=256,K=e.malloc(V);function j(O){var L=e.hb_font_create(O.ptr),T=null;function he(z){if(!T){var ie=c(function(nt,Ct,ct,pt,It,At){M+=`M${pt},${It}`},"moveTo"),ee=c(function(nt,Ct,ct,pt,It,At){M+=`L${pt},${It}`},"lineTo"),J=c(function(nt,Ct,ct,pt,It,At,Xt,zt,jn,Dt){M+=`C${pt},${It} ${At},${Xt} ${zt},${jn}`},"cubicTo"),ve=c(function(nt,Ct,ct,pt,It,At,Xt,zt){M+=`Q${pt},${It} ${At},${Xt}`},"quadTo"),Re=c(function(nt,Ct,ct,pt){M+="Z"},"closePath"),We=a(ie,"viiiffi"),He=a(ee,"viiiffi"),Ke=a(J,"viiiffffffi"),$e=a(ve,"viiiffffi"),et=a(Re,"viiii");T=e.hb_draw_funcs_create(),e.hb_draw_funcs_set_move_to_func(T,We,0,0),e.hb_draw_funcs_set_line_to_func(T,He,0,0),e.hb_draw_funcs_set_cubic_to_func(T,Ke,0,0),e.hb_draw_funcs_set_quadratic_to_func(T,$e,0,0),e.hb_draw_funcs_set_close_path_func(T,et,0,0)}return M="",e.hb_font_draw_glyph(L,z,T,0),M}c(he,"glyphToPath");function W(z){e.hb_font_glyph_to_string(L,z,K,V);var ie=t.subarray(K,K+V);return o.decode(ie.slice(0,ie.indexOf(0)))}return c(W,"glyphName"),{ptr:L,glyphName:W,glyphToPath:he,glyphToJson:c(function(z){var ie=he(z);return ie.replace(/([MLQCZ])/g,"|$1 ").split("|").filter(function(ee){return ee.length}).map(function(ee){var J=ee.split(/[ ,]/g);return{type:J[0],values:J.slice(1).filter(function(ve){return ve.length}).map(function(ve){return+ve})}})},"glyphToJson"),setScale:c(function(z,ie){e.hb_font_set_scale(L,z,ie)},"setScale"),setVariations:c(function(z){var ie=Object.entries(z),ee=e.malloc(8*ie.length);ie.forEach(function(J,ve){n[ee/4+ve*2+0]=f(J[0]),r[ee/4+ve*2+1]=J[1]}),e.hb_font_set_variations(L,ee,ie.length),e.free(ee)},"setVariations"),destroy:c(function(){e.hb_font_destroy(L)},"destroy")}}c(j,"createFont");function Ce(O){var L=e.malloc(O.length+1);for(let T=0;T<O.length;++T){const he=O.charCodeAt(T);if(he>127)throw new Error("Expected ASCII text");t[L+T]=he}return t[L+O.length]=0,{ptr:L,length:O.length,free:c(function(){e.free(L)},"free")}}c(Ce,"createAsciiString");function Ge(O){const L=O.length*2,T=e.malloc(L),he=new Uint16Array(O.length);for(let W=0;W<he.length;++W)he[W]=O.charCodeAt(W);return new Uint8Array(i.wasmMemory.buffer,T,L).set(new Uint8Array(he.buffer)),{ptr:T,length:he.length,free:c(function(){e.free(T)},"free")}}c(Ge,"createJsString");function Ie(){var O=e.hb_buffer_create();return{ptr:O,addText:c(function(L){const T=Ge(L);e.hb_buffer_add_utf16(O,T.ptr,T.length,0,T.length),T.free()},"addText"),guessSegmentProperties:c(function(){return e.hb_buffer_guess_segment_properties(O)},"guessSegmentProperties"),setDirection:c(function(L){e.hb_buffer_set_direction(O,{ltr:4,rtl:5,ttb:6,btt:7}[L]||0)},"setDirection"),setFlags:c(function(L){var T=0;L.forEach(function(he){T|=G(he)}),e.hb_buffer_set_flags(O,T)},"setFlags"),setLanguage:c(function(L){var T=Ce(L);e.hb_buffer_set_language(O,e.hb_language_from_string(T.ptr,-1)),T.free()},"setLanguage"),setScript:c(function(L){var T=Ce(L);e.hb_buffer_set_script(O,e.hb_script_from_string(T.ptr,-1)),T.free()},"setScript"),setClusterLevel:c(function(L){e.hb_buffer_set_cluster_level(O,L)},"setClusterLevel"),json:c(function(){for(var L=e.hb_buffer_get_length(O),T=[],he=e.hb_buffer_get_glyph_infos(O,0),W=he/4,z=e.hb_buffer_get_glyph_positions(O,0)/4,ie=n.subarray(W,W+5*L),ee=s.subarray(z,z+5*L),J=0;J<L;++J)T.push({g:ie[J*5+0],cl:ie[J*5+2],ax:ee[J*5+0],ay:ee[J*5+1],dx:ee[J*5+2],dy:ee[J*5+3],flags:e.hb_glyph_info_get_glyph_flags(he+J*20)});return T},"json"),destroy:c(function(){e.hb_buffer_destroy(O)},"destroy")}}c(Ie,"createBuffer");function H(O,L,T){var he=0,W=0;T&&(T=T.split(","),he=e.malloc(16*T.length),T.forEach(function(z,ie){var ee=Ce(z);e.hb_feature_from_string(ee.ptr,-1,he+W*16)&&W++,ee.free()})),e.hb_shape(O.ptr,L.ptr,he,W),he&&e.free(he)}c(H,"shape");function Ae(O,L,T,he,W){var z=[],ie=d,ee=!1,J=1024*1024,ve=e.malloc(J),Re=c(function(He,Ke,$e,et){var nt=o.decode(t.subarray($e,t.indexOf(0,$e)));return nt.startsWith("start table GSUB")?ie=g:nt.startsWith("start table GPOS")&&(ie=p),ie!=W&&(ee=!1),W!=d&&ie==W&&nt.startsWith("end lookup "+he)&&(ee=!0),ee?0:(e.hb_buffer_serialize_glyphs(He,0,e.hb_buffer_get_length(He),ve,J,0,Ke,m,y),z.push({m:nt,t:JSON.parse(o.decode(t.subarray(ve,t.indexOf(0,ve)))),glyphs:e.hb_buffer_get_content_type(He)==h}),1)},"traceFunc"),We=a(Re,"iiiii");return e.hb_buffer_set_message_func(L.ptr,We,0,0),H(O,L,T),e.free(ve),z}c(Ae,"shapeWithTrace");function ne(){var O=e.malloc(12);e.hb_version(O,O+4,O+8);var L={major:n[O/4],minor:n[(O+4)/4],micro:n[(O+8)/4]};return e.free(O),L}c(ne,"version");function De(){var O=e.hb_version_string(),L=o.decode(t.subarray(O,t.indexOf(0,O)));return L}return c(De,"version_string"),{createBlob:R,createFace:S,createFont:j,createBuffer:Ie,shape:H,shapeWithTrace:Ae,version:ne,version_string:De}}c(WC,"hbjs");try{module.exports=WC}catch{}var gu=(()=>{var i=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(i||=__filename),function(e={}){var t=e,n,s;t.ready=new Promise((b,w)=>{n=b,s=w});var r=Object.assign({},t),o=typeof window=="object",a=typeof importScripts=="function",l=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",A="";function u(b){return t.locateFile?t.locateFile(b,A):A+b}c(u,"locateFile");var h,d,g;if(l){var p=require("fs"),f=require("path");a?A=f.dirname(A)+"/":A=__dirname+"/",h=c((b,w)=>(b=W(b)?new URL(b):f.normalize(b),p.readFileSync(b,w?void 0:"utf8")),"read_"),g=c(b=>{var w=h(b,!0);return w.buffer||(w=new Uint8Array(w)),w},"readBinary"),d=c((b,w,se,q=!0)=>{b=W(b)?new URL(b):f.normalize(b),p.readFile(b,q?void 0:"utf8",(rt,Nt)=>{rt?se(rt):w(q?Nt.buffer:Nt)})},"readAsync"),!t.thisProgram&&process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2)}else(o||a)&&(a?A=self.location.href:typeof document<"u"&&document.currentScript&&(A=document.currentScript.src),i&&(A=i),A.startsWith("blob:")?A="":A=A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1),h=c(b=>{var w=new XMLHttpRequest;return w.open("GET",b,!1),w.send(null),w.responseText},"read_"),a&&(g=c(b=>{var w=new XMLHttpRequest;return w.open("GET",b,!1),w.responseType="arraybuffer",w.send(null),new Uint8Array(w.response)},"readBinary")),d=c((b,w,se)=>{var q=new XMLHttpRequest;q.open("GET",b,!0),q.responseType="arraybuffer",q.onload=()=>{if(q.status==200||q.status==0&&q.response){w(q.response);return}se()},q.onerror=se,q.send(null)},"readAsync"));t.print||console.log.bind(console);var m=t.printErr||console.error.bind(console);Object.assign(t,r),r=null,t.arguments&&t.arguments,t.thisProgram&&t.thisProgram,t.quit&&t.quit;var y;t.wasmBinary&&(y=t.wasmBinary);var v,G=!1,R;function Q(){var b=v.buffer;t.HEAP8=new Int8Array(b),t.HEAP16=new Int16Array(b),t.HEAPU8=R=new Uint8Array(b),t.HEAPU16=new Uint16Array(b),t.HEAP32=new Int32Array(b),t.HEAPU32=new Uint32Array(b),t.HEAPF32=new Float32Array(b),t.HEAPF64=new Float64Array(b)}c(Q,"updateMemoryViews");var S=[],M=[],V=[];function K(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)Ge(t.preRun.shift());We(S)}c(K,"preRun");function j(){We(M)}c(j,"initRuntime");function Ce(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)H(t.postRun.shift());We(V)}c(Ce,"postRun");function Ge(b){S.unshift(b)}c(Ge,"addOnPreRun");function Ie(b){M.unshift(b)}c(Ie,"addOnInit");function H(b){V.unshift(b)}c(H,"addOnPostRun");var Ae=0,ne=null;function De(b){Ae++,t.monitorRunDependencies?.(Ae)}c(De,"addRunDependency");function O(b){if(Ae--,t.monitorRunDependencies?.(Ae),Ae==0&&ne){var w=ne;ne=null,w()}}c(O,"removeRunDependency");function L(b){t.onAbort?.(b),b="Aborted("+b+")",m(b),G=!0,b+=". Build with -sASSERTIONS for more info.";var w=new WebAssembly.RuntimeError(b);throw s(w),w}c(L,"abort");var T="data:application/octet-stream;base64,",he=c(b=>b.startsWith(T),"isDataURI"),W=c(b=>b.startsWith("file://"),"isFileURI"),z;z="hb.wasm",he(z)||(z=u(z));function ie(b){if(b==z&&y)return new Uint8Array(y);if(g)return g(b);throw"both async and sync fetching of the wasm failed"}c(ie,"getBinarySync");function ee(b){if(!y&&(o||a)){if(typeof fetch=="function"&&!W(b))return fetch(b,{credentials:"same-origin"}).then(w=>{if(!w.ok)throw`failed to load wasm binary file at '${b}'`;return w.arrayBuffer()}).catch(()=>ie(b));if(d)return new Promise((w,se)=>{d(b,q=>w(new Uint8Array(q)),se)})}return Promise.resolve().then(()=>ie(b))}c(ee,"getBinaryPromise");function J(b,w,se){return ee(b).then(q=>WebAssembly.instantiate(q,w)).then(se,q=>{m(`failed to asynchronously prepare wasm: ${q}`),L(q)})}c(J,"instantiateArrayBuffer");function ve(b,w,se,q){return!b&&typeof WebAssembly.instantiateStreaming=="function"&&!he(w)&&!W(w)&&!l&&typeof fetch=="function"?fetch(w,{credentials:"same-origin"}).then(rt=>{var Nt=WebAssembly.instantiateStreaming(rt,se);return Nt.then(q,function(qi){return m(`wasm streaming compile failed: ${qi}`),m("falling back to ArrayBuffer instantiation"),J(w,se,q)})}):J(w,se,q)}c(ve,"instantiateAsync");function Re(){var b={env:Qr,wasi_snapshot_preview1:Qr};function w(q,rt){return ue=q.exports,t.wasmExports=ue,v=ue.memory,t.wasmMemory=v,Q(),ct=ue.__indirect_function_table,Ie(ue.__wasm_call_ctors),O(),ue}c(w,"receiveInstance"),De();function se(q){w(q.instance)}if(c(se,"receiveInstantiationResult"),t.instantiateWasm)try{return t.instantiateWasm(b,w)}catch(q){m(`Module.instantiateWasm callback failed with error: ${q}`),s(q)}return ve(y,z,b,se).catch(s),{}}c(Re,"createWasm");var We=c(b=>{for(;b.length>0;)b.shift()(t)},"callRuntimeCallbacks");t.noExitRuntime;var He=c(b=>{L("OOM")},"abortOnCannotGrowMemory"),Ke=c(b=>{R.length,He()},"_emscripten_resize_heap"),$e=c((b,w)=>{b<128?w.push(b):w.push(b%128|128,b>>7)},"uleb128Encode"),et=c(b=>{for(var w={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},se={parameters:[],results:b[0]=="v"?[]:[w[b[0]]]},q=1;q<b.length;++q)se.parameters.push(w[b[q]]);return se},"sigToWasmTypes"),nt=c((b,w)=>{var se=b.slice(0,1),q=b.slice(1),rt={i:127,p:127,j:126,f:125,d:124,e:111};w.push(96),$e(q.length,w);for(var Nt=0;Nt<q.length;++Nt)w.push(rt[q[Nt]]);se=="v"?w.push(0):w.push(1,rt[se])},"generateFuncType"),Ct=c((b,w)=>{if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(et(w),b);var se=[1];nt(w,se);var q=[0,97,115,109,1,0,0,0,1];$e(se.length,q),q.push(...se),q.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var rt=new WebAssembly.Module(new Uint8Array(q)),Nt=new WebAssembly.Instance(rt,{e:{f:b}}),qi=Nt.exports.f;return qi},"convertJsFunctionToWasm"),ct,pt=c(b=>ct.get(b),"getWasmTableEntry"),It=c((b,w)=>{if(At)for(var se=b;se<b+w;se++){var q=pt(se);q&&At.set(q,se)}},"updateTableMap"),At,Xt=c(b=>(At||(At=new WeakMap,It(0,ct.length)),At.get(b)||0),"getFunctionAddress"),zt=[],jn=c(()=>{if(zt.length)return zt.pop();try{ct.grow(1)}catch(b){throw b instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":b}return ct.length-1},"getEmptyTableSlot"),Dt=c((b,w)=>ct.set(b,w),"setWasmTableEntry"),ji=c((b,w)=>{var se=Xt(b);if(se)return se;var q=jn();try{Dt(q,b)}catch(Nt){if(!(Nt instanceof TypeError))throw Nt;var rt=Ct(b,w);Dt(q,rt)}return At.set(b,q),q},"addFunction"),Qr={emscripten_resize_heap:Ke},ue=Re();t._hb_blob_create=(b,w,se,q,rt)=>(t._hb_blob_create=ue.hb_blob_create)(b,w,se,q,rt),t._hb_blob_destroy=b=>(t._hb_blob_destroy=ue.hb_blob_destroy)(b),t._free=b=>(t._free=ue.free)(b),t._hb_blob_get_length=b=>(t._hb_blob_get_length=ue.hb_blob_get_length)(b),t._hb_blob_get_data=(b,w)=>(t._hb_blob_get_data=ue.hb_blob_get_data)(b,w),t._malloc=b=>(t._malloc=ue.malloc)(b),t._hb_buffer_serialize_glyphs=(b,w,se,q,rt,Nt,qi,kr,Tc)=>(t._hb_buffer_serialize_glyphs=ue.hb_buffer_serialize_glyphs)(b,w,se,q,rt,Nt,qi,kr,Tc),t._hb_buffer_create=()=>(t._hb_buffer_create=ue.hb_buffer_create)(),t._hb_buffer_destroy=b=>(t._hb_buffer_destroy=ue.hb_buffer_destroy)(b),t._hb_buffer_get_content_type=b=>(t._hb_buffer_get_content_type=ue.hb_buffer_get_content_type)(b),t._hb_buffer_set_direction=(b,w)=>(t._hb_buffer_set_direction=ue.hb_buffer_set_direction)(b,w),t._hb_buffer_set_script=(b,w)=>(t._hb_buffer_set_script=ue.hb_buffer_set_script)(b,w),t._hb_buffer_set_language=(b,w)=>(t._hb_buffer_set_language=ue.hb_buffer_set_language)(b,w),t._hb_buffer_set_flags=(b,w)=>(t._hb_buffer_set_flags=ue.hb_buffer_set_flags)(b,w),t._hb_buffer_set_cluster_level=(b,w)=>(t._hb_buffer_set_cluster_level=ue.hb_buffer_set_cluster_level)(b,w),t._hb_buffer_get_length=b=>(t._hb_buffer_get_length=ue.hb_buffer_get_length)(b),t._hb_buffer_get_glyph_infos=(b,w)=>(t._hb_buffer_get_glyph_infos=ue.hb_buffer_get_glyph_infos)(b,w),t._hb_buffer_get_glyph_positions=(b,w)=>(t._hb_buffer_get_glyph_positions=ue.hb_buffer_get_glyph_positions)(b,w),t._hb_glyph_info_get_glyph_flags=b=>(t._hb_glyph_info_get_glyph_flags=ue.hb_glyph_info_get_glyph_flags)(b),t._hb_buffer_guess_segment_properties=b=>(t._hb_buffer_guess_segment_properties=ue.hb_buffer_guess_segment_properties)(b),t._hb_buffer_add_utf8=(b,w,se,q,rt)=>(t._hb_buffer_add_utf8=ue.hb_buffer_add_utf8)(b,w,se,q,rt),t._hb_buffer_add_utf16=(b,w,se,q,rt)=>(t._hb_buffer_add_utf16=ue.hb_buffer_add_utf16)(b,w,se,q,rt),t._hb_buffer_set_message_func=(b,w,se,q)=>(t._hb_buffer_set_message_func=ue.hb_buffer_set_message_func)(b,w,se,q),t._hb_language_from_string=(b,w)=>(t._hb_language_from_string=ue.hb_language_from_string)(b,w),t._hb_script_from_string=(b,w)=>(t._hb_script_from_string=ue.hb_script_from_string)(b,w),t._hb_version=(b,w,se)=>(t._hb_version=ue.hb_version)(b,w,se),t._hb_version_string=()=>(t._hb_version_string=ue.hb_version_string)(),t._hb_feature_from_string=(b,w,se)=>(t._hb_feature_from_string=ue.hb_feature_from_string)(b,w,se),t._hb_draw_funcs_set_move_to_func=(b,w,se,q)=>(t._hb_draw_funcs_set_move_to_func=ue.hb_draw_funcs_set_move_to_func)(b,w,se,q),t._hb_draw_funcs_set_line_to_func=(b,w,se,q)=>(t._hb_draw_funcs_set_line_to_func=ue.hb_draw_funcs_set_line_to_func)(b,w,se,q),t._hb_draw_funcs_set_quadratic_to_func=(b,w,se,q)=>(t._hb_draw_funcs_set_quadratic_to_func=ue.hb_draw_funcs_set_quadratic_to_func)(b,w,se,q),t._hb_draw_funcs_set_cubic_to_func=(b,w,se,q)=>(t._hb_draw_funcs_set_cubic_to_func=ue.hb_draw_funcs_set_cubic_to_func)(b,w,se,q),t._hb_draw_funcs_set_close_path_func=(b,w,se,q)=>(t._hb_draw_funcs_set_close_path_func=ue.hb_draw_funcs_set_close_path_func)(b,w,se,q),t._hb_draw_funcs_create=()=>(t._hb_draw_funcs_create=ue.hb_draw_funcs_create)(),t._hb_face_create=(b,w)=>(t._hb_face_create=ue.hb_face_create)(b,w),t._hb_face_destroy=b=>(t._hb_face_destroy=ue.hb_face_destroy)(b),t._hb_face_reference_table=(b,w)=>(t._hb_face_reference_table=ue.hb_face_reference_table)(b,w),t._hb_face_get_upem=b=>(t._hb_face_get_upem=ue.hb_face_get_upem)(b),t._hb_face_collect_unicodes=(b,w)=>(t._hb_face_collect_unicodes=ue.hb_face_collect_unicodes)(b,w),t._hb_font_get_h_extents=(b,w)=>(t._hb_font_get_h_extents=ue.hb_font_get_h_extents)(b,w),t._hb_font_get_glyph_extents=(b,w,se)=>(t._hb_font_get_glyph_extents=ue.hb_font_get_glyph_extents)(b,w,se),t._hb_font_draw_glyph=(b,w,se,q)=>(t._hb_font_draw_glyph=ue.hb_font_draw_glyph)(b,w,se,q),t._hb_font_glyph_to_string=(b,w,se,q)=>(t._hb_font_glyph_to_string=ue.hb_font_glyph_to_string)(b,w,se,q),t._hb_font_create=b=>(t._hb_font_create=ue.hb_font_create)(b),t._hb_font_destroy=b=>(t._hb_font_destroy=ue.hb_font_destroy)(b),t._hb_font_set_scale=(b,w,se)=>(t._hb_font_set_scale=ue.hb_font_set_scale)(b,w,se),t._hb_font_set_variations=(b,w,se)=>(t._hb_font_set_variations=ue.hb_font_set_variations)(b,w,se),t._hb_set_create=()=>(t._hb_set_create=ue.hb_set_create)(),t._hb_set_destroy=b=>(t._hb_set_destroy=ue.hb_set_destroy)(b),t._hb_ot_var_get_axis_infos=(b,w,se,q)=>(t._hb_ot_var_get_axis_infos=ue.hb_ot_var_get_axis_infos)(b,w,se,q),t._hb_set_get_population=b=>(t._hb_set_get_population=ue.hb_set_get_population)(b),t._hb_set_next_many=(b,w,se,q)=>(t._hb_set_next_many=ue.hb_set_next_many)(b,w,se,q),t._hb_shape=(b,w,se,q)=>(t._hb_shape=ue.hb_shape)(b,w,se,q);var wr=c(()=>(wr=ue.stackSave)(),"stackSave"),St=c(b=>(St=ue.stackRestore)(b),"stackRestore"),Zr=c(b=>(Zr=ue.stackAlloc)(b),"stackAlloc");t.wasmMemory=v,t.wasmExports=ue,t.stackAlloc=Zr,t.stackSave=wr,t.stackRestore=St,t.addFunction=ji;var Ts;ne=c(function b(){Ts||Ca(),Ts||(ne=b)},"runCaller");function Ca(){if(Ae>0||(K(),Ae>0))return;function b(){Ts||(Ts=!0,t.calledRun=!0,!G&&(j(),n(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),Ce()))}c(b,"doRun"),t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),b()},1)):b()}if(c(Ca,"run"),t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return Ca(),e.ready}})();typeof exports=="object"&&typeof module=="object"?module.exports=gu:typeof define=="function"&&define.amd&&define([],()=>gu);const FN=new URL("/TypeRoof/assets/hb-Jv4E426z.wasm",import.meta.url);async function xN(){function i(){return FN.toString()}c(i,"locateFile");const e=await gu({locateFile:i});return{hbjs:WC(e),Module:e}}c(xN,"getHarfbuzz");function DC(i,e){const t={...Le,earlyExitOnError:!0};return{metamorphoseGen:c(s=>dC(i,s,e,t),"metamorphoseGen")}}c(DC,"deserializeStateString");class hL extends Vo{static{c(this,"UIDialogManageState")}static TEMPLATE=`<dialog class="ui-dialog-manage_state">
    <form method="dialog">
      <fieldset>
        <legend>Manage State</legend>
        <p>Serialize options: (none)</p>
        <menu>
          <button class="ui-dialog-manage_state-serialize">Serialize</button>
          <button class="ui-dialog-manage_state-deserialize">Deserialize</button>
          <button type="submit" value="cancel">Exit</button>
        </menu>
      </fieldset>
      <fieldset class="ui-dialog-manage_state-message-container">
        <legend>Status: <span class="ui-dialog-manage_state-message-process_label">(none)</span></legend>
        <pre class="ui-dialog-manage_state-message-box"></pre>
      </fieldset>
      <fieldset>
        <legend>Serialized Data</legend>
        <textarea class="ui-dialog-manage_state-serialize_output"></textarea>
      </fieldset>
    </form>
  </dialog>
`;static RESET=Symbol("RESET");get RESET(){return this.constructor.RESET}static SUCCESS=Symbol("SUCCESS");get SUCCESS(){return this.constructor.SUCCESS}static FAIL=Symbol("FAIL");get FAIL(){return this.constructor.FAIL}static hostInit(){const e=[],t=[],n=c(()=>this.getEntry("/"),"getAppStateFN"),s=c(r=>(this.widgetBus.requireReviewResources(),this.widgetBus.updateState(r)),"setAppStateFN");return e.push(n,s),[e,t]}constructor(e,t,n){super(e),this._getAppState=t,this._setAppState=n,this._messageBaseClass="ui-dialog-manage_state-message-status_",[this.element,this._form,this._serializeOutput,this._messageContainer,this._messageLabel,this._messageBox]=this._initTemplate(),this._setMessage(this.RESET)}_initTemplate(){const[e]=super._initTemplate(),t=e.querySelector("form"),n=e.querySelector(".ui-dialog-manage_state-serialize"),s=e.querySelector(".ui-dialog-manage_state-deserialize"),r=e.querySelector(".ui-dialog-manage_state-serialize_output"),o=e.querySelector(".ui-dialog-manage_state-message-container"),a=e.querySelector(".ui-dialog-manage_state-message-process_label"),l=e.querySelector(".ui-dialog-manage_state-message-box");return n.addEventListener("click",this._serializeHandler.bind(this)),s.addEventListener("click",this._deserializeHandler.bind(this)),[e,t,r,o,a,l]}_serializeHandler(e){e.preventDefault();const[t,n]=nN(this._getAppState()),s=[];if(t.length){console.warn("Serialize had errors ...");for(const[r,o,...a]of t){const l=new Error(`Serialize error at ./${r.join("/")}`,{cause:o});console.error(l,...a),s.push(`{error.name}: {error.message} at ./${r.join("/")}`)}this._setMessage(this.FAIL,"serialize",s.join(`
`))}else this._serializeOutput.value=n,this._setMessage(this.SUCCESS,"serialize")}_setMessage(e,t="",n=""){const s=[];if(e===this.RESET)s.push(`${this._messageBaseClass}reset`),t="",n="";else if(e===this.SUCCESS)s.push(`${this._messageBaseClass}success`),n=n||"OK!";else if(e===this.FAIL)s.push(`${this._messageBaseClass}fail`);else throw new Error('VALUE ERROR type is unknown: "{type?.toString() || type}".');for(const r of[...this._messageContainer.classList])r.startsWith(this._messageBaseClass)&&this._messageContainer.classList.remove(r);for(const r of s)this._messageContainer.classList.add(r);this._messageLabel.textContent=t,this._messageBox.textContent=n}async _deserializeHandler(e){e.preventDefault();const t=this._getAppState(),n=t.constructor,s=this._serializeOutput.value,r=DC(n,s);try{await this._setAppState(r),this._setMessage(this.SUCCESS,"deserialize")}catch(o){this._setMessage(this.FAIL,"deserialize",o),console.error(new Error("Deserialize FAILED",{cause:o}))}}async show(){const e=super.show(),t=this.element;return t.returnValue=null,t.showModal(),await e.then(n=>n)}}const LN=await jS();async function wa(i){let e;const t=te.getTag(new DataView(i,0),0);if(t==="wOFF")e=zS(i);else if(t==="wOF2"){const s=LN(i);e=s.buffer.slice(s.byteOffset,s.byteLength+s.byteOffset)}else e=i;return[XS(e),e]}c(wa,"parseFont");class MN{static{c(this,"FontManager")}constructor(e){this._widgetBus=e,this._childrenWidgetBus={get harfbuzz(){return e.harfbuzz}}}toString(){return`[${this.constructor.name}]`}set _localFontStorage(e){Object.defineProperty(this,"_localFontStorage",{value:e,writtable:!1,configurable:!1})}get _localFontStorage(){throw new Error("_localFontStorage is not available yet")}get _domTool(){return this._widgetBus.domTool}get _contentWindow(){return this._widgetBus.contentWindow}get _requireStateDependencyDraft(){return this._widgetBus.requireStateDependencyDraft}get _readStateDependency(){return this._widgetBus.readStateDependency}get appReady(){return this._widgetBus.appReady}async _getFontBufferFromDeferredFont(e){if(e.buffer)return e.buffer;if(e.origin.fromDB)return(await this._localFontStorage.get(e.fullName)).buffer;if(e.origin instanceof Au)return await this._getBufferFromUrl(e.origin.url);throw new Error(`RESOURCE ERROR FontManager async _getFontBufferFromDeferredFont: Don't know how to load buffer for origin ${e.origin}`)}async _hydrateFont(e){const t=this._contentWindow.document,n=await this._getFontBufferFromDeferredFont(e),[s,r]=await wa(n),o=e.origin,a=new t.defaultView.FontFace(e.fullName,r),l=new pi(this._childrenWidgetBus,s,o,r,a,t,e.fullName);return await t.fonts.add(a),l}async _rawInstallFont(e){const t=ao.createPrimalDraft({});return t.value=await this._hydrateFont(e),t}async installFont(e){if(!this.appReady)return console.warn(`installFont: App not yet available for activating ${e}.`),!1;const t=this._readStateDependency("availableFonts"),n=this._requireStateDependencyDraft("installedFonts");if(!t.has(e))throw new Error(`KEY ERROR font not available "${e}".`);if(!n.has(e)){const r=t.get(e).value,o=await this._rawInstallFont(r);n.set(e,o)}return console.log(`${this}.installFont installedFontsDraft.keys:`,...n.keys()),n.get(e).value}_uninstallFont(e){const t=this._requireStateDependencyDraft("installedFonts");if(!t.has(e))return;const n=t.get(e).value;t.delete(e),n.destroy()}async useFont(e,t){throw new Error(`DEPRECATED ${this}.useFont for userIdentifier ${e} and fontName ${t}`)}async _loadFontsFromLoaderFn(e,...t){return(await Promise.all(t.map(e))).filter(s=>!!s).map(s=>s.fullName)}async _uiDialogHandleFontExists(e){const t=new kN(this._domTool),n=await t.show(e);return t.destroy(),n}async _registerFont(e,t=null){const n=this._requireStateDependencyDraft("availableFonts"),s=e.fullName;if(n.has(s)){if(t===null&&!this.appReady)throw new Error(`APP NOT READY _registerFont: ${s} ${e.origin}`);const o=t===null?await this._uiDialogHandleFontExists(e):t;if(o==="replace"){const a=this._requireStateDependencyDraft("installedFonts");if(a.has(s)){this._uninstallFont(s);const l=await this._rawInstallFont(e);a.set(s,l)}}else{if(o==="initial"||o==="keep")return console.info(`Loading font "${s}" aborted by user.`),!1;throw new Error(`VALUE ERROR unknown action "${o}" accepted values are "replace", "initial" and "keep".`)}}const r=du.createPrimalDraft({});return r.value=e,n.set(e.fullName,r),!0}_unregisterFont(e){const t=this._requireStateDependencyDraft("availableFonts"),n=this._requireStateDependencyDraft("installedFonts");if(console.log(e,`installedFontsDraft.has("${e}" ${n.has(e)}), ...installedFontsDraft:`,...n),n.has(e)&&this._uninstallFont(e),console.log(e,`availableFontsDraft.has("${e}" ${t.has(e)}), ...availableFontsDraft:`,...t),t.has(e)){const s=t.get(e).value;console.log("availableFont",e,s),t.delete(e)}return!0}async _getBufferFromFetchResponse(e){if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return await e.arrayBuffer()}async _getBufferFromUrl(e){const{fetch:t}=this._contentWindow,n=await t(e,{method:"GET"});return await this._getBufferFromFetchResponse(n)}async _loadFontFromUrl(e,t={},n=null){const s=new Au(e);let r,o,a;if(!t.name||!t.version){n||(n=await this._getBufferFromUrl(e));const[u]=await wa(n),h=new pi({},u,s);r=t.fullName||h.fullName,o=h.nameVersion,a=h.serializationNameParticles}else{const{name:u,version:h}=t;r=t.fullName||pi.fullName(u,h,s.type),o=pi.nameVersion(u,h),a=[u,h]}const l=new Qa(s,r,o,a,n);return await this._registerFont(l)===!1?null:l}async _loadFontFromFetchResponse(e,t={}){const n=await this._getBufferFromFetchResponse(e);return this._loadFontFromUrl(e.url,t,n)}async _loadFontFromResourceDefinition(e,t){const{URL:n,Response:s}=this._contentWindow;if(e instanceof n)return this._loadFontFromUrl(e,t);if(e instanceof s)return this._loadFontFromFetchResponse(e,t);throw new Error(`TYPE ERROR don't know how to handle resource ${e}.`)}async _loadFontFromFile(e){const t=new uu(e.name),n=await e.arrayBuffer(),[s]=await wa(n),r=Qa.fromFontObject(s,t,n);return await this._registerFont(r)===!1?null:(await this._localFontStorage.put(r),r)}async _loadFontFromMessage(e,t={},n=null){const s=new uu(t.name);let r,o,a;if(!t.name||!t.version){const[u]=await wa(e),h=new pi({},u,s);r=t.fullName||h.fullName,o=h.nameVersion,a=h.serializationNameParticles}else{const{name:u,version:h}=t;r=t.fullName||pi.fullName(u,h,s.type),o=pi.nameVersion(u,h),a=[u,h]}const l=new Qa(s,r,o,a,e);return await this._registerFont(l,n)===!1?null:l}async _deleteFontsFromStorage(e){console.log("_deleteFontsFromStorage fontNames:",e);const t=[],n=this._requireStateDependencyDraft("availableFonts");for(const s of e){const r=n.has(s)&&n.get(s);if(r.value.origin.type!=="from-file"){t.push(["_localFontStorage.delete",s,`SKIP not "from-file": ${r.value.origin.type}`]);continue}const o=await this._localFontStorage.delete(s);t.push(["_localFontStorage.delete",s,o]),console.log(`_deleteFontsFromStorage for ${s} result:`,o),this._unregisterFont(s)}return t}async loadInitialFontsFromResources(e){const t=e.map(async([n,s])=>this._loadFontFromResourceDefinition(n.then?await n:n,s));return Promise.all(t).then(n=>{const s=this._requireStateDependencyDraft("availableFonts"),r=n.map(o=>[o.fullName,s.get(o.fullName)]);s.push(...r)})}onLocalFontStorage(e){return this._localFontStorage=e,this._localFontStorage}async loadInitialFontsFromLocalFontStorage(){const e=this._requireStateDependencyDraft("availableFonts");for await(const t of this._localFontStorage.getAll()){const n=new Qa(Eh.fromDB(t.origin),t.fullName,t.nameVersion,t.serializationNameParticles,null),s=du.createPrimalDraft({});s.value=n,e.set(n.fullName,s)}}async loadFontsFromFiles(...e){return this._loadFontsFromLoaderFn(this._loadFontFromFile.bind(this),...e)}async removeFontsFromFiles(...e){return console.log("FontManager removeFontsFromFiles fullNames:",e),this._deleteFontsFromStorage(e)}async loadFontsFromUrls(...e){return this._loadFontsFromLoaderFn(this._loadFontFromUrl.bind(this),...e)}}class dL{static{c(this,"ShellController")}state=null;draftState=null;_lockChangeState=null;_requireReviewResourcesFlag=!0;_ui=null;_changeStateQueue=[];_changeStateWorkerBusy=!1;_harfbuzz=null;constructor(e,t){this._contentWindow=e,this._APP=t,Object.defineProperty(this,"appReady",{value:!1,configurable:!0}),this._domTool=new ae(e.document),this._stateDependencyModels={availableFonts:Pr,installedFonts:lo,availableLayouts:YC},this._stateDependenciesDrafts=new Map;for(const h of Object.keys(this._stateDependencyModels))this._useStateDependencyDraft(h);this._externalInitialDependencies=new Map;function n(h,d,g){if(this._externalInitialDependencies.has(h))throw new Error(`KEY EXISTES ${h} in _externalInitialDependencies.`);this._externalInitialDependencies.set(h,{resolve:d,reject:g})}c(n,"_setResolvers");const s=[];for(let h of["ready","localFontStorage","harfbuzz"])s.push([h,new Promise(n.bind(this,h))]);const r=c(()=>this.appReady,"_getAppReady"),o=c(()=>this.harfbuzz,"_getHarfbuzz");this._fontManager=new MN({contentWindow:this._contentWindow,domTool:this._domTool,get appReady(){return r()},requireStateDependencyDraft:this._requireStateDependencyDraft.bind(this),readStateDependency:this._readStateDependency.bind(this),get harfbuzz(){return o()}}),WN.init(e).then(h=>(this.setInitialDependency("localFontStorage",h),h),h=>this._externalInitialDependencies.get("localFontStorage").reject(h)),xN().then(h=>(this.setInitialDependency("harfbuzz",h),h),h=>this._externalInitialDependencies.get("harfbuzz").reject(h));let a=c(()=>{throw new Error("EXHAUSTED INTERFACE: remoteResources")},"exhaustedInterfaceError"),l,A=e.remoteResources&&Array.isArray(e.remoteResources),u=this._loadInitialResourcesFromPromises.bind(this,...s);if(A)l=u(...e.remoteResources),e.remoteResources={push:a};else{let h,d,g=setTimeout(()=>{e.remoteResources.push=a,d(new Error("Not initiated: remoteResources!"))},5e3);l=new Promise((p,f)=>{h=p,d=f}),e.remoteResources={push:c((...p)=>{e.clearTimeout(g),h(u(...p)),e.remoteResources.push=a},"push")}}Promise.all([l]).then(h=>this._allInitialResourcesLoaded(...h)).catch(h=>this.uiReportError("VideoproofController constructor initial resources",h))}toString(){return`[${this.constructor.name}]`}_useStateDependencyDraft(e){const[t,n]=this._stateDependenciesDrafts.has(e)?this._stateDependenciesDrafts.get(e):[0,this.state?this.state.dependencies[e].getDraft():this._stateDependencyModels[e].createPrimalDraft({})];return this._stateDependenciesDrafts.set(e,[t+1,n]),n}_unuseStateDependencyDraft(e){if(!this._stateDependenciesDrafts.has(e))throw new Error(`Call to _unuseStateDependencyDraft but there is no draft for "${e}"`);const[t,n]=this._stateDependenciesDrafts.get(e),s=Math.max(0,t-1);return this._stateDependenciesDrafts.set(e,[s,n]),s<=0}_requireStateDependencyDraft(e){if(!this._stateDependenciesDrafts.has(e))throw new Error(`Call to _requireStateDependencyDraft but there is no draft for "${e}". Use _useStateDependencyDraft("${e}") first.`);const[,t]=this._stateDependenciesDrafts.get(e);return t}_readStateDependency(e){return this._stateDependenciesDrafts.has(e)?this._requireStateDependencyDraft(e):this.state.dependencies[e]}_useStateDependencyDraftContextWrapper(e,t,...n){const s=c(()=>{for(const o of n)this._useStateDependencyDraft(o)},"enter"),r=c(()=>{for(const o of n)this._unuseStateDependencyDraft(o)},"exit");return e?async function(...o){s();try{return await t(...o)}finally{r()}}:function(...o){s();try{return t(...o)}finally{r()}}}async _loadInitialStateFromLocationHash(e){const{fetch:t,location:n}=this._contentWindow,s=n.hash,r=(s.startsWith("#")?s.slice(1):s).trim();if(!r.length)return[null,new Set];const o=/^(\[(?<flags>.*)\])?((?<target>[a-z-]+)(:(?<payload>.*))?)?/.exec(r);if(o===null)return[null,new Set];const a=new Set((o.groups.flags||"").split(",").map(l=>l.trim()).filter(l=>l.length));if(o.groups.target==="from-url"){const l=o.groups.payload?.trim();if(l===void 0||l.length===0)return[null,a];const A=await t(l,{method:"GET"});if(!A.ok)throw new Error(`STATE LOAD ERROR failed to load from location hash by url, response status: ${A.status} for URL "${l}"`);const u=await A.text();return[DC(e,u),a]}return[null,a]}async _allInitialResourcesLoaded(e){if(this.appReady)throw new Error("_allInitialResourcesLoaded must run only once.");Object.defineProperty(this,"appReady",{value:!0}),console.log("_allInitialResourcesLoaded resources:",...e.keys(),e),console.log("AvailableFontsModel.Model.dependencies:",Pr.Model,Pr.Model.dependencies),console.log("AvailableFontsModel.dependencies:",Pr.dependencies),console.log("ApplicationModel.dependencies:",iA.dependencies);const t=this._requireStateDependencyDraft("availableLayouts");for(const[o,a,l,A]of this._APP.Layouts){const u=Object.hasOwn(this._APP.LAYOUT_GROUPS,A)?A:this._APP.LAYOUT_GROUPS.default,h=_C.createPrimalDraft({});h.get("typeClass").value=l.Model,h.get("label").value=a,h.get("groupKey").value=u,t.push([o,h])}this._harfbuzz=e.get("harfbuzz");const n=c(async o=>{for(const a of Object.keys(this._stateDependencyModels))this._unuseStateDependencyDraft(a);this.state=await this._asyncMetamorphoseState(o)},"_initState"),s=new Et;try{const[o,a]=await this._loadInitialStateFromLocationHash(iA);for(const l of a)s.add(l);o!==null&&await n(o)}catch(o){console.error(new Error("STATE LOAD ERROR Failed to load initial state form location hash.",{cause:o}))}Object.freeze(s),this.state===null&&await n({metamorphoseGen:c(a=>iA.createPrimalStateGen(a),"metamorphoseGen")}),this._lockChangeState="_allInitialResourcesLoaded";try{this._initUI(s)}finally{this._lockChangeState=null}(s.has("autoplay")||s.has("autopause"))&&this.withChangeState(()=>{Je(this.draftState,"activeState/playing",{value:void 0}).value=s.has("autoplay")}),this._domTool.window.shell=this._ui.widgetBus;const r=this._domTool.window.opener||(this._domTool.window.parent!==this._domTool.window?this._domTool.window.parent:null);if(r!==null){const o=this._useStateDependencyDraftContextWrapper(!0,this._handlePostMessage.bind(this),"availableFonts","installedFonts");this._domTool.window.addEventListener("message",a=>this.withChangeState(async()=>o(a))),r.postMessage("init-live-fonts","*")}}async _handlePostMessageFontUpdate(e,t){t.fullName.startsWith("from-file ")||(t.fullName=`from-file ${t.fullName}`);const n=this._requireStateDependencyDraft("availableFonts"),s=new Set(n.keys()),r=await this._fontManager._loadFontFromMessage(e,t,"replace");if(r!==null&&!s.has(r.fullName)){const o=r.fullName;this.draftState.get("activeFontKey").value=o,this._requireReviewResourcesFlag=!0}}async _handlePostMessage(e){const{type:t}=e.data;if(t==="font-update"){const{fontBuffer:n,metaData:s}=e.data;return await this._handlePostMessageFontUpdate(n,s)}else{console.error(`VALUE ERROR Don't know how to handle message. Type: "{type}" event:`,e);return}}setInitialDependency(e,t){let n=this._externalInitialDependencies.get(e);if(!n)throw new Error(`KEY NOT FOUND setInitialDependency: ${e}`);this._externalInitialDependencies.delete(e),n.resolve(t)}uiReportError(e,t){console.error(`via ${e}:`,t),alert(`via ${e}:${t}`)}_initUI(e){this._ui=new this._APP.MainUIController({domTool:this._domTool,rootPath:D.fromParts("/"),changeState:this.withChangeState.bind(this),updateState:this._updateState.bind(this),useStateDependencyDraft:this._useStateDependencyDraft.bind(this),getEntry:c(t=>{let n=null;if(this.draftState)try{n=xo(this.draftState,t)}catch(s){if(!cN(s))throw s}if(n===null&&(n=Je(this.state,t)),!this.draftState&&(n.isDraft||_e.isProxy(n)))throw new Error(`ASSERTION FAILED entry must not be draft; path: ${t} entry: ${n} entry.isDraft: ${n.isDraft} isProxy: ${_e.isProxy(n)}`);return n},"getEntry"),loadFontsFromFiles:this._useStateDependencyDraftContextWrapper(!0,this._fontManager.loadFontsFromFiles.bind(this._fontManager),"availableFonts","installedFonts"),removeFontsFromFiles:this._useStateDependencyDraftContextWrapper(!0,this._fontManager.removeFontsFromFiles.bind(this._fontManager),"availableFonts","installedFonts"),loadFontsFromUrls:this._useStateDependencyDraftContextWrapper(!0,this._fontManager.loadFontsFromUrls.bind(this._fontManager),"availableFonts"),installFont:this._useStateDependencyDraftContextWrapper(!0,this._fontManager.installFont.bind(this._fontManager),"installedFonts"),requireReviewResources:c(()=>{this._requireReviewResourcesFlag=!0},"requireReviewResources"),harfbuzz:this.harfbuzz,fontManager:this._fontManager,toString(){return`[widgetBus for ${this.wrapper?this.wrapper:"(unknown)"} at ${this.rootPath?this.rootPath:"(unknown)"}]`},uiFlags:e}),this._ui.initialUpdate(this.state)}get harfbuzz(){if(!this.appReady)throw new Error("APP NOT READY: get harfbuzz");return this._harfbuzz}withChangeState(e){const{promise:t,resolve:n,reject:s}=Promise.withResolvers();return this._changeStateQueue.push([e,{resolve:n,reject:s}]),this._changeStateWorkerActivate(),t}async _changeStateWorkerActivate(){if(!this.appReady)return console.warn("withChangeState: App not yet ready to change state."),!1;if(this._lockChangeState!==null)throw new Error("LOCK ERROR changeState is locked with the lock labeled: ${this._lockChangeState}.");if(this._changeStateWorkerBusy)return;this._changeStateWorkerBusy=!0;const e=this.state.getDraft();if(this.draftState!==null)throw new Error("ASSERTION FAILED this.draftState must be null at this point.");this.draftState=e;try{for(;this._changeStateQueue.length;){const[t,{resolve:n,reject:s}]=this._changeStateQueue.shift();try{const r=t(),o=r&&r.then!==void 0?await r:r;n(o)}catch(r){s(r)}}this.draftState=null,await this._updateState(e)}finally{this._changeStateWorkerBusy=!1}this._changeStateQueue.length&&this._changeStateWorkerActivate()}_collecStateDependencies(){const e={},t=[];for(const[n,[s,r]]of this._stateDependenciesDrafts)s<=0?e[n]=r.metamorphose({}):t.push(`${n} (references: ${s})`);if(t.length)throw new Error(`UNFINISHED BUSINESS ERROR collecting state dependencies, but some are not ready for use: ${t.join(", ")}.`);return this._stateDependenciesDrafts.clear(),e}async _asyncResolveFont(e,t,n,s){const r=this._readStateDependency("installedFonts"),o=this._readStateDependency("availableFonts"),a=n===void 0?e[s](o,n):n;if(r.has(a))return t.set(a,r.get(a)),a;if(o.has(a))return await this._fontManager.installFont(a),t.set(a,r.get(a)),a;if(a===e.NULL)return a;throw new Error(`RESOURCE ERROR ${this}._asyncResolve the font ${a.toString()} is not available`)}async _asyncResolve(e,t){const[n,...s]=t.description;if(n instanceof ce){const r=n,[o]=s;if(o.constructor===lo)return await this._asyncResolveFont(r,...s);throw new Error(`RESOURCE ERROR don't know how to resolve ${t}`)}throw new Error(`RESOURCE ERROR dont know how to handle ${t}`)}_syncMetamorphoseState(e=null){const t=this._collecStateDependencies(),n=Object.keys(t).length>0;return e===null&&!n?void 0:(e===null?this.state.getDraft():e).metamorphose(t)}async __asyncMetamorphoseState(e=null){const t={};for(const A of["installedFonts"])t[A]=this._stateDependencyModels[A].createPrimalDraft({});for(const A of["availableFonts"])t[A]=this._requireStateDependencyDraft(A);for(const A of["availableLayouts"])t[A]=this._readStateDependency(A);const n=e===null?this.state.getDraft():e,s=n.metamorphoseGen(t),r={},o=await dN(this._asyncResolve.bind(this,r),s),a=[...this._readStateDependency("installedFonts").keys()],l=t.installedFonts;for(const A of a)l.has(A)||(console.warn(`${this}._asyncMetamorphoseState no longer used font -- uninstalling: ${A}`),this._fontManager._uninstallFont(A));return o}async _asyncMetamorphoseState(e=null){const t=["installedFonts","availableFonts"],n=await this._useStateDependencyDraftContextWrapper(!0,this.__asyncMetamorphoseState.bind(this),...t)(e);return this._syncMetamorphoseState(n.getDraft())}async _updateState(e=null){if(this.draftState){if(this.draftState===e)return;throw new Error("Looks like a fork of changed states has occured!")}let t;if(this._requireReviewResourcesFlag)t=await this._asyncMetamorphoseState(e);else try{t=this._syncMetamorphoseState(e)}catch(n){if(!AN(n))throw n;t=await this._asyncMetamorphoseState(e)}this._requireReviewResourcesFlag=!1,this._replaceState(t)}_replaceState(e){if(this._lockChangeState!==null)throw new Error(`State change is locked with: ${this._lockChangeState}`);if(e===this.state)return;if(e.constructor!==this.state.constructor)throw new Error(`TYPE ERROR types don't match new state is ${e} but this.state is ${this.state}.`);if(e.isDraft)throw new Error(`VALUE ERROR new state ${e} must be immutable, but is a draft.`);const t=new ln(this.state,e),n=new Set(t.map(([s,,])=>s));if(this.state=e,!(n.size===1&&n.has(qs.EQUALS))){this._lockChangeState="_replaceState";try{this._ui.update(t)}finally{this._lockChangeState=null}}}async _loadInitialResourcesFromPromises(...e){const t=new Map;for(let[r,...o]of e){let a=t.get(r);a||(a=[],t.set(r,a)),a.push(o)}const n=[],s=[];for(let r of t.keys()){let o;switch(r){case"font":o=this._fontManager.loadInitialFontsFromResources(t.get(r)).catch(a=>this.uiReportError("fontManager.loadInitialFontsFromResources",a));break;case"localFontStorage":o=t.get(r)[0][0].then(a=>this._fontManager.onLocalFontStorage(a)).then(()=>this._fontManager.loadInitialFontsFromLocalFontStorage());break;case"harfbuzz":case"ready":[o]=t.get(r)[0];break;default:console.warn(`ATTEMPT TO LOAD  UNKOWN TYPE: ${r}`)}n.push(r),s.push(o)}return Promise.all(s).then(r=>new Map(tn(n,r))).catch(r=>this.uiReportError("_loadInitialResourcesFromPromises",r))}reset(){}}class gL extends me{static{c(this,"UIDialogOpeners")}[fn]=Lo;static TEMPLATE='<ul class="ui-dialog_openers-items"></ul>';constructor(e,t){super(e),this._dialogs=t,[this.element]=this.initTemplate(this._dialogs)}initTemplate(e){const t=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE).firstElementChild,n=[];for(const[s,[,r]]of e.entries()){const o=this._domTool.createElement("button",{class:"ui-dialog_openers-item-button"},r),a=this._domTool.createElement("li",{class:"ui-dialog_openers-item"},o);o.addEventListener("click",this._openDialogHandler.bind(this,s)),n.push(a)}return t.append(...n),this._insertElement(t),[t]}async _openDialogHandler(e,t){t.preventDefault();const[n]=this._dialogs[e],s=[],r=[];if(console.log(`${this}._openDialog(${e}):`,this._dialogs[e][1]),n.hostInit){const[l,A]=n.hostInit.call(this);s.push(...l),r.push(...A)}const o=new n(this._domTool,...s),a=await o.show(...r);return console.log("Dialog result:",a),o.destroy(),a}}const pe=Object.freeze({ACTOR_PATH:"application/x.typeroof-actor-path",ACTOR_CREATE:"application/x.typeroof-actor-create",AXESMATH_ITEM_PATH:"application/x.typeroof-axesmath-item-path",AXESMATH_ITEM_CREATE:"application/x.typeroof-axesmath-item-create",AXESMATH_LOCATION_VALUE_PATH:"application/x.typeroof-axesmath-location-value-path",AXESMATH_LOCATION_VALUE_CREATE:"application/x.typeroof-axesmath-location-value-create",AXESMATH_LOCATION_KEY_PATH:"application/x.typeroof-axesmath-location-key-path",AXESMATH_LOCATION_VALUES_KEY_PATH:"application/x.typeroof-axesmath-location-values-key-path",TYPE_SPEC_TYPE_SPEC_PATH:"application/x.typeroof-typespec-type-spec-path",TYPE_SPEC_TYPE_SPEC_CREATE:"application/x.typeroof-typespec-type-spec-create",TYPE_SPEC_STYLE_PATCH_PATH:"application/x.typeroof-typespec-style-patch-path",TYPE_SPEC_STYLE_PATCH_CREATE:"application/x.typeroof-typespec-style-patch-create",TYPE_SPEC_STYLE_PATCH_LINK_PATH:"application/x.typeroof-typespec-style-patch-link-path",TYPE_SPEC_DOCUMENT_NODE_PATH:"application/x.typeroof-typespec-document-node-path",TYPE_SPEC_DOCUMENT_NODE_CREATE:"application/x.typeroof-typespec-document-node-create",PROSEMIROOR_NODE_SPEC_PATH:"application/x.typeroof-prosemirror-node-spec-path"});class vr extends me{static{c(this,"GenericSelect")}static TEMPLATE=`<label class="ui_generic_select">
    <span class="ui_generic_select-label">Something</span>
    <select class="ui_generic_select-select"></select>
</label>`;static NULL_SELECT_VALUE="[_NULL_]";static RESET_OPTION_INDEX=0;constructor(e,t,n,s=null,r=[],o=null,a=null,l=null){super(e),s&&(this._optionGetLabel=s),a&&(this._optionGetGroup=a),l&&(this._optionsGen=l),[this._allowNull=!1,this._allowNullLabel="(no selection)",this._nullModelValue=null]=r,this._onChangeFn=o,[this.element,this._label,this._select]=this.initTemplate(t,n),this._allowNull&&(this._updateOptions(null),this._updateValue({value:this._nullModelValue}))}get RESET_OPTION_INDEX(){return this.constructor.RESET_OPTION_INDEX}initTemplate(e,t){const n=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE),s=n.querySelector(".ui_generic_select"),r=n.querySelector(".ui_generic_select-label"),o=n.querySelector(".ui_generic_select-select");return s.classList.add(`${e}`),r.classList.add(`${e}-label`),this._domTool.clear(r),t===null?r.remove():r.append(t),o.classList.add(`${e}-select`),this._insertElement(s),o.addEventListener("change",this._changeSelectedValueHandler.bind(this)),[s,r,o]}async _changeSelectedValueHandler(){return await this._changeState(()=>{const e=this._allowNull&&this._select.value===this.constructor.NULL_SELECT_VALUE?this._nullModelValue:this._select.value;this.getEntry("value").set(e),this._onChangeFn&&this._onChangeFn(e)})}update(e){e.has("options")&&this._updateOptions(e.get("options")),e.has("value")&&this._updateValue(e.get("value"))}_optionGetLabel(e){return e}_optionGetGroup(){return[null,"",0]}*_optionsGen(e){yield*e}_createOption(e,t){const n=this._domTool.createElement("option");return n.value=e,n.textContent=t,n}_populateSelect(e){const t=[],n=new Map,s=c((A,u,h)=>{A.push(this._createOption(u,h))},"createOption"),r=Symbol("PLACEHOLDER"),o=c(A=>{const[u,h,d]=this._optionGetGroup(A);if(!n.has(u)){const g=h!=="",p=g?[]:t;g&&t.push(r),n.set(u,{items:p,label:h,index:d,createsOptGroup:g})}return n.get(u).items},"getGroupItems");if(this._allowNull){const[A,u,h]=[this.constructor.NULL_SELECT_VALUE,this._nullModelValue,this._allowNullLabel],d=o(u);s(d,A,h)}for(const[A,u,h]of e){const d=o(u);s(d,A,h)}const a=[],l=Array.from(n.values()).filter(A=>A.createsOptGroup).sort((A,u)=>A.index-u.index).map(A=>{const u=this._domTool.createElement("optgroup");u.label=A.label;const h=this._domTool.createElement("legend");return h.textContent=A.label,u.append(h),u.append(...A.items),u});for(const A of t)A===r?a.push(l.shift()):a.push(A);this._domTool.clear(this._select),this._select.append(...a)}_updateOptions(e){const t=this._select.value,n=[];if(e!==null)for(const[s,r]of this._optionsGen(e)){const o=this._optionGetLabel(s,r);n.push([s,r,o])}this._populateSelect(n),this._select.value=t}_updateValue(e){this._select.value=this._allowNull&&e.value===this._nullModelValue?this.constructor.NULL_SELECT_VALUE:e.value.toString()}isFocused(){return this._select===this._domTool.document.activeElement}get isNullValue(){return this._allowNull&&this.constructor.NULL_SELECT_VALUE===this._select.value}set value(e){this._select.value=e}get value(){return this.isNullValue?this._nullModelValue:this._select.value}focus(){this._select.focus()}setCustomValidity(e=""){this._select.setCustomValidity(e),this._select.reportValidity()}reset(){this._select.value=this._select.item(this.RESET_OPTION_INDEX)?.value||null,this._select.setCustomValidity("")}}class $l{static{c(this,"PlainSelectInput")}static TEMPLATE=`<label class="ui_plain_select">
    <span class="ui_plain_select-label">(not initialized)</span>
    <select class="ui_plain_select-select"></select>
</label>`;constructor(e,t,n,s){this._domTool=e,this._passive=!1,[this.element,this._input]=this._initTemplate(n,s),this._changeHandler=null,t&&(this._changeHandler=r=>{r.preventDefault(),t(this._input.value)},this._input.addEventListener("change",this._changeHandler))}_initTemplate(e,t){const n=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE).firstElementChild,s=n.querySelector(".ui_plain_select-select"),r=n.querySelector(".ui_plain_select-label"),o=[];for(const[a,l]of t){const A=this._domTool.createElement("option",{},l);A.value=a,o.push(A)}return s.append(...o),r.textContent=e,[n,s]}update(e){this._input.value=e}set passive(e){this._passive=!!e,this._input.disabled=this._passive}get passive(){return this._passive}setDisplay(e){e?this.element.style.removeProperty("display"):this.element.style.display="none"}}function VN(i,e){let t=Math.abs(i-e);return t>=100?"1":t>=10?"0.1":"0.01"}c(VN,"_getInputStepsSizeForMinMax");class Bh{static{c(this,"PlainNumberAndRangeInput")}static TEMPLATE=`<div class="number-and-range-input">
    <label><!-- insert: label --></label>
    <input type='number'  size="3" /><!-- insert: unit -->
    <input type='range' />
</div>`;constructor(e,t,n,s,r){if(this._domTool=e,this._passive=!1,!r)throw new Error(`VALUE ERROR can't build ${this.constructor.name} without minMaxValueStep`);this._minMaxValueStep=r,[this.element,this._inputs,this._labelElement,this._unitElement,this._rangeElement]=this._initTemplate(),this.updateTemplateVars(n,s,r),this._changeHandler=o=>{o.preventDefault(),t(parseFloat(o.target.value))};for(const o of this._inputs)o.addEventListener("input",this._changeHandler)}_initTemplate(){const e=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE),t=e.firstChild,n=this._domTool.createElement("span",{}),s=this._domTool.createElement("span",{});this._domTool.insertAtMarkerComment(t,"insert: label",n),this._domTool.insertAtMarkerComment(t,"insert: unit",s);const r=e.querySelector('input[type="range"]');for(const a of t.querySelectorAll("label"))a.addEventListener("click",()=>r.focus());const o=Array.from(t.getElementsByTagName("input"));return[t,o,n,s,r]}updateTemplateVars(e,t,n){if(this._rangeElement){const r=typeof n.min=="number"&&isFinite(n.min)&&typeof n.max=="number"&&isFinite(n.max);this._rangeElement.style.setProperty("display",r?"":"none")}const s=Object.assign(n);"step"in n||(s.step="min"in n&&"max"in n?VN(n.min,n.max):"any");for(const[r,o]of Object.entries(s))for(const a of this._inputs)a[r]=o;this._labelElement.textContent=`${e}`,t?(this._domTool.clear(this._unitElement),this._unitElement.append(`${t}`)):this._unitElement.textContent=""}update(e){const t="min"in this._minMaxValueStep?this._minMaxValueStep.min:e,n="max"in this._minMaxValueStep?this._minMaxValueStep.max:e,s=Math.min(n,Math.max(t,e));for(let r of this._inputs)this._domTool.document.activeElement!==r&&(r.value=s)}set passive(e){this._passive=!!e,this._inputs.map(t=>t.disabled=!!e)}get passive(){return this._passive}setDisplay(e){e?this.element.style.removeProperty("display"):this.element.style.display="none"}}class TC{static{c(this,"PlainLineOfTextInput")}static TEMPLATE=`<div class="line_of_text">
    <label><!-- insert: label -->
    <input type='text'/></label>
</div>`;constructor(e,t,n){this._domTool=e,this._passive=!1,[this.element,this._input]=this._initTemplate(n),this._changeHandler=s=>{s.preventDefault(),t(s.target.value)},this._input.addEventListener("input",this._changeHandler)}_initTemplate(e=null){const t=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE).firstElementChild,n=t.querySelector("input");return e!==null&&this._domTool.insertAtMarkerComment(t,"insert: label",e),[t,n]}update(e){this._input.value=e}set passive(e){this._passive=!!e,this._input.disabled=this._passive}get passive(){return this._passive}setDisplay(e){e?this.element.style.removeProperty("display"):this.element.style.display="none"}}class zo{static{c(this,"_AbstractOrEmptyPlainInputWrapper")}static createClass(e,t){const n={[e]:class extends this{static PlainInput=t}};return Object.freeze(n[e]),n[e]}constructor(e,t,n,...s){this._domTool=e,this._uiInput=new this.constructor.PlainInput(this._domTool,t,...s),this._uiToggle=new vh(this._domTool,n,"toggle","set","unset","Toggle explicit number input or set empty."),this.element=this._uiInput.element,this.element.append(this._uiToggle.element)}update(e,t){e?(this._uiInput.passive=!1,this._uiInput.update(t),this._uiToggle.update(!1)):(this._uiInput.passive=!0,this._uiInput.update(t),this._uiToggle.update(!0))}setDisplay(e){this._uiInput.setDisplay(e),this._uiToggle.setDisplay(e)}set passive(e){this._uiInput.passive=e,this._uiToggle.passive=e}get passive(){return this._uiInput.passive&&this._uiToggle.passive}destroy(){}}class vh{static{c(this,"PlainToggleButton")}static baseClass="ui_toggle_button";constructor(e,t,n,s,r,o){this._domTool=e,this._labelIsOn=s,this._labelIsOff=r,this.element=this._domTool.createElement("button",{class:`${this.constructor.baseClass} ${this.constructor.baseClass}-${n}`,title:o},"(initializing)"),this.element.addEventListener("click",a=>{a.preventDefault(),t()})}update(e){this._booleanValue=!!e,this.element.textContent=this._booleanValue?this._labelIsOn:this._labelIsOff}setDisplay(e){e?this.element.style.removeProperty("display"):this.element.style.display="none"}set passive(e){this.element.disabled=!!e}get passive(){return!!this.element.disabled}}class Pa extends me{static{c(this,"UIToggleButton")}static baseClass="ui_toggle_button";constructor(e,t,n,s,r){super(e);const o=this._changeStateHandler(()=>{const a=this.getEntry("boolean");a.set(!a.value)});this._ui=new vh(this._domTool,o,t,n,s,r),this._insertElement(this._ui.element)}update(e){e.has("boolean")&&this._ui.update(e.get("boolean").value)}}class yn extends me{static{c(this,"StaticTag")}constructor(e,t,n,s){super(e),this.element=this._domTool.createElement(t,n,s),this._insertElement(this.element)}}class qt extends me{static{c(this,"StaticNode")}constructor(e,t){super(e),this.node=t,this._insertElement(this.node)}}class _s extends me{static{c(this,"DynamicTag")}constructor(e,t,n,s=Er,r="(initializing)"){super(e),this._formatter=s,this.element=this._domTool.createElement(t,n,r),this._insertElement(this.element)}update(e){e.has("data")&&(this.element.textContent=this._formatter(e.get("data").value))}}class Za extends me{static{c(this,"MoveItemsInListButton")}static BACKWARD=Symbol("MOVE_ITEM_IN_LIST_BUTTON_BACKWARD");static FORWARD=Symbol("MOVE_ITEM_IN_LIST_BUTTON_FORWARD");static baseClass="ui_move_item_in_list_button";static setings={[this.BACKWARD]:{title:"Move item(s) one position backward.",classToken:"backward",label:"⇇ move backward"},[this.FORWARD]:{title:"Move item(s) one position forward.",classToken:"forward",label:"move forward ⇉"}};constructor(e,t,n,s){super(e);const r=this.constructor.setings[t];this._getKeysFn=n,this._setKeysFn=s,this.element=this._domTool.createElement("button",{class:`${this.constructor.baseClass} ${this.constructor.baseClass}-${r.classToken}`,title:r.title},r.label),this.element.addEventListener("click",this._changeStateHandler(()=>{const o=this.getEntry("list"),a=this.getEntry("keys");if(o.size<=1||a.size===0)return;const l=this._getKeysFn(a);t===this.constructor.FORWARD&&l.reverse();for(const A of l)if(t===this.constructor.FORWARD)this._moveForward(a,o,A);else if(t===this.constructor.BACKWARD)this._moveBackward(a,o,A);else throw new Error(`TYPE ERROR action unknown ${t.toString()}.`)})),this._insertElement(this.element)}_moveForward(e,t,n){const s=parseInt(n,10);if(s===t.size-1){const o=t.shift(),a=t.pop();t.push(o),t.unshift(a)}else t.splice(s,2,t.get(s+1),t.get(s));const r=s===t.size-1?"0":`${t.keyToIndex(s+1)[0]}`;this._setKeysFn(e,n,r)}_moveBackward(e,t,n){const s=parseInt(n,10);if(s===0){const o=t.shift(),a=t.pop();t.push(o),t.unshift(a)}else t.splice(s-1,2,t.get(s),t.get(s-1));const r=`${t.keyToIndex(s-1)[0]}`;this._setKeysFn(e,n,r)}update(e){const t=e.has("list")?e.get("list"):this.getEntry("list"),n=e.has("keys")?e.get("keys"):this.getEntry("keys");this.element.disabled=n.size===0||t.size<2}}class Wi extends me{static{c(this,"UINumberInput")}static TEMPLATE=`<div class="number_input">
    <label><!-- insert: label -->
    <input type='number'/><!-- insert: unit --></label>
</div>`;constructor(e,t,n,s={},r=[]){super(e),this._minMax=s,[this.element,this._input]=this._initTemplate(n,s,t,r)}_initTemplate(e,t,n,s){const r=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE).firstElementChild,o=r.querySelector("input");if(Array.isArray(s)&&s.length)for(const a of s)r.classList.add(a);o.addEventListener("input",this._changeStateHandler(()=>{this.getEntry("value").set(parseFloat(o.value))}));for(const[a,l]of Object.entries(t))o[a]=l;return n&&this._domTool.insertAtMarkerComment(r,"insert: label",n),e&&this._domTool.insertAtMarkerComment(r,"insert: unit",` ${e}`),this._insertElement(r),[r,o]}update(e){if(e.has("value")){const t=e.get("value").value,n="min"in this._minMax?this._minMax.min:t,s="max"in this._minMax?this._minMax.max:t,r=Math.min(s,Math.max(n,t));this._domTool.document.activeElement!==this._input&&(this._input.value=r)}}}class FC{static{c(this,"PlainCheckboxInput")}static baseClass="ui_checkbox";static TEMPLATE=`<div>
    <label><span class="ui_checkbox--label"><!-- insert: label --></span>
    <input class="ui_checkbox--input" type="checkbox" /></label>
</div>`;constructor(e,t,n,s){this._domTool=e,[this.element,this._input]=this._initTemplate(t,n,s)}_initTemplate(e,t,n){const s=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE).firstElementChild,r=s.querySelector("input"),o=s.querySelector("label span"),a=this.constructor.baseClass,l=`${a}-${t}`;o.textContent=n;for(const[A,...u]of[[s,a,l],[r,`${l}-input`],[o,`${l}-label`]])for(const h of u)A.classList.add(h);return r.addEventListener("change",A=>{A.preventDefault(),e(this._input.checked)}),[s,r]}update(e){this._booleanValue=!!e,this._input.checked=this._booleanValue}setDisplay(e){e?this.element.style.removeProperty("display"):this.element.style.display="none"}set passive(e){this._input.disabled=!!e}get passive(){return!!this._input.disabled}}const Di=Oo.createClass("UILineOfTextInput",TC),xC=Oo.createClass("UINumberAndRangeInput",Bh),Gh=Oo.createClass("UISelectInput",$l);Oo.createClass("UICheckboxInput",FC);const Rh=zo.createClass("PlainNumberAndRangeOrEmptyInput",Bh),ON=zo.createClass("PlainLineOfTextOrEmptyInput",TC),PN=zo.createClass("PlainSelectOrEmptyInput",$l),HN=zo.createClass("PlainCheckboxOrEmptyInput",FC),XN=Xo.createClass("UILineOfTextOrEmptyInput",ON),ec=Xo.createClass("UINumberAndRangeOrEmptyInput",Rh),zN=Xo.createClass("UISelectOrEmptyInput",PN),LC=Xo.createClass("UICheckboxOrEmptyInput",HN);class tt extends me{static{c(this,"Collapsible")}static BASE_CLASS="ui_collapsible";static OPENED_CLASS=`${tt.BASE_CLASS}-opened`;static CLOSED_CLASS=`${tt.BASE_CLASS}-closed`;constructor(e,t,n,s=!1){const r=[tt.BASE_CLASS,s?tt.OPENED_CLASS:tt.CLOSED_CLASS],o=e.domTool.createElement("div",{class:r.join(" ")}),a=e.domTool.createElement("div",{class:`${tt.BASE_CLASS}-toggler`,role:"button","aria-expanded":s});n?.classList.add(`${tt.BASE_CLASS}-contents`),n?.setAttribute("aria-hidden",!s),super(e),o.append(a),o.append(n),this._insertElement(o),this._element=o,this._togglerElement=a,this._contentsElement=n,a.textContent=t,a.addEventListener("click",this._onClickToggler.bind(this))}_onClickToggler(){const t=!(this._togglerElement.getAttribute("aria-expanded")==="true");this._togglerElement.setAttribute("aria-expanded",t),this._contentsElement.setAttribute("aria-hidden",!t),t?(this._element.classList.add(tt.OPENED_CLASS),this._element.classList.remove(tt.CLOSED_CLASS),this._element.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})):(this._element.classList.remove(tt.OPENED_CLASS),this._element.classList.add(tt.CLOSED_CLASS))}}class MC extends me{static{c(this,"_BaseDropTarget")}[fn]=Lo;static TEMPLATE=`<div class="ui_base_drop_target">
    <em class="ui_base_drop_target-effect_label"></em>
    <span class="ui_base_drop_target-main_drop_zone"></span>
    <span class="ui_base_drop_target-description_label"></span>
</div>`;constructor(e,t,n,s){super(e),this._applicableTypes=s,this._receptiveClassName=`${this.constructor.BASE_CLASS}-receptive`,[this.element]=this.initTemplate(t,n)}initTemplate(e,t){const n=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE),s=n.firstElementChild,r=s.querySelector(".ui_base_drop_target-effect_label"),o=s.querySelector(".ui_base_drop_target-description_label"),a=s.querySelector(".ui_base_drop_target-main_drop_zone");return s.classList.add(this.constructor.BASE_CLASS),r.classList.add(`${this.constructor.BASE_CLASS}-effect_label`),o.classList.add(`${this.constructor.BASE_CLASS}-description_label`),a.classList.add(`${this.constructor.BASE_CLASS}-main_drop_zone`),r.textContent=e,o.textContent=t,this._insertElement(s),this._addEventListeners(s),[s]}_addEventListeners(e){e.addEventListener("dragenter",this._dragenterHandler.bind(this)),e.addEventListener("dragover",this._dragoverHandler.bind(this)),e.addEventListener("dragleave",this._dragleaveHandler.bind(this)),e.addEventListener("drop",this._dropHandler.bind(this))}_takeDragEventOrLeaveIt(e){for(const t of this._applicableTypes)if(e.dataTransfer.types.includes(t))return e.preventDefault(),e.stopPropagation(),[!0,t];return[!1,null]}_dragenterHandler(e){this._takeDragEventOrLeaveIt(e)[0]&&this.element.classList.add(this._receptiveClassName)}_dragoverHandler(e){this._takeDragEventOrLeaveIt(e)[0]&&this.element.classList.add(this._receptiveClassName)}_dragleaveHandler(e){this._takeDragEventOrLeaveIt(e)[0]&&this.element.classList.remove(this._receptiveClassName)}_dropHandler(){return this.element.classList.remove(this._receptiveClassName),this._dropHandlerImplementation(event)}_dropHandlerImplementation(){throw new Error(`NOT IMPLEMENTED ${this}._dropHandler for event ${event}`)}}class Ti extends MC{static{c(this,"WasteBasketDropTarget")}static BASE_CLASS="waste_basket_drop_target";_dropHandlerImplementation(e){const[t,n]=this._takeDragEventOrLeaveIt(e);if(!t)return;const s=new Set([pe.AXESMATH_ITEM_PATH,pe.AXESMATH_LOCATION_VALUE_PATH,pe.AXESMATH_LOCATION_KEY_PATH,pe.AXESMATH_LOCATION_VALUES_KEY_PATH]);if(n===pe.ACTOR_PATH||n===pe.TYPE_SPEC_TYPE_SPEC_PATH||n===pe.TYPE_SPEC_DOCUMENT_NODE_PATH)return this._changeState(()=>{const r=D.fromString(this.widgetBus.getExternalName("rootCollection")),o=e.dataTransfer.getData(n),a=r.appendString(o),l=this.getEntry(a.parent),A=a.parts.at(-1);if(!r.isRootOf(a))throw new Error(`PATH ERROR source path "${a}" (${o}) is not contained in root path "${r}"`);l.delete(A)});if(s.has(n)||n===pe.TYPE_SPEC_STYLE_PATCH_PATH||n===pe.TYPE_SPEC_STYLE_PATCH_LINK_PATH||n===pe.PROSEMIROOR_NODE_SPEC_PATH)return this._changeState(()=>{const r=e.dataTransfer.getData(n),o=D.fromString(r),a=this.getEntry(o.parent),l=o.parts.at(-1);console.log(`${this}._dropHandler type: ${n} data: ${r} sourcePath: ${o}`),a.delete(l)});throw new Error(`NOT IMPLEMENTED ${this}._dropHandler don't know how to handle type "${n}".`)}}const dr="numericProperties/",at="colors/",Ne="generic/",Rt="specific/",Hi="leading/",rn="dimension/",bn="opentype-features/",VC=Object.freeze(new it(Object.entries({NUMERIC:dr,COLOR:at,GENERIC:Ne,SPECIFIC:Rt,LEADING:Hi,DIMENSION:rn,OPENTYPE_FEATURES:bn}))),JN=Object.freeze(new it(Array.from(VC).map(i=>i.reverse()))),pu=Symbol("_NOTDEF");function UN(i){if(i instanceof fu)return i.registryCredentials;if(typeof i=="string"){const e=i.split("/").at(0)+"/",t=i.slice(e.length);return[e,t]}else throw new Error(`TYPE ERROR propertyIdentifier must be a string or a ProcessedPropertiesSystemRecord: ${i}`)}c(UN,"_getPrefixAndName");function Sh(i,e,t=pu){const[n,s]=UN(e);if(n in i&&JN.has(n)){const r=i[n];if(r.has(s))return r.get(s)}if(t!==pu)return t;throw new Error(`KEY ERROR don't know how to get registered property setup "${e}".`)}c(Sh,"getFromRegistry");Sh.NOTDEF=pu;const KN=Symbol("_PROCESSED_PROPERTIES_SYSTEMPPS_ENTRY_MARKER");class fu{static{c(this,"ProcessedPropertiesSystemRecord")}constructor(e){Object.assign(this,e,{registryKey:e.registryKey===null?e.modelFieldName:e.registryKey})}get[KN](){return!0}toString(){return`<${this.constructor.name} ${this.fullKey} ${this.registryCredentials.join(",")}>`}get propertyRoot(){return`${this.fullKey}/`}get registryCredentials(){return[this.prefix,this.registryKey]}get registryFullKey(){return this.registryCredentials.join("")}}class Ze extends it{static{c(this,"ProcessedPropertiesSystemMap")}constructor(e){if(super(),e)for(const t of e)this.set(...t)}static fromPrefix(e,t,n=null){const s=new this;for(const r of t)n&&!n(r)||s.set(r,this.createSimpleRecord(e,r));return s}get(e){if(!this.has(e))throw new Error(`KEY ERROR ${this} missing entry for "${e}".`);return super.get(e)}set(e,t){if(!(t instanceof fu))throw new Error(`VALUE ERROR ${this} ppsRecord for key "${e}" must be ProcessedPropertiesSystemRecord but got ${t}.`);super.set(e,t)}toString(){return`[${this.constructor.name}]`}static createSimpleRecord(e,t,n=null,s=null){return new fu({prefix:e,fullKey:n!==null?n:`${e}${t}`,modelFieldName:t,registryKey:s})}}function*Nh(i,e,t){if(!(t instanceof ke&&t.isEmpty)){if(t instanceof Cs){yield[`${i}${e.join("/")}`,t.value];return}if(t instanceof Oi){for(const[n,s]of t){const r=Object.freeze(e.concat(n));yield*Nh(i,r,s)}return}throw new Error(`VALUE ERROR don't know how to handle item: "{item.toString()}" at prefix+path: ${i}${e};`)}}c(Nh,"childrenPropertiesBroomWagonGen");function tc(i,e){return c(function*(n,s){for(const r of s.keys()){if(!e.has(r))continue;const o=s.get(r),a=Object.freeze([r]);yield*Nh(i,a,o)}},"propertiesBroomWagonGen")}c(tc,"getPropertiesBroomWagonGen");const Qh=Ue.createClass("AxesLocationsModel",ws),Jo=[st.create(["autoOPSZ","axesLocations"],c(function({autoOPSZ:e,axesLocations:t}){e.value===void 0&&(e.value=!0),e.value&&t.delete("opsz")},"sanitizeAxes")),["autoOPSZ",ut],["axesLocations",Qh]],jN=ye.createClass("ManualAxesLocationsModel",...Jo);class gn extends me{static{c(this,"UIManualAxesLocations")}static REGISTERED_AXES_ORDERED=["wght","wdth","opsz","ital","slnt","grad","GRAD"];constructor(e,t=null,n=null,s=()=>!1){super(e),this._ppsRecord=n,this._getDefaults=t,this._requireUpdateDefaults=s,this._autoOPSZChangeHandler=this._changeStateHandler(this.__autoOPSZChangeHandler.bind(this)),this._axisChangeHandler=this._changeStateHandler(this.__axisChangeHandler.bind(this)),this._styleSelectChangeHandler=this._changeStateHandler(this.__styleSelectChangeHandler.bind(this)),this.element=this._domTool.createElement("div",{class:"manual_axes_locations"},this._domTool.createElement("h3",{},"Manual Axes Locations")),this._insertElement(this.element),this._axesInterfaces=new Map,this._autoOPSZInput=null,this._viewAllAxes=null,this._styleSelect=null,this._insertedElements=[],this._font=null,this._fontSize=null,this._localAxesLocations={},this._axesLocations=null}_setOrReset(e,t,n){n===null?e.delete(t):e.setSimpleValue(t,n)}__autoOPSZChangeHandler(e){e.preventDefault();const t=this._autoOPSZInput.checked;this.getEntry("autoOPSZ").set(t);const n=this.getEntry("axesLocations"),s="opsz",r=t?null:this._fontSize;this._setOrReset(n,s,r)}__axisChangeHandler(e,t){const n=this.getEntry("axesLocations");this._setOrReset(n,e,t)}__styleSelectChangeHandler(e){const t=this.getEntry("axesLocations");for(const[n,s]of Object.entries(e)){const r=this.axesGet(n).default,o=n==="opsz"&&this.getEntry("autoOPSZ").value?r:s;this._setOrReset(t,n,o===r?null:o)}}static CUSTOM_STYLE_VALUE="custom";_newStyleSelect({insertElement:e,changeHandler:t},n){const s=this._domTool.createElementfromHTML("label",{},"Style: <select></select>"),r={container:s,input:s.querySelector("select"),_domTool:this._domTool,_instances:[],_locationsIndexesCache:new Map,_getLocationsIndex(o){const a=!o||o.size===0?"":Array.from(o).sort().join(";");if(!this._locationsIndexesCache.has(a)){const l=new Map;for(const[A,[,u]]of this._instances.entries()){const h=this._locationsToKey(u,o);l.set(h,A)}this._locationsIndexesCache.set(a,l)}return this._locationsIndexesCache.get(a)},setInstances(o){this._instances=o;const a=c((A,u)=>this._domTool.createElement("option",typeof A!="object"?{value:A}:A,u),"makeOption"),l=[];o.length?this.container.style.removeProperty("display"):this.container.style.display="none",l.push(a({value:gn.CUSTOM_STYLE_VALUE,disabled:"1"},"(custom value)")),this._locationsIndexesCache.clear();for(const[A,[u]]of o.entries())l.push(a(A,u));this._domTool.clear(this.input),this.input.append(...l),this.input.value=gn.CUSTOM_STYLE_VALUE},setValue(o,a=!1){this.input.value=this._getInstanceValueForLocations(o,a)},remove:c(function(){this.container.remove()},"remove"),destroy:c(function(){},"destroy"),_locationsToKey(o,a=null){return Object.entries(o).sort(([l],[A])=>l<A?-1:l>A?1:0).filter(([l])=>!(a&&a.has(l))).map(([l,A])=>`${l}:${A}`).join(";")},getCurrentLocations(){if(this.input.value!==gn.CUSTOM_STYLE_VALUE)return this._instances[this.input.value]?.[1]},_getInstanceValueForLocations(o,a=!1){const l=a?new Set(["opsz"]):null,A=this._locationsToKey(o,l),u=this._getLocationsIndex(l),h=u.get(A);return h!==void 0?h:gn.CUSTOM_STYLE_VALUE}};return r.input.addEventListener("change",()=>{const o=r.getCurrentLocations();o&&t(o)}),r.setInstances(n),e(r.container),r}_newCheckbox({insertElement:e,changeHandler:t},n){const s=this._domTool.createElementfromHTML("label",{},`<input type="checkbox" /> ${n}`),r={container:s,input:s.querySelector("input"),get checked(){return this.input.checked},set checked(o){this.input.checked=!!o},remove:c(function(){this.container.remove()},"remove"),destroy:c(function(){},"destroy"),setDisplay(o){o?this.container.style.removeProperty("display"):this.container.style.display="none"},disable(){this.container.classList.add("disabled"),this.input.disabled=!0},enable(){this.container.classList.remove("disabled"),this.input.disabled=!1}};return r.input.addEventListener("change",t),e(r.container),r}_toggleAxesDisplay(){const e=this._viewAllAxes.checked,t=new Set(gn.REGISTERED_AXES_ORDERED);for(const[n,s]of this._axesInterfaces.entries())t.has(n)||s.setDisplay(e)}_cleanUp(){this._localAxesLocations={};for(const e of this._axesInterfaces.values())e.destroy();this._axesInterfaces.clear(),this._styleSelect&&(this._styleSelect.destroy(),this._styleSelect=null),this._autoOPSZInput&&(this._autoOPSZInput.destroy(),this._autoOPSZInput=null),this._viewAllAxes&&(this._viewAllAxes.destroy(),this._viewAllAxes=null);for(const e of this._insertedElements)this._domTool.removeNode(e);this._insertedElements.splice(0,1/0)}_initUI(){const e=c((...r)=>{this.element.append(...r),this._insertedElements.push(...r)},"insertElement");this._styleSelect=this._newStyleSelect({insertElement:e,changeHandler:this._styleSelectChangeHandler.bind(this)},this._font.instances),this._viewAllAxes=this._newCheckbox({insertElement:e,changeHandler:this._toggleAxesDisplay.bind(this)},"View all axes");const t=[];this.axesHas("opsz")&&(this._autoOPSZInput=this._newCheckbox({insertElement:c((...r)=>t.push(...r),"insertElement"),changeHandler:this._autoOPSZChangeHandler},"Mirror size changes"));const n=new Set(gn.REGISTERED_AXES_ORDERED);let s=!1;for(const r of[gn.REGISTERED_AXES_ORDERED,...this.axesTags()]){if(this._axesInterfaces.has(r)||!this.axesHas(r))continue;const{name:o,min:a,max:l,default:A}=this.axesGet(r);this._localAxesLocations[r]=A,n.has(r)||(s=!0);const u=new Rh(this._domTool,h=>this._axisChangeHandler(r,h),()=>{const h=this._axesLocations.has(r)?null:this._getDefaults?this._getDefaults(this._ppsRecord,r,A):A;this._axisChangeHandler(r,h)},o===r?`${o}`:`${o} (${r})`,void 0,{min:a,max:l,value:A});e(u.element),r==="opsz"&&e(...t),this._axesInterfaces.set(r,u)}this._viewAllAxes.setDisplay(s)}axesHas(e){return this._font!==null&&e in this._font.axisRanges}axesGet(e){if(!this.axesHas(e))throw new Error(`KEY ERROR ${e} not found in font "${this._font.fullName}".`);return this._font.axisRanges[e]}axesTags(){return Object.keys(this._font.axisRanges)}*axesEntries(){for(const e of this.axesTags())yield[e,this.axesGet(e)]}_getValueForAxis(e){return this._axesLocations.has(e)?[!0,this._axesLocations.get(e).value]:[!1,this._getDefaults!==null?this._getDefaults(this._ppsRecord,e,this.axesGet(e).default):this.axesGet(e).default]}_updateValueToAxisInterface(e,t,n){if(!this._axesInterfaces.has(e))throw new Error(`KEY ERROR axis interface for axis tag "${e}" not found.`);this._axesInterfaces.get(e).update(t,n),this._localAxesLocations[e]=n}_updateOPSZAxisInterface(e,t){const n=this._autoOPSZInput.checked,s=this._requireUpdateDefaults(e),r="opsz";if(!(e.has("autoOPSZ")||t||s||(n?e.has("fontSize"):e.has("axesLocations"))))return;const a=this._axesInterfaces.get("opsz");if(n)this._updateValueToAxisInterface("opsz",!1,this._fontSize),a.passive=!0;else{a.passive=!1;const[l,A]=this._getValueForAxis(r);this._updateValueToAxisInterface("opsz",l,A)}}_setFont(e){if(this.widgetBus.wrapper.dependencyReverseMapping.has("properties@")){const t={fullKey:`${Rt}font`};if(e.has("rootFont")||e.has("properties@")){const n=(e.has("properties@")?e.get("properties@"):this.getEntry("properties@")).typeSpecnion.getProperties(),s=n.has(t.fullKey)?n.get(t.fullKey):this.getEntry("rootFont").value,r=s!==this._font;return r&&(this._font=s),r}return!1}else{if(!e.has("font"))return!1;const t=e.get("font").value,n=t!==this._font;return n&&(this._font=t),n}}_setFontSize(e,t){if(this.widgetBus.wrapper.dependencyReverseMapping.has("properties@")){const n={fullKey:`${Ne}fontSize`},s=(e.has("properties@")?e.get("properties@"):this.getEntry("properties@")).typeSpecnion.getProperties(),r=this.axesHas("opsz")?this.axesGet("opsz").default:36,o=s.has(n.fullKey)?s.get(n.fullKey):this._getDefaults(n,"fontSize",r);this._fontSize=o;return}if(e.has("fontSize")||t){const n=e.has("fontSize")?e.get("fontSize"):this.getEntry("fontSize");if(!n.isEmpty)this._fontSize=n.value;else{const s=Ze.createSimpleRecord(Ne,"fontSize"),r=[s,"fontSize"];this.axesHas("opsz")?r.push(this.axesGet("opsz").default):r.push(36),this._fontSize=this._getDefaults(...r)}}}_update(e){const t=this._requireUpdateDefaults(e),n=this._setFont(e);if(n&&(this._cleanUp(),this._initUI(),this._toggleAxesDisplay()),this._setFontSize(e,t),this.axesHas("opsz")&&(e.has("autoOPSZ")||n)&&(this._autoOPSZInput.checked=!!(e.has("autoOPSZ")?e.get("autoOPSZ"):this.getEntry("autoOPSZ")).value,this._axesInterfaces.get("opsz").passive=this._autoOPSZInput.checked),e.has("axesLocations")||n||t){const s=e.has("axesLocations")?e.get("axesLocations"):this.getEntry("axesLocations");this._axesLocations=s;for(const r of this.axesTags()){if(r==="opsz")continue;const[o,a]=this._getValueForAxis(r);this._updateValueToAxisInterface(r,o,a)}}this.axesHas("opsz")&&t&&this._updateOPSZAxisInterface(e,n)}update(e){const t=this._localAxesLocations;this._localAxesLocations=Object.create(t);try{this._update(e)}finally{this._updateStyleSelect(t,this.axesHas("opsz")&&this._autoOPSZInput.checked)}}_updateStyleSelect(e,t){let n=!1;Object.getPrototypeOf(this._localAxesLocations)===e?Object.keys(this._localAxesLocations).length>0?(this._localAxesLocations=Object.assign({},e,this._localAxesLocations),n=!0):this._localAxesLocations=e:n=!0,n&&this._styleSelect&&this._styleSelect.setValue(this._localAxesLocations,t)}}function*qN(i,e,t,n){let s=0,r;for(;;){const o=i.now();let a=0,l=!1;if(n!==void 0)n<0?(l=!1,s=1-Math.abs(n)%1):(l=n>=1,s=n%1);else if(r!==void 0){const h=o-r,d=h/e,g=s+d;a=1e3/h,l=g>=1,s=g%1}r=o;let A=s;l&&!t&&(A=1);const u=yield[A,e,t,a];if(Object.hasOwn(u,"perpetual")&&(t=u.perpetual),l&&!t&&!Object.hasOwn(u,"t"))return;n=Object.hasOwn(u,"t")?u.t:void 0,Object.hasOwn(u,"duration")&&(e=u.duration)}}c(qN,"animationGenerator");class Uo extends me{static{c(this,"AnimationTGenerator")}constructor(e){super(e),this._running=!1,this._generator=null,this._lastYield=null,this._genControl={},this._animationFrameRequestId=null}_scheduleIterate(){this._animationFrameRequestId===null&&(this._animationFrameRequestId=this._domTool.window.requestAnimationFrame(this._iterate.bind(this)))}_unscheduleIterate(){this._domTool.window.cancelAnimationFrame(this._animationFrameRequestId),this._animationFrameRequestId=null}destroy(){this._unscheduleIterate()}async _iterate(){if(this._unscheduleIterate(),!this._generator)return;const e=this._generator.next(this._genControl);if(this._genControl={},e.done)this._generator=null,this._lastYield=null,await this._changeState(()=>this.getEntry("playing").value=!1);else{const[t]=this._lastYield=e.value;await this._changeState(()=>this.getEntry("t").value=t)}this._running&&this._scheduleIterate()}_createGenerator(){const e=Object.hasOwn(this._genControl,"duration")?this._genControl.duration:this.getEntry("duration").value*1e3,t=Object.hasOwn(this._genControl,"perpetual")?this._genControl.perpetual:this.getEntry("perpetual").value,n=Object.hasOwn(this._genControl,"t")?this._genControl.t:this.getEntry("t").value;return qN(this._domTool.window.performance,e,t,n%1)}_setRunning(e){if(this._running!==!!e){if(this._running=!!e,!this._running){this._genControl={},this._unscheduleIterate();return}if(this._generator===null)this._generator=this._createGenerator(),this._genControl={};else if(!Object.hasOwn(this._genControl,"t")&&this._lastYield){const[t]=this._lastYield;this._genControl.t=t}this._scheduleIterate()}}update(e){if(e.has("t")){const t=e.get("t").value,n=this._lastYield===null?null:this._lastYield[0];(n===null||t!==n)&&(this._genControl.t=t)}e.has("duration")&&(this._genControl.duration=e.get("duration").value*1e3),e.has("perpetual")&&(this._genControl.perpetual=e.get("perpetual").value),e.has("playing")&&this._setRunning(e.get("playing").value)}}const mu="http://www.w3.org/2000/svg";class OC extends me{static{c(this,"_UITimeCircleBase")}constructor(e){super(e),this._elementCenter={x:100,y:100},this._trackRadius=75,this._rotateStart=.25,[this.element,this._track,this._hand,this._trackBack]=this._initTemplate()}_getTemplate(){const e=c((t,n={},...s)=>this._domTool.createElement(t,{xmlns:mu,...n},s),"h");return e("svg",{class:"ui_time_circle_base",viewBox:"0 0 200 200",xmlns:"http://www.w3.org/2000/svg"},e("circle",{class:"ui_time_control_circle-track_back","pointer-event":"all",cx:"0",cy:"0",fill:"black"}),e("path",{class:"ui_time_control_circle-track",d:"",fill:"#333"}),e("circle",{class:"ui_time_control_circle-hand",cx:"0",cy:"0",r:"13",fill:"white"}))}_initTemplate(){const e=this._getTemplate(),t=e.querySelector(".ui_time_control_circle-track"),n=e.querySelector(".ui_time_control_circle-hand"),s=e.querySelector(".ui_time_control_circle-track_back");return s.setAttribute("r",this._trackRadius),s.setAttribute("cx",this._elementCenter.x),s.setAttribute("cy",this._elementCenter.y),this._insertElement(e),[e,t,n,s]}getXYForT(e,t,n=0,s={x:0,y:0}){const r=(e+n)%1,o=r*2-1;return[Math.cos(o*Math.PI)*t+s.x,Math.sin(o*Math.PI)*t+s.y]}_setT(e){const t=this._trackRadius,n=t-25,s=this._elementCenter,r=this._rotateStart,[o,a]=this.getXYForT(e,n,r,s),[l,A]=this.getXYForT(0,t,r,s),[u,h]=this.getXYForT(e,t,r,s),d=e===1?u-1e-5:u,g=[`M ${l} ${A}`,`A ${t} ${t} 0 ${e<.5?0:1} 1 ${d.toFixed(5)} ${h.toFixed(5)}`,...e===1?[]:[`L ${s.x} ${s.y}`],"Z"];this.element.style.setProperty("--t",e),this._hand.setAttribute("cx",o),this._hand.setAttribute("cy",a),this._track.setAttribute("d",g.join(`
`))}update(){}}function $N(i){const e=new Set;for(const[,t]of i)e.add(t.get("activeKey").value);return Array.from(e).map(t=>parseInt(t,10)).sort((t,n)=>t-n).map(t=>`${t}`)}c($N,"activeKeyMomentsSortedKeys$1");class PC extends OC{static{c(this,"UITimeControlCircle")}constructor(e){super(e),this.element.classList.add("ui_time_control_circle"),this._windowEventListeners=[],this._animationWasPlaying=null,this.element.addEventListener("pointerdown",t=>this._onPointerDownHandler(t))}destroy(){this._removeEventListeners()}_removeEventListeners(){for(const e of this._windowEventListeners)this._domTool.window.removeEventListener(...e);this._windowEventListeners=[]}get dragActive(){return this._windowEventListeners.length!==0}_onPointerUpHandler(e){e.isPrimary&&(this._removeEventListeners(),this._animationWasPlaying&&this._changeState(()=>this.getEntry("playing").value=!0),this._animationWasPlaying=null,this._setT(this.getEntry("t").value))}_onPointerDownHandler(e){if(!e.isPrimary)return;const t=this._getTForEvent(e),n=this.getEntry("t").value-t;this._removeEventListeners(),this._windowEventListeners.push(["pointermove",this._onPointerMoveHandler.bind(this,n)]),this._windowEventListeners.push(["pointerup",this._onPointerUpHandler.bind(this)]);for(const s of this._windowEventListeners)this._domTool.window.addEventListener(...s);this._animationWasPlaying=this.getEntry("playing").value,this._animationWasPlaying&&this._changeState(()=>this.getEntry("playing").value=!1)}_onPointerMoveHandler(e,t){if(!t.isPrimary)return;t.preventDefault();const n=this._getTForEvent(t),s=(n+e+1)%1;this._setT(s),this._changeState(()=>this.getEntry("t").value=s)}_getTForEvent(e){const t=this.element.getBoundingClientRect(),n=t.left+this._elementCenter.x,s=t.top+this._elementCenter.y,r=e.clientX-n,o=e.clientY-s;return this.getTForXY(r,o,this._rotateStart)}getTForXY(e,t,n){return(Math.atan2(t,e)/Math.PI/2+1+n)%1}update(e){this.dragActive!==!0&&e.has("t")&&this._setT(e.get("t").value)}}const eQ=c(i=>class extends i{static{c(this,"TimeCircleKeyMomentMixin")}constructor(...t){super(...t),this._keyMomentMarkers=new Map,this._keyMoments=this._domTool.document.createElementNS(mu,"g"),this._keyMoments.classList.add("ui_time_control_circle-key_moments"),this._domTool.insertBefore(this._keyMoments,this._hand)}_updateKeyMoments(t,n){this._domTool.clear(this._keyMoments),this._keyMomentMarkers.clear();const s=[];for(const[r,o]of n){const a=t===0?0:r/t;for(const[l,[A]]of o.entries()){const u=this._domTool.document.createElementNS(mu,"circle"),h=3,d=Math.floor(a)+l,g=2*h,p=10+d*2*h+d*g+this._trackRadius,f=this._elementCenter,[m,y]=this.getXYForT(a,p,this._rotateStart,f);u.setAttribute("cx",m),u.setAttribute("cy",y),u.setAttribute("r",h),this._keyMomentMarkers.set(A,u),s.push(u)}}this._keyMoments.append(...s)}update(t){if(super.update(t),t.has("animationProperties@")){const n=t.get("animationProperties@"),s=n.tToKeyMoments,r=n.fullDuration;this._updateKeyMoments(r,s)}}},"timeCircleKeyMomentMixin"),HC=c(i=>class extends eQ(i){static{c(this,"TimeCircleAvtiveKeyMomentMixin")}constructor(...t){super(...t),this._activeKeys=new Set}_toggleKeyMomentActive(t){throw new Error(`NOT IMPLEMENTED ${this}._toggleKeyMomentActive for key "${t}".`)}_activateMarkers(){for(const[t,n]of this._keyMomentMarkers.entries())n.addEventListener("click",s=>{s.preventDefault(),this._toggleKeyMomentActive(t)}),this._activeKeys.has(t)&&n.classList.add("active")}_updateKeyMoments(t,n){super._updateKeyMoments(t,n),this._activateMarkers()}},"timeCircleActiveKeyMomentMixin");class tQ extends HC(PC){static{c(this,"UITimeControlKeyMomentSelectCircle")}constructor(e){super(e),this.element.classList.add("ui_time_control_key_moment_select_circle")}_toggleKeyMomentActive(e){this._changeState(()=>{const t=this.getEntry("activeKeyMoments"),n=[];for(const[r,o]of t)o.get("activeKey").value===e&&n.push(r);if(n.length){n.reverse();for(const r of n)t.delete(r);return}const s=t.constructor.Model.createPrimalState(t.dependencies).getDraft();s.get("activeKey").value=e,t.push(s)})}_updateActiveKeyMoments(e){this._activeKeys=new Set($N(e));for(const[t,n]of this._keyMomentMarkers)n.classList[this._activeKeys.has(t)?"add":"remove"]("active")}update(e){if(super.update(e),e.has("activeKeyMoments")){const t=e.get("activeKeyMoments");this._updateActiveKeyMoments(t)}}}class nQ extends OC{static{c(this,"UIActorTimeControlCircle")}constructor(e){super(e),this.element.classList.add("ui_actor_time_control_circle")}update(e){if(super.update(e),e.has("animationProperties@")){const t=e.get("animationProperties@");this._setT(t.t)}}}class iQ extends HC(nQ){static{c(this,"UIActorTimeControlKeyMomentSelectCircle")}constructor(e){super(e),this.element.classList.add("ui_actor_time_control_key_moment_select_circle")}_toggleKeyMomentActive(e){this._changeState(()=>{const t=this.getEntry(D.fromParts(this.widgetBus.getExternalName("keyMoments"),e,"isActive"));t.value=!t.value})}_updateActiveKeyMoments(e){this._activeKeys=new Set;for(const[t,n]of e.entries())n.get("isActive").value&&this._activeKeys.add(t);for(const[t,n]of this._keyMomentMarkers)n.classList[this._activeKeys.has(t)?"add":"remove"]("active")}update(e){if(e.has("keyMoments")){const t=e.get("keyMoments");this._updateActiveKeyMoments(t)}super.update(e)}}var sQ=c((i,e)=>{if(typeof i=="number"){if(e===3)return{mode:"rgb",r:(i>>8&15|i>>4&240)/255,g:(i>>4&15|i&240)/255,b:(i&15|i<<4&240)/255};if(e===4)return{mode:"rgb",r:(i>>12&15|i>>8&240)/255,g:(i>>8&15|i>>4&240)/255,b:(i>>4&15|i&240)/255,alpha:(i&15|i<<4&240)/255};if(e===6)return{mode:"rgb",r:(i>>16&255)/255,g:(i>>8&255)/255,b:(i&255)/255};if(e===8)return{mode:"rgb",r:(i>>24&255)/255,g:(i>>16&255)/255,b:(i>>8&255)/255,alpha:(i&255)/255}}},"parseNumber"),XC=sQ,rQ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},oQ=rQ,aQ=c(i=>XC(oQ[i.toLowerCase()],6),"parseNamed"),lQ=aQ,cQ=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,AQ=c(i=>{let e;return(e=i.match(cQ))?XC(parseInt(e[1],16),e[1].length):void 0},"parseHex"),uQ=AQ,Ni="([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)",Kr=`${Ni}%`,wh=`(?:${Ni}%|${Ni})`,hQ=`(?:${Ni}(deg|grad|rad|turn)|${Ni})`,gr="\\s*,\\s*",dQ=new RegExp(`^rgba?\\(\\s*${Ni}${gr}${Ni}${gr}${Ni}\\s*(?:,\\s*${wh}\\s*)?\\)$`),gQ=new RegExp(`^rgba?\\(\\s*${Kr}${gr}${Kr}${gr}${Kr}\\s*(?:,\\s*${wh}\\s*)?\\)$`),pQ=c(i=>{let e={mode:"rgb"},t;if(t=i.match(dQ))t[1]!==void 0&&(e.r=t[1]/255),t[2]!==void 0&&(e.g=t[2]/255),t[3]!==void 0&&(e.b=t[3]/255);else if(t=i.match(gQ))t[1]!==void 0&&(e.r=t[1]/100),t[2]!==void 0&&(e.g=t[2]/100),t[3]!==void 0&&(e.b=t[3]/100);else return;return t[4]!==void 0?e.alpha=Math.max(0,Math.min(1,t[4]/100)):t[5]!==void 0&&(e.alpha=Math.max(0,Math.min(1,+t[5]))),e},"parseRgbLegacy"),fQ=pQ,mQ=c((i,e)=>i===void 0?void 0:typeof i!="object"?jC(i):i.mode!==void 0?i:e?{...i,mode:e}:void 0,"prepare"),zC=mQ,CQ=c((i="rgb")=>e=>(e=zC(e,i))!==void 0?e.mode===i?e:Ln[e.mode][i]?Ln[e.mode][i](e):i==="rgb"?Ln[e.mode].rgb(e):Ln.rgb[i](Ln[e.mode].rgb(e)):void 0,"converter"),Ko=CQ,Ln={},JC={},cl=[],UC={},IQ=c(i=>i,"identity"),Oe=c(i=>(Ln[i.mode]={...Ln[i.mode],...i.toMode},Object.keys(i.fromMode||{}).forEach(e=>{Ln[e]||(Ln[e]={}),Ln[e][i.mode]=i.fromMode[e]}),i.ranges||(i.ranges={}),i.difference||(i.difference={}),i.channels.forEach(e=>{if(i.ranges[e]===void 0&&(i.ranges[e]=[0,1]),!i.interpolate[e])throw new Error(`Missing interpolator for: ${e}`);typeof i.interpolate[e]=="function"&&(i.interpolate[e]={use:i.interpolate[e]}),i.interpolate[e].fixup||(i.interpolate[e].fixup=IQ)}),JC[i.mode]=i,(i.parse||[]).forEach(e=>{yQ(e,i.mode)}),Ko(i.mode)),"useMode"),Xi=c(i=>JC[i],"getMode"),yQ=c((i,e)=>{if(typeof i=="string"){if(!e)throw new Error("'mode' required when 'parser' is a string");UC[i]=e}else typeof i=="function"&&cl.indexOf(i)<0&&cl.push(i)},"useParser"),Cu=/[^\x00-\x7F]|[a-zA-Z_]/,bQ=/[^\x00-\x7F]|[-\w]/,P={Function:"function",Ident:"ident",Number:"number",Percentage:"percentage",ParenClose:")",None:"none",Hue:"hue",Alpha:"alpha"},Be=0;function ka(i){let e=i[Be],t=i[Be+1];return e==="-"||e==="+"?/\d/.test(t)||t==="."&&/\d/.test(i[Be+2]):e==="."?/\d/.test(t):/\d/.test(e)}c(ka,"is_num");function Iu(i){if(Be>=i.length)return!1;let e=i[Be];if(Cu.test(e))return!0;if(e==="-"){if(i.length-Be<2)return!1;let t=i[Be+1];return!!(t==="-"||Cu.test(t))}return!1}c(Iu,"is_ident");var EQ={deg:1,rad:180/Math.PI,grad:9/10,turn:360};function Tr(i){let e="";if((i[Be]==="-"||i[Be]==="+")&&(e+=i[Be++]),e+=_a(i),i[Be]==="."&&/\d/.test(i[Be+1])&&(e+=i[Be++]+_a(i)),(i[Be]==="e"||i[Be]==="E")&&((i[Be+1]==="-"||i[Be+1]==="+")&&/\d/.test(i[Be+2])?e+=i[Be++]+i[Be++]+_a(i):/\d/.test(i[Be+1])&&(e+=i[Be++]+_a(i))),Iu(i)){let t=Al(i);return t==="deg"||t==="rad"||t==="turn"||t==="grad"?{type:P.Hue,value:e*EQ[t]}:void 0}return i[Be]==="%"?(Be++,{type:P.Percentage,value:+e}):{type:P.Number,value:+e}}c(Tr,"num2");function _a(i){let e="";for(;/\d/.test(i[Be]);)e+=i[Be++];return e}c(_a,"digits");function Al(i){let e="";for(;Be<i.length&&bQ.test(i[Be]);)e+=i[Be++];return e}c(Al,"ident");function BQ(i){let e=Al(i);return i[Be]==="("?(Be++,{type:P.Function,value:e}):e==="none"?{type:P.None,value:void 0}:{type:P.Ident,value:e}}c(BQ,"identlike");function vQ(i=""){let e=i.trim(),t=[],n;for(Be=0;Be<e.length;){if(n=e[Be++],n===`
`||n==="	"||n===" "){for(;Be<e.length&&(e[Be]===`
`||e[Be]==="	"||e[Be]===" ");)Be++;continue}if(n===",")return;if(n===")"){t.push({type:P.ParenClose});continue}if(n==="+"){if(Be--,ka(e)){t.push(Tr(e));continue}return}if(n==="-"){if(Be--,ka(e)){t.push(Tr(e));continue}if(Iu(e)){t.push({type:P.Ident,value:Al(e)});continue}return}if(n==="."){if(Be--,ka(e)){t.push(Tr(e));continue}return}if(n==="/"){for(;Be<e.length&&(e[Be]===`
`||e[Be]==="	"||e[Be]===" ");)Be++;let s;if(ka(e)&&(s=Tr(e),s.type!==P.Hue)){t.push({type:P.Alpha,value:s});continue}if(Iu(e)&&Al(e)==="none"){t.push({type:P.Alpha,value:{type:P.None,value:void 0}});continue}return}if(/\d/.test(n)){Be--,t.push(Tr(e));continue}if(Cu.test(n)){Be--,t.push(BQ(e));continue}return}return t}c(vQ,"tokenize");function GQ(i){i._i=0;let e=i[i._i++];if(!e||e.type!==P.Function||e.value!=="color"||(e=i[i._i++],e.type!==P.Ident))return;const t=UC[e.value];if(!t)return;const n={mode:t},s=KC(i,!1);if(!s)return;const r=Xi(t).channels;for(let o=0,a,l;o<r.length;o++)a=s[o],l=r[o],a.type!==P.None&&(n[l]=a.type===P.Number?a.value:a.value/100,l==="alpha"&&(n[l]=Math.max(0,Math.min(1,n[l]))));return n}c(GQ,"parseColorSyntax");function KC(i,e){const t=[];let n;for(;i._i<i.length;){if(n=i[i._i++],n.type===P.None||n.type===P.Number||n.type===P.Alpha||n.type===P.Percentage||e&&n.type===P.Hue){t.push(n);continue}if(n.type===P.ParenClose){if(i._i<i.length)return;continue}return}if(!(t.length<3||t.length>4)){if(t.length===4){if(t[3].type!==P.Alpha)return;t[3]=t[3].value}return t.length===3&&t.push({type:P.None,value:void 0}),t.every(s=>s.type!==P.Alpha)?t:void 0}}c(KC,"consumeCoords");function RQ(i,e){i._i=0;let t=i[i._i++];if(!t||t.type!==P.Function)return;let n=KC(i,e);if(n)return n.unshift(t.value),n}c(RQ,"parseModernSyntax");var SQ=c(i=>{if(typeof i!="string")return;const e=vQ(i),t=e?RQ(e,!0):void 0;let n,s=0,r=cl.length;for(;s<r;)if((n=cl[s++](i,t))!==void 0)return n;return e?GQ(e):void 0},"parse"),jC=SQ;function NQ(i,e){if(!e||e[0]!=="rgb"&&e[0]!=="rgba")return;const t={mode:"rgb"},[,n,s,r,o]=e;if(!(n.type===P.Hue||s.type===P.Hue||r.type===P.Hue))return n.type!==P.None&&(t.r=n.type===P.Number?n.value/255:n.value/100),s.type!==P.None&&(t.g=s.type===P.Number?s.value/255:s.value/100),r.type!==P.None&&(t.b=r.type===P.Number?r.value/255:r.value/100),o.type!==P.None&&(t.alpha=Math.min(1,Math.max(0,o.type===P.Number?o.value:o.value/100))),t}c(NQ,"parseRgb");var QQ=NQ,wQ=c(i=>i==="transparent"?{mode:"rgb",r:0,g:0,b:0,alpha:0}:void 0,"parseTransparent"),ZQ=wQ,kQ=c((i,e,t)=>i+t*(e-i),"lerp"),_Q=c(i=>{let e=[];for(let t=0;t<i.length-1;t++){let n=i[t],s=i[t+1];n===void 0&&s===void 0?e.push(void 0):n!==void 0&&s!==void 0?e.push([n,s]):e.push(n!==void 0?[n,n]:[s,s])}return e},"get_classes"),YQ=c(i=>e=>{let t=_Q(e);return n=>{let s=n*t.length,r=n>=1?t.length-1:Math.max(Math.floor(s),0),o=t[r];return o===void 0?void 0:i(o[0],o[1],s-r)}},"interpolatorPiecewise"),oe=YQ(kQ),mt=c(i=>{let e=!1,t=i.map(n=>n!==void 0?(e=!0,n):1);return e?t:i},"fixupAlpha"),WQ={mode:"rgb",channels:["r","g","b","alpha"],parse:[QQ,uQ,fQ,lQ,ZQ,"srgb"],serialize:"srgb",interpolate:{r:oe,g:oe,b:oe,alpha:{use:oe,fixup:mt}},gamut:!0,white:{r:1,g:1,b:1},black:{r:0,g:0,b:0}},Gr=WQ,sA=c((i=0)=>Math.pow(Math.abs(i),563/256)*Math.sign(i),"linearize"),DQ=c(i=>{let e=sA(i.r),t=sA(i.g),n=sA(i.b),s={mode:"xyz65",x:.5766690429101305*e+.1855582379065463*t+.1882286462349947*n,y:.297344975250536*e+.6273635662554661*t+.0752914584939979*n,z:.0270313613864123*e+.0706888525358272*t+.9913375368376386*n};return i.alpha!==void 0&&(s.alpha=i.alpha),s},"convertA98ToXyz65"),op=DQ,rA=c(i=>Math.pow(Math.abs(i),256/563)*Math.sign(i),"gamma"),TQ=c(({x:i,y:e,z:t,alpha:n})=>{i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=0);let s={mode:"a98",r:rA(i*2.0415879038107465-e*.5650069742788597-.3447313507783297*t),g:rA(i*-.9692436362808798+e*1.8759675015077206+.0415550574071756*t),b:rA(i*.0134442806320312-e*.1183623922310184+1.0151749943912058*t)};return n!==void 0&&(s.alpha=n),s},"convertXyz65ToA98"),ap=TQ,oA=c((i=0)=>{const e=Math.abs(i);return e<=.04045?i/12.92:(Math.sign(i)||1)*Math.pow((e+.055)/1.055,2.4)},"fn"),FQ=c(({r:i,g:e,b:t,alpha:n})=>{let s={mode:"lrgb",r:oA(i),g:oA(e),b:oA(t)};return n!==void 0&&(s.alpha=n),s},"convertRgbToLrgb"),Rr=FQ,xQ=c(i=>{let{r:e,g:t,b:n,alpha:s}=Rr(i),r={mode:"xyz65",x:.4123907992659593*e+.357584339383878*t+.1804807884018343*n,y:.2126390058715102*e+.715168678767756*t+.0721923153607337*n,z:.0193308187155918*e+.119194779794626*t+.9505321522496607*n};return s!==void 0&&(r.alpha=s),r},"convertRgbToXyz65"),Ys=xQ,aA=c((i=0)=>{const e=Math.abs(i);return e>.0031308?(Math.sign(i)||1)*(1.055*Math.pow(e,1/2.4)-.055):i*12.92},"fn2"),LQ=c(({r:i,g:e,b:t,alpha:n},s="rgb")=>{let r={mode:s,r:aA(i),g:aA(e),b:aA(t)};return n!==void 0&&(r.alpha=n),r},"convertLrgbToRgb"),Sr=LQ,MQ=c(({x:i,y:e,z:t,alpha:n})=>{i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=0);let s=Sr({r:i*3.2409699419045226-e*1.537383177570094-.4986107602930034*t,g:i*-.9692436362808796+e*1.8759675015077204+.0415550574071756*t,b:i*.0556300796969936-e*.2039769588889765+1.0569715142428784*t});return n!==void 0&&(s.alpha=n),s},"convertXyz65ToRgb"),Ws=MQ,VQ={...Gr,mode:"a98",parse:["a98-rgb"],serialize:"a98-rgb",fromMode:{rgb:c(i=>ap(Ys(i)),"rgb"),xyz65:ap},toMode:{rgb:c(i=>Ws(op(i)),"rgb"),xyz65:op}},OQ=VQ,PQ=c(i=>(i=i%360)<0?i+360:i,"normalizeHue"),Yt=PQ,nc=c((i,e)=>i.map((t,n,s)=>{if(t===void 0)return t;let r=Yt(t);return n===0||i[n-1]===void 0?r:e(r-Yt(s[n-1]))}).reduce((t,n)=>!t.length||n===void 0||t[t.length-1]===void 0?(t.push(n),t):(t.push(n+t[t.length-1]),t),[]),"hue2"),Kn=c(i=>nc(i,e=>Math.abs(e)<=180?e:e-360*Math.sign(e)),"fixupHueShorter"),HQ=c(i=>nc(i,e=>Math.abs(e)>=180||e===0?e:e-360*Math.sign(e)),"fixupHueLonger"),XQ=c(i=>nc(i,e=>e>=0?e:e+360),"fixupHueIncreasing"),zQ=c(i=>nc(i,e=>e<=0?e:e-360),"fixupHueDecreasing"),bt=[-.14861,1.78277,-.29227,-.90649,1.97294,0],JQ=Math.PI/180,UQ=180/Math.PI,lp=bt[3]*bt[4],cp=bt[1]*bt[4],Ap=bt[1]*bt[2]-bt[0]*bt[3],KQ=c(({r:i,g:e,b:t,alpha:n})=>{i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=0);let s=(Ap*t+i*lp-e*cp)/(Ap+lp-cp),r=t-s,o=(bt[4]*(e-s)-bt[2]*r)/bt[3],a={mode:"cubehelix",l:s,s:s===0||s===1?void 0:Math.sqrt(r*r+o*o)/(bt[4]*s*(1-s))};return a.s&&(a.h=Math.atan2(o,r)*UQ-120),n!==void 0&&(a.alpha=n),a},"convertRgbToCubehelix"),jQ=KQ,qQ=c(({h:i,s:e,l:t,alpha:n})=>{let s={mode:"rgb"};i=(i===void 0?0:i+120)*JQ,t===void 0&&(t=0);let r=e===void 0?0:e*t*(1-t),o=Math.cos(i),a=Math.sin(i);return s.r=t+r*(bt[0]*o+bt[1]*a),s.g=t+r*(bt[2]*o+bt[3]*a),s.b=t+r*(bt[4]*o+bt[5]*a),n!==void 0&&(s.alpha=n),s},"convertCubehelixToRgb"),$Q=qQ,ic=c((i,e)=>{if(i.h===void 0||e.h===void 0||!i.s||!e.s)return 0;let t=Yt(i.h),n=Yt(e.h),s=Math.sin((n-t+360)/2*Math.PI/180);return 2*Math.sqrt(i.s*e.s)*s},"differenceHueSaturation"),ew=c((i,e)=>{if(i.h===void 0||e.h===void 0)return 0;let t=Yt(i.h),n=Yt(e.h);return Math.abs(n-t)>180?t-(n-360*Math.sign(n-t)):n-t},"differenceHueNaive"),sc=c((i,e)=>{if(i.h===void 0||e.h===void 0||!i.c||!e.c)return 0;let t=Yt(i.h),n=Yt(e.h),s=Math.sin((n-t+360)/2*Math.PI/180);return 2*Math.sqrt(i.c*e.c)*s},"differenceHueChroma"),hi=c(i=>{let e=i.reduce((n,s)=>{if(s!==void 0){let r=s*Math.PI/180;n.sin+=Math.sin(r),n.cos+=Math.cos(r)}return n},{sin:0,cos:0}),t=Math.atan2(e.sin,e.cos)*180/Math.PI;return t<0?360+t:t},"averageAngle"),tw={mode:"cubehelix",channels:["h","s","l","alpha"],parse:["--cubehelix"],serialize:"--cubehelix",ranges:{h:[0,360],s:[0,4.614],l:[0,1]},fromMode:{rgb:jQ},toMode:{rgb:$Q},interpolate:{h:{use:oe,fixup:Kn},s:oe,l:oe,alpha:{use:oe,fixup:mt}},difference:{h:ic},average:{h:hi}},nw=tw,iw=c(({l:i,a:e,b:t,alpha:n},s="lch")=>{e===void 0&&(e=0),t===void 0&&(t=0);let r=Math.sqrt(e*e+t*t),o={mode:s,l:i,c:r};return r&&(o.h=Yt(Math.atan2(t,e)*180/Math.PI)),n!==void 0&&(o.alpha=n),o},"convertLabToLch"),Fi=iw,sw=c(({l:i,c:e,h:t,alpha:n},s="lab")=>{t===void 0&&(t=0);let r={mode:s,l:i,a:e?e*Math.cos(t/180*Math.PI):0,b:e?e*Math.sin(t/180*Math.PI):0};return n!==void 0&&(r.alpha=n),r},"convertLchToLab"),xi=sw,qC=Math.pow(29,3)/Math.pow(3,3),$C=Math.pow(6,3)/Math.pow(29,3),gt={X:.3457/.3585,Y:1,Z:(1-.3457-.3585)/.3585},$s={X:.3127/.329,Y:1,Z:(1-.3127-.329)/.329},lA=c(i=>Math.pow(i,3)>$C?Math.pow(i,3):(116*i-16)/qC,"fn3"),rw=c(({l:i,a:e,b:t,alpha:n})=>{i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=0);let s=(i+16)/116,r=e/500+s,o=s-t/200,a={mode:"xyz65",x:lA(r)*$s.X,y:lA(s)*$s.Y,z:lA(o)*$s.Z};return n!==void 0&&(a.alpha=n),a},"convertLab65ToXyz65"),eI=rw,ow=c(i=>Ws(eI(i)),"convertLab65ToRgb"),rc=ow,cA=c(i=>i>$C?Math.cbrt(i):(qC*i+16)/116,"f"),aw=c(({x:i,y:e,z:t,alpha:n})=>{i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=0);let s=cA(i/$s.X),r=cA(e/$s.Y),o=cA(t/$s.Z),a={mode:"lab65",l:116*r-16,a:500*(s-r),b:200*(r-o)};return n!==void 0&&(a.alpha=n),a},"convertXyz65ToLab65"),tI=aw,lw=c(i=>{let e=tI(Ys(i));return i.r===i.b&&i.b===i.g&&(e.a=e.b=0),e},"convertRgbToLab65"),oc=lw,ul=1,nI=1,co=26/180*Math.PI,hl=Math.cos(co),dl=Math.sin(co),iI=100/Math.log(139/100),cw=c(({l:i,c:e,h:t,alpha:n})=>{i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=0);let s={mode:"lab65",l:(Math.exp(i*ul/iI)-1)/.0039},r=(Math.exp(.0435*e*nI*ul)-1)/.075,o=r*Math.cos(t/180*Math.PI-co),a=r*Math.sin(t/180*Math.PI-co);return s.a=o*hl-a/.83*dl,s.b=o*dl+a/.83*hl,n!==void 0&&(s.alpha=n),s},"convertDlchToLab65"),yu=cw,Aw=c(({l:i,a:e,b:t,alpha:n})=>{i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=0);let s=e*hl+t*dl,r=.83*(t*hl-e*dl),o=Math.sqrt(s*s+r*r),a={mode:"dlch",l:iI/ul*Math.log(1+.0039*i),c:Math.log(1+.075*o)/(.0435*nI*ul)};return a.c&&(a.h=Yt((Math.atan2(r,s)+co)/Math.PI*180)),n!==void 0&&(a.alpha=n),a},"convertLab65ToDlch"),bu=Aw,up=c(i=>yu(Fi(i,"dlch")),"convertDlabToLab65"),hp=c(i=>xi(bu(i),"dlab"),"convertLab65ToDlab"),uw={mode:"dlab",parse:["--din99o-lab"],serialize:"--din99o-lab",toMode:{lab65:up,rgb:c(i=>rc(up(i)),"rgb")},fromMode:{lab65:hp,rgb:c(i=>hp(oc(i)),"rgb")},channels:["l","a","b","alpha"],ranges:{l:[0,100],a:[-40.09,45.501],b:[-40.469,44.344]},interpolate:{l:oe,a:oe,b:oe,alpha:{use:oe,fixup:mt}}},hw=uw,dw={mode:"dlch",parse:["--din99o-lch"],serialize:"--din99o-lch",toMode:{lab65:yu,dlab:c(i=>xi(i,"dlab"),"dlab"),rgb:c(i=>rc(yu(i)),"rgb")},fromMode:{lab65:bu,dlab:c(i=>Fi(i,"dlch"),"dlab"),rgb:c(i=>bu(oc(i)),"rgb")},channels:["l","c","h","alpha"],ranges:{l:[0,100],c:[0,51.484],h:[0,360]},interpolate:{l:oe,c:oe,h:{use:oe,fixup:Kn},alpha:{use:oe,fixup:mt}},difference:{h:sc},average:{h:hi}},gw=dw;function pw({h:i,s:e,i:t,alpha:n}){i=Yt(i!==void 0?i:0),e===void 0&&(e=0),t===void 0&&(t=0);let s=Math.abs(i/60%2-1),r;switch(Math.floor(i/60)){case 0:r={r:t*(1+e*(3/(2-s)-1)),g:t*(1+e*(3*(1-s)/(2-s)-1)),b:t*(1-e)};break;case 1:r={r:t*(1+e*(3*(1-s)/(2-s)-1)),g:t*(1+e*(3/(2-s)-1)),b:t*(1-e)};break;case 2:r={r:t*(1-e),g:t*(1+e*(3/(2-s)-1)),b:t*(1+e*(3*(1-s)/(2-s)-1))};break;case 3:r={r:t*(1-e),g:t*(1+e*(3*(1-s)/(2-s)-1)),b:t*(1+e*(3/(2-s)-1))};break;case 4:r={r:t*(1+e*(3*(1-s)/(2-s)-1)),g:t*(1-e),b:t*(1+e*(3/(2-s)-1))};break;case 5:r={r:t*(1+e*(3/(2-s)-1)),g:t*(1-e),b:t*(1+e*(3*(1-s)/(2-s)-1))};break;default:r={r:t*(1-e),g:t*(1-e),b:t*(1-e)}}return r.mode="rgb",n!==void 0&&(r.alpha=n),r}c(pw,"convertHsiToRgb");function fw({r:i,g:e,b:t,alpha:n}){i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=0);let s=Math.max(i,e,t),r=Math.min(i,e,t),o={mode:"hsi",s:i+e+t===0?0:1-3*r/(i+e+t),i:(i+e+t)/3};return s-r!==0&&(o.h=(s===i?(e-t)/(s-r)+(e<t)*6:s===e?(t-i)/(s-r)+2:(i-e)/(s-r)+4)*60),n!==void 0&&(o.alpha=n),o}c(fw,"convertRgbToHsi");var mw={mode:"hsi",toMode:{rgb:pw},parse:["--hsi"],serialize:"--hsi",fromMode:{rgb:fw},channels:["h","s","i","alpha"],ranges:{h:[0,360]},gamut:"rgb",interpolate:{h:{use:oe,fixup:Kn},s:oe,i:oe,alpha:{use:oe,fixup:mt}},difference:{h:ic},average:{h:hi}},Cw=mw;function Iw({h:i,s:e,l:t,alpha:n}){i=Yt(i!==void 0?i:0),e===void 0&&(e=0),t===void 0&&(t=0);let s=t+e*(t<.5?t:1-t),r=s-(s-t)*2*Math.abs(i/60%2-1),o;switch(Math.floor(i/60)){case 0:o={r:s,g:r,b:2*t-s};break;case 1:o={r,g:s,b:2*t-s};break;case 2:o={r:2*t-s,g:s,b:r};break;case 3:o={r:2*t-s,g:r,b:s};break;case 4:o={r,g:2*t-s,b:s};break;case 5:o={r:s,g:2*t-s,b:r};break;default:o={r:2*t-s,g:2*t-s,b:2*t-s}}return o.mode="rgb",n!==void 0&&(o.alpha=n),o}c(Iw,"convertHslToRgb");function yw({r:i,g:e,b:t,alpha:n}){i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=0);let s=Math.max(i,e,t),r=Math.min(i,e,t),o={mode:"hsl",s:s===r?0:(s-r)/(1-Math.abs(s+r-1)),l:.5*(s+r)};return s-r!==0&&(o.h=(s===i?(e-t)/(s-r)+(e<t)*6:s===e?(t-i)/(s-r)+2:(i-e)/(s-r)+4)*60),n!==void 0&&(o.alpha=n),o}c(yw,"convertRgbToHsl");var bw=c((i,e)=>{switch(e){case"deg":return+i;case"rad":return i/Math.PI*180;case"grad":return i/10*9;case"turn":return i*360}},"hueToDeg"),Ew=bw,Bw=new RegExp(`^hsla?\\(\\s*${hQ}${gr}${Kr}${gr}${Kr}\\s*(?:,\\s*${wh}\\s*)?\\)$`),vw=c(i=>{let e=i.match(Bw);if(!e)return;let t={mode:"hsl"};return e[3]!==void 0?t.h=+e[3]:e[1]!==void 0&&e[2]!==void 0&&(t.h=Ew(e[1],e[2])),e[4]!==void 0&&(t.s=Math.min(Math.max(0,e[4]/100),1)),e[5]!==void 0&&(t.l=Math.min(Math.max(0,e[5]/100),1)),e[6]!==void 0?t.alpha=Math.max(0,Math.min(1,e[6]/100)):e[7]!==void 0&&(t.alpha=Math.max(0,Math.min(1,+e[7]))),t},"parseHslLegacy"),Gw=vw;function Rw(i,e){if(!e||e[0]!=="hsl"&&e[0]!=="hsla")return;const t={mode:"hsl"},[,n,s,r,o]=e;if(n.type!==P.None){if(n.type===P.Percentage)return;t.h=n.value}if(s.type!==P.None){if(s.type===P.Hue)return;t.s=s.value/100}if(r.type!==P.None){if(r.type===P.Hue)return;t.l=r.value/100}return o.type!==P.None&&(t.alpha=Math.min(1,Math.max(0,o.type===P.Number?o.value:o.value/100))),t}c(Rw,"parseHsl");var Sw=Rw,Nw={mode:"hsl",toMode:{rgb:Iw},fromMode:{rgb:yw},channels:["h","s","l","alpha"],ranges:{h:[0,360]},gamut:"rgb",parse:[Sw,Gw],serialize:c(i=>`hsl(${i.h!==void 0?i.h:"none"} ${i.s!==void 0?i.s*100+"%":"none"} ${i.l!==void 0?i.l*100+"%":"none"}${i.alpha<1?` / ${i.alpha}`:""})`,"serialize"),interpolate:{h:{use:oe,fixup:Kn},s:oe,l:oe,alpha:{use:oe,fixup:mt}},difference:{h:ic},average:{h:hi}},sI=Nw;function rI({h:i,s:e,v:t,alpha:n}){i=Yt(i!==void 0?i:0),e===void 0&&(e=0),t===void 0&&(t=0);let s=Math.abs(i/60%2-1),r;switch(Math.floor(i/60)){case 0:r={r:t,g:t*(1-e*s),b:t*(1-e)};break;case 1:r={r:t*(1-e*s),g:t,b:t*(1-e)};break;case 2:r={r:t*(1-e),g:t,b:t*(1-e*s)};break;case 3:r={r:t*(1-e),g:t*(1-e*s),b:t};break;case 4:r={r:t*(1-e*s),g:t*(1-e),b:t};break;case 5:r={r:t,g:t*(1-e),b:t*(1-e*s)};break;default:r={r:t*(1-e),g:t*(1-e),b:t*(1-e)}}return r.mode="rgb",n!==void 0&&(r.alpha=n),r}c(rI,"convertHsvToRgb");function oI({r:i,g:e,b:t,alpha:n}){i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=0);let s=Math.max(i,e,t),r=Math.min(i,e,t),o={mode:"hsv",s:s===0?0:1-r/s,v:s};return s-r!==0&&(o.h=(s===i?(e-t)/(s-r)+(e<t)*6:s===e?(t-i)/(s-r)+2:(i-e)/(s-r)+4)*60),n!==void 0&&(o.alpha=n),o}c(oI,"convertRgbToHsv");var Qw={mode:"hsv",toMode:{rgb:rI},parse:["--hsv"],serialize:"--hsv",fromMode:{rgb:oI},channels:["h","s","v","alpha"],ranges:{h:[0,360]},gamut:"rgb",interpolate:{h:{use:oe,fixup:Kn},s:oe,v:oe,alpha:{use:oe,fixup:mt}},difference:{h:ic},average:{h:hi}},aI=Qw;function ww({h:i,w:e,b:t,alpha:n}){if(e===void 0&&(e=0),t===void 0&&(t=0),e+t>1){let s=e+t;e/=s,t/=s}return rI({h:i,s:t===1?1:1-e/(1-t),v:1-t,alpha:n})}c(ww,"convertHwbToRgb");function Zw(i){let e=oI(i);if(e===void 0)return;let t=e.s!==void 0?e.s:0,n=e.v!==void 0?e.v:0,s={mode:"hwb",w:(1-t)*n,b:1-n};return e.h!==void 0&&(s.h=e.h),e.alpha!==void 0&&(s.alpha=e.alpha),s}c(Zw,"convertRgbToHwb");function kw(i,e){if(!e||e[0]!=="hwb")return;const t={mode:"hwb"},[,n,s,r,o]=e;if(n.type!==P.None){if(n.type===P.Percentage)return;t.h=n.value}if(s.type!==P.None){if(s.type===P.Hue)return;t.w=s.value/100}if(r.type!==P.None){if(r.type===P.Hue)return;t.b=r.value/100}return o.type!==P.None&&(t.alpha=Math.min(1,Math.max(0,o.type===P.Number?o.value:o.value/100))),t}c(kw,"ParseHwb");var _w=kw,Yw={mode:"hwb",toMode:{rgb:ww},fromMode:{rgb:Zw},channels:["h","w","b","alpha"],ranges:{h:[0,360]},gamut:"rgb",parse:[_w],serialize:c(i=>`hwb(${i.h!==void 0?i.h:"none"} ${i.w!==void 0?i.w*100+"%":"none"} ${i.b!==void 0?i.b*100+"%":"none"}${i.alpha<1?` / ${i.alpha}`:""})`,"serialize"),interpolate:{h:{use:oe,fixup:Kn},w:oe,b:oe,alpha:{use:oe,fixup:mt}},difference:{h:ew},average:{h:hi}},Ww=Yw,lI=203,ac=.1593017578125,cI=78.84375,lc=.8359375,cc=18.8515625,Ac=18.6875;function AA(i){if(i<0)return 0;const e=Math.pow(i,1/cI);return 1e4*Math.pow(Math.max(0,e-lc)/(cc-Ac*e),1/ac)}c(AA,"transferPqDecode");function uA(i){if(i<0)return 0;const e=Math.pow(i/1e4,ac);return Math.pow((lc+cc*e)/(1+Ac*e),cI)}c(uA,"transferPqEncode");var hA=c(i=>Math.max(i/lI,0),"toRel"),Dw=c(({i,t:e,p:t,alpha:n})=>{i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=0);const s=AA(i+.008609037037932761*e+.11102962500302593*t),r=AA(i-.00860903703793275*e-.11102962500302599*t),o=AA(i+.5600313357106791*e-.32062717498731885*t),a={mode:"xyz65",x:hA(2.070152218389422*s-1.3263473389671556*r+.2066510476294051*o),y:hA(.3647385209748074*s+.680566024947227*r-.0453045459220346*o),z:hA(-.049747207535812*s-.0492609666966138*r+1.1880659249923042*o)};return n!==void 0&&(a.alpha=n),a},"convertItpToXyz65"),dp=Dw,dA=c((i=0)=>Math.max(i*lI,0),"toAbs"),Tw=c(({x:i,y:e,z:t,alpha:n})=>{const s=dA(i),r=dA(e),o=dA(t),a=uA(.3592832590121217*s+.6976051147779502*r-.0358915932320289*o),l=uA(-.1920808463704995*s+1.1004767970374323*r+.0753748658519118*o),A=uA(.0070797844607477*s+.0748396662186366*r+.8433265453898765*o),u=.5*a+.5*l,h=1.61376953125*a-3.323486328125*l+1.709716796875*A,d=4.378173828125*a-4.24560546875*l-.132568359375*A,g={mode:"itp",i:u,t:h,p:d};return n!==void 0&&(g.alpha=n),g},"convertXyz65ToItp"),gp=Tw,Fw={mode:"itp",channels:["i","t","p","alpha"],parse:["--ictcp"],serialize:"--ictcp",toMode:{xyz65:dp,rgb:c(i=>Ws(dp(i)),"rgb")},fromMode:{xyz65:gp,rgb:c(i=>gp(Ys(i)),"rgb")},ranges:{i:[0,.581],t:[-.369,.272],p:[-.164,.331]},interpolate:{i:oe,t:oe,p:oe,alpha:{use:oe,fixup:mt}}},xw=Fw,Lw=134.03437499999998,Mw=16295499532821565e-27,gA=c(i=>{if(i<0)return 0;let e=Math.pow(i/1e4,ac);return Math.pow((lc+cc*e)/(1+Ac*e),Lw)},"jabPqEncode"),pA=c((i=0)=>Math.max(i*203,0),"abs"),Vw=c(({x:i,y:e,z:t,alpha:n})=>{i=pA(i),e=pA(e),t=pA(t);let s=1.15*i-.15*t,r=.66*e+.34*i,o=gA(.41478972*s+.579999*r+.014648*t),a=gA(-.20151*s+1.120649*r+.0531008*t),l=gA(-.0166008*s+.2648*r+.6684799*t),A=(o+a)/2,u={mode:"jab",j:.44*A/(1-.56*A)-Mw,a:3.524*o-4.066708*a+.542708*l,b:.199076*o+1.096799*a-1.295875*l};return n!==void 0&&(u.alpha=n),u},"convertXyz65ToJab"),AI=Vw,Ow=134.03437499999998,pp=16295499532821565e-27,fA=c(i=>{if(i<0)return 0;let e=Math.pow(i,1/Ow);return 1e4*Math.pow((lc-e)/(Ac*e-cc),1/ac)},"jabPqDecode"),mA=c(i=>i/203,"rel"),Pw=c(({j:i,a:e,b:t,alpha:n})=>{i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=0);let s=(i+pp)/(.44+.56*(i+pp)),r=fA(s+.13860504*e+.058047316*t),o=fA(s-.13860504*e-.058047316*t),a=fA(s-.096019242*e-.8118919*t),l={mode:"xyz65",x:mA(1.661373024652174*r-.914523081304348*o+.23136208173913045*a),y:mA(-.3250758611844533*r+1.571847026732543*o-.21825383453227928*a),z:mA(-.090982811*r-.31272829*o+1.5227666*a)};return n!==void 0&&(l.alpha=n),l},"convertJabToXyz65"),uI=Pw,Hw=c(i=>{let e=AI(Ys(i));return i.r===i.b&&i.b===i.g&&(e.a=e.b=0),e},"convertRgbToJab"),hI=Hw,Xw=c(i=>Ws(uI(i)),"convertJabToRgb"),dI=Xw,zw={mode:"jab",channels:["j","a","b","alpha"],parse:["--jzazbz"],serialize:"--jzazbz",fromMode:{rgb:hI,xyz65:AI},toMode:{rgb:dI,xyz65:uI},ranges:{j:[0,.222],a:[-.109,.129],b:[-.185,.134]},interpolate:{j:oe,a:oe,b:oe,alpha:{use:oe,fixup:mt}}},Jw=zw,Uw=c(({j:i,a:e,b:t,alpha:n})=>{e===void 0&&(e=0),t===void 0&&(t=0);let s=Math.sqrt(e*e+t*t),r={mode:"jch",j:i,c:s};return s&&(r.h=Yt(Math.atan2(t,e)*180/Math.PI)),n!==void 0&&(r.alpha=n),r},"convertJabToJch"),fp=Uw,Kw=c(({j:i,c:e,h:t,alpha:n})=>{t===void 0&&(t=0);let s={mode:"jab",j:i,a:e?e*Math.cos(t/180*Math.PI):0,b:e?e*Math.sin(t/180*Math.PI):0};return n!==void 0&&(s.alpha=n),s},"convertJchToJab"),mp=Kw,jw={mode:"jch",parse:["--jzczhz"],serialize:"--jzczhz",toMode:{jab:mp,rgb:c(i=>dI(mp(i)),"rgb")},fromMode:{rgb:c(i=>fp(hI(i)),"rgb"),jab:fp},channels:["j","c","h","alpha"],ranges:{j:[0,.221],c:[0,.19],h:[0,360]},interpolate:{h:{use:oe,fixup:Kn},c:oe,j:oe,alpha:{use:oe,fixup:mt}},difference:{h:sc},average:{h:hi}},qw=jw,uc=Math.pow(29,3)/Math.pow(3,3),Zh=Math.pow(6,3)/Math.pow(29,3),CA=c(i=>Math.pow(i,3)>Zh?Math.pow(i,3):(116*i-16)/uc,"fn4"),$w=c(({l:i,a:e,b:t,alpha:n})=>{i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=0);let s=(i+16)/116,r=e/500+s,o=s-t/200,a={mode:"xyz50",x:CA(r)*gt.X,y:CA(s)*gt.Y,z:CA(o)*gt.Z};return n!==void 0&&(a.alpha=n),a},"convertLabToXyz50"),kh=$w,eZ=c(({x:i,y:e,z:t,alpha:n})=>{i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=0);let s=Sr({r:i*3.1341359569958707-e*1.6173863321612538-.4906619460083532*t,g:i*-.978795502912089+e*1.916254567259524+.03344273116131949*t,b:i*.07195537988411677-e*.2289768264158322+1.405386058324125*t});return n!==void 0&&(s.alpha=n),s},"convertXyz50ToRgb"),jo=eZ,tZ=c(i=>jo(kh(i)),"convertLabToRgb"),gI=tZ,nZ=c(i=>{let{r:e,g:t,b:n,alpha:s}=Rr(i),r={mode:"xyz50",x:.436065742824811*e+.3851514688337912*t+.14307845442264197*n,y:.22249319175623702*e+.7168870538238823*t+.06061979053616537*n,z:.013923904500943465*e+.09708128566574634*t+.7140993584005155*n};return s!==void 0&&(r.alpha=s),r},"convertRgbToXyz50"),qo=nZ,IA=c(i=>i>Zh?Math.cbrt(i):(uc*i+16)/116,"f2"),iZ=c(({x:i,y:e,z:t,alpha:n})=>{i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=0);let s=IA(i/gt.X),r=IA(e/gt.Y),o=IA(t/gt.Z),a={mode:"lab",l:116*r-16,a:500*(s-r),b:200*(r-o)};return n!==void 0&&(a.alpha=n),a},"convertXyz50ToLab"),_h=iZ,sZ=c(i=>{let e=_h(qo(i));return i.r===i.b&&i.b===i.g&&(e.a=e.b=0),e},"convertRgbToLab"),pI=sZ;function rZ(i,e){if(!e||e[0]!=="lab")return;const t={mode:"lab"},[,n,s,r,o]=e;if(!(n.type===P.Hue||s.type===P.Hue||r.type===P.Hue))return n.type!==P.None&&(t.l=Math.min(Math.max(0,n.value),100)),s.type!==P.None&&(t.a=s.type===P.Number?s.value:s.value*125/100),r.type!==P.None&&(t.b=r.type===P.Number?r.value:r.value*125/100),o.type!==P.None&&(t.alpha=Math.min(1,Math.max(0,o.type===P.Number?o.value:o.value/100))),t}c(rZ,"parseLab");var oZ=rZ,aZ={mode:"lab",toMode:{xyz50:kh,rgb:gI},fromMode:{xyz50:_h,rgb:pI},channels:["l","a","b","alpha"],ranges:{l:[0,100],a:[-100,100],b:[-100,100]},parse:[oZ],serialize:c(i=>`lab(${i.l!==void 0?i.l:"none"} ${i.a!==void 0?i.a:"none"} ${i.b!==void 0?i.b:"none"}${i.alpha<1?` / ${i.alpha}`:""})`,"serialize"),interpolate:{l:oe,a:oe,b:oe,alpha:{use:oe,fixup:mt}}},Yh=aZ,lZ={...Yh,mode:"lab65",parse:["--lab-d65"],serialize:"--lab-d65",toMode:{xyz65:eI,rgb:rc},fromMode:{xyz65:tI,rgb:oc},ranges:{l:[0,100],a:[-86.182,98.234],b:[-107.86,94.477]}},cZ=lZ;function AZ(i,e){if(!e||e[0]!=="lch")return;const t={mode:"lch"},[,n,s,r,o]=e;if(n.type!==P.None){if(n.type===P.Hue)return;t.l=Math.min(Math.max(0,n.value),100)}if(s.type!==P.None&&(t.c=Math.max(0,s.type===P.Number?s.value:s.value*150/100)),r.type!==P.None){if(r.type===P.Percentage)return;t.h=r.value}return o.type!==P.None&&(t.alpha=Math.min(1,Math.max(0,o.type===P.Number?o.value:o.value/100))),t}c(AZ,"parseLch");var uZ=AZ,hZ={mode:"lch",toMode:{lab:xi,rgb:c(i=>gI(xi(i)),"rgb")},fromMode:{rgb:c(i=>Fi(pI(i)),"rgb"),lab:Fi},channels:["l","c","h","alpha"],ranges:{l:[0,100],c:[0,150],h:[0,360]},parse:[uZ],serialize:c(i=>`lch(${i.l!==void 0?i.l:"none"} ${i.c!==void 0?i.c:"none"} ${i.h!==void 0?i.h:"none"}${i.alpha<1?` / ${i.alpha}`:""})`,"serialize"),interpolate:{h:{use:oe,fixup:Kn},c:oe,l:oe,alpha:{use:oe,fixup:mt}},difference:{h:sc},average:{h:hi}},Wh=hZ,dZ={...Wh,mode:"lch65",parse:["--lch-d65"],serialize:"--lch-d65",toMode:{lab65:c(i=>xi(i,"lab65"),"lab65"),rgb:c(i=>rc(xi(i,"lab65")),"rgb")},fromMode:{rgb:c(i=>Fi(oc(i),"lch65"),"rgb"),lab65:c(i=>Fi(i,"lch65"),"lab65")},ranges:{l:[0,100],c:[0,133.807],h:[0,360]}},gZ=dZ,pZ=c(({l:i,u:e,v:t,alpha:n})=>{e===void 0&&(e=0),t===void 0&&(t=0);let s=Math.sqrt(e*e+t*t),r={mode:"lchuv",l:i,c:s};return s&&(r.h=Yt(Math.atan2(t,e)*180/Math.PI)),n!==void 0&&(r.alpha=n),r},"convertLuvToLchuv"),fI=pZ,fZ=c(({l:i,c:e,h:t,alpha:n})=>{t===void 0&&(t=0);let s={mode:"luv",l:i,u:e?e*Math.cos(t/180*Math.PI):0,v:e?e*Math.sin(t/180*Math.PI):0};return n!==void 0&&(s.alpha=n),s},"convertLchuvToLuv"),mI=fZ,CI=c((i,e,t)=>4*i/(i+15*e+3*t),"u_fn"),II=c((i,e,t)=>9*e/(i+15*e+3*t),"v_fn"),mZ=CI(gt.X,gt.Y,gt.Z),CZ=II(gt.X,gt.Y,gt.Z),IZ=c(i=>i<=Zh?uc*i:116*Math.cbrt(i)-16,"l_fn"),yZ=c(({x:i,y:e,z:t,alpha:n})=>{i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=0);let s=IZ(e/gt.Y),r=CI(i,e,t),o=II(i,e,t);!isFinite(r)||!isFinite(o)?s=r=o=0:(r=13*s*(r-mZ),o=13*s*(o-CZ));let a={mode:"luv",l:s,u:r,v:o};return n!==void 0&&(a.alpha=n),a},"convertXyz50ToLuv"),Eu=yZ,bZ=c((i,e,t)=>4*i/(i+15*e+3*t),"u_fn2"),EZ=c((i,e,t)=>9*e/(i+15*e+3*t),"v_fn2"),BZ=bZ(gt.X,gt.Y,gt.Z),vZ=EZ(gt.X,gt.Y,gt.Z),GZ=c(({l:i,u:e,v:t,alpha:n})=>{if(i===void 0&&(i=0),i===0)return{mode:"xyz50",x:0,y:0,z:0};e===void 0&&(e=0),t===void 0&&(t=0);let s=e/(13*i)+BZ,r=t/(13*i)+vZ,o=gt.Y*(i<=8?i/uc:Math.pow((i+16)/116,3)),a=o*(9*s)/(4*r),l=o*(12-3*s-20*r)/(4*r),A={mode:"xyz50",x:a,y:o,z:l};return n!==void 0&&(A.alpha=n),A},"convertLuvToXyz50"),Bu=GZ,RZ=c(i=>fI(Eu(qo(i))),"convertRgbToLchuv"),SZ=c(i=>jo(Bu(mI(i))),"convertLchuvToRgb"),NZ={mode:"lchuv",toMode:{luv:mI,rgb:SZ},fromMode:{rgb:RZ,luv:fI},channels:["l","c","h","alpha"],parse:["--lchuv"],serialize:"--lchuv",ranges:{l:[0,100],c:[0,176.956],h:[0,360]},interpolate:{h:{use:oe,fixup:Kn},c:oe,l:oe,alpha:{use:oe,fixup:mt}},difference:{h:sc},average:{h:hi}},QZ=NZ,wZ={...Gr,mode:"lrgb",toMode:{rgb:Sr},fromMode:{rgb:Rr},parse:["srgb-linear"],serialize:"srgb-linear"},ZZ=wZ,kZ={mode:"luv",toMode:{xyz50:Bu,rgb:c(i=>jo(Bu(i)),"rgb")},fromMode:{xyz50:Eu,rgb:c(i=>Eu(qo(i)),"rgb")},channels:["l","u","v","alpha"],parse:["--luv"],serialize:"--luv",ranges:{l:[0,100],u:[-84.936,175.042],v:[-125.882,87.243]},interpolate:{l:oe,u:oe,v:oe,alpha:{use:oe,fixup:mt}}},_Z=kZ,YZ=c(({r:i,g:e,b:t,alpha:n})=>{i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=0);let s=Math.cbrt(.41222147079999993*i+.5363325363*e+.0514459929*t),r=Math.cbrt(.2119034981999999*i+.6806995450999999*e+.1073969566*t),o=Math.cbrt(.08830246189999998*i+.2817188376*e+.6299787005000002*t),a={mode:"oklab",l:.2104542553*s+.793617785*r-.0040720468*o,a:1.9779984951*s-2.428592205*r+.4505937099*o,b:.0259040371*s+.7827717662*r-.808675766*o};return n!==void 0&&(a.alpha=n),a},"convertLrgbToOklab"),yI=YZ,WZ=c(i=>{let e=yI(Rr(i));return i.r===i.b&&i.b===i.g&&(e.a=e.b=0),e},"convertRgbToOklab"),hc=WZ,DZ=c(({l:i,a:e,b:t,alpha:n})=>{i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=0);let s=Math.pow(i*.9999999984505198+.39633779217376786*e+.2158037580607588*t,3),r=Math.pow(i*1.0000000088817609-.10556134232365635*e-.06385417477170591*t,3),o=Math.pow(i*1.0000000546724108-.08948418209496575*e-1.2914855378640917*t,3),a={mode:"lrgb",r:4.076741661347994*s-3.307711590408193*r+.230969928729428*o,g:-1.2684380040921763*s+2.6097574006633715*r-.3413193963102197*o,b:-.004196086541837188*s-.7034186144594493*r+1.7076147009309444*o};return n!==void 0&&(a.alpha=n),a},"convertOklabToLrgb"),$o=DZ,TZ=c(i=>Sr($o(i)),"convertOklabToRgb"),dc=TZ;function vu(i){const n=1.170873786407767;return .5*(n*i-.206+Math.sqrt((n*i-.206)*(n*i-.206)+4*.03*n*i))}c(vu,"toe");function gl(i){return(i*i+.206*i)/(1.170873786407767*(i+.03))}c(gl,"toe_inv");function FZ(i,e){let t,n,s,r,o,a,l,A;-1.88170328*i-.80936493*e>1?(t=1.19086277,n=1.76576728,s=.59662641,r=.75515197,o=.56771245,a=4.0767416621,l=-3.3077115913,A=.2309699292):1.81444104*i-1.19445276*e>1?(t=.73956515,n=-.45954404,s=.08285427,r=.1254107,o=.14503204,a=-1.2684380046,l=2.6097574011,A=-.3413193965):(t=1.35733652,n=-.00915799,s=-1.1513021,r=-.50559606,o=.00692167,a=-.0041960863,l=-.7034186147,A=1.707614701);let u=t+n*i+s*e+r*i*i+o*i*e,h=.3963377774*i+.2158037573*e,d=-.1055613458*i-.0638541728*e,g=-.0894841775*i-1.291485548*e;{let p=1+u*h,f=1+u*d,m=1+u*g,y=p*p*p,v=f*f*f,G=m*m*m,R=3*h*p*p,Q=3*d*f*f,S=3*g*m*m,M=6*h*h*p,V=6*d*d*f,K=6*g*g*m,j=a*y+l*v+A*G,Ce=a*R+l*Q+A*S,Ge=a*M+l*V+A*K;u=u-j*Ce/(Ce*Ce-.5*j*Ge)}return u}c(FZ,"compute_max_saturation");function Dh(i,e){let t=FZ(i,e),n=$o({l:1,a:t*i,b:t*e}),s=Math.cbrt(1/Math.max(n.r,n.g,n.b)),r=s*t;return[s,r]}c(Dh,"find_cusp");function xZ(i,e,t,n,s,r=null){r||(r=Dh(i,e));let o;if((t-s)*r[1]-(r[0]-s)*n<=0)o=r[1]*s/(n*r[0]+r[1]*(s-t));else{o=r[1]*(s-1)/(n*(r[0]-1)+r[1]*(s-t));{let a=t-s,l=n,A=.3963377774*i+.2158037573*e,u=-.1055613458*i-.0638541728*e,h=-.0894841775*i-1.291485548*e,d=a+l*A,g=a+l*u,p=a+l*h;{let f=s*(1-o)+o*t,m=o*n,y=f+m*A,v=f+m*u,G=f+m*h,R=y*y*y,Q=v*v*v,S=G*G*G,M=3*d*y*y,V=3*g*v*v,K=3*p*G*G,j=6*d*d*y,Ce=6*g*g*v,Ge=6*p*p*G,Ie=4.0767416621*R-3.3077115913*Q+.2309699292*S-1,H=4.0767416621*M-3.3077115913*V+.2309699292*K,Ae=4.0767416621*j-3.3077115913*Ce+.2309699292*Ge,ne=H/(H*H-.5*Ie*Ae),De=-Ie*ne,O=-1.2684380046*R+2.6097574011*Q-.3413193965*S-1,L=-1.2684380046*M+2.6097574011*V-.3413193965*K,T=-1.2684380046*j+2.6097574011*Ce-.3413193965*Ge,he=L/(L*L-.5*O*T),W=-O*he,z=-.0041960863*R-.7034186147*Q+1.707614701*S-1,ie=-.0041960863*M-.7034186147*V+1.707614701*K,ee=-.0041960863*j-.7034186147*Ce+1.707614701*Ge,J=ie/(ie*ie-.5*z*ee),ve=-z*J;De=ne>=0?De:1e6,W=he>=0?W:1e6,ve=J>=0?ve:1e6,o+=Math.min(De,Math.min(W,ve))}}}return o}c(xZ,"find_gamut_intersection");function Th(i,e,t=null){t||(t=Dh(i,e));let n=t[0],s=t[1];return[s/n,s/(1-n)]}c(Th,"get_ST_max");function bI(i,e,t){let n=Dh(e,t),s=xZ(e,t,i,1,i,n),r=Th(e,t,n),o=.11516993+1/(7.4477897+4.1590124*t+e*(-2.19557347+1.75198401*t+e*(-2.13704948-10.02301043*t+e*(-4.24894561+5.38770819*t+4.69891013*e)))),a=.11239642+1/(1.6132032-.68124379*t+e*(.40370612+.90148123*t+e*(-.27087943+.6122399*t+e*(.00299215-.45399568*t-.14661872*e)))),l=s/Math.min(i*r[0],(1-i)*r[1]),A=i*o,u=(1-i)*a,h=.9*l*Math.sqrt(Math.sqrt(1/(1/(A*A*A*A)+1/(u*u*u*u))));return A=i*.4,u=(1-i)*.8,[Math.sqrt(1/(1/(A*A)+1/(u*u))),h,s]}c(bI,"get_Cs");function Cp(i){const e=i.l!==void 0?i.l:0,t=i.a!==void 0?i.a:0,n=i.b!==void 0?i.b:0,s={mode:"okhsl",l:vu(e)};i.alpha!==void 0&&(s.alpha=i.alpha);let r=Math.sqrt(t*t+n*n);if(!r)return s.s=0,s;let[o,a,l]=bI(e,t/r,n/r),A;if(r<a){let u=0,h=.8*o,d=1-h/a;A=(r-u)/(h+d*(r-u))*.8}else{let u=a,h=.2*a*a*1.25*1.25/o,d=1-h/(l-a);A=.8+.2*((r-u)/(h+d*(r-u)))}return A&&(s.s=A,s.h=Yt(Math.atan2(n,t)*180/Math.PI)),s}c(Cp,"convertOklabToOkhsl");function Ip(i){let e=i.h!==void 0?i.h:0,t=i.s!==void 0?i.s:0,n=i.l!==void 0?i.l:0;const s={mode:"oklab",l:gl(n)};if(i.alpha!==void 0&&(s.alpha=i.alpha),!t||n===1)return s.a=s.b=0,s;let r=Math.cos(e/180*Math.PI),o=Math.sin(e/180*Math.PI),[a,l,A]=bI(s.l,r,o),u,h,d,g;t<.8?(u=1.25*t,h=0,d=.8*a,g=1-d/l):(u=5*(t-.8),h=l,d=.2*l*l*1.25*1.25/a,g=1-d/(A-l));let p=h+u*d/(1-g*u);return s.a=p*r,s.b=p*o,s}c(Ip,"convertOkhslToOklab");var LZ={...sI,mode:"okhsl",channels:["h","s","l","alpha"],parse:["--okhsl"],serialize:"--okhsl",fromMode:{oklab:Cp,rgb:c(i=>Cp(hc(i)),"rgb")},toMode:{oklab:Ip,rgb:c(i=>dc(Ip(i)),"rgb")}},MZ=LZ;function yp(i){let e=i.l!==void 0?i.l:0,t=i.a!==void 0?i.a:0,n=i.b!==void 0?i.b:0,s=Math.sqrt(t*t+n*n),r=s?t/s:1,o=s?n/s:1,[a,l]=Th(r,o),A=.5,u=1-A/a,h=l/(s+e*l),d=h*e,g=h*s,p=gl(d),f=g*p/d,m=$o({l:p,a:r*f,b:o*f}),y=Math.cbrt(1/Math.max(m.r,m.g,m.b,0));e=e/y,s=s/y*vu(e)/e,e=vu(e);const v={mode:"okhsv",s:s?(A+l)*g/(l*A+l*u*g):0,v:e?e/d:0};return v.s&&(v.h=Yt(Math.atan2(n,t)*180/Math.PI)),i.alpha!==void 0&&(v.alpha=i.alpha),v}c(yp,"convertOklabToOkhsv");function bp(i){const e={mode:"oklab"};i.alpha!==void 0&&(e.alpha=i.alpha);const t=i.h!==void 0?i.h:0,n=i.s!==void 0?i.s:0,s=i.v!==void 0?i.v:0,r=Math.cos(t/180*Math.PI),o=Math.sin(t/180*Math.PI),[a,l]=Th(r,o),A=.5,u=1-A/a,h=1-n*A/(A+l-l*u*n),d=n*l*A/(A+l-l*u*n),g=gl(h),p=d*g/h,f=$o({l:g,a:r*p,b:o*p}),m=Math.cbrt(1/Math.max(f.r,f.g,f.b,0)),y=gl(s*h),v=d*y/h;return e.l=y*m,e.a=v*r*m,e.b=v*o*m,e}c(bp,"convertOkhsvToOklab");var VZ={...aI,mode:"okhsv",channels:["h","s","v","alpha"],parse:["--okhsv"],serialize:"--okhsv",fromMode:{oklab:yp,rgb:c(i=>yp(hc(i)),"rgb")},toMode:{oklab:bp,rgb:c(i=>dc(bp(i)),"rgb")}},OZ=VZ;function PZ(i,e){if(!e||e[0]!=="oklab")return;const t={mode:"oklab"},[,n,s,r,o]=e;if(!(n.type===P.Hue||s.type===P.Hue||r.type===P.Hue))return n.type!==P.None&&(t.l=Math.min(Math.max(0,n.type===P.Number?n.value:n.value/100),1)),s.type!==P.None&&(t.a=s.type===P.Number?s.value:s.value*.4/100),r.type!==P.None&&(t.b=r.type===P.Number?r.value:r.value*.4/100),o.type!==P.None&&(t.alpha=Math.min(1,Math.max(0,o.type===P.Number?o.value:o.value/100))),t}c(PZ,"parseOklab");var HZ=PZ,XZ={...Yh,mode:"oklab",toMode:{lrgb:$o,rgb:dc},fromMode:{lrgb:yI,rgb:hc},ranges:{l:[0,1],a:[-.4,.4],b:[-.4,.4]},parse:[HZ],serialize:c(i=>`oklab(${i.l!==void 0?i.l:"none"} ${i.a!==void 0?i.a:"none"} ${i.b!==void 0?i.b:"none"}${i.alpha<1?` / ${i.alpha}`:""})`,"serialize")},zZ=XZ;function JZ(i,e){if(!e||e[0]!=="oklch")return;const t={mode:"oklch"},[,n,s,r,o]=e;if(n.type!==P.None){if(n.type===P.Hue)return;t.l=Math.min(Math.max(0,n.type===P.Number?n.value:n.value/100),1)}if(s.type!==P.None&&(t.c=Math.max(0,s.type===P.Number?s.value:s.value*.4/100)),r.type!==P.None){if(r.type===P.Percentage)return;t.h=r.value}return o.type!==P.None&&(t.alpha=Math.min(1,Math.max(0,o.type===P.Number?o.value:o.value/100))),t}c(JZ,"parseOklch");var UZ=JZ,KZ={...Wh,mode:"oklch",toMode:{oklab:c(i=>xi(i,"oklab"),"oklab"),rgb:c(i=>dc(xi(i,"oklab")),"rgb")},fromMode:{rgb:c(i=>Fi(hc(i),"oklch"),"rgb"),oklab:c(i=>Fi(i,"oklch"),"oklab")},parse:[UZ],serialize:c(i=>`oklch(${i.l!==void 0?i.l:"none"} ${i.c!==void 0?i.c:"none"} ${i.h!==void 0?i.h:"none"}${i.alpha<1?` / ${i.alpha}`:""})`,"serialize"),ranges:{l:[0,1],c:[0,.4],h:[0,360]}},jZ=KZ,qZ=c(i=>{let{r:e,g:t,b:n,alpha:s}=Rr(i),r={mode:"xyz65",x:.486570948648216*e+.265667693169093*t+.1982172852343625*n,y:.2289745640697487*e+.6917385218365062*t+.079286914093745*n,z:0*e+.0451133818589026*t+1.043944368900976*n};return s!==void 0&&(r.alpha=s),r},"convertP3ToXyz65"),Ep=qZ,$Z=c(({x:i,y:e,z:t,alpha:n})=>{i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=0);let s=Sr({r:i*2.4934969119414263-e*.9313836179191242-.402710784450717*t,g:i*-.8294889695615749+e*1.7626640603183465+.0236246858419436*t,b:i*.0358458302437845-e*.0761723892680418+.9568845240076871*t},"p3");return n!==void 0&&(s.alpha=n),s},"convertXyz65ToP3"),Bp=$Z,ek={...Gr,mode:"p3",parse:["display-p3"],serialize:"display-p3",fromMode:{rgb:c(i=>Bp(Ys(i)),"rgb"),xyz65:Bp},toMode:{rgb:c(i=>Ws(Ep(i)),"rgb"),xyz65:Ep}},tk=ek,yA=c(i=>{let e=Math.abs(i);return e>=1/512?Math.sign(i)*Math.pow(e,1/1.8):16*i},"gamma2"),nk=c(({x:i,y:e,z:t,alpha:n})=>{i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=0);let s={mode:"prophoto",r:yA(i*1.3457868816471585-e*.2555720873797946-.0511018649755453*t),g:yA(i*-.5446307051249019+e*1.5082477428451466+.0205274474364214*t),b:yA(i*0+e*0+1.2119675456389452*t)};return n!==void 0&&(s.alpha=n),s},"convertXyz50ToProphoto"),vp=nk,bA=c((i=0)=>{let e=Math.abs(i);return e>=16/512?Math.sign(i)*Math.pow(e,1.8):i/16},"linearize2"),ik=c(i=>{let e=bA(i.r),t=bA(i.g),n=bA(i.b),s={mode:"xyz50",x:.7977666449006423*e+.1351812974005331*t+.0313477341283922*n,y:.2880748288194013*e+.7118352342418731*t+899369387256e-16*n,z:0*e+0*t+.8251046025104602*n};return i.alpha!==void 0&&(s.alpha=i.alpha),s},"convertProphotoToXyz50"),Gp=ik,sk={...Gr,mode:"prophoto",parse:["prophoto-rgb"],serialize:"prophoto-rgb",fromMode:{xyz50:vp,rgb:c(i=>vp(qo(i)),"rgb")},toMode:{xyz50:Gp,rgb:c(i=>jo(Gp(i)),"rgb")}},rk=sk,Rp=1.09929682680944,ok=.018053968510807,EA=c(i=>{const e=Math.abs(i);return e>ok?(Math.sign(i)||1)*(Rp*Math.pow(e,.45)-(Rp-1)):4.5*i},"gamma3"),ak=c(({x:i,y:e,z:t,alpha:n})=>{i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=0);let s={mode:"rec2020",r:EA(i*1.7166511879712683-e*.3556707837763925-.2533662813736599*t),g:EA(i*-.6666843518324893+e*1.6164812366349395+.0157685458139111*t),b:EA(i*.0176398574453108-e*.0427706132578085+.9421031212354739*t)};return n!==void 0&&(s.alpha=n),s},"convertXyz65ToRec2020"),Sp=ak,Np=1.09929682680944,lk=.018053968510807,BA=c((i=0)=>{let e=Math.abs(i);return e<lk*4.5?i/4.5:(Math.sign(i)||1)*Math.pow((e+Np-1)/Np,1/.45)},"linearize3"),ck=c(i=>{let e=BA(i.r),t=BA(i.g),n=BA(i.b),s={mode:"xyz65",x:.6369580483012911*e+.1446169035862083*t+.1688809751641721*n,y:.262700212011267*e+.6779980715188708*t+.059301716469862*n,z:0*e+.0280726930490874*t+1.0609850577107909*n};return i.alpha!==void 0&&(s.alpha=i.alpha),s},"convertRec2020ToXyz65"),Qp=ck,Ak={...Gr,mode:"rec2020",fromMode:{xyz65:Sp,rgb:c(i=>Sp(Ys(i)),"rgb")},toMode:{xyz65:Qp,rgb:c(i=>Ws(Qp(i)),"rgb")},parse:["rec2020"],serialize:"rec2020"},uk=Ak,cs=.0037930732552754493,EI=Math.cbrt(cs),vA=c(i=>Math.cbrt(i)-EI,"transfer"),hk=c(i=>{const{r:e,g:t,b:n,alpha:s}=Rr(i),r=vA(.3*e+.622*t+.078*n+cs),o=vA(.23*e+.692*t+.078*n+cs),a=vA(.2434226892454782*e+.2047674442449682*t+.5518098665095535*n+cs),l={mode:"xyb",x:(r-o)/2,y:(r+o)/2,b:a-(r+o)/2};return s!==void 0&&(l.alpha=s),l},"convertRgbToXyb"),dk=hk,GA=c(i=>Math.pow(i+EI,3),"transfer2"),gk=c(({x:i,y:e,b:t,alpha:n})=>{i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=0);const s=GA(i+e)-cs,r=GA(e-i)-cs,o=GA(t+e)-cs,a=Sr({r:11.031566904639861*s-9.866943908131562*r-.16462299650829934*o,g:-3.2541473810744237*s+4.418770377582723*r-.16462299650829934*o,b:-3.6588512867136815*s+2.7129230459360922*r+1.9459282407775895*o});return n!==void 0&&(a.alpha=n),a},"convertXybToRgb"),pk=gk,fk={mode:"xyb",channels:["x","y","b","alpha"],parse:["--xyb"],serialize:"--xyb",toMode:{rgb:pk},fromMode:{rgb:dk},ranges:{x:[-.0154,.0281],y:[0,.8453],b:[-.2778,.388]},interpolate:{x:oe,y:oe,b:oe,alpha:{use:oe,fixup:mt}}},mk=fk,Ck={mode:"xyz50",parse:["xyz-d50"],serialize:"xyz-d50",toMode:{rgb:jo,lab:_h},fromMode:{rgb:qo,lab:kh},channels:["x","y","z","alpha"],ranges:{x:[0,.964],y:[0,.999],z:[0,.825]},interpolate:{x:oe,y:oe,z:oe,alpha:{use:oe,fixup:mt}}},Ik=Ck,yk=c(i=>{let{x:e,y:t,z:n,alpha:s}=i;e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r={mode:"xyz50",x:1.0479298208405488*e+.0229467933410191*t-.0501922295431356*n,y:.0296278156881593*e+.990434484573249*t-.0170738250293851*n,z:-.0092430581525912*e+.0150551448965779*t+.7518742899580008*n};return s!==void 0&&(r.alpha=s),r},"convertXyz65ToXyz50"),bk=yk,Ek=c(i=>{let{x:e,y:t,z:n,alpha:s}=i;e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0);let r={mode:"xyz65",x:.9554734527042182*e-.0230985368742614*t+.0632593086610217*n,y:-.0283697069632081*e+1.0099954580058226*t+.021041398966943*n,z:.0123140016883199*e-.0205076964334779*t+1.3303659366080753*n};return s!==void 0&&(r.alpha=s),r},"convertXyz50ToXyz65"),Bk=Ek,vk={mode:"xyz65",toMode:{rgb:Ws,xyz50:bk},fromMode:{rgb:Ys,xyz50:Bk},ranges:{x:[0,.95],y:[0,1],z:[0,1.088]},channels:["x","y","z","alpha"],parse:["xyz","xyz-d65"],serialize:"xyz-d65",interpolate:{x:oe,y:oe,z:oe,alpha:{use:oe,fixup:mt}}},Gk=vk,Rk=c(({r:i,g:e,b:t,alpha:n})=>{i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=0);const s={mode:"yiq",y:.29889531*i+.58662247*e+.11448223*t,i:.59597799*i-.2741761*e-.32180189*t,q:.21147017*i-.52261711*e+.31114694*t};return n!==void 0&&(s.alpha=n),s},"convertRgbToYiq"),Sk=Rk,Nk=c(({y:i,i:e,q:t,alpha:n})=>{i===void 0&&(i=0),e===void 0&&(e=0),t===void 0&&(t=0);const s={mode:"rgb",r:i+.95608445*e+.6208885*t,g:i-.27137664*e-.6486059*t,b:i-1.10561724*e+1.70250126*t};return n!==void 0&&(s.alpha=n),s},"convertYiqToRgb"),Qk=Nk,wk={mode:"yiq",toMode:{rgb:Qk},fromMode:{rgb:Sk},channels:["y","i","q","alpha"],parse:["--yiq"],serialize:"--yiq",ranges:{i:[-.595,.595],q:[-.522,.522]},interpolate:{y:oe,i:oe,q:oe,alpha:{use:oe,fixup:mt}}},Zk=wk,gc=c(i=>{const e=zC(i);if(!e)return;const t=Xi(e.mode);if(!t.serialize||typeof t.serialize=="string"){let n=`color(${t.serialize||`--${e.mode}`} `;return t.channels.forEach((s,r)=>{s!=="alpha"&&(n+=(r?" ":"")+(e[s]!==void 0?e[s]:"none"))}),e.alpha!==void 0&&e.alpha<1&&(n+=` / ${e.alpha}`),n+")"}if(typeof t.serialize=="function")return t.serialize(e)},"formatCss"),kk=c(i=>{i[0]===void 0&&(i[0]=0),i[i.length-1]===void 0&&(i[i.length-1]=1);let e=1,t,n,s,r;for(;e<i.length;){if(i[e]===void 0){for(n=e,s=i[e-1],t=e;i[t]===void 0;)t++;for(r=(i[t]-s)/(t-e+1);e<t;)i[e]=s+(e+1-n)*r,e++}else i[e]<i[e-1]&&(i[e]=i[e-1]);e++}return i},"normalizePositions"),_k=kk,Yk=c((i=.5)=>e=>i<=0?1:i>=1?0:Math.pow(e,Math.log(.5)/Math.log(i)),"midpoint"),Wk=Yk,Ya=c(i=>typeof i=="function","isfn2"),ns=c(i=>i&&typeof i=="object","isobj"),wp=c(i=>typeof i=="number","isnum"),Dk=c((i,e="rgb",t,n)=>{let s=Xi(e),r=Ko(e),o=[],a=[],l={};i.forEach(d=>{Array.isArray(d)?(o.push(r(d[0])),a.push(d[1])):wp(d)||Ya(d)?l[a.length]=d:(o.push(r(d)),a.push(void 0))}),_k(a);let A=s.channels.reduce((d,g)=>{let p;return ns(t)&&ns(t[g])&&t[g].fixup?p=t[g].fixup:ns(s.interpolate[g])&&s.interpolate[g].fixup?p=s.interpolate[g].fixup:p=c(f=>f,"ffn"),d[g]=p(o.map(f=>f[g])),d},{}),u=s.channels.reduce((d,g)=>{let p;return Ya(t)?p=t:ns(t)&&Ya(t[g])?p=t[g]:ns(t)&&ns(t[g])&&t[g].use?p=t[g].use:Ya(s.interpolate[g])?p=s.interpolate[g]:ns(s.interpolate[g])&&(p=s.interpolate[g].use),d[g]=p(A[g]),d},{}),h=o.length-1;return d=>{if(d=Math.min(Math.max(0,d),1),d<=a[0])return o[0];if(d>a[h])return o[h];let g=0;for(;a[g]<d;)g++;let p=a[g-1],f=a[g]-p,m=(d-p)/f,y=l[g]||l[0];y!==void 0&&(wp(y)&&(y=Wk((y-p)/f)),m=y(m));let v=(g-1+m)/h;return s.channels.reduce((G,R)=>{let Q=u[R](v);return Q!==void 0&&(G[R]=Q),G},{mode:e})}},"interpolate_fn"),Tk=c((i,e="rgb",t)=>Dk(i,e,t),"interpolate$1");Oe(OQ);Oe(nw);Oe(hw);Oe(gw);Oe(Cw);Oe(sI);Oe(aI);Oe(Ww);Oe(xw);Oe(Jw);Oe(qw);Oe(Yh);Oe(cZ);Oe(Wh);Oe(gZ);Oe(QZ);Oe(ZZ);Oe(_Z);Oe(MZ);Oe(OZ);Oe(zZ);Oe(jZ);Oe(tk);Oe(rk);Oe(uk);Oe(Gr);Oe(mk);Oe(Ik);Oe(Gk);Oe(Zk);const BI=Object.freeze([st.create(["duration"],c(function({duration:e}){e.value===void 0&&(e.value=1)},"setDefaults")),["label",qe],["duration",ws]]);function Fk(i,e,t){let n=0;const s=new Map,r=new Map,o=new Map;let a=0;for(const[l,[A,u]]of ol(i)){const h=parseFloat(u.get("duration").value);l===0?e&&(a=h):n+=h;const d=n;r.has(d)||r.set(d,[]),r.get(d).push([A,u]),o.set(A,d);for(const[g,p]of t(u,d)){s.has(g)||s.set(g,new Map);const f=s.get(g);f.has(d)||f.set(d,[]),f.get(d).push({key:A,keyMoment:u,propertyValue:p})}}return n+=a,s.isLoop=e,s.fullDuration=n,r.isLoop=e,r.fullDuration=n,{propertyToKeyMoments:s,tToKeyMoments:r,keyMomentsKeyToT:o,isLoop:e,fullDuration:n}}c(Fk,"getKeyMomentsAnalysis");function ea(i,e){if(i.length===0)return[null,null];let t=0,n=i.length-1;if(e<i[t])return[t,null];if(e>i[n])return[null,n];for(;t<=n;){const s=Math.floor((t+n)/2);if(i[s]===e)return[s,s];i[s]<e?t=s+1:n=s-1}return[n,t]}c(ea,"binarySearch");function Zp(i){return typeof i=="object"&&"mode"in i}c(Zp,"isCuloriColor");function RA(i,e,t){if(Zp(e)&&Zp(t))throw new Error("DEPRECATED: we don't interpolate culori color objects in here anymore.");return typeof e=="number"&&typeof t=="number"?cC(i,e,t):i<1?e:t}c(RA,"interpolate");function SA(i){return i.get("easing",{value:Er}).value}c(SA,"getEasingFunction");function Gu(i,e,t,n,s){const r=[...t.keys()],[o,a]=ea(r,n);if(o===null&&a===null)throw new Error("ASSERTION FAILED propertyData must not be  empty.");if(o===null){if(a!==r.length-1)throw new Error(`ASSERTION FAILED: unknown state right "${a}" shoud be ${r.length-1}.`);if(!e){const y=r[a];return t.get(y).at(-1).propertyValue}const l=r[a],A=l,u=t.get(l).at(-1),h=r[0],d=i+h;if(d===A)return u.propertyValue;const g=t.get(h).at(0),p=SA(g.keyMoment),f=(n-A)/(d-A),m=p(f);return RA(m,u.propertyValue,g.propertyValue)}if(o===a){const l=r[o];return t.get(l).at(-1).propertyValue}if(a===null){if(!e){const m=r[o];return t.get(m).at(-1).propertyValue}const l=r[r.length-1],A=l-i,u=t.get(l).at(-1),h=r[o];if(h===A)return u.propertyValue;const d=t.get(h).at(0),g=SA(d.keyMoment),p=(n-A)/(h-A),f=g(p);return RA(f,u.propertyValue,d.propertyValue)}else{if(a-o!==1)throw new Error(`ASSERTION FAILED left [${o}] and right [${a}] should be directly next to each other but the distance is not 1: ${a-o}.`);const l=r[o],A=t.get(l).at(-1),u=r[a],h=t.get(u).at(0),d=SA(h.keyMoment),g=(n-l)/(u-l),p=d(g);return RA(p,A.propertyValue,h.propertyValue)}}c(Gu,"getPropertyValue$1");function xk(i,e){const{fullDuration:t,isLoop:n}=i,s=new it;for(const[r,o]of i){const a=Gu(t,n,o,e);s.set(r,a)}return s}c(xk,"getPropertyValues");class NA{static{c(this,"DependentValue")}constructor(e,t,n,s){Object.defineProperties(this,{dependencyDepth:{value:e},propertyName:{value:t},momentT:{value:n},defaultVal:{value:s}})}toString(){return`[DependentValue ${this.propertyName} at this.momentT ${this.momentT}]`}}const Ru=Symbol("_NOTDEF");class vI{static{c(this,"LocalScopeAnimanion")}static _NOTDEF=Ru;constructor(e,t,n){this._propertiesGenerators=e,this.keyMoments=t,this.isLoop=n,this._keyMomentsAnalysis=null}*_propertiesGenerator(e,t,n){const s=this.constructor._NOTDEF;function r(o,a,l,A=s){return new NA(o,a,l,A)}c(r,"getPropertyAtMomentT");for(const[o,a]of this._propertiesGenerators.entries())for(const[l,A]of a({getPropertyAtMomentT:r.bind(null,o)},t,n)){if(A instanceof NA){const u=e.has(l)?e.get(l):-1,h=Math.max(u,A.dependencyDepth);e.set(l,h)}yield[l,A]}}_resolveLocalPropertyDependency(e,t,n,s){const{propertyName:r,defaultVal:o}=s;if(t.has(r)){const{fullDuration:a,isLoop:l}=t,A=t.get(r);return Gu(a,l,A,n)}else{if(o!==this.constructor._NOTDEF)return o;throw new Error(`PROPERTY ERRROR can't resolve dependency property ${r} for ${e}`)}}_resolvePropertyDependencies(e,t){const n=new Map,s=tn(...Array.from(t.entries()).sort(([,r],[,o])=>r-o)).next().value;n.fullDuration=e.fullDuration,n.isLoop=e.isLoop;for(const[r,o]of e.entries())t.has(r)||n.set(r,o);for(const r of s){const o=e.get(r),a=new Map;for(const[l,A]of o){const u=[];for(const{key:h,keyMoment:d,propertyValue:g}of A){if(!(g instanceof NA)){u.push({key:h,keyMoment:d,propertyValue:g});continue}const p=this._resolveLocalPropertyDependency(r,n,l,g);p!==null&&u.push({key:h,keyMoment:d,propertyValue:p})}u.length&&a.set(l,u)}a.size&&n.set(r,a)}return n}_getKeyMomentsAnalysis(e=null){if(this._keyMomentsAnalysis===null){const t=new Map,n=this._propertiesGenerator.bind(this,t),s=Fk(this.keyMoments,this.isLoop,n);if(t.size){const r=this._resolvePropertyDependencies(s.propertyToKeyMoments,t);this._keyMomentsAnalysis=Object.assign({},s,{propertyToKeyMoments:r})}else this._keyMomentsAnalysis=s}if(e===null)return this._keyMomentsAnalysis;if(!Object.hasOwn(this._keyMomentsAnalysis,e))throw new Error(`KEY ERROR ${e} not in this._keyMomentsAnalysis ({$this.constructor.name}).`);return this._keyMomentsAnalysis[e]}get tToKeyMoments(){return this._getKeyMomentsAnalysis("tToKeyMoments")}get _propertyToKeyMoments(){return this._getKeyMomentsAnalysis("propertyToKeyMoments")}get fullDuration(){return this._getKeyMomentsAnalysis("fullDuration")}get keyMomentsKeyToT(){return this._getKeyMomentsAnalysis("keyMomentsKeyToT")}toString(){return`[${this.constructor.name}+${this._propertiesGenerators.map(e=>e.name).join("+")}]`}_getPropertyValuesMapForAbsoluteT(e){return xk(this._propertyToKeyMoments,e)}getPropertyValuesMapForAbsoluteT(e){return this._getPropertyValuesMapForAbsoluteT(e)}getPropertyValueForLocalT(e,t,n=super._NOTDEF){const s=this._getKeyMomentsAnalysis("propertyToKeyMoments"),{fullDuration:r,isLoop:o}=s,a=t*r;if(!s.has(e)){if(n!==this.constructor._NOTDEF)return n;throw new Error(`KEY ERROR propertyName "${e}" not found in ${this}.getPropertyValueForLocalT`)}const l=s.get(e);return Gu(r,o,l,a)}getPropertyValuesMapForLocalT(e){const t=e*this._getKeyMomentsAnalysis("fullDuration");return this.getPropertyValuesMapForAbsoluteT(t)}getPropertyValuesMapForKeyMoment(e){const t=this.keyMomentsKeyToT.get(e);return this.getPropertyValuesMapForAbsoluteT(t)}hasProperty(e){return this._propertyToKeyMoments.has(e)}propertyNames(){return Array.from(this._propertyToKeyMoments.keys())}}class kp{static{c(this,"HierarchicalScopeAnimanion")}static _NOTDEF=Symbol("_NOTDEF");static LAST_T=Symbol("LAST_T");get LAST_T(){return this.constructor.LAST_T}constructor(e,t=null,n=null){if(Object.defineProperty(this,"parentAnimanion",{value:t}),Object.defineProperty(this,"localAnimanion",{value:e}),t!==null&&!n)throw new Error("ASSERTION FAILED parentAnimanion is not null but isInheritingPropertyFn is not set.");this._isInheritingPropertyFn=n}toString(){return`[${this.constructor.name} local:${this.localAnimanion}]`}get animanions(){const e=[];let t=this;for(;t!==null;)e.unshift(t),t=t.parentAnimanion;return Object.defineProperty(this,"animanions",{value:e}),this.animanions}getLocalTs(e){return this.animanions.reduce((n,s)=>{const r=n.at(-1),o=r===this.constructor.LAST_T?1:r,a=s.getOwnPropertyAtLocalT("numericProperties/t",o,r);if(a===1||a===this.constructor.LAST_T)return n.concat(this.constructor.LAST_T);const l=a%1,A=l<0?1+l:l;return n.concat(A)},[e]).map(n=>n===this.constructor.LAST_T?1:n)}_isInheritingProperty(e){return this._isInheritingPropertyFn?this._isInheritingPropertyFn(e):!0}getPropertiesFromGlobalT(e){const t=this.animanions,n=this.getLocalTs(e),s=new Map;s.set("[local t]",n[t.length-1]);for(let r=t.length-1;r>=0;r--){const o=n[r],a=t[r],l=a.localPropertyNames.filter(A=>!s.has(A)&&(a===this||this._isInheritingProperty(A)));for(const A of l)s.set(A,a.getOwnPropertyAtLocalT(A,o))}return s}getLocalT(e){return this.getLocalTs(e)[this.animanions.length-1]}getOwnPropertyAtLocalT(e,t,n=super._NOTDEF){if(!this.localAnimanion.hasProperty(e)){if(n!==this.constructor._NOTDEF)return n;throw new Error(`KEY ERROR ${e} not in {$this.constructor.name}.`)}const s=n!==this.constructor._NOTDEF?[n]:[];return this.localAnimanion.getPropertyValueForLocalT(e,t,...s)}get localPropertyNames(){return this.localAnimanion.propertyNames()}getPropertyValuesMapForLocalT(e){return this.localAnimanion.getPropertyValuesMapForLocalT(e)}getPropertyValuesMapForKeyMoment(e){return this.localAnimanion.getPropertyValuesMapForKeyMoment(e)}get tToKeyMoments(){return this.localAnimanion.tToKeyMoments}get fullDuration(){return this.localAnimanion.fullDuration}}class pc extends me{static{c(this,"AnimationLiveProperties")}constructor(e,t,n=null){super(e),this._initAnimanion=t,this._animanion=null,this.t=null,this.propertyValuesMap=null,this._isInheritingPropertyFn=n}_initAnimanion(e,t){throw new Error(`NOT IMPLEMENTED _initAnimanion(${e}, ${t})`)}get animanion(){if(this._animanion===null)throw new Error("LIFECYCLE ERROR this._animanion is null, must update initially first.");return this._animanion}update(e){const t=this.widgetBus.wrapper.dependencyReverseMapping.has("@parentProperties");let n=!1,s=!1;if(e.has("keyMoments")||e.has("isLoop")||e.has("@parentProperties")){const r=e.has("keyMoments")||e.has("isLoop"),o=e.has("keyMoments")?e.get("keyMoments"):this.getEntry("keyMoments"),a=(e.has("isLoop")?e.get("isLoop"):this.getEntry("isLoop")).value;if(t){const l=e.has("@parentProperties")?e.get("@parentProperties"):this.getEntry("@parentProperties"),[A,u]=r||this._animanion===null?[!0,this._initAnimanion(o,a)]:[!1,this._animanion.localAnimanion],h=this._animanion===null||l.animanion!==this._animanion.parentAnimanion;(A||h)&&(this._animanion=new kp(u,l.animanion,this._isInheritingPropertyFn),n=!0)}else this._animanion=new kp(this._initAnimanion(o,a)),n=!0}if(e.has("globalT")||n){const r=(e.has("globalT")?e.get("globalT"):this.getEntry("globalT")).value,o=t?this._animanion.getLocalT(r):r;(this.t===null||this.t!==o||n)&&(this.t=o,this.propertyValuesMap=this._getPropertyValuesMapForLocalT(o),s=!0)}if(n||s){const[r,o]=this.widgetBus.getProtocolHandlerRegistration("animationProperties@");o.setUpdated(r)}}get fullDuration(){return this.animanion.fullDuration}get tToKeyMoments(){return this.animanion.tToKeyMoments}_getPropertyValuesMapForLocalT(e){return this.animanion.getPropertyValuesMapForLocalT(e)}getPropertyValuesMapForLocalT(e=Ru){return e===Ru&&(e=this.t),this.t===e?this.propertyValuesMap:this._getPropertyValuesMapForLocalT(e)}getPropertyValuesMapForKeyMoment(e){return this.animanion.getPropertyValuesMapForKeyMoment(e)}}class Lk extends me{static{c(this,"AnimationInfo")}static TEMPLATE=`<div class="animation_info">
        <h3>Animation Info</h3>
        <h4>Basic Fields</h4>
        <ol class="animation_info-basic_fields"></ol>
        <h4>Animated Properties</h4>
        <ol class="animation_info-properties"></ol>
</div>`;constructor(e){super(e),this._basicKeys=["t","duration","isLoop","perpetual","playing"],this._basicFields={set(t,n){this[t].textContent=n}},this._propertyFields=new Map,[this.element,this._propertiesContainer,this._sample]=this.initTemplate()}_createBasicDisplayElement(e,t,n=null){const s=typeof t=="boolean"?t&&"True"||"False":t!==void 0?t.toString():"undefined",r=this._domTool.createElement("span",{},s),o=this._domTool.createElement("em",{},n!==null?n:e);return[this._domTool.createElement("li",{},[o," ",r]),r]}_createBasicField(e,t,n=null){const[s,r]=this._createBasicDisplayElement(e,t,n);return this._basicFields[e]=r,s}_setPropertiesToInfo(e){for(const[n,[s]]of[...this._propertyFields])e.has(n)||(s.remove(),this._propertyFields.delete(n));const t=[];for(const[n,s]of e)if(this._propertyFields.has(n)){const[r,o]=this._propertyFields.get(n);o.textContent=`${s}`,t.push(r)}else{const[r,o]=this._createBasicDisplayElement(n,s);this._propertyFields.set(n,[r,o]),t.push(r)}this._propertiesContainer.append(...t)}initTemplate(){const e=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE),t=e.firstElementChild,n=t.querySelector(".animation_info-basic_fields"),s=t.querySelector(".animation_info-properties"),r=t.querySelector(".animation_info-sample");for(const o of this._basicKeys){let a=null;try{a=this.getEntry(o)}catch{}if(a===null)continue;const l=this._createBasicField(o,a.value);o==="duration"&&l.append(" seconds"),n.append(l)}return n.append(this._createBasicField("fullDuration",0,"full duration")),this._insertElement(t),[t,s,r]}_setPropertiesToSample(e){const t="axesLocations/";e.has("fontSize")&&this._sample.style.setProperty("font-size",`${e.get("fontSize")}pt`);const n=[];for(const[s,r]of e){if(!s.startsWith(t))continue;const o=s.slice(t.length);n.push(`"${o}" ${r}`)}this._sample.style.setProperty("font-variation-settings",n.join(","))}update(e){for(const t of this._basicKeys){if(!e.has(t))continue;const n=e.get(t),s=typeof n.value=="boolean"?n.value&&"True"||"False":n.value;this._basicFields.set(t,s)}if(e.has("animationProperties@")){const t=e.get("animationProperties@");this._basicFields.set("fullDuration",t.fullDuration),this._setPropertiesToInfo(t.propertyValuesMap)}}}const Mk=Gt.createClass("TNumberModel",{min:0,max:1,defaultValue:0}),fc=Object.freeze([st.create(["t","playing","duration","isLoop","perpetual"],c(function({t:e,playing:t,duration:n,isLoop:s,perpetual:r}){e.value===void 0&&(e.value=0),t.value===void 0&&(t.value=!1),s.value===void 0&&(s.value=!1),r.value===void 0&&(r.value=!0),n.value===void 0&&(n.value=1)},"prepare")),st.create(["playing","duration"],c(function({playing:e,duration:t}){t.value===0&&(e.value=!1)},"protectPlaying")),["t",Mk],["duration",ws],["isLoop",ut],["perpetual",ut],["playing",ut]]);function pl(i={zone:"main"}){return{playing:[{...i},[["playing","boolean"]],Pa,"playing","⏸︎ pause","▶ play","Toggle animation play/pause."],isLoop:[{...i},[["isLoop","boolean"]],Pa,"is-loop","is a loop","is end to end","Connect end with start and transition."],perpetual:[{...i},[["perpetual","boolean"]],Pa,"perpetual","⟳ is repeating","→ is playing once","Toggle perpetual playback."],duration:[{...i},[["duration","value"]],Wi,"Time Duration","seconds",{min:0},["ui_time_control-duration"]]}}c(pl,"getBasicPlayerControlWidgets");const Vk=ke.createClass(ws),GI=ye.createClass("KeyMomentModel",...BI,["fontSize",Vk],["manualAxesLocations",jN]),Fh=vt.createClass("KeyMomentsModel",GI),Ok=ye.createClass("ActiveKeyMomentModel",["keyMoments",new $t("keyMoments",Fh)],["activeKey",new ce("keyMoments",ce.NOT_NULL,ce.NO_ACTION)],["keyMoment",new Xn("activeKey")]),Pk=vt.createClass("ActiveKeyMomentsModel",Ok),Hk=ks.createClass("ExampleKeyMomentsLayoutModel",...fc,st.create(["activeKeyMoments"],c(function({activeKeyMoments:e}){const t=new Set,n=Array.from(e).map(([,s])=>[parseInt(s.get("activeKey").value,10),s]).sort(([s],[r])=>s-r).filter(([s])=>t.has(s)?!1:(t.add(s),!0)).map(([,s])=>s);e.splice(0,1/0,...n)},"sortActiveKeyMoments")),["keyMoments",Fh],["activeKeyMoments",Pk]);function Ao(i){const e=new Set;for(const[,t]of i)e.add(t.get("activeKey").value);return Array.from(e).map(t=>parseInt(t,10)).sort((t,n)=>t-n).map(t=>`${t}`)}c(Ao,"activeKeyMomentsSortedKeys");function Su(i,e,t){for(const[,n]of i){const s=n.get("activeKey");s.value===e&&(s.value=t)}}c(Su,"_setActiveKeyMomentsValues");function uo(i,e){const t=new Set([...i].map(([,o])=>o.get("label").value)),n=c(o=>`Key Moment ${o+1}`,"formatLabel");let s=e,r=n(s);for(;t.has(r);)s<i.size-1?s=i.size-1:s+=1,r=n(s);return r}c(uo,"createLabelForKeyMoment");class RI extends me{static{c(this,"KeyMomentsTimeline")}[fn]=ll;static TEMPLATE=`<div class="key_moments_timeline">
        <h3>Key Moments Timeline</h3>
        <ol class="key_moments_timeline-items"></ol>
        <div>
            <button class="key_moments_timeline-add_moment" title="Add Moment">+ add</button><!--
            --><button class="key_moments_timeline-remove_moment" title="Remove Active Moment">- remove</button><!--
            --><button class="key_moments_timeline-insert_moment" title="Insert Moment at t">⎀ insert</button>
        </div>
        <div>
            <button class="key_moments_timeline-select_previous" title="Select Previous">⇤ select previous</button><!--
            --><button class="key_moments_timeline-select_next" title="Select Next">select next ⇥</button>
        </div>
</div>`;static KEY_MOMENT_BUTTON_TEMPLATE=`<li>
    <button class="key_moments_timeline-button" title="Select"></button>
</li>`;constructor(e){super(e),[this.element,this.itemsContainer,this.addButton,this.removeButton,this.previousButton,this.nextButton]=this.initTemplate()}initTemplate(){const e=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE),t=e.firstElementChild,n=t.querySelector(".key_moments_timeline-items"),s=t.querySelector(".key_moments_timeline-add_moment"),r=t.querySelector(".key_moments_timeline-insert_moment"),o=t.querySelector(".key_moments_timeline-remove_moment"),a=t.querySelector(".key_moments_timeline-select_previous"),l=t.querySelector(".key_moments_timeline-select_next");r.addEventListener("click",this._changeStateHandler(()=>{const u=this.getEntry("keyMoments"),h=this.getEntry("animationProperties@"),d=h.t,g=u.constructor.Model.createPrimalState(u.dependencies).getDraft(),[p,f,m,y]=this._getInsertParameters(u,h,d),v=uo(u,Math.max(0,parseFloat(p,10)-1)),G=h.getPropertyValuesMapForLocalT(d);let R=null;for(const[Q,S]of G)if(Q.startsWith("axesLocations")){R===null&&(R=Je(g,"manualAxesLocations/axesLocations"));const M=D.fromString(Q).parts.at(-1);R.setSimpleValue(M,S)}else g.get(Q).value=S;f!==null&&(g.get("duration").value=f),g.get("label").value=v,m!==null&&y!==null&&(m.get("duration").value=y),u.splice(p,0,g)})),s.addEventListener("click",this._changeStateHandler(()=>{const u=this.getEntry("keyMoments"),h=this.getEntry("activeKeyMoments"),d=h.size?Ao(h).at(-1):null,g=d!==null?parseInt(d,10)+1:u.size,p=u.constructor.Model.createPrimalState(u.dependencies);u.splice(g,0,p);const f=uo(u,g);u.get(g).get("label").value=f;const m=h.constructor.Model.createPrimalState(h.dependencies).getDraft();m.get("activeKey").value=`${g}`,h.splice(0,1/0,m)})),o.addEventListener("click",this._changeStateHandler(()=>{const u=this.getEntry("keyMoments"),h=this.getEntry("activeKeyMoments");Ao(h).reverse().forEach(g=>u.delete(g)),h.splice(0,1/0)}));const A=c(u=>{if(u===0)return;const h=this.getEntry("keyMoments"),d=this.getEntry("activeKeyMoments"),g=h.size;if(g===0)return;const p=g-1;if(d.size===0){let v=u>0?(p+u)%g:(g+u)%g;v<0&&(v=g+v);const G=d.constructor.Model.createPrimalState(d.dependencies).getDraft();G.get("activeKey").value=`${v}`,d.push(G);return}const f=new Map,m=[];for(const[,v]of d){const G=v.get("activeKey"),R=G.value;f.has(R)||f.set(R,[]),f.get(R).push(G);let Q=(parseInt(R,10)+u)%g;Q<0&&(Q=g+Q);const S=`${Q}`;m.push(S)}for(let v=m.length-1;v>=0;v--){const G=m[v];if(!f.has(G))continue;if(f.get(G).pop()===void 0){f.delete(G);continue}m.splice(v,1)}const y=Array.from(f.values()).flat();for(const v of m)y.pop().value=v},"_changeActiveMoment");return a.addEventListener("click",this._changeStateHandler(()=>A(-1))),l.addEventListener("click",this._changeStateHandler(()=>A(1))),this._insertElement(t),[t,n,s,o,a,l]}_getInsertParameters(e,t,n){const s=n*t.fullDuration,r=[...t.tToKeyMoments.keys()],[o,a]=ea(r,s),l=r[o],A=r[a];let u,h=null,d=null,g=null;if(o===null&&a===null)u=0,h=null,d=null,g=null;else if(o===null)g=e.get(0),u=e.size,h=s-A,d=g.get("duration").value-h;else{if(a===null)throw new Error("Assertion Failed, rightIndex must not be null.");if(o===a){const[p]=t.tToKeyMoments.get(A).at(-1);g=null,u=parseInt(p,10)+1,h=0,d=null}else{const[p]=t.tToKeyMoments.get(A)[0];g=e.get(p),u=p,h=s-l,d=g.get("duration").value-h}}return[u,h,g,d]}_createKeyMomentButton(e,t){const n=this._domTool.createFragmentFromHTML(this.constructor.KEY_MOMENT_BUTTON_TEMPLATE).firstElementChild,s=n.querySelector(".key_moments_timeline-button"),r=t.get("label");return s.append(r.value?`${r.value}`:this._domTool.createElement("em",null,"(empty label)")),s.addEventListener("click",this._changeStateHandler(()=>{const o=this.getEntry("activeKeyMoments"),a=[];for(const[A,u]of o)u.get("activeKey").value===e&&a.push(A);if(a.length){a.reverse();for(const A of a)o.delete(A);return}const l=o.constructor.Model.createPrimalState(o.dependencies).getDraft();l.get("activeKey").value=e,o.push(l)})),[n,s]}initialUpdate(e){const t=ln.createInitial(e,this.widgetBus.wrapper.dependencyMapping);this.update(t)}update(e){const t=this._getChangedMapFromCompareResult(e);if(t.has("keyMoments")){const n=t.get("keyMoments"),s=t.has("activeKeyMoments")?t.get("activeKeyMoments"):this.getEntry("activeKeyMoments"),r=new Set(Array.from(s).map(([,o])=>o.get("activeKey").value));this.previousButton.disabled=n.size<2,this.nextButton.disabled=n.size<2,this._domTool.clear(this.itemsContainer);for(const[o,a]of n){const[l]=this._createKeyMomentButton(o,a);r.has(o)&&l.classList.add("active"),this.itemsContainer.append(l)}}if(t.has("activeKeyMoments")){const n=t.get("activeKeyMoments"),s=new Set(Array.from(n).map(([,r])=>parseInt(r.get("activeKey").value,10)));this.removeButton.disabled=n.size===0;for(const[r,o]of Array.from(this.itemsContainer.children).entries())o.classList[s.has(r)?"add":"remove"]("active")}}}function*SI(i,e){const t=e.get("fontSize");t.isEmpty||(yield[`${Ne}fontSize`,t.value])}c(SI,"fontSizeGen$3");function*NI(i,e,t){const n=e.get("manualAxesLocations"),s=n.get("autoOPSZ").value;if(s){const o=e.get("fontSize"),a=o.isEmpty?i.getPropertyAtMomentT(`${Ne}fontSize`,t,null):o.value;a!==null&&(yield["axesLocations/opsz",a])}const r=n.get("axesLocations");for(const[o,a]of r)s&&o==="opsz"||(yield[`axesLocations/${o}`,a.value])}c(NI,"axisLocationsGen$2");class QI extends me{static{c(this,"AnimationSample")}static TEMPLATE=`<div class="animation_sample"><span class="animation_sample-text">Sample Text</sample></div>
</div>`;constructor(e){super(e),this._propertyFields=new Map,[this.element,this._sample]=this.initTemplate()}initTemplate(){const e=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE),t=e.firstElementChild,n=t.querySelector(".animation_sample-text");return this._insertElement(t),[t,n]}_setPropertiesToSample(e){const t="axesLocations/";e.has(`${Ne}fontSize`)&&this._sample.style.setProperty("font-size",`${e.get(Ne+"fontSize")}pt`);const n=[];for(const[s,r]of e){if(!s.startsWith(t))continue;const o=s.slice(t.length);n.push(`"${o}" ${r}`)}this._sample.style.setProperty("font-variation-settings",n.join(","))}update(e){if(e.has("font")){const t=e.get("font").value;this._sample.style.setProperty("font-family",`"${t.fullName}"`)}if(e.has("animationProperties@")){const t=e.get("animationProperties@").propertyValuesMap;this._setPropertiesToSample(t)}}}let wI=class extends we{static{c(this,"KeyMomentController")}static _NOTDEF=Symbol("_NOTDEF");constructor(e,t){super(e,t),this._animationPropertiesKey=`animationProperties@${this.widgetBus.rootPath.append("..","..","..")}`;const n=[[this._animationPropertiesKey,"animationProperties@"]],s=new Set(Array.from(tn(...n))[1]),r=c(a=>Array.from(a.keys()).some(l=>s.has(l)),"requireUpdateDefaults"),o=[[{zone:"main"},[["label","data"]],_s,"h3",{},a=>`Key Moment: ${a}`],[{zone:"main"},[["label","value"]],Di,"Label"],[{zone:"main"},[["duration","value"]],Wi,"Relative Duration","/ Full Relative Duration",{min:0}],[{zone:"main"},[["fontSize","value"],...n],ec,this._getDefaults.bind(this,Ze.createSimpleRecord(Ne,"fontSize"),"fontSize",66),r,"Font Size","pt",{min:0,max:244,step:1,default:36}],[{zone:"main"},[["fontSize","fontSize"],["/font","font"],["manualAxesLocations/axesLocations","axesLocations"],["manualAxesLocations/autoOPSZ","autoOPSZ"],...n],gn,this._getDefaults.bind(this),Ze.createSimpleRecord("axesLocations/","axesLocations"),r]];this._initWidgets(o)}_getDefaults(e,t,n=super._NOTDEF){const{fullKey:s}=e,r=this.getEntry(this._animationPropertiesKey),o=this.getEntry(this.widgetBus.rootPath.append("../activeKey")).value,a=r.getPropertyValuesMapForKeyMoment(o);if(a.has(s))return a.get(s);if(n!==super._NOTDEF)return n;throw new Error(`KEY ERROR defult value not found for activeKey: ${o} at "${s}" in AnimationLiveProperties`)}},ZI=class extends dn{static{c(this,"KeyMomentsController")}constructor(e,t,n){if(super(e,t),this._itemEntryPath=D.fromParts(".","keyMoment"),typeof n!="function")throw new Error(`TYPE ERRROR ${this.constructor.name} ChildrenContstructor is not a function ${typeof n!="function"} ${n}`);this._ChildrenContstructor=n}_redirectedGetEntry(e){const t=D.fromString(this.widgetBus.getExternalName("collection")),n=t.parts.slice(this.widgetBus.rootPath.parts.length),s=e instanceof D?e:D.fromString(e);e:if(t.isRootOf(s)){const[r,...o]=s.parts.slice(t.parts.length),a=D.fromParts(".",...o.splice(0,this._itemEntryPath.parts.length));if(!this._itemEntryPath.equals(a))break e;const l=this.widgetBus.getEntry(this.widgetBus.rootPath),A=Je(l,D.fromParts(...n,r,"activeKey")).value;return Je(l,D.fromParts("keyMoments",A,...o))}return this.widgetBus.getEntry(s)}_createWrapper(e){const t={rootPath:e,relativeRootPath:D.fromParts(".","keyMoment")},n=[],s=this._ChildrenContstructor,r=[this._zones],o=Object.assign(Object.create(this._childrenWidgetBus),{getEntry:this._redirectedGetEntry.bind(this)});return this._initWrapper(o,t,n,s,...r)}};class Xk extends we{static{c(this,"ExampleKeyMomentsController")}constructor(e,t){e.wrapper.setProtocolHandlerImplementation(...Nn.create("animationProperties@"));const n=e.domTool.createElement("div"),s=new Map([["activeKeyMomentsMain",n],...t]),r=[[{},["t","duration","playing","perpetual"],Uo],[{"animationProperties@":e.rootPath.toString()},[["t","globalT"],"keyMoments","isLoop"],pc,c(function(a,l){return new vI([SI,NI],a,l)},"initAnimanion")],[{zone:"main"},[["keyMoments","keyMoments"],["activeKeyMoments","activeKeyMoments"],[`animationProperties@${e.rootPath.toString()}`,"animationProperties@"]],RI],[{zone:"main"},[["keyMoments","list"],["activeKeyMoments","keys"]],Za,Za.BACKWARD,Ao,Su],[{zone:"main"},[["keyMoments","list"],["activeKeyMoments","keys"]],Za,Za.FORWARD,Ao,Su],...Object.values(pl()),[{zone:"main"},["t","playing","activeKeyMoments",[`animationProperties@${e.rootPath.toString()}`,"animationProperties@"]],tQ],[{zone:"before-layout"},[["keyMoments","keyMoments"],["t","t"],["duration","duration"],["isLoop","isLoop"],["perpetual","perpetual"],["playing","playing"],[`animationProperties@${e.rootPath.toString()}`,"animationProperties@"]],Lk],[{zone:"before-layout"},["keyMoments","t","isLoop",["../font","font"],"animationProperties@"],QI],[{zone:"main"},[],qt,n],[{zone:"activeKeyMomentsMain"},[],yn,"h2",{},"Selected Key Moments"],[{},[["activeKeyMoments","collection"]],ZI,new Map([...t,["main",n]]),wI],[{zone:"main"},[["t","value"]],xC,"Animation T",null,{min:0,max:1,value:0,step:.001}]];super(e,s,r)}update(...e){this.widgetBus.wrapper.getProtocolHandlerImplementation("animationProperties@").resetUpdatedLog(),super.update(...e)}initialUpdate(...e){this.widgetBus.wrapper.getProtocolHandlerImplementation("animationProperties@").resetUpdatedLog(),super.initialUpdate(...e)}}const IL=Object.freeze(Object.defineProperty({__proto__:null,AnimationSample:QI,Controller:Xk,KeyMomentController:wI,KeyMomentModel:GI,KeyMomentsController:ZI,KeyMomentsModel:Fh,KeyMomentsTimeline:RI,Model:Hk,_setActiveKeyMomentsValues:Su,activeKeyMomentsSortedKeys:Ao,axisLocationsGen:NI,createLabelForKeyMoment:uo,fontSizeGen:SI},Symbol.toStringTag,{value:"Module"}));class QA extends vr{static{c(this,"UIOTFeaturesSetSelect")}_isDisabledFn=null;_isHiddenFn=null;_featuesCache=null;_font=null;static OPTION_FILTERS=Object.fromEntries(["IN_FONT","ALL"].map(e=>[e,e]));constructor(e,t,n,s,r=[],o,a){super(e,t,n,null,[!1,...r.slice(1)]),this._ppsRecord=s,[this._allowNull=!1]=r,this._optionsFilter=this.constructor.OPTION_FILTERS.IN_FONT,this._getDefaults=o,this._requireUpdateDefaults=a}_optionGetLabel(e,t){return typeof t=="string"?t:e in this._font.features?`${e} – ${this._font.features[e].bestName}`:`[${e}] – ${t.friendlyName}`}_optionGetGroup(e){if(e===null)return super._optionGetGroup();const t=kn.groups.get(e.group);if(!t)throw new Error(`KEY ERROR group "${e.group}" not found`);return[e.group,t.label,t.index]}*_optionsGen(){yield*Object.entries(kn.ui)}async _changeSelectedValueHandler(){this._onChangeFn&&this._onChangeFn(this.value)}_getIsHiddenFn(){if(this._optionsFilter===this.constructor.OPTION_FILTERS.IN_FONT)return e=>e!=="[_NULL_]"&&!(e in this._font.features);if(this._optionsFilter===this.constructor.OPTION_FILTERS.ALL)return null;throw new Error(`NOT IMPLEMENTED for optionsFilter: "${this._optionsFilter}" known values: ${Object.values(this.constructor.OPTION_FILTERS).join(", ")}`)}update(e){let t=!1;if(e.has("collection")){const s=e.get("collection");this._isDisabledFn=r=>s.has(r),t=!0}const n=this._requireUpdateDefaults(e);if(e.has("rootFont")||n){let s;if(n){const r=this._getDefaults(this._ppsRecord,"font",!1);r&&(s=r)}s||(s=this.getEntry("rootFont").value),this._updateOptions(s)}else t&&this._updateRestrictions()}_updateRestrictions(){const e=new Map(Array.from(this._select.getElementsByTagName("optgroup")).map(n=>[n,n.getElementsByTagName("option").length]));for(const n of this._select.options){n.disabled=this._isDisabledFn?this._isDisabledFn(n.value):!1;const s=this._isHiddenFn?this._isHiddenFn(n.value):!1;n.style.setProperty("display",s===!0?"none":null),s&&e.has(n.parentElement)&&e.set(n.parentElement,e.get(n.parentElement)-1)}let t=e.size;for(const[n,s]of e){const r=s===0;n.style.setProperty("display",r?"none":null),r&&(t-=1)}this._select.disabled=t===0}_updateOptions(e,...t){this._font=e,super._updateOptions(e,...t),this._select.selectedIndex===-1&&(this._select.options[0].selected=!0),this._isHiddenFn=this._getIsHiddenFn(),this._updateRestrictions()}setOptionsFilter(e){this._optionsFilter=e,this._isHiddenFn=this._getIsHiddenFn(),this._updateRestrictions()}}class zk extends me{static{c(this,"UIBooleanOTFeature")}constructor(e,t,n,s,r){super(e),[this.element,this._label,this._friendlyName,this._input]=this._initTemplate(t),this._tagName=t,this._ppsRecord=n,this._getDefaults=s,this._requireUpdateDefaults=r}_getTemplate(e){return e("div",{class:"ui_boolean_ot_feature"},e("label",null,e("input",{class:"ui_boolean_ot_feature-input",type:"checkbox"})," ",e("strong",{class:"ui_boolean_ot_feature-label-content"},"(not initialized)")," ","–"," ",e("span",{class:"ui_boolean_ot_feature-friendly_name"},"(not initialized)")," ",e("button",{class:"ui_boolean_ot_feature-remove ui_button ui_button-remove",title:"remove"},"✖")))}_initTemplate(e){const t=this._getTemplate(this._domTool.h),n=t.querySelector(".ui_boolean_ot_feature-label-content"),s=t.querySelector(".ui_boolean_ot_feature-friendly_name"),r=t.querySelector(".ui_boolean_ot_feature-input"),o=t.querySelector(".ui_boolean_ot_feature-remove");return n.textContent=e,r.addEventListener("change",this._changeStateHandler(this._changeValueHandler.bind(this))),o.addEventListener("click",this._changeStateHandler(this._deleteValueHandler.bind(this))),this._insertElement(t),[t,n,s,r]}_changeValueHandler(){this.getEntry("value").value=this._input.checked}_deleteValueHandler(){const e=D.fromString(this.widgetBus.getExternalName("value")).parent;this.getEntry(e).delete(this._tagName)}_setFont(e=null){const t=this._tagName,n=e!==null&&t in e.features?e.features[t]:null,s="is-in-font";this._friendlyName.textContent=n?n.bestName:kn.all[t].friendlyName,this.element.classList[n?"add":"remove"](s);const r=" – ",o=this.element.getAttribute("title").split(r);o.splice(1,o.length>1?1:0,n?"is in font":"[is not in font]"),this.element.setAttribute("title",o.join(r))}update(e){if(e.has("value")){this._input.checked=e.get("value").value;const s=this._tagName,r="is-default-value",o=kn.all[s].uiBoolean===this._input.checked,a=o?"is the default":"*is not the default";this.element.classList[o?"add":"remove"](r),this.element.setAttribute("title",a)}let t=null;const n=this._requireUpdateDefaults(e);if(e.has("rootFont")||n)if(n){const s=this._getDefaults(this._ppsRecord,"font",!1);s&&(t=s)}else e.has("rootFont")&&(t=e.get("rootFont").value);t||(t=this.getEntry("rootFont").value),this._setFont(t)}}class Jk extends Mo{static{c(this,"UIActiveOTFeatures")}[Zs]=!0;constructor(e,t,n,s,r,o){const a=e.domTool.createElement("div",{class:"ui_ot_active_features"}),l=new Map([...t,["local",a]]);super(e,l),this._groups=new Map,this._insertElement(a),this._ppsRecord=n,this._getDefaults=s,this._requireUpdateDefaults=r,this._updateDefaultsDependencies=o}_getZone(e){const t=kn.all[e],n=`group-${t.group}`,s=kn.groups.get(t.group);if(!this._groups.has(n)){const o=this._domTool.h,a=`ui_ot_active_features-group ui_ot_active_features-group_${t.group}`,l=o("div",{class:a},o("h4",null,s.label),o("div",{class:"ui_ot_active_features-group-items"})),A=l.querySelector(".ui_ot_active_features-group-items");this._groups.set(n,{inner:A,outer:l,info:s})}const r=this._groups.get(n);if(!this._zones.has(n)){this._zones.set(n,r.inner);let o=null,a=null;for(const l of this._groups.values())r!==l&&(l.info.index<=r.info.index?(!o||o.info.index<=l.info.index)&&(o=l):!o&&l.info.index>r.info.index&&(!a||a.info.index>l.info.index)&&(a=l));o?this._domTool.insertAfter(r.outer,o.outer):a?this._domTool.insertBefore(r.outer,a.outer):this._zones.get("local").append(r.outer)}return n}_cleanUpGroups(){for(const[e,t]of this._groups)t.inner.children.length===0&&(this._zones.delete(e),t.outer.remove(),this._groups.delete(e))}_update(...e){const t=super._update(...e);return this._cleanUpGroups(),t}_getWidgetSetup(e){const[t,n]=e.parts.slice(-2);return[{zone:this._getZone(n)},[[`./${t}/${n}`,"value"],["/font","rootFont"],...this._updateDefaultsDependencies],zk,n,this._ppsRecord,this._getDefaults,this._requireUpdateDefaults]}_createWrapper(e){const t=this._childrenWidgetBus,[n,s,r,...o]=this._getWidgetSetup(e);return this._initWrapper(t,n,s,r,...o)}}class mc extends we{static{c(this,"UIOTFeaturesChooser")}constructor(e,t,n,s,r){const o=e.domTool.h,a=o("div",{class:"ui_opentype_features_chooser"}),l=new Map([...t,["main",a]]),A=Ze.createSimpleRecord(Rt,"font");e.insertElement(a),super(e,l,[[{zone:"main"},[],qt,o("h3",{class:"ui_opentype_features_chooser-label"},"OpenType Features")],[{zone:"main"},[],qt,o("strong",{class:"ui_generic_select-label"},"Add Feature")],[{zone:"main"},[],qt,o("select",{class:"ui_opentype_features_chooser-select_tags_filter",onChange:c(u=>this._changeSelectFilter(u.target.value),"onChange")},o("option",{selected:!0,value:QA.OPTION_FILTERS.IN_FONT},"Show tags in font"),o("option",{value:QA.OPTION_FILTERS.ALL},"Show all tags"))],[{zone:"main",id:"features-select"},[[e.getExternalName("rootFont"),"rootFont"],[e.getExternalName("openTypeFeatures"),"collection"],...r],QA,"ui_opentype_features_chooser-select",null,A,[!0,"Select a feature to add…"],n,s],[{zone:"main"},[],qt,o("button",{class:"ui_opentype_features_chooser-add_feature",onClick:c(u=>this._addFeatureHandler(u),"onClick")},"Add Feature")],[{zone:"main"},[[e.getExternalName("openTypeFeatures"),"collection"]],Jk,l,A,n,s,r]])}_changeSelectFilter(e){this.getWidgetById("features-select").setOptionsFilter(e)}_addFeatureHandler(){const e=this.getWidgetById("features-select"),t=e.value;t!==null&&this._changeState(()=>{const n=this.getEntry("openTypeFeatures");if(n.has(t))return;const s=n.constructor.Model.createPrimalDraft(n.dependencies);s.value=kn.all[t].uiBoolean,n.set(t,s)})}}class ta extends ye{static{c(this,"_BaseColorModel")}static createClass(e,...t){return super.createClass(e,...t)}}const Uk=Pt.createClass("ColorTypeModel"),Kk=ye.createClass("AvailableColorTypeModel",["label",qe],["typeClass",Uk]),kI=Ue.createClass("AvailableColorTypesModel",Kk),_I=Gt.createClass("PercentNumberModel",{min:0,max:100,defaultValue:0,toFixedDigits:5}),As=ke.createClass(_I),jk=Gt.createClass("AlphaPercentNumberModel",{min:0,max:100,defaultValue:100,toFixedDigits:5}),qk=ke.createClass(jk),YI=Gt.createClass("PercentWithNegativeNumberModel",{min:-100,max:100,defaultValue:0,toFixedDigits:5}),Nu=ke.createClass(YI),WI=Gt.createClass("HueNumberModel",{min:0,max:1,defaultValue:0,toFixedDigits:7}),DI=ke.createClass(WI),xh=[["alpha",qk]],TI=ta.createClass("OKLCHColorModel",["L",As],["C",As],["H",DI],...xh),FI=ta.createClass("OKLABColorModel",["L",As],["a",Nu],["b",Nu],...xh),xI=ta.createClass("RGBColorModel",["R",As],["G",As],["B",As],...xh),[Lh,$k]=Jl(kI,[["OKLCH","OKLCH",TI],["OKLAB","OKLAB",FI],["RGB","RGB",xI]]),Vt=ye.createClass("ColorModel",...Pi.createWithInternalizedDependency("availableColorTypes",kI,Lh),["colorTypeKey",new ce("availableColorTypes",ce.ALLOW_NULL,ce.SET_NULL)],["colorTypeModel",new Xn("colorTypeKey")],["instance",nn.createClass("DynamicColorModel",ta,"colorTypeModel",["availableColorTypes"])]),fl=new Map([[TI,"oklch"],[FI,"oklab"],[xI,"rgb"]]),ho=new Map(Array.from(fl).map(([i,e])=>[e,$k.get(i)])),e_=new Set([_I,As,YI,Nu]),t_=new Set([WI,DI]);function n_(i,e){return Fo(Vt,"colorTypeKey",i,e)}c(n_,"createColor");function LI(i){if(!ho.has(i.mode))throw new Error(`VALUE ERROR unsupported color mode: "${i.mode}".`);const e=ho.get(i.mode),t=Lh.get(e).value.get("typeClass").value,n=Xi(i.mode).ranges,s={};for(const[r,o]of t.fields.entries()){const a=r.toLowerCase();if(!Object.hasOwn(i,a))continue;const l=i[a],A=n[a],u=vC(o),h=AC(l,A,u);s[r]=h}return s}c(LI,"culoriValuesToColorValuesRange");function i_(i,e){if(!ho.has(i.mode))throw new Error(`VALUE ERROR unsupported color mode: "${i.mode}".`);const t=ho.get(i.mode),n=n_(t,e),s=n.get("instance").wrapped,r=LI(i);for(const o of s.constructor.fields.keys())Object.hasOwn(r,o)&&(s.get(o).value=r[o]);return n}c(i_,"_culoriToColor");function pr(i,e){const t=ho.has(i.mode)?i:Ko("oklch")(i);return i_(t,e)}c(pr,"culoriToColor");function MI(i){const e=i instanceof nn?i.wrapped:i,t=e instanceof ta?e.constructor:e;if(!fl.has(t))throw new Error(`KEY ERROR can't determine culori-js color mode from colorOrColorType ${i} ColorType ${t.name}.`);return fl.get(t)}c(MI,"getCuloriModeFromColor");function na(i){const e=i instanceof nn?i.wrapped:i,t=MI(e),n=Xi(t).ranges,s=Object.fromEntries(Array.from(e.entries()).filter(([,r])=>!(r instanceof ke&&r.isEmpty)).map(([r,o])=>{const a=r.toLowerCase(),l=vC(o.constructor),A=n[a],u=o.value,h=AC(u,l,A);return[a,h]}));return s.mode=t,s}c(na,"colorToCulori");const wA=Symbol("_NOTDEF");function zi(i,e,t=wA){if(t!==wA&&!Array.isArray(t))throw new Error(`VALUE ERROR defaultVal if specified must be an Array: ${t}`);if(!i.startsWith(at))return[null,!1];if(i.split("/").length===2&&(i=`${i}/mode`),!e.has(i)){if(t!==wA)return t;throw new Error(`KEY ERROR property name "${i}" not found in propertyValuesMap.`)}const n=e.get(i);if(!i.endsWith("/mode"))return typeof n=="number"?[null,!0]:(console.warn(`DEPRECATED: color property ${i}:`,n),[null,!1]);const s={mode:n},r=i.split("/",2).at(-1),o=Xi(s.mode);if(!o)throw new Error(`KEY ERROR mode "${s.mode}" not found.`);for(const a of o.channels){const l=`${at}${r}/${a}`;e.has(l)&&(s[a]=e.get(l))}return[s,!0]}c(zi,"getColorFromPropertyValuesMap");function s_(i,e){if(i.mode===e)return i;const t=[],{channels:n}=Xi(i.mode);let s=n.length;for(const o of n)if(!Object.hasOwn(i,o)){if(o==="alpha"){s-=1;continue}if(o==="l"&&i.mode.startsWith("ok")&&e.startsWith("ok")){s-=1;continue}t.push([o,0])}return t.length&&t.length!==s?{...i,...Object.fromEntries(t)}:i}c(s_,"_culoriFixZeros");function Mh(i,e){const t=s_(i,e),n=Object.keys(t),s=n.length===1||n.length===2&&Object.hasOwn(t,"alpha")?{...t,mode:e}:Ko(e)(t);for(const r of Object.keys(s))s[r]===void 0&&delete s[r];return s}c(Mh,"convertCuloriColorMode");function*r_(i){yield*yh(i,Vt)}c(r_,"getColorModelFields");function*o_(i,e){const t=e.get("instance");if(!t.hasWrapped)return;const n="oklch",s=na(t),r=Mh(s,n);for(const[o,a]of Object.entries(r))yield[`${at}${i}/${o}`,a]}c(o_,"colorPropertyGen");function*ia(i,e){for(const t of r_(e.constructor)){const n=e.get(t);yield*o_(t,n)}}c(ia,"colorsGen");class Ji extends ye{static{c(this,"_BaseActorModel")}static createClass(e,...t){return super.createClass(e,...t)}}const a_=Pt.createClass("ActorTypeModel"),VI=ye.createClass("AvailableActorTypeModel",["label",qe],["typeClass",a_]),Cc=Ue.createClass("AvailableActorTypesModel",VI),OI=ye.createClass("ActorModel",["availableActorTypes",new $t("availableActorTypes",Cc)],["actorTypeKey",new ce("availableActorTypes",ce.ALLOW_NULL,ce.SET_NULL)],["actorTypeModel",new Xn("actorTypeKey")],["instance",nn.createClass("DynamicActorModel",Ji,"actorTypeModel",["availableActorTypes","font","installedFonts"])]),Vh=vt.createClass("ActorsModel",OI),Ds=[st.create(["isLoop"],c(function({isLoop:e}){e.value===void 0&&(e.value=!1)},"prepareIsLoop")),["isLoop",ut],["label",qe]];function Qi(i,e){return Fo(OI,"actorTypeKey",i,e)}c(Qi,"createActor");function PI(i){const e="ReferenceActorModel",t=Cc.createPrimalDraft({});for(const[o,a,l]of i){const A=VI.createPrimalDraft({});A.get("typeClass").value=l,A.get("label").value=a,t.push([o,A])}const n=t.metamorphose(),s=n.getDraft();return s.delete(e),[s.metamorphose(),n]}c(PI,"initAvailableActorTypes");class Fr extends we{static{c(this,"ActorRendererContainer")}constructor(e,t,n,s,...r){const o=[[{zone:"layer"},["animationProperties@",["/activeState/t","globalT"],...s],n,...r]];super(e,t,o)}}class HI extends dn{static{c(this,"ActiveActorsRenderingController")}constructor(e,t,n,s){super(e,t),this._layerBaseClass=n,this.__getActorWidgetSetup=s}_getActorWidgetSetup(e){const t=this.getEntry(e),n=t.get("actorTypeKey").value,s=t.get("actorTypeModel"),r=s.get("label").value,o=s.get("typeClass").value;return this.__getActorWidgetSetup({actor:t,typeKey:n,actorTypeModel:s,typeLabel:r,typeClass:o,widgetRootPath:e,widgetRelativeRootPath:D.fromParts(".","instance"),zones:this._zones,layerBaseClass:this._layerBaseClass,getActorWidgetSetup:this.__getActorWidgetSetup})}_createWrapper(e){const t=this._childrenWidgetBus,[n,s,r,...o]=this._getActorWidgetSetup(e);return this._initWrapper(t,n,s,r,...o)}}const l_=Ue.createClass("NumericPropertiesModel",ws),c_=Object.freeze([st.create(["numericProperties"],c(function({numericProperties:e}){for(const[,t]of e){const{min:n,max:s}={min:-1/0,max:1/0};if(typeof t.value!="number")throw new Error(`ASSERTION ERROR expecting a number value but got: ${typeof t.value} in numericProperties`);t.value=Math.max(n,Math.min(s,t.value))}},"sanitizeNumericProperties")),["numericProperties",l_]]),A_=[["isActive",ut]],Oh=[...BI,...A_,...c_],u_=ye.createClass("KeyMomentModel",...Oh,["strokeColor",Vt],["fillColor",Vt]),go=ke.createClass(ws),XI=[["fontSize",go],["textColor",Vt],["backgroundColor",Vt]],zI=Ue.createClass("OpenTypeFeaturesModel",ut,{ordering:Ue.ORDER.KEYS_ALPHA,validateKeyFn:IN}),Ic=[["openTypeFeatures",zI]],yc=[...Oh,...Ic,...Jo,...XI],h_=[...Oh,...Ic,...Jo,["fontSize",go],["textColor",Vt],["stageBackgroundColor",Vt]],d_=ye.createClass("TypographyKeyMomentModel",...yc),g_=ye.createClass("StageKeyMomentModel",...h_),Ph=ke.createClass(ut),p_=ke.createClass(ys),an=ke.createClass(qe),f_=ke.createClass(ws),JI=Wt.createClass("TextAlignmentModel",["left","center","right","start","end"],"left"),m_=ke.createClass(JI),UI=Wt.createClass("CSSPositioningVerticalModel",["top","bottom"],"top"),C_=ke.createClass(UI),KI=Wt.createClass("CSSPositioningHorizontalModel",["left","right","both"],"left"),I_=ke.createClass(KI),jI=Wt.createClass("CSSDirectionModel",["ltr","rtl","inherit"],"inherit"),y_=ke.createClass(jI),qI=Wt.createClass("HeightTreatmentModel",["default","baselineToBottomFix"],"default"),b_=ke.createClass(qI),E_=ye.createClass("TypeSettingKeyMomentModel",...yc,["textRun",an],["textAlign",m_],["positioningHorizontal",I_],["positioningVertical",C_],["direction",y_],["heightTreatment",b_]),$I=vt.createClass("KeyMomentsModel",u_);vt.createClass("TypographyKeyMomentsModel",d_);const B_=vt.createClass("StageKeyMomentsModel",g_),ey=vt.createClass("TypeSettingKeyMomentsModel",E_),sa=[["installedFonts",new $t("installedFonts",lo)],["parentFont",new $t("font",ao)],["localActiveFontKey",new ce("installedFonts",ce.ALLOW_NULL,ce.CUSTOM,function*(i,e){if(this.allowNull&&(!e||e===ce.NULL))return ce.NULL;const t=yield new Do(this,i,e,this.allowNull?ce.SET_NULL:ce.NO_ACTION);if(!i.has(t)){if(this.allowNull)return ce.NULL;throw js(new Error(`CONSTRAINT ERROR ${this} Can't set key from requested ResourceRequirement ${t.toString()} is not in targetContainer "${this.targetName}" or NULL.`))}return t})],["localFont",new Xn("localActiveFontKey")],["font",new fC("localFont","parentFont",ao)]];function li(i,e,t=!1){const n="axesLocations/";t===!1&&(e.has(`${Ne}fontSize`)?i.style.setProperty("font-size",`${e.get(Ne+"fontSize")}pt`):i.style.removeProperty("font-size"));const s=[],r=[];for(const[o,a]of e){if(o.startsWith(bn)){const u=o.slice(bn.length);s.push(`"${u}" ${a?1:0}`);continue}if(!o.startsWith(n))continue;const l=o.slice(n.length),[A]=Yo(l);A&&r.push(`"${l}" ${a}`)}i.style.setProperty("font-feature-settings",s.join(",")),i.style.setProperty("font-variation-settings",r.join(","))}c(li,"setTypographicPropertiesToSample");function v_(i){const e="axesLocations/",t=[];for(const[n,s]of i){if(!n.startsWith(e))continue;const r=n.slice(e.length);t.push([r,s])}return Object.fromEntries(t)}c(v_,"getAxesLocations");function Wn(i,e,t,n){for(const[s,r]of n){const[o]=zi(s,e,[null]),[,a]=o!==null?[,o]:t(s);if(a){const l=gc(a);i.style.setProperty(r,l)}else i.style.removeProperty(r)}}c(Wn,"actorApplyCSSColors");const ui=Symbol("DYNAMIC_MARKER"),ty=Symbol("REMOVE_PROPERTY");function ra(i,e,t){return i.has(t)?[!0,i.get(t)]:e(t)}c(ra,"getPropertyValue");const Qu=new Map;for(const i of[["left","right"],["top","bottom"]]){const e=new Set(i);for(const t of e)Qu.set(t,e)}function*G_(i,e,t){const[n,s,r,...o]=t,[,a]=ra(i,e,s);if(Qu.has(a)){const l=Qu.get(a);for(const A of l)A!==a&&(yield[ty,A])}if(typeof r!="function")yield[n,a,r,...o];else for(const l of r(a))yield[n,l,...o]}c(G_,"_massagePropertyData");function R_(i,e,t,n){const[s,r,o,a]=n,[l,A]=ra(e,t,s);typeof r=="function"?r(i,A,e,t,l):i.style.setProperty(r,`${a?a(A):A}${l?o:""}`)}c(R_,"_actorApplyCssProperty");function Ui(i,e,t,n){for(var s=[...n];s.length;){const r=s.pop();if(r[0]===ty){const[,o]=r;i.style.removeProperty(o)}else r[0]===ui?s.push(...G_(e,t,r.slice(1))):R_(i,e,t,r)}}c(Ui,"actorApplyCssProperties");function bc(i){return i==="both"?["left","right"]:[i]}c(bc,"cssPositioningHorizontalPropertyExpander");const S_=Pt.createClass("GenericTypeModel"),N_=ye.createClass("AvailableTypeModel",["label",qe],["typeClass",S_]),ml=Ue.createClass("AvailableTypesModel",N_);function ny(i){return Jl(ml,i)}c(ny,"createGenericAvailableTypes");function iy(i,e=null,t=[],n=[]){const s=i[0].toUpperCase()+i.slice(1),r=i[0].toLowerCase()+i.slice(1),o=uC(i).toUpperCase(),a=`${o}_TYPE_TO_${o}_TYPE_KEY`,l=`available${s}Types`,A=`${s}Model`,u=`${r}TypeKey`,h=`${r}Model`,d=`Dynamic${A}`,g={},p=[];if(e!==null){[g[l],g[a]]=ny(e);const m=g[l];p.push(...Pi.createWithInternalizedDependency(l,ml,m))}else p.push([l,new $t(l,ml)]);g[A]=ye.createClass(A,...p,[u,new ce(l,ce.ALLOW_NULL,ce.SET_NULL)],[h,new Xn(u)],["instance",nn.createClass(d,l,h,[l,...n])],...t);const f=g[A];return g[`create${s}`]=function(m,y){return Fo(f,u,m,y)},g[`deserialize${A}`]=function(m,y){const v=Object.assign({},Le,{format:Ol});return gC(f,m,y,v)},g}c(iy,"createDynamicModel");function*sy([i,...e]){if(!i)yield[];else for(let t of i)for(let n of sy(e))yield[t,...n]}c(sy,"cartesianProductGen$1");class Ec extends ye{static{c(this,"_BaseAxesMathItemModel")}static createClass(e,...t){return super.createClass(e,...t)}}const Q_=Pt.createClass("AxesMathItemTypeModel"),w_=ye.createClass("AvailableAxesMathItemTypeModel",["label",qe],["typeClass",Q_]),Hh=Ue.createClass("AvailableAxesMathItemTypesModel",w_),ry=ye.createClass("AxesMathItemModel",["availableAxesMathItemTypes",new $t("availableAxesMathItemTypes",Hh)],["axesMathItemTypeKey",new ce("availableAxesMathItemTypes",ce.ALLOW_NULL,ce.SET_NULL)],["axesMathItemTypeModel",new Xn("axesMathItemTypeKey")],["instance",nn.createClass("DynamicAxesMathItemModel",Ec,"axesMathItemTypeModel",["availableAxesMathItemTypes"])]),Z_=vt.createClass("AxesMathItemsModel",ry),oy=Ec.createClass("AxesMathLocationsSumModel",["items",Z_]),k_=Wt.createClass("AxesMathAxisLogicalSymbolicLocationModel",["default","min","max","number"],"default"),__=Gt.createClass("AxesMathAxisLocationNumberModel",{defaultValue:0}),Y_=ke.createClass(__),po=ye.createClass("AxesMathAxisLocationValueModel",["logicalValue",k_],["numericValue",Y_],st.create(["logicalValue","numericValue"],c(function({logicalValue:e,numericValue:t}){e.value==="number"?t.isEmpty&&(t.value=t.constructor.Model.defaultValue):t.clear()},"initAxesMath"))),Xh=Ue.createClass("AxesMathAxisLocationsModel",po,{ordering:Ue.ORDER.KEYS_ALPHA,validateKeyFn:Yo}),W_=Ec.createClass("AxesMathLocationModel",["axesLocations",Xh]),zh=vt.createClass("AxesMathAxisLocationValuesModel",po),D_=Ue.createClass("AxesMathLocationValuesMapModel",zh,{validateKeyFn:Yo}),T_=Ec.createClass("AxesMathLocationsProductModel",["axesLocationValuesMap",D_]),[Jh,F_]=Jl(Hh,[["LocationsSum","Collection",oy],["LocationsProduct","Product",T_],["Location","Location",W_]]);function ay(i,e){return Fo(ry,"axesMathItemTypeKey",i,e)}c(ay,"createAxesMathItem");function*x_(i){yield Array.from(i.get("axesLocations"))}c(x_,"locationToLocationsGen");function*L_(i){for(const[,e]of i.get("items"))yield*ly(e.get("instance").wrapped)}c(L_,"sumToLocationsGen");function*M_(i){const e=i.get("axesLocationValuesMap"),t=[],n=[];for(const[s,r]of e)t.push(s),n.push(r.value);for(const s of sy(n))yield Array.from(tn(t,s))}c(M_,"productToLocationsGen");function*ly(i){const e=i.isDraft?i.metamorphose():kt(i),t=F_.get(e.constructor);switch(t){case"LocationsSum":yield*L_(e);break;case"LocationsProduct":yield*M_(e);break;case"Location":yield*x_(e);break;default:throw new Error(`NOT IMPLEMENTED toLocations for typeKey: "${t}" item: ${e}.`)}}c(ly,"toLocationsGen");function V_(i,e){const t=[];for(const n of e){const s=[];for(const[r,o]of n){const a=[],l=`${r}    `.slice(0,4);if(!(l in i))continue;a.push(l);const A=i[l],u=o.get("logicalValue").value;if(u==="number"){const h=o.get("numericValue").value,d=Math.min(A.max,Math.max(A.min,h));a.push(d)}else a.push(A[u]);s.push(a)}t.push(s)}return t}c(V_,"_toAbsoluteLocations");function O_(i){const e=[];for(const t of i){const n=[];for(const[s,r]of t){const o=r.get("logicalValue").value,a=o==="number"?r.get("numericValue").value:o;n.push(`${s}: ${a}`)}e.push(n.join(", "))}return e}c(O_,"_toLabelsForSymbolicLocations");function _p(i,e,t=[]){const n=i.constructor.Model,s=[];let r=0;for(const o of e){const a=i.has(r)?i.getDraftFor(r):n.createPrimalDraft(i.dependencies),l=t.length>r?t[r]:o.map(([h,d])=>`${h} ${d}`).join(", "),A=a.getDraftFor("axesLocations"),u=a.getDraftFor("label");u.value=l,A.arraySplice(0,1/0);for(const[h,d]of o)A.setSimpleValue(h,d);s.push(a),r++}i.splice(0,1/0,...s)}c(_p,"_updateKeyMomentsAxesLocationsFromLocations");function*P_(i,e,t,n,s){const r=Array.from(ly(e)),o=new Map,a=c((g,p,f)=>{const m=V_(p.value.axisRanges,f);g.set(p,m)},"_setFont"),l=[[]],A=i.getDraftFor("activeActors");a(o,n,r);for(const g of A.ownKeys()){const p=xo(A,D.fromParts(g,"instance")),f="localActiveFontKey",m=p.get(f),y=p.wrapped.constructor.foreignKeys.get(f);if(m.value!==ce.NULL&&!t.has(m.value)){const S=y.constraint(t,m.value);m.value=S.next instanceof Function?yield*S:S}const v=m.value!==ce.NULL,G=v?kt(t.get(m.value)):n;p.get("isLoop").value=!0,o.has(G)||a(o,G,r);const R=v?o.get(G):l,Q=p.getDraftFor("keyMoments");_p(Q,R.length?R:l)}const u=o.get(n),h=i.getDraftFor("keyMoments"),d=O_(r);_p(h,u.length?u:l,d),s.value=h.size*2}c(P_,"applyAxesMathLocations");class Uh extends bs.UIItem{static{c(this,"UIAxesMathLocationValue")}static ROOT_CLASS="ui-axes_math-location_value";static BASE_CLASSES=[...super.BASE_CLASSES,super.ROOT_CLASS];static TYPE_CLASS_PART=null;static ITEM_DATA_TRANSFER_TYPE_PATH=pe.AXESMATH_LOCATION_VALUE_PATH;static TEMPLATE=`<div
        tabindex="0"
        ><!-- insert: label-element --><!-- insert: drag-handle --><select
                required
        ></select><input
                type="number"
                step="0.01"
                size="5"
        /><output>(UNINITIALIZED)</output></div>`;_initTemplate(){const e=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE).firstElementChild,t=e.querySelector("select"),n=e.querySelector("input[type=number]"),s=e.querySelector("output"),r=this.getEntry("value").constructor,o=r.fields.get("logicalValue"),a=r.fields.get("numericValue").Model,l=[];this._setClassesHelper([[t,"logical_value"],[n,"numeric_value"],[s,"output"]]);for(const A of o.enumItems){const u=this._domTool.createElement("option");u.value=A,u.label=A,l.push(u)}return t.append(...l),t.value=o.defaultValue,t.addEventListener("change",this._changeStateHandler(()=>{const A=this.getEntry("./logicalValue");A.value=this._selectLogicalValue.value})),t.addEventListener("blur",()=>{const A=this.getEntry("./logicalValue");this._selectLogicalValue.value=A.value}),n.value=a.defaultValue,n.addEventListener("input",this._changeStateHandler(()=>{const A=this.getEntry("./numericValue"),u=parseFloat(this._inputNumericValue.value.trim());isNaN(u)||(A.value=u)})),n.addEventListener("blur",()=>{const A=this.getEntry("./numericValue");this._inputNumericValue.value=A.isEmpty?A.defaultValue:A.value}),this._insertElement(e),{element:e,_selectLogicalValue:t,_inputNumericValue:n,_output:s}}update(e){if(e.has("value")){const t=e.get("value"),n=t.get("logicalValue").value;if(this._selectLogicalValue!==this._domTool.document.activeElement&&(this._selectLogicalValue.value=n),n==="number"){const s=t.get("numericValue").value;this._inputNumericValue!==this._domTool.document.activeElement&&(this._inputNumericValue.style.display="",this._inputNumericValue.value=s),this._output.textContent=s}else this._inputNumericValue.style.display="none",this._inputNumericValue.value=0,this._output.textContent=n}}}class Kh extends bs{static{c(this,"UIAxesMathLocationValues")}static ROOT_CLASS="ui-axes_math-location_values";static BASE_CLASSES=[...super.BASE_CLASSES,super.ROOT_CLASS];static TYPE_CLASS_PART=null;static UIItem=Uh;static ITEM_DATA_TRANSFER_TYPE_PATH=pe.AXESMATH_LOCATION_VALUE_PATH;static ITEM_DATA_TRANSFER_TYPE_CREATE=pe.AXESMATH_LOCATION_VALUE_CREATE;static DROP_INSERT_DIRECTION=bs.DROP_INSERT_DIRECTION_HORIZONTAL;_createNewItem(e,t,n,s){const r=n.constructor.Model.createPrimalDraft(n.dependencies);return hy(r,s),r}}const cy={rootClass:"ui_axes_math-axis_tag",inputAttributes:{minlength:"1",maxlength:"4",size:"4",pattern:"[A-Za-z]{1}[A-Za-z0-9]{0,3}"}};class H_ extends _t.UIKeyCreate{static{c(this,"UIAxesMathAxisTagCreate")}constructor(e,t,n={},...s){const r={...cy,...n};super(e,t,r,...s)}}class X_ extends _t.UIKeyChange{static{c(this,"UIAxesMathAxisTagChange")}constructor(e,t,n={},...s){const r={...cy,...n};super(e,t,r,...s)}}class wu extends _t{static{c(this,"_UIBaseAxesMap")}static ROOT_CLASS="ui_axes_math-map";static BASE_CLASSES=[...super.BASE_CLASSES,super.ROOT_CLASS];static UIKeyCreate=H_;static UIKeyChange=X_;static KEY_ADD_BUTTON_LABEL="add tag";_validateKeyString(e){const[t,n]=super._validateKeyString(e);return t?Yo(e):[t,n]}}class z_ extends wu{static{c(this,"UIAxesMathLocationsProduct")}static TYPE_CLASS_PART="product";static VISUAL_ORDER_STRATEGY=_t.VISUAL_ORDER_STRATEGY_NATURAL;static KEY_DATA_TRANSFER_TYPE=pe.AXESMATH_LOCATION_VALUES_KEY_PATH;_createWrapperValue(e,t){const n=this._childrenWidgetBus,s={rootPath:this.widgetBus.rootPath.append("axesLocationValuesMap"),relativeRootPath:D.fromParts(".",t),zone:e},r=[[".","collection"]],o=Kh,a=new Map([["main",this._zones.get(e)]]),l=[a];return this._initWrapper(n,s,r,o,...l)}_createKeyValue(e){const t=e.constructor.Model.createPrimalDraft(e.dependencies),n=t.constructor.Model.createPrimalDraft(t.dependencies);return t.push(n),t}}class Ay extends wu{static{c(this,"UIAxesMathLocation")}static TYPE_CLASS_PART="location";static VISUAL_ORDER_STRATEGY=wu.VISUAL_ORDER_STRATEGY_NATURAL;static KEY_DATA_TRANSFER_TYPE=pe.AXESMATH_LOCATION_KEY_PATH;_createWrapperValue(e,t){const n=this._childrenWidgetBus,s={rootPath:this.widgetBus.rootPath.append("axesLocations"),relativeRootPath:D.fromParts(".",t),zone:e},r=[["./","value"]],o=Uh,a=[],l=!0,A=[a,l];return this._initWrapper(n,s,r,o,...A)}}class J_ extends Ho{static{c(this,"UIAxesMathLocationsSumItem")}static ROOT_CLASS="ui-axes_math-locations";static BASE_CLASSES=[...super.BASE_CLASSES,super.ROOT_CLASS];static TYPE_CLASS_PART="sum_item";static ITEM_DATA_TRANSFER_TYPE_PATH=pe.AXESMATH_ITEM_PATH;constructor(e,t,n=[],s=!1){super(e,t,n,s),this._currentTypeKey=null}_createWrapperForType(e){const t={rootPath:this.widgetBus.rootPath.append("instance"),zone:"local"},n=[];let s,r;const o=[],a=Jh.get(e).get("label").value;switch(e){case"LocationsSum":s=uy,n.push(["./items","collection"]),r=[this._zones,this._childrenSettings,o,a];break;case"LocationsProduct":s=z_,n.push(["axesLocationValuesMap","childrenOrderedMap"]),r=[this._zones,o,a,!0];break;case"Location":s=Ay,n.push(["axesLocations","childrenOrderedMap"]),r=[this._zones,o,a,!0];break;default:throw new Error(`UNKOWN TYPE ${e} in ${this}`)}return[t,n,s,...r]}_createWrappersForType(e){const t=[this._createWrapperForType(e)],n=[];for(const[s,r,o,...a]of t){const l=this._initWrapper(this._childrenWidgetBus,s,r,o,...a);n.push(l)}return n}_provisionWidgets(){const e=this.getEntry("."),t=e.get("axesMathItemTypeKey").value;if(this._currentTypeKey===t)return new Set;this._currentTypeKey=t;const n=this._createWrappersForType(t),s=this._widgets.splice(0,1/0,...n);for(const r of s)this._destroyWidget(r);return super._provisionWidgets()}}class uy extends bs{static{c(this,"UIAxesMathLocationsSum")}static ROOT_CLASS="ui_axes_math-locations_sum";static BASE_CLASSES=[...super.BASE_CLASSES,super.ROOT_CLASS];static TYPE_CLASS_PART=null;static UIItem=J_;static ITEM_DATA_TRANSFER_TYPE_PATH=pe.AXESMATH_ITEM_PATH;static ITEM_DATA_TRANSFER_TYPE_CREATE=pe.AXESMATH_ITEM_CREATE;constructor(e,t,n,s=[],r=null){const o=r?e.domTool.createElement("span",{class:"typeroof-ui-label"},r):null,a=e.domTool.createElement("div",{}),l=e.domTool.createElement("div",{},[]),A=new Map([...t,["local",l],["main",a]]);l.append(a),super(e,A,"main"),r&&this.element.append(o),this.element.append(a),this._setClassesHelper([...r?[[o,"label"]]:[],[a,"items"]]);for(const u of s)this.element.addEventListener(...u);this._childrenSettings=n}_createNewItem(e,t,n,s){return ay(s,n.dependencies)}}let U_=class extends me{static{c(this,"UIKeyMomentsLinkNavigation")}static TEMPLATE=`<div class="ui_key_moments_link_navigation">
<h4 class="ui_key_moments_link_navigation-label"><!-- insert: label --></h4>
<ol class="ui_key_moments_link_navigation-list"></ol>
</div>`;static ITEM_TEMPLATE=`<li class="ui_key_moments_link_navigation-list_item"
    ><a class="ui_key_moments_link_navigation-list_item-input"
        ><!-- insert: label --></a></li>`;constructor(e,t){super(e),this._inputToKey=new Map,this._keyToElement=new Map,this._currentKeyMoments=null,this._currentKeyMomentsSecondAndLast=[null,null],[this.element,this._list]=this._initTemplate(t)}_initTemplate(e){const t=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE).firstElementChild,n=t.querySelector(".ui_key_moments_link_navigation-list");return this._domTool.insertAtMarkerComment(t,"insert: label",e),n.addEventListener("click",this._changeStateHandler(this._clickHandler.bind(this)),!0),this._insertElement(t),[t,n]}_clickHandler(e){if(!this._inputToKey.has(e.target))return;e.preventDefault();const t=this._inputToKey.get(e.target),n=this.getEntry("animationProperties@"),s=n.animanion.localAnimanion,r=s.keyMomentsKeyToT.get(t)/s.fullDuration;this.getEntry("t").value=r}_updateControlsList(e){this._domTool.clear(this._list),this._inputToKey.clear(),this._keyToElement.clear();const t=[];for(const[n,s]of e){const r=this._domTool.createFragmentFromHTML(this.constructor.ITEM_TEMPLATE).firstElementChild,o=r.querySelector(".ui_key_moments_link_navigation-list_item-input");t.push(r),this._inputToKey.set(o,n),this._keyToElement.set(n,r),this._domTool.insertAtMarkerComment(r,"insert: label",s.get("label").value||`(item #${n})`)}this._list.append(...t)}_getKeyMomentsAnimationPosition(e){const t=e.fullDuration,n=e.t,s=n*t,r=e.tToKeyMoments,o=r.isLoop,a=[...r.keys()],[l,A]=ea(a,s);if(l===null&&A===null)throw new Error("ASSERTION FAILED KeyMoments must not be  empty.");if(l===null){if(A!==a.length-1)throw new Error(`ASSERTION FAILED: unknown state right "${A}" shoud be ${a.length-1}.`);if(!o){const G=a[A],R=r.get(G).at(-1),[Q]=R;return[1,null,Q]}const u=a[A],h=u,d=r.get(u).at(-1),[g]=d,p=a[0],f=t+p;if(f===h)return[1,null,g];const m=r.get(p).at(0),[y]=m;return[(s-h)/(f-h),g,y]}if(l===A){const u=a[l],h=r.get(u).at(-1),[d]=h;return[1,null,d]}if(A===null){if(!o){const v=a[l],G=r.get(v).at(-1),[R]=G;return[1,null,R]}const u=a[a.length-1],h=u-t,d=r.get(u).at(-1),[g]=d,p=a[l];if(p===h)return[1,null,g];const f=r.get(p).at(0),[m]=f;return[(s-h)/(p-h),g,m]}else{if(A-l!==1)throw new Error(`ASSERTION FAILED left [${l}] and right [${A}] should be directly next to each other but the distance is not 1: ${A-l}.`);const u=a[l],h=r.get(u).at(-1),[d]=h,g=a[A],p=r.get(g).at(0),[f]=p;return[(s-u)/(g-u),d,f]}}update(e){if(e.has("keyMoments")&&this._updateControlsList(e.get("keyMoments")),e.has("animationProperties@")){const t=e.get("animationProperties@");if(t.tToKeyMoments.size){const[n,s,r]=this._getKeyMomentsAnimationPosition(t),o=new Map([[r,n]]);s!==null&&o.set(s,1-n);for(const[a,l]of this._keyToElement)o.has(a)?l.style.setProperty("--animation-local-impact",`${o.get(a)}`):l.style.removeProperty("--animation-local-impact")}}}};class K_ extends we{static{c(this,"UIAxesMath")}constructor(e,t,n,s){const r=e.domTool.createElement("div",{class:"ui_axes_math"}),o=e.domTool.createElement("div"),a=new Map([...t,["main",r],["contents",o]]);super(e,a),this._insertElement(r);const l=[[{zone:"main"},[],tt,n,o],[{zone:"contents",rootPath:e.rootPath.append("axesMath")},[["./items","collection"]],uy,a,{zone:"main"},[],null],[{zone:"contents"},[],Cd,"Create","",[...[...Jh].map(([A,u])=>[pe.AXESMATH_ITEM_CREATE,u.get("label").value,A]),[pe.AXESMATH_LOCATION_VALUE_CREATE,"Product Value","default"]]],[{zone:"contents"},[],Ti,"Drop here to delete","",[pe.AXESMATH_ITEM_PATH,pe.AXESMATH_LOCATION_VALUE_PATH,pe.AXESMATH_LOCATION_KEY_PATH,pe.AXESMATH_LOCATION_VALUES_KEY_PATH]],[{zone:"contents"},[["videoproofArrayV2/keyMoments","keyMoments"],["../font","font"],"duration","t",...s],U_,"Key Moments"]];this._initWidgets(l)}}function hy(i,e){if(typeof e=="string")i.get("logicalValue").value=e;else if(typeof e=="number")i.get("logicalValue").value="number",i.get("numericValue").value=e;else throw new Error(`TYPE ERROR don't know how to handle ${typeof e}.`)}c(hy,"setAxisLocationValue");function oa(i){return typeof i!="string"?[!1,`StyleName must be string but is typeof ${typeof i}.`]:i.length<1?[!1,`StyleName must be at least 1 char long but styleName.length is ${i.length}. StyleName: "${i}".`]:[!0,null]}c(oa,"validateStyleName");class jh extends ye{static{c(this,"_BaseStylePatchModel")}static createClass(e,...t){return super.createClass(e,...t)}}const er=Gt.createClass("LeadingNumberModel",{defaultValue:1.3}),Yp=ke.createClass(er),qh=ye.createClass("ManualLeadingModel",["leading",er]),j_=Gt.createClass("LineWidthNumberModel",{defaultValue:0}),fo=ye.createClass("LineWidthLeadingModel",["lineWidth",j_],["leading",er]),$h=ye.createClass("AutoLinearLeadingModel",["a",fo],["b",fo],["minLeading",Yp],["maxLeading",Yp]),{LeadingAlgorithmModel:aa,createLeadingAlgorithm:q_,deserializeLeadingAlgorithmModel:dy}=iy("LeadingAlgorithm",[["ManualLeading","Manual",qh],["AutoLinearLeading","Auto-Linear",$h]]),$_=[["baseFontSize",go],["relativeFontSize",go],["textColor",Vt],["backgroundColor",Vt]],gy=[["installedFonts",new $t("installedFonts",lo)],["activeFontKey",new ce("installedFonts",ce.ALLOW_NULL,ce.CUSTOM,function*(i,e){if(this.allowNull&&(!e||e===ce.NULL))return ce.NULL;const t=yield new Do(this,i,e,this.allowNull?ce.SET_NULL:ce.NO_ACTION);if(!i.has(t)){if(this.allowNull)return ce.NULL;throw js(new Error(`CONSTRAINT ERROR ${this} Can't set key from requested ResourceRequirement ${t.toString()} is not in targetContainer "${this.targetName}" or NULL.`))}return t})],["font",new Xn("activeFontKey")]],py=[...$_,...Ic],eY=Gt.createClass("ColumnWidthModel",{min:0,defaultValue:40,toFixedDigits:1}),tY=ke.createClass(eY),nY=[["columnWidth",tY],["leading",aa]],iY=Pt.createClass("StylePatchTypeModel"),sY=ye.createClass("AvailableStylePatcheTypeModel",["label",qe],["typeClass",iY]),fy=Ue.createClass("AvailableStylePatchTypesModel",sY),rY=jh.createClass("SimpleStylePatchModel",...py,["axesLocations",Xh],["autoOPSZ",p_],st.create(["autoOPSZ","axesLocations"],c(function({autoOPSZ:e,axesLocations:t}){!e.isEmpty&&e.value&&t.delete("opsz")},"sanitizeAxes")),...gy),my=qe,oY=vt.createClass("StylePatchKeysModel",my),Cy=Ue.createClass("StylePatchLinksMapModel",my,{validateKeyFn:oa}),aY=jh.createClass("CompositeStylePatchModel",["styles",oY]),Cl=new Map,lY=[["SimpleStylePatch","Simple","⨀",rY],["CompositeStylePatch","Composite","⨁",aY]].map(([i,e,t,n])=>(Cl.set(i,t),[i,e,n])),[Il]=Jl(fy,lY),ed=ye.createClass("StylePatchModel",...Pi.createWithInternalizedDependency("availableStylePatchTypes",fy,Il),["stylePatchTypeKey",new ce("availableStylePatchTypes",ce.ALLOW_NULL,ce.SET_NULL)],["stylePatchTypeModel",new Xn("stylePatchTypeKey")],["instance",nn.createClass("DynamicStylePatchModel",jh,"stylePatchTypeModel",["availableStylePatchTypes","font","installedFonts"])]),Zu=Ue.createClass("StylePatchesMapModel",ed,{validateKeyFn:oa}),Es=ye.createClass("TypeSpec",...nY,...py,...Jo,...gy,["children",ye.WITH_SELF_REFERENCE,i=>Ue.createClass("TypeSpecModelMap",i)],["label",qe],["stylePatchesSource",new $t("stylePatchesSource",Zu)],["stylePatches",Cy]);function Bc(i){const e=Il.get(i).get("label").value,t=Cl.get(i);return t?`${t} ${e}`:e}c(Bc,"getStylePatchFullLabel");function cY(i,e){return Fo(ed,"stylePatchTypeKey",i,e)}c(cY,"createStylePatch");function AY(i){const e=[];for(const[t]of fo.fields.entries()){let n=Ne,s=null,r=null;s=`${i.propertyRoot}${t}`;const o=[t,Ze.createSimpleRecord(n,t,s,r)];e.push(o)}return Object.freeze(new Ze(e))}c(AY,"getLineWidthLeadingPPSMap");const{DimensionSequenceModel:yl}=iy("DimensionSequence"),uY=Wt.createClass("GridAxisTypeModel",["font","exo"],"font"),Iy=Pt.createClass("FontAxisTagModel",{sanitizeFN:qe.sanitizeFN,validateFN:c(function(i){return typeof i!="string"?[!1,`value is not typeof string: ${typeof i} (${i})`]:Yo(i)},"validateFN"),defaultValue:"ukwn",serializeFN:qe.serializeFN,deserializeFN:qe.deserializeFN}),yy=Pt.createClass("ExoAxisTagModel",{sanitizeFN:qe.sanitizeFN,validateFN:qe.validateFN,defaultValue:"fontSize",serializeFN:qe.serializeFN,deserializeFN:qe.deserializeFN}),hY=ke.createClass(Iy),dY=ke.createClass(yy),mo=ye.createClass("GridAxisSelectionModel",["type",uY],["fontAxisTagValue",hY],["exoAxisTagValue",dY],st.create(["type","fontAxisTagValue","exoAxisTagValue"],c(function({type:e,fontAxisTagValue:t,exoAxisTagValue:n}){const s=c((r,...o)=>{r.isEmpty&&(r.value=r.constructor.Model.defaultValue);for(const a of o)a.clear()},"setValues");if(e.value==="font")s(t,n);else if(e.value==="exo")s(n,t);else throw new Error(`NOT IMPLEMENTED GridAxisSelectionModel type: ${e.value}.`)},"checkValues"))),vc=Gt.createClass("AmountNumberModel",{defaultValue:2,min:1,max:Number.MAX_SAFE_INTEGER,toFixedDigits:0}),gY=ke.createClass(vc),by=Gt.createClass("StepSizeNumberModel",{defaultValue:1,min:Number.MIN_VALUE,max:Number.MAX_VALUE,sanitizeFN:c(i=>[Math.abs(i),null],"sanitizeFN")}),pY=ke.createClass(by),fY=ye.createClass("NullDimensionModel",["amountValue",vc]),mY=Wt.createClass("SteppingTypeModel",["amount","stepSize"],"amount"),td=ye.createClass("SteppingModel",["type",mY],["amountValue",gY],["stepSizeValue",pY],st.create(["type","amountValue","stepSizeValue"],c(function({type:e,amountValue:t,stepSizeValue:n}){const s=c((r,...o)=>{r.isEmpty&&(r.value=r.constructor.Model.defaultValue);for(const a of o)a.clear()},"setValues");if(e.value==="amount")s(t,n);else if(e.value==="stepSize")s(n,t);else throw new Error(`NOT IMPLEMENTED SteppingModel type: ${e.value}.`)},"checkValues"))),Ey=ye.createClass("RangeDimensionModel",["axis",mo],["start",po],["end",po],["stepping",td]),CY=ye.createClass("ExplicitDimensionModel",["axis",mo],["values",zh]),[IY]=ny([["NULL","NULL-axis",fY],["Range","Range",Ey],["Explicit","Explicit Stops",CY]]),nd="dimensionX",id="dimensionY",yY="dimensionZ",ku=new Map([[nd,"X-Dimension"],[id,"Y-Dimension"],[yY,"Z-Dimension"]]),bY=new Set(ku.keys());function EY(i){return ku.has(i)?ku.get(i):i}c(EY,"dimension2Label");function xr(...i){const e=jC(...i);if(e===void 0)throw new Error(`VALUE ERROR culori parse returned undefined for input: ${i.join(", ")}`);return e}c(xr,"culoriParse");function Lr(i){return Object.freeze(new it(Object.entries(i).map(([e,t])=>[e,Object.freeze(t)])))}c(Lr,"_frozenMapFromObject");const Gc={[dr]:Lr({x:{default:0,inherit:!1},y:{default:0,inherit:!1},"z-index":{default:0,step:1,inherit:!1},r:{name:"Radius",min:0,default:0,inherit:!0},t:{name:"Children Time",default:0,inherit:!0},width:{default:0,inherit:!1},height:{default:0,inherit:!1},"line-height-em":{default:1.3,inherit:!0},scale:{default:1,inherit:!1}}),[at]:Lr({textColor:{inherit:!0,label:"Text Color",default:Object.freeze(xr("oklch(0% 0 none)"))},backgroundColor:{inherit:!1,label:"Background Color",default:Object.freeze(xr("oklch(100% 0 none / 0%)"))},stageBackgroundColor:{inherit:!1,label:"Background Color",default:Object.freeze(xr("oklch(100% 0 none)"))},strokeColor:{inherit:!1,label:"Stroke Color",default:Object.freeze(xr("oklch(0% 0 none / 0%)"))},fillColor:{inherit:!1,label:"Fill Color",default:Object.freeze(xr("oklch(0% 0 none)"))}}),[Hi]:Lr({leading:{inherit:!0,label:"Leading",default:Ks({leadingAlgorithmTypeKey:"AutoLinearLeading",instance:{a:{lineWidth:33,leading:1.1},b:{lineWidth:65,leading:1.3},minLeading:1.1,maxLeading:2}})},"@AutoLinearLeading":{default:Ks({leadingAlgorithmTypeKey:"AutoLinearLeading",instance:{a:{lineWidth:33,leading:1.1},b:{lineWidth:65,leading:1.3},minLeading:1.1,maxLeading:2}})}}),[rn]:Lr({gridAxisSelection:{inherit:!1,label:"Select an Axis"},gridAxisType:{inherit:!1,label:"Axis Type"},start:{label:"Start"},end:{label:"Stop"},amountValue:{inherit:!0,label:"Amount",step:1,...vc.ppsDefaultSettings}}),[Ne]:Lr({textRun:{inherit:!0,label:"Text Content",default:""},textAlign:{inherit:!0,label:"Text Align",default:JI.defaultValue},positioningHorizontal:{inherit:!0,label:"Positioning-X",default:KI.defaultValue},positioningVertical:{inherit:!0,label:"Positioning-Y",default:UI.defaultValue},direction:{inherit:!0,label:"Direction",default:jI.defaultValue},heightTreatment:{inherit:!0,label:"Height Fixes",default:qI.defaultValue},charGroup:{inherit:!0,label:"Glyphs"},showCellBoxes:{inherit:!0,label:"Show Cell Boxes",default:!1},cellAlignment:{inherit:!0,label:"Cell Alignment",default:"center"},fontSize:{inherit:!0,label:"Font Size",unit:"px",default:36,min:0,step:.01},baseFontSize:{inherit:!0,label:"Base Font Size",unit:"pt",default:12,min:0,step:.01},relativeFontSize:{inherit:!0,label:"Relative Font Size",default:1,min:0,step:.01},columnWidth:{inherit:!0,label:"Column Width",unit:"EN",default:40,min:0,step:.1,max:160},leading:{inherit:!0,label:"Leading Value",unit:"EM",step:.01,...er.ppsDefaultSettings},minLeading:{inherit:!0,label:"Min-Leading Value",unit:"EM",step:.01,...er.ppsDefaultSettings},maxLeading:{inherit:!0,label:"Max-Leading Value",unit:"EM",step:.01,...er.ppsDefaultSettings},lineWidth:{inherit:!0,label:"Line-Width",unit:"EM",step:.01},gridContent:{inherit:!0,label:"Content",default:Ks({type:"custom",customText:"H"})}})};Object.assign(Gc,Object.fromEntries(VC));Object.freeze(Gc);const Ve=Sh.bind(null,Gc);Ve.NOTDEF=Sh.NOTDEF;function la(i){return i.startsWith(at)&&(i=i.split("/",2).join("/")),Ve(i,{inherit:!0}).inherit!==!1}c(la,"isInheritingPropertyFn");const sd=Ji.createClass("LayerActorModel",...Ds,["keyMoments",ey],...sa,["activeActors",Vh]);class BY extends qt{static{c(this,"LayerDOMNode")}constructor(e,t,n){super(e,t);for(const s of["stage_and_actors-layer",...n])this.node.classList.add(s)}update(e){const t=[[ui,"numericProperties/x","generic/positioningHorizontal",bc,"px"],[ui,"numericProperties/y","generic/positioningVertical","px"],["numericProperties/z-index","z-index","",Math.round],["numericProperties/width","width","px"],["numericProperties/scale","transform","",n=>`scale(${n})`],["numericProperties/height","height","px"]];if(e.has("animationProperties@")||e.has("globalT")){const n=e.has("animationProperties@")?e.get("animationProperties@"):this.getEntry("animationProperties@"),s=(e.has("globalT")?e.get("globalT"):this.getEntry("globalT")).value,r=n.animanion.getPropertiesFromGlobalT(s),o=c(l=>l==="numericProperties/width"||l==="numericProperties/height"?[!1,"inherit"]:[!0,Ve(l).default],"getDefault"),a=[["colors/backgroundColor","background-color"],["colors/textColor","color"]];Wn(this.node,r,o,a),Ui(this.node,r,o,t)}}}class vY extends we{static{c(this,"LayerActorRenderer")}constructor(e,t,n,s){const r=e.domTool.createElement("div"),o=new Map([...t,["layer",r],["parent-layer",t.get("layer")]]),a=[[{zone:"parent-layer"},["animationProperties@",["/activeState/t","globalT"]],BY,r,[n,`${n}-sub`]],[{},[["activeActors","collection"]],HI,o,n,s]];super(e,o,a)}}const rd=Ji.createClass("CircleActorModel",...Ds,["keyMoments",$I]),od=Ji.createClass("RectangleActorModel",...Ds,["keyMoments",$I]);class GY extends me{static{c(this,"CircleActorRenderer")}static TEMPLATE=`<svg
    viewBox="0 0 0 0"
>
    <circle cx="0" cy="0" r="0" />
</svg>`;constructor(e){super(e),[this.element,this.circle]=this.initTemplate()}initTemplate(){const e=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE),t=e.firstElementChild,n=t.querySelector("circle");return t.style.setProperty("position","absolute"),this._insertElement(t),[t,n]}update(e){const t=c(s=>{for(const[r,o,a]of[[this.element,"viewBox",`-${s} -${s} ${2*s} ${2*s}`],[this.circle,"r",`${s}`]])r.setAttribute(o,a);this.element.style.setProperty("width",`${2*s}px`),this.element.style.setProperty("height",`${2*s}px`)},"setRadius"),n=[[ui,"numericProperties/x","generic/positioningHorizontal",bc,"px"],[ui,"numericProperties/y","generic/positioningVertical","px"],["numericProperties/z-index","z-index","",Math.round],["numericProperties/scale","transform","",s=>`scale(${s})`],["numericProperties/r",(s,r)=>t(r)]];if(e.has("animationProperties@")||e.has("globalT")){const s=e.has("animationProperties@")?e.get("animationProperties@"):this.getEntry("animationProperties@"),r=(e.has("globalT")?e.get("globalT"):this.getEntry("globalT")).value,o=s.animanion.getPropertiesFromGlobalT(r),a=c(A=>[!0,Ve(A).default],"getDefault"),l=[["colors/strokeColor","stroke"],["colors/fillColor","fill"]];Wn(this.element,o,a,l),Ui(this.element,o,a,n)}}}class RY extends me{static{c(this,"RectangleActorRenderer")}static TEMPLATE=`<svg
    viewBox="0 0 0 0"
>
    <rect width="0" height="0" />
</svg>`;constructor(e){super(e),[this.element,this.shape]=this.initTemplate()}initTemplate(){const e=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE),t=e.firstElementChild,n=t.querySelector("rect");return t.style.setProperty("position","absolute"),this._insertElement(t),[t,n]}update(e){const t=c((s,r)=>{const o=this.element.getAttribute("viewBox").split(" ");s==="width"&&(o[2]=r),s==="height"&&(o[3]=r);for(const[a,l,A]of[[this.element,"viewBox",o.join(" ")],[this.shape,s,r]])a.setAttribute(l,A);this.element.style.setProperty(s,`${r}px`)},"setExtend"),n=[[ui,"numericProperties/x","generic/positioningHorizontal",bc,"px"],[ui,"numericProperties/y","generic/positioningVertical","px"],["numericProperties/z-index","z-index","",Math.round],["numericProperties/scale","transform","",s=>`scale(${s})`],["numericProperties/width",(s,r)=>t("width",r)],["numericProperties/height",(s,r)=>t("height",r)]];if(e.has("animationProperties@")||e.has("globalT")){const s=e.has("animationProperties@")?e.get("animationProperties@"):this.getEntry("animationProperties@"),r=(e.has("globalT")?e.get("globalT"):this.getEntry("globalT")).value,o=s.animanion.getPropertiesFromGlobalT(r),a=c(A=>[!0,Ve(A).default],"getDefault"),l=[["colors/strokeColor","stroke"],["colors/fillColor","fill"]];Wn(this.element,o,a,l),Ui(this.element,o,a,n)}}}const ad=Ji.createClass("LineOfTextActorModel",...Ds,["keyMoments",ey],...sa);class SY extends me{static{c(this,"LineOfTextActorRenderer")}static TEMPLATE='<span class="actor_renderer-line_of_text">(content not initialized)</span>';constructor(e){super(e),[this.element]=this.initTemplate()}initTemplate(){const e=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE),t=e.firstElementChild;return t.style.setProperty("position","absolute"),this._insertElement(t),[t]}update(e){const t=[[ui,"numericProperties/x","generic/positioningHorizontal",bc,"px"],[ui,"numericProperties/y","generic/positioningVertical","px"],["numericProperties/width","width","px"],["numericProperties/height",(n,s,r,o,a)=>{let l;if(s==""){const[,A]=ra(r,o,"generic/heightTreatment");l=A==="baselineToBottomFix"?"calc(1em * var(--ascender) / var(--units-per-em))":""}else l=s;n.style.setProperty("height",`${l}${a?"px":""}`)}],["numericProperties/line-height-em","line-height","em"],["numericProperties/scale","transform","",n=>`scale(${n})`],["numericProperties/z-index","z-index","",Math.round],["generic/textAlign","text-align",""],["generic/direction","direction",""]];if(e.has("font")){const n=e.get("font").value;this.element.style.setProperty("font-family",`"${n.fullName}"`),this.element.style.setProperty("--units-per-em",`${n.fontObject.unitsPerEm}`),this.element.style.setProperty("--ascender",`${n.fontObject.ascender}`),this.element.style.setProperty("--descender",`${n.fontObject.descender}`)}if(e.has("animationProperties@")||e.has("globalT")){const n=e.has("animationProperties@")?e.get("animationProperties@"):this.getEntry("animationProperties@"),s=(e.has("globalT")?e.get("globalT"):this.getEntry("globalT")).value,r=n.animanion.getPropertiesFromGlobalT(s),o=c(l=>l==="numericProperties/width"||l==="numericProperties/height"?[!1,""]:[!0,Ve(l).default],"getDefault"),a=[["colors/backgroundColor","background-color"],["colors/textColor","color"]];r.has("generic/textRun")?this.element.textContent=r.get("generic/textRun"):this.element.textContent="",Wn(this.element,r,o,a),Ui(this.element,r,o,t),li(this.element,r)}}}const NY=[["wdth","max"],["wght","max"],["opsz","max"]];function QY(i,e){let t=i.axisRanges,n=e.style.fontVariationSettings,s=[];for(let[r,o]of NY)r in t&&s.push(`"${r}" ${t[r][o]}`);return e.style.fontVariationSettings=s.join(", "),()=>e.style.fontVariationSettings=n}c(QY,"_setWidest");function wY(i,e,t,...n){let s=QY(i,e);try{t(...n)}finally{s()}}c(wY,"_withSetWidest");function By(i,e,t){let n=[],s=[],r=0,o=0;for(let[a,l]of i.entries()){let A=r+o+l;o=e,A>t?(n.push(a-1),s.push(r),r=l):r=A}return r&&(n.push(i.length-1),s.push(r)),[Math.max(0,...s),n]}c(By,"_getLineBreaksForLineLength");function ZY(i,e){let t=c(l=>l.reduce((A,u)=>A+u,0),"sum"),n=t(i.reduce((l,A,u,h)=>(l.push(A),u!==h.length-1&&l.push(e),l),[])),s=Math.min(...i),r=Math.max(0,...i),o=[];if(!i)return[];let a=r;for(;;){let[l,A]=By(i,e,a);if(o[A.length-1]||(o[A.length-1]=[l,A]),a===n)break;a=Math.min(a+s,n)}return o}c(ZY,"_getLineBreaks");function kY(i,e,t){let n=i.ownerDocument.defaultView,s=n.innerHeight-66,r=i.getBoundingClientRect().width,o=s*.75,a=r*.75,l=1.5,A=o/l,u=24,h=144,d=ZY(e,t),g=0,p=-1;for(let y=0,v=d.length;y<v;y++){if(d[y]===void 0)continue;let G=y+1,R=p<0?1/0:d[p][0],[Q]=d[y],S=A/G,M=a/Q,V=a/R,K=Math.min(S,M);if(!(K<=V)){if(g>K)break;g=K,p=y}}let f=Math.min(h,Math.max(u,g)),[,m]=By(e,t,a/f);return[f,m]}c(kY,"gridFontSize");function _Y(i){for(let a of i.getElementsByTagName("div"))a.parentElement.append(...a.children);let e=.3,t=16,n=[];i.style.setProperty("font-size",`${t}px`);for(let a of i.children){if(a.tagName!=="SPAN")throw new Error(`UNEXPECTED ELEMENT <${a.tagName}>, expecting <SPAN>`);let l=a.getBoundingClientRect();n.push(l.width/t)}let s=Math.max(0,...n);for(let a=0,l=i.children.length;a<l;a++){let A=i.children[a],u=n[a];A.style.setProperty("--measured-width-em",u),A.style.setProperty("--width-em",s+.25),A.style.width="calc(1em * var(--width-em))",A.style.marginRight="calc(1em * var(--right-margin-em, 0))"}let[r,o]=kY(i,Array.from(i.children).map(a=>parseFloat(a.style.getPropertyValue("--width-em"))),e);i.style.fontSize=`${r}pt`,i.style.padding=0;for(let a of i.children)a.style.setProperty("--right-margin-em",`${e}`);for(let a of o)i.children[a].style.setProperty("--right-margin-em","0");return r*4/3}c(_Y,"_fixGridLineBreaks");function YY(i,e){return wY(i,e,_Y,e)}c(YY,"fixGridLineBreaks");const WY={Uppercase:"ABCDEFGHIJKLMNOPQRSTUVWXYZ&",Lowercase:"abcdefghijklmnopqrstuvwxyz",Mixed:"ǅǈǋǉ",ASCII:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789<([{@#$%&?!/|\\\"~`*^':;.,)]}>","Latin-1":" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~ ¡¢£¤¥¦§¨©ª«¬­®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚÛÜÝÞßàáâãäåæçèéêëìíîïðñòóôõö÷øùúûüýþÿ",Symbols:{Punctuation:",-.:;…∙·!¡?¿–—―‐",Reference:"*§¶†‡•",Quotation:`"'“”‚„‹›«»′″`,Parenthetical:"()[]{}",Math:"+÷×−±<>≤≥≈≠=^~¬∕­/",Commercial:"®©™#@⁒ʹʺ/\\¦|_№⟨⟩µ⁄"}},DY={Uppercase:"ΑΒΓΔΕΖΗΘΙΚΛΜΝΞΟΠΡΣΤΥΦΧΨΩ",Lowercase:"αβγδεζηθικλμνξοπρστυφχψως"},TY={Uppercase:"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ",Lowercase:"абвгдежзийклмнопрстуфхцчшщъыьэюя"},FY={Figures:{_default:"0123456789",_extended:"⁰¹²³⁴⁵⁶⁷⁸⁹⅛⅙⅕¼⅓⅜⅖½⅗⅔⅝¾⅘⅚⅞%‰"},Monetary:{_default:"$¢£¥",_extended:"₡₣₤₦₧₩₫€ƒ₭₱₲₵₹₺₼₽¤"},Accents:{_default:"`¨¯°´ˆˇ˘˙˚˛˜˝‘’¸ʼ",_extended:"ˉ̧̨̛̣̤̦̮̱̀́̂̃̄̆̇̈̉̊̋̌̏̑"}},xY={A:"ÀÁÂÃÄÅĀĂǺȀȂĄẠẢẤẦẨẪẬẮẰẲẴẶÆǼ",C:"ÇĆĈĊČ",D:"ĎÐĐǄǅ",E:"ÈÉÊËĒĔĖĘĚȄȆẸẺẼẾỀỂỄỆÆǼŒƏ",G:"ĜĞĠĢǦ",H:"ĤĦ",I:"ÌÍÎÏĨĪĬĮİȈȊỈỊĲǉǇǊ",J:"ĴĲ",K:"Ķ",L:"ĹĻĽĿŁǇǈ",N:"ÑŃŅŇŊǊǋ",O:"ÒÓÔÕÖŌŎŐƠǪȌȎȪȬȰỌỎỐỒỔỖỘỚỜỞỠỢØǾŒ",P:"Þ",R:"ŔŖŘȐȒ",S:"ŚŜŞŠȘẞ",T:"ŢŤȚŦ",U:"ÙÚÛÜŨŪŬŮŰŲƯȔȖỤỦỨỪỬỮỰ",W:"ŴẀẂẄ",Y:"ÝŶŸȲỲỴỶỸ",Z:"ŹŻŽǄ",a:"àáâãäåāăąǻȁȃạảấầẩẫậắằẳẵặæǽª",c:"çćĉċč",d:"ďđǆð",e:"èéêëēĕėęěȅȇẹẻẽếềểễệəæǽœ",f:"ﬀﬁﬂﬃﬄ",g:"ĝğġģǧ",h:"ĥħ",i:"ıĩīĭįȉȋỉịìíîïĳﬁﬃ",j:"ȷĵǉĳǌǈ",k:"ķĸ",l:"ĺļľŀłﬂﬄ",n:"ñńņňŉŋǌ",o:"òóôõöōŏőơǫȍȏȫȭȱọỏốồổỗộớờởỡợøǿœº",p:"þ",r:"ŕŗřȑȓ",s:"śŝşšșß",t:"ţťțŧ",u:"ùúûüũūŭůűųưȕȗụủứừửữự",w:"ŵẁẃẅ",y:"ýÿŷȳỳỵỷỹ",z:"źżžǅ",Α:"Ά",Ε:"Έ",Η:"Ή",Ι:"ΊΪ",Ο:"Ό",Υ:"ΎΫ",Ω:"Ώ",α:"ά",ε:"έ",η:"ή",ι:"ίΐϊ",ο:"ό",υ:"ύΰϋ",ω:"ώ",А:"ӒӐӘӔ",Г:"ЃҐҒҔ",Д:"ЂЋ",Е:"ЀЁӖЄ",Ж:"ӜӁҖ",З:"ӞҘЅ",И:"ӤЍӢӀІЇЈ",К:"ЌҚҜҠ",Л:"Љ",Н:"ҢЊҤ",О:"ӦѲӨ",С:"Ҫ",У:"ӮӰӲЎҮҰЏ",Х:"ҲҺ",Ч:"ӴҶҸ",Ы:"Ӹ",а:"ӓӑәӕ",г:"ѓґғҕ",д:"ђћ",е:"ѐёӗє",ж:"ӝӂҗ",з:"ӟҙѕ",и:"ӥѝӣӏіїј",к:"ќқҝҡ",л:"љ",н:"ңњҥ",о:"ӧѳө",с:"ҫ",у:"ӯӱӳўүұџ",х:"ҳһ",ч:"ӵҷҹ",ы:"ӹ"},vy={Latin:WY,Greek:DY,Cyrillic:TY,World:FY,_extended:xY},Bi=Symbol("_NOTDEF");class LY extends me{static{c(this,"UIMissingUIElement")}[fn]=Lo;static TEMPLATE=`<div class="ui_missing-ui_element">
    <h4>Missing UI-Element</h4>
    <span class="ui_missing-ui_element-label"><!-- insert: label --></span>
    <span class="ui_missing-ui_element-full_key"><!-- insert: fullKey --></span>
    <span class="ui_missing-ui_element-type_name"><!-- insert: typeName --><span>
    <span class="ui_missing-ui_element-message"><!-- insert: message --><span>
</div>`;constructor(e,t,n,s,r){super(e),[this.element]=this.initTemplate(t,n,s,r)}initTemplate(e,t,n,s){const r=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE).firstElementChild;for(const[o,a]of Object.entries({typeName:e,message:t,fullKey:n,label:s}))this._domTool.insertAtMarkerComment(r,`insert: ${o}`,a);return this._insertElement(r),[r]}}class Gy{static{c(this,"InjectDependency")}constructor(e,t=null,n=Bi){if(this.name=e,this.payload=t,n!==Bi)throw new Error(`NOT IMPLEMENTED ${this.constructor.name} "typeHint" argument (value: ${n.toString()}).`)}toString(){return`[${this.constructor.name}: ${this.name}]`}}function Y(...i){return new Gy(...i)}c(Y,"require$1");class ca extends we{static{c(this,"_BaseTypeDrivenContainerComponent")}_getArgumentConfig(e,t,n,s,r,o){if(typeof n=="string")throw new Error(`DEPRECATION EROROR ${this}._getArgumentConfig ppsRecord must not be a string!`);if(n.modelFieldName!==s)throw new Error("ASSERTION failed ppsRecord.fieldName (${ppsRecord.fieldName}) !== fieldName (${fieldName})");const a=new Map,l=new Map,A=[],u=[a,l,A];if(!(o instanceof Gy))return A.push(o),u;let h=Bi;switch(o.name){case"settings:rootPath":a.set("rootPath",D.fromParts(D.RELATIVE,s));break;case"settings:internalPropertyName":l.set(s,o.payload);break;case"settings:dependencyMapping":l.set(...Array.isArray(o.payload)?o.payload:[o.payload,o.payload]);break;case"settings:id":{const d=o.payload?o.payload(s,n):s;a.set("id",d)}break;case"settings:@set":a.set(...o.payload);break;case"zones":h=new Map([...this._zones.entries(),["main",this._zones.get(t)]]);break;case"getDefault":h=e.getDefaults.bind(null,n,s,r.defaultValue);break;case"injectable":h=e;break;case"raw:getDefaults":h=e.getDefaults;break;case"requireUpdateDefaults":for(const d of e.updateDefaultsDependencies)l.set(...d);case"raw:requireUpdateDefaults":h=e.requireUpdateDefaults;break;case"updateDefaultsDependencies":h=e.updateDefaultsDependencies;break;case"genericTypeToUIElement":h=e.genericTypeToUIElement;break;case"parentInjectable":h=e;break;case"fieldName":h=s;break;case"fullKey":h=n.fullKey;break;case"getRegisteredPropertySetup":h=Ve(n);break;case"label":h=Ve(n,{label:s}).label||s;break;case"unit":h=Ve(n,{unit:""}).unit||"";break;case"propertyRoot":h=n.propertyRoot;break;case"ppsRecord":h=n;break;case"ppsMap":r===fo?h=AY(n):e.getPPSMapForModel?h=e.getPPSMapForModel(n,r):(console.warn(`${this} don't know how to get a PPSMap for ${r.name} in ${n}`),h=new Ze);break;case"items":h=new Map(r.enumItems.map(d=>[d,d]));break;case"classToken":h=uC(s);break;default:throw new Error(`KEY ERROR ${this}._getArgumentConfig ${s} don't know how to provide parameter "${o.name}".`)}return h!==Bi&&(typeof o.payload=="function"&&(h=o.payload(h)),A.push(h)),u}_defineGenericWidget(e,t,n,s,r){const o=e.genericTypeToUIElement(r);return this._getWidgetConfig(e,t,n,s,o)}_getWidgetConfig(e,t,n,s,r){const[o,a,l]=r,A=new Map(Object.entries(t)),u=new Map,h=[];for(const d of l){const[g,p,f]=this._getArgumentConfig(e,t.zone,n,s,a,d);if(g&&g.size)for(const m of g)m[0]==="rootPath"&&A.has("rootPath")&&(m[1]=A.get("rootPath").append(...m[1].parts)),A.set(...m);if(p&&p.size)for(const m of p)u.set(...m);f&&f.length&&h.push(...f)}return[Object.fromEntries(A),Array.from(u),o,...h]}_defineGenericWidgets(e,t,n,s,r){const o=[],a=typeof s=="string"?Ze.fromPrefix(s,e.fields.keys(),t):s;for(const[l,A]of a.entries()){if(!t(l)||!e.fields.has(l))continue;const u=e.fields.get(l);try{const h=this._defineGenericWidget(r,n,A,l,u);o.push(h)}catch(h){throw h.message=`${h.message} (via ${this} TypeClass: ${e.name})`,h}}return o}}function Ry(i,e,t=Bi){return function(n,s=Bi){for(const[d,g]of[[ys,ut]])for(const p of[i,e])!p.has(d)&&p.has(g)&&p.set(d,p.get(g));const r=n.prototype instanceof ke,[o,a]=r?[e,n.Model]:[i,n],l=c(d=>{if(o.has(d))return d;for(const g of[Gt,Wt,nn])if(d.prototype instanceof g)return g;return d},"getSetupKey"),A=l(a);if(!o.has(A)){if(t!==Bi)return t(n,s);if(s!==Bi)return s;const d=`Can't find generic UI-Element for ModelType ${n.name} (isOrEmpty: ${r}, BaseModelType: ${a.name}).`;console.warn(d);const g=[n.name,d,Y("fullKey"),Y("label")];return[LY,a,g]}const[u,...h]=o.get(A);return[u,a,h]}}c(Ry,"createTypeToUIElementFunction");function ld(i,e){const t=new Map;for(const n of e){if(t.has(n))continue;const s=i._extended[n];if(!s||!s.length)continue;const r=[];for(const o of s)r.push(o);t.set(n,r)}return t}c(ld,"getExtendedChars");function Sy(i,e){let t=e.split(".").reduce((o,a)=>o[a],i),n,s,r=ld.bind(null,i);if(typeof t=="object"&&"_default"in t&&"_extended"in t){n=[...t._default],s=new Map,t._extended&&s.set(null,[...t._extended]);for(const[o,a]of r(n))s.set(o,a)}else if(typeof t=="string")n=[...t],s=r(t);else throw new Error(`Don't know how to handle item at ${e}: ${t}`);return[n,s]}c(Sy,"getCharsFromCharGroups");function Ny(i){const e=new Set,t=[],n=c(function(s){switch(typeof s){case"string":for(const r of s)e.has(r)||(e.add(r),t.push(r));break;case"object":for(const r in s)n(s[r]);break}},"addChars");return n(i),t}c(Ny,"getKnownChars");function Qy(i,e){var t=[],n=new Set(i);for(const s of e)n.has(s)||(n.add(s),t.push(s));return t}c(Qy,"getUnknownChars");function MY(i,e){const t=[];for(const n of e)i.has(n)&&t.push(n);return t}c(MY,"_keepMembers");function wy(i){const e=new Set(i.flat());return MY.bind(null,e)}c(wy,"_getFilterFromChars");function Aa(i){const e=Object.keys(i),t=[],n=[],s=[];for(const r of e){const o=parseInt(r,10),a=String.fromCodePoint(o);n.push(o),t.push(a),s.push(i[r])}return[t,n,e,s]}c(Aa,"_getFontCharsFromCmap");function ua(i){return i.fontObject.tables.cmap.glyphIndexMap}c(ua,"_getCmapFromFont");function VY(i,e,t){const[n,s]=Sy(e,t),r=new Map;for(const[o,a]of s)r.set(o,i(a));return[i(n),r]}c(VY,"_getCharsForKey");function OY(i){const e=i.map(r=>Aa(ua(r))),t=[],n=[],s=new Set;for(let r=0;r<e.length;r++){const o=e[r][3];for(const[a,l]of o.entries())t.push([r,l,a])}t.sort(([r,o],[a,l])=>o===l?r-a:o-l);for(const[r,,o]of t){const a=e[r][0][o];s.has(a)||(s.add(a),n.push(a))}return n}c(OY,"_getAllCharsOrderedByGid");function PY(i){const e=i.map(r=>Aa(ua(r))),t=e.map(([,r])=>r),n=new Set,s=[];for(const r of t)n.has(r)||s.push(r);return s.sort((r,o)=>r-o).map(r=>String.fromCodePoint(r))}c(PY,"_getAllCharsOrderedByUnicodes");function Zy(i){const e=[],t=new Set;for(const n of i)for(const s of n)t.has(s)||(t.add(s),e.push(s));return e}c(Zy,"_mergeChars");function HY(i,e){const t=Ny(i),n=e.map(a=>Aa(ua(a))),s=n.map(([a])=>a),r=Zy(s);return[...wy(r)(t),...Qy(t,r)]}c(HY,"_getAllCharsByGroups");function XY(i,e){const t=Ny(i),n=e.map(o=>Aa(ua(o))),s=n.map(([o])=>o),r=Zy(s);return Qy(t,r)}c(XY,"_getUnknownChars");function zY(i,e){if(!(e.split(".")[0]in i))return!1;const[,n]=Sy(i,e);return n.size>0}c(zY,"hasExtendedChars");function JY(i,e,t){let n,s=[];switch(t){case"all-gid":n=OY(e);break;case"all-groups":n=HY(i,e);break;case"misc":n=XY(i,e);break;case"unicodes":n=PY(e);break;default:{const r=e.map(a=>Aa(ua(a))),o=wy(r.map(([a])=>a));[n,s]=VY(o,i,t)}break}return{chars:n,extendedChars:s,hasExtended:s.size>0}}c(JY,"getCharsForSelectUI");function*ky(i){const t="All";function*n(s,r,o){if(s.at(-1)[0]==="_")return;if(o===null||typeof o!="object"||"_default"in o){const l=s.at(-1),A=s.join(".");yield[r,l,A];return}const a=s.join(" ");for(const[l,A]of Object.entries(o)){const u=[...s,l];yield*n(u,a,A)}}c(n,"makeOptionsFromCharGroups"),yield[t,"All by GlyphID","all-gid"],yield[t,"All by group","all-groups"];for(let[s,r]of Object.entries(i))yield*n([s],null,r);yield[null,"None of the above","misc"],yield[null,"Use custom content","custom"]}c(ky,"_getCharGroupsStructure");function UY(i){const e=[];for(const[,,t]of ky(i))e.push(t);return e}c(UY,"getCharGroupsKeys");class _y{static{c(this,"PlainSelectCharGroupInput")}static TEMPLATE=`<label class="ui_select_char_groups"
    ><span class="ui_select_char_groups-label"><!-- insert: label --></span>
    <select class="ui_select_char_groups-select"></select>
</label>`;constructor(e,t,n,s="Char-Group"){this._domTool=e,this._passive=!1,[this.element,this._input]=this._initTemplate(n,s),this._changeHandler=null,t&&(this._changeHandler=r=>{r.preventDefault(),t(this._input.value)},this._input.addEventListener("change",this._changeHandler))}_initTemplate(e,t,n){const s=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE).firstElementChild,r=s.querySelector(".ui_select_char_groups-select");return r.append(this._uiBuildGlyphsSelectOptions(this._domTool,e,n)),this._domTool.insertAtMarkerComment(s,"insert: label",t),[s,r]}_uiBuildGlyphsSelectOptions(e,t){const n=e.createFragment(),s=new Map([[null,n]]);for(const[r,o,a]of ky(t)){if(!s.has(r)){const u=e.createElement("optgroup");u.label=r;const h=e.createElement("legend");h.textContent=r,u.append(h),n.append(u),s.set(r,u)}const l=s.get(r),A=e.createElement("option");A.textContent=o,A.value=a,l.append(A)}return n}update(e){this._input.value=e}set passive(e){this._passive=!!e,this._input.disabled=this._passive}get passive(){return this._passive}setDisplay(e){e?this.element.style.removeProperty("display"):this.element.style.display="none"}}const KY=Oo.createClass("UISelectCharGroupInput",_y),jY=zo.createClass("PlainSelectCharGroupOrEmptyInput",_y),qY=Xo.createClass("UISelectCharGroupOrEmptyInput",jY);class $Y extends me{static{c(this,"UIUpdateListener")}constructor(e,t){super(e),this._onUpdate=t}update(e){this._onUpdate(e)}}class cd extends ca{static{c(this,"UICharGroupContainer")}constructor(e,t,n,s,r){const o=e.domTool.createElement("div",{class:"ui_char_group_container"}),a=e.domTool.createElement("div"),l=new Map([...t,["local",o],["contents",a]]);super(e,l),this._insertElement(o);const A=this.widgetBus.getEntry(this.widgetBus.rootPath).constructor;this._propertyRoot=s,this._processedPropertiesSystemMap=Ze.fromPrefix(s,A.fields.keys());{const h=A.fields.get("options").Model;this._CharGroupOptionsBaseModel=h.prototype instanceof ke?h.Model:h}this._injectable=n;const u=this._defineWidgets(A,a,n,s,r);this._initWidgets(u)}_getDefaults(e,...t){const n=this._processedPropertiesSystemMap.get(e);return this._injectable.getDefaults(n,e,...t)}_defineWidgets(e,t,n,s,r){const o={zone:"contents"};return[[{zone:"local"},[],tt,r,t],this._getWidgetConfig(n,o,Ze.createSimpleRecord(this._propertyRoot,"irrelevant"),"irrelevant",[$Y,Ad,[Y("settings:dependencyMapping",["../../..","value"]),this._onChange.bind(this)]]),...this._defineGenericWidgets(e,a=>e.fields.has(a),o,this._processedPropertiesSystemMap,n)]}_defineGenericWidget(e,t,n,s,r){super._defineGenericWidget(e,t,n,s,r);const o=e.genericTypeToUIElement(r);if(s==="extended"){const[,,a]=o;a.push(Y("settings:id"))}return(s==="customText"||s==="customSeparator")&&(t={...t,activationTest:this._activateCustom.bind(this)}),this._getWidgetConfig(e,t,n,s,o)}_activateCustom(){return this._getDefaults("options",null)==="custom"}_onChange(){const{defaultValue:e,charGroupsData:t}=this._CharGroupOptionsBaseModel,n=this._getDefaults("options",e);let s=!1;if(n==="custom"){const o=this._getDefaults("customText",""),a=this._getDefaults("customSeparator",""),l=o.split(a);s=ld(t,l).size}else s=zY(t,n);this.getWidgetById("extended")._ui.element.classList[s?"remove":"add"]("not-available")}_update(e,t,n){try{return super._update(e,t,n)}finally{this._activationTestCache=null}}}const Wp=UY(vy),Co=Wt.createClass("CharGroupOptionsModel",Wp,Wp[0],{charGroupsData:{value:vy,enumerable:!0}}),eW=ke.createClass(Co),Ad=ye.createClass("CharGroupModel",["options",eW],["extended",Ph],["customText",an],["customSeparator",an]),tW=Wt.createClass("CellAlignmentModel",["left","center","right"],"center"),nW=ke.createClass(tW),iW=ye.createClass("VideoproofArrayKeyMomentModel",...yc,["charGroup",Ad],["showCellBoxes",Ph],["cellAlignment",nW],["stageBackgroundColor",Vt]),Yy=vt.createClass("VideoproofArrayKeyMomentModel",iW),bl=Ji.createClass("VideoproofArrayActorModel",...Ds,["keyMoments",Yy],...sa);function Wy(i,e,t,n){const s={chars:[],stateKey:null,changed:!0};if(t.has("generic/charGroup/options")){const r=Array.from(new Set(e)),o=t.get("generic/charGroup/options"),a=t.get("generic/charGroup/extended"),l=[];let A;if(o==="custom"){const h=t.get("generic/charGroup/customText")||"",d=t.get("generic/charGroup/customSeparator")||"",g=d!==""?h.split(d):[...h],p=ld(i,g);A={chars:g,extendedChars:p,hasExtended:p.size>0},l.push(d.length,d,h.length,h)}const u=r.map(h=>h.fullName).join(";;");if(s.stateKey=[u,o,a?"1":"0",...l].join(";"),n===s.stateKey)return s.changed=!1,s;if(o!=="custom"&&(A=JY(i,r,o)),a&&A.hasExtended){const h=new Set;for(const d of A.chars){if(s.chars.push(d),!h.has(d)&&A.extendedChars.has(d))for(const g of A.extendedChars.get(d))s.chars.push(g);h.add(d)}if(A.extendedChars.has(null))for(const d of A.extendedChars.get(null))s.chars.push(d)}else for(const h of A.chars)s.chars.push(h)}return s}c(Wy,"_getCellContents");class sW extends me{static{c(this,"VideoproofArrayActorRenderer")}static TEMPLATE='<div class="actor_renderer-videoproof_array fixed-line-breaks">(content not initialized)</div>';constructor(e,t){super(e),this._charGroupsData=t,this._cellsStateKey=null,[this.element]=this.initTemplate()}initTemplate(){const e=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE),t=e.firstElementChild;return this._insertElement(t),[t]}_updateCells(e,t){const n=[];for(const s of t){const r=this._domTool.createElement("span");r.textContent=s,n.push(r)}this.element.replaceChildren(...n),YY(e,this.element)}update(e){const t=[["numericProperties/z-index","z-index","",Math.round]],n=(e.has("font")?e.get("font"):this.getEntry("font")).value;if(e.has("font")){const s=e.get("font").value;this.element.style.setProperty("font-family",`"${s.fullName}"`),this._cellsStateKey=null}if(e.has("animationProperties@")||e.has("globalT")){const s=e.has("animationProperties@")?e.get("animationProperties@"):this.getEntry("animationProperties@"),r=(e.has("globalT")?e.get("globalT"):this.getEntry("globalT")).value,o=s.animanion.getPropertiesFromGlobalT(r),a=c(u=>u==="numericProperties/width"||u==="numericProperties/height"?[!1,""]:[!0,Ve(u).default],"getDefault"),l=[["colors/backgroundColor","background-color"],["colors/textColor","color"]],A=Wy(this._charGroupsData,[n],o,this._cellsStateKey);A.changed&&(this._cellsStateKey=A.stateKey,A.chars.length?this._updateCells(n,A.chars):this._domTool.clear(this.element)),Wn(this.element,o,a,l),Ui(this.element,o,a,t),li(this.element,o,!0)}}}const rW=ye.createClass("VideoproofArrayV2CellKeyMomentModel",...yc,["showCellBoxes",Ph]),oW=vt.createClass("VideoproofArrayV2CellKeyMomentModel",rW),ud=Ji.createClass("VideoproofArrayV2CellActorModel",...Ds,...sa,["keyMoments",oW]),[,aW]=PI([["VideoproofArrayV2CellActorModel","Videoproof Array Cell",ud]]),El=Ji.createClass("VideoproofArrayV2ActorModel",...Ds,...Pi.createWithInternalizedDependency("availableActorTypes",Cc,aW),["keyMoments",Yy],...sa,["activeActors",Vh]);class lW extends me{static{c(this,"VideoproofArrayV2CellActorRenderer")}static TEMPLATE='<div class="actor_renderer-videoproof_array_v2-cell">[?]</div>';constructor(e){super(e),[this.element]=this.initTemplate()}initTemplate(){const e=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE),t=e.firstElementChild;return this._insertElement(t),[t]}update(e){e.has("cellContent@")&&(this.element.textContent=e.get("cellContent@").data);const t=[["numericProperties/z-index","z-index","",Math.round],["generic/showCellBoxes","outline","",s=>s===!0?"1px solid":""]],n=this.widgetBus.rootPath.parts.at(-2);if(this.element.style.setProperty("--descender-em",`var(--descender-em-${n})`),this.element.style.setProperty("--ascender-em",`var(--ascender-em-${n})`),e.has("font")){const s=e.get("font").value;this.element.style.setProperty("font-family",`"${s.fullName}", AdobeBlank`),this.element.style.setProperty("--units-per-em",`${s.fontObject.unitsPerEm}`)}if(e.has("animationProperties@")||e.has("globalT")){const s=e.has("animationProperties@")?e.get("animationProperties@"):this.getEntry("animationProperties@"),r=(e.has("globalT")?e.get("globalT"):this.getEntry("globalT")).value,o=s.animanion.getPropertiesFromGlobalT(r),a=c(A=>A==="numericProperties/width"||A==="numericProperties/height"?[!1,""]:[!0,Ve(A).default],"getDefault"),l=[["colors/backgroundColor","background-color"],["colors/textColor","color"]];Wn(this.element,o,a,l),Ui(this.element,o,a,t),li(this.element,o,!0)}}}class cW{static{c(this,"Pointer32StackAlloc")}constructor(e,t){const n=this.M=e.Module;this.length=t,this.ptr=n.stackAlloc(4*this.length)}get int32Array(){const e=this.ptr/4;return this.M.HEAP32.slice(e,e+this.length)}get int32(){return this.M.HEAP32[this.ptr/4]}get uint32(){return this.M.HEAPU32[this.ptr/4]}}class AW extends we{static{c(this,"VideoproofArrayV2ActorRenderer")}static TEMPLATE='<div class="actor_renderer-videoproof_array_v2"></div>';constructor(e,t,n){e.wrapper.setProtocolHandlerImplementation(...Nn.create("cellContent@",{treatAdressAsRootPath:!1}));const s=new Map([...t]);super(e,s),this._uniqueSeenFonts=new WeakSet,this._cellsStateKey=null,this._ownChangedMapCache=null,this._cellWidths=null,this._charGroupsData=n,this._cellsStateKey=null,this.cells=[],[this.element]=this.initTemplate()}initTemplate(){const e=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE),t=e.firstElementChild;return this._insertElement(t),[t]}_createWrapper(e,t){const n=this._childrenWidgetBus,s=lW,r=[];return this._initWrapper(n,e,t,s,...r)}_updateCells(e){const t=this.widgetBus.wrapper.getProtocolHandlerImplementation("cellContent@"),n=new Set;for(const[s,r]of e.entries()){const o=t.getId(s);if(this.cells[s]===void 0){const l=this._domTool.createElement("div",{class:`actor_renderer-videoproof_array_v2-zone actor_renderer-videoproof_array_v2-zone_${s}`}),A=t.register(o,{data:void 0});this.cells[s]={contentId:o,unregister:A,cellActors:[]},this.element.append(l),n.add(o),this._zones.set(o,l)}const a=t.getRegistered(o);a.data!==r&&(a.data=r,t.setUpdated(o))}return n}_updateCellWidgets(e,t){const{contentId:n,cellActors:s}=t,r=[],o=[],a=[];for(let l=e.size,A=0;A<l;A++){const u=e.get(A),h=A<s.length?s[A]:[null,null],[d,g]=h,p=d===null,f=u.get("actorTypeKey").value,m=!p&&d!==f;if(m&&a.push(g),p||m){const y=this._createWrapper({rootPath:D.fromParts(".","activeActors",`${A}`,"instance"),zone:n},[[n,"cellContent@"],"animationProperties@","font"]);this._createWidget(y),r.push([f,y]),o.push(y)}else r.push(h),g.reinsert()}return[r,o,a]}_provisionWidgets(e){const t=this.getChangedMap(e),n=this.getEntry(this.widgetBus.rootPath.append("activeActors")),s=t.has("animationProperties@")?t.get("animationProperties@"):this.getEntry("animationProperties@"),r=(t.has("globalT")?t.get("globalT"):this.getEntry("globalT")).value,o=s.animanion.getPropertiesFromGlobalT(r),a=new Set;for(const f of n.keys()){const m=D.fromParts(...this.widgetBus.rootPath.parts,"activeActors",`${f}`,"instance","font"),y=this.getEntry(m).value;a.add(y),this._uniqueSeenFonts.has(y)||(this._uniqueSeenFonts.add(y),this._cellsStateKey=null)}const l=Wy(this._charGroupsData,a,o,this._cellsStateKey);let A=new Set,u=[];const h=c(f=>f.length?Array.from(tn(...f))[1]:[],"_getSecondComponents");if(l.changed){this._cellsStateKey=l.stateKey;const f=l.chars;A=this._updateCells(f);const m=this.cells.splice(f.length);for(const{contentId:y,unregister:v,cellActors:G}of m)this._zones.get(y).remove(),this._zones.delete(y),v(),u.push(...h(G))}const d=[],g=[];let p=null;for(const f of this.cells){const m=A.has(f.contentId);if(p!==!1||m){const[y,v,G]=this._updateCellWidgets(n,f);u.push(...G),f.cellActors.splice(0,y.length,...y),d.push(...v),p===null&&!m&&(p=v.length!==0||G.length!==0)}g.push(...h(f.cellActors)),f.cellActors.length>n.size&&u.push(...h(f.cellActors.splice(n.size)))}for(const f of u)this._destroyWidget(f);return this._widgets.splice(0,1/0,...g),new Set(d)}_hbShapeExample(e,t,n,s,r){var o=e.createBlob(t),a=e.createFace(o,0);console.log("face.getAxisInfos:",a.getAxisInfos()),console.log("face",a),console.log("face.upem",a.upem);var l=e.createFont(a);l.setVariations(s),l.setScale(1e3,1e3);var A=e.createBuffer();A.addText(n||"abc"),A.guessSegmentProperties(),e.shape(l,A,r);const u=A.json(l),h={};for(const d of u)h[d.g]||(h[d.g]={name:l.glyphName(d.g),path:l.glyphToPath(d.g)});return A.destroy(),l.destroy(),a.destroy(),o.destroy(),{shape:u,glyphs:h}}_hbDebugDumpSVG(e,t="Typefish"){const n={wdth:75,wght:100,opsz:144},s="+liga   ",r=this._hbShapeExample(this.widgetBus.harfbuzz,e.buffer,t,n,s);console.log(`${this}._hbDebugDumpSVG`,`
font:`,e.fullName,e,`
example:`,r,`
 origin`,e.origin);const o=this._unique===void 0?1:this._unique+1;this._unique=o;const a="http://www.w3.org/2000/svg",l=this._domTool.createFragmentFromHTML(`<svg
                viewBox="0 -300 10000 1000"
                transform="scale(1,-1), translate(0, 0)"
                style="overflow:visible"
                xmlns="${a}"></svg>`).firstElementChild,A=new Set;let u=0;for(const d of r.shape){const g=d.g,p=`glyph-${g}-u${o}`;if(!A.has(g)){A.add(g);const m=this._domTool.document.createElementNS(a,"path"),y=this._domTool.document.createElementNS(a,"symbol");y.id=p,m.style="fill:black;stroke:lime;stroke-width:1;overflow:visible",m.setAttribute("d",r.glyphs[g].path),y.append(m),y.style="overflow:visible;",l.append(y)}const f=this._domTool.document.createElementNS(a,"use");f.setAttribute("href",`#${p}`),f.setAttribute("x",u),u+=d.ax,l.append(f)}const h=this._domTool.document.createElementNS(a,"line");h.setAttribute("x1",u),h.setAttribute("y1",0),h.setAttribute("x2",u),h.setAttribute("y2",2e3),h.setAttribute("stroke","red"),l.append(h),document.body.append(l)}_getAdvance(e){let t=0;for(const n of e)t+=n.ax;return{x:t}}_getCellsWidths(){if(!this.cells.length)return[];const e=this.widgetBus.wrapper.getProtocolHandlerImplementation("cellContent@"),t=this.cells[0],n={},s=this.widgetBus.harfbuzz.hbjs;for(const[a,[,l]]of t.cellActors.entries()){const A=l.widgetBus.getEntry("font").value,u={wdth:151,wght:1e3,opsz:144},h="+liga",d=A.hbFace,g=s.createFont(d);g.setVariations(u),g.setScale(d.upem,d.upem);for(const{contentId:p}of this.cells.values()){const f=e.getRegistered(p).data,m=s.createBuffer();m.addText(f),m.guessSegmentProperties(),s.shape(g,m,h);const y=m.json(A);p in n||(n[p]=[]),n[p][a]=this._getAdvance(y).x!==0?this._getAdvance(y).x/d.upem:0,m.destroy()}g.destroy()}let r=0;const o={};for(const[a,l]of Object.entries(n)){const A=Math.max(...l);o[a]=A,r=Math.max(r,A)}return[n,o,r]}_getMinMaxExtents(e){let t=0,n=1/0,s=0,r=1/0;for(const{ascender:o,descender:a,upem:l}of e){const A=a/l,u=o/l;A<n&&(n=A),A>t&&(t=A),u<r&&(r=u),u>s&&(s=u)}return[["--min-descender-em",n],["--max-descender-em",t],["--min-ascender-em",r],["--max-ascender-em",s]]}_getExtents(){const e=this.cells[0],t=[];if(!e)return t;const n=this.widgetBus.harfbuzz.hbjs,s=this.widgetBus.harfbuzz.Module,r=this.getEntry("globalT").value,o=s.stackSave();for(const[a,[,l]]of e.cellActors.entries()){const A=l.widgetBus.getEntry("font").value,u=l.widgetBus.getEntry("animationProperties@"),h=u.animanion.getPropertiesFromGlobalT(r),d=v_(h),g=A.hbFace,p=n.createFont(g);p.setVariations(d);const f=new cW(this.widgetBus.harfbuzz,3);s._hb_font_get_h_extents(p.ptr,f.ptr);const m=f.int32Array,[y,v,G]=m;t[a]={ascender:y,descender:Math.abs(v),lineGap:G,upem:g.upem},f.free&&f.free(),p.destroy()}return s.stackRestore(o),t}_getGridFontSize(e,t,n,s,r,o,a,l){const A=Math.floor(t/n*a),u=e/n,h=Math.floor((u+o)/(r+o)),d=Math.ceil(l/h);if(d>A)return{fontSizePt:n,overflows:!0};const g=e/t;let p=n;for(let y=d;y<=l;y++){const v=Math.ceil(l/y),G=v*(r+o)-o,R=y*a,Q=G/R,S=Q>=g?e/G:t/R;if(S>=s)return{fontSizePt:s,overflows:!1};if(S<p)break;p=S}return{fontSizePt:Math.floor(p*100)/100-.3,exactFontSize:p,overflows:!1}}_setCellsProperties(e,t,n,s,r){const[,,o]=e;this.element.style.setProperty("--widest-cell-em",o),this.element.style.setProperty("--font-size-pt",t),this.element.style.setProperty("--cell-alignment",r);for(const[a,l]of n)this.element.style.setProperty(a,l);for(const[a,l]of s.entries())this.element.style.setProperty(`--ascender-em-${a}`,l.ascender/l.upem),this.element.style.setProperty(`--descender-em-${a}`,l.descender/l.upem),this.element.style.setProperty(`--line-gap-em-${a}`,l.lineGap/l.upem)}_update(e,t,n){super._update(e,t,n);const s=this.getChangedMap(e);let r=n;if(!r){for(const K of["font","activeActors","keyMoments"])if(s.has(K)){r=!0;break}}r&&(this._cellWidths=this._getCellsWidths());const{offsetWidth:o,offsetHeight:a}=this.widgetBus.wrapper.host,l=o/4*3,A=a/4*3,u=24,h=1/0,d=this._domTool.window.getComputedStyle(this.element),[g,p]=[["--gap-widht-em",0],["--line-height-em",1]].map(([K,j])=>{const Ce=d.getPropertyValue(K),Ge=parseFloat(Ce);return isNaN(Ge)?j:Ge}),[,,f]=this._cellWidths,{fontSizePt:m}=this._getGridFontSize(l,A,u,h,f,g,p,this.cells.length),y=this._getExtents(),v=this._getMinMaxExtents(y),G=s.has("animationProperties@")?s.get("animationProperties@"):this.getEntry("animationProperties@"),R=(s.has("globalT")?s.get("globalT"):this.getEntry("globalT")).value,Q=G.animanion.getPropertiesFromGlobalT(R),S=c(K=>[,Ve(K).default],"getDefault"),[,M]=ra(Q,S,"generic/cellAlignment"),V=[["colors/stageBackgroundColor","background-color"]];Wn(this.element,Q,S,V),this._setCellsProperties(this._cellWidths,m,v,y,M)}getChangedMap(e){if(this._ownChangedMapCache===null||this._ownChangedMapCache.compareResult!==e){const t=this.widgetBus.wrapper.getChangedMapFromCompareResult(!1,e);this._ownChangedMapCache={compareResult:e,changedMap:t}}return this._ownChangedMapCache.changedMap}update(e,...t){this.widgetBus.wrapper.getProtocolHandlerImplementation("cellContent@").resetUpdatedLog(),this._ownChangedMapCache=null,super.update(e,...t)}initialUpdate(e){this.widgetBus.wrapper.getProtocolHandlerImplementation("cellContent@").resetUpdatedLog(),this._ownChangedMapCache=null;let t=ln.createInitial(e,this.modelDependencies);const n=this._provisionWidgets(t);n.size&&(t=ln.createInitial(e,this.modelDependencies)),this._update(t,n,!0)}}const[,hd]=PI([["LayerActorModel","Layer",sd],["CircleActorModel","Circle",rd],["RectangleActorModel","Rectangle",od],["LineOfTextActorModel","Line of Text",ad],["VideoproofArrayActorModel","Videoproof Array",bl],["VideoproofArrayV2ActorModel","Videoproof Array V2",El],["VideoproofArrayV2CellActorModel","Videoproof Array V2 Cell",ud]]);function Rc(i){const{typeClass:e,zones:t,widgetRootPath:n=null,widgetRelativeRootPath:s=null}=i;if(e===rd)return[{rootPath:n,relativeRootPath:s},[],Fr,t,GY,[]];if(e===od)return[{rootPath:n,relativeRootPath:s},[],Fr,t,RY,[]];if(e===ad)return[{rootPath:n,relativeRootPath:s},[],Fr,t,SY,[["font","font"]]];if(e===bl){const a=bl.fields.get("keyMoments").Model,l=a.fields.get("charGroup").fields.get("options"),A=l.prototype instanceof ke,u=(A?l.Model:l).charGroupsData;return[{rootPath:n,relativeRootPath:s},[],Fr,t,sW,[["font","font"]],u]}if(e===El){const a=El.fields.get("keyMoments").Model,l=a.fields.get("charGroup").fields.get("options"),A=l.prototype instanceof ke,u=(A?l.Model:l).charGroupsData;return[{rootPath:n,relativeRootPath:s},[],Fr,t,AW,[["font","font"],"activeActors","keyMoments"],t,u]}if(e===sd){const{layerBaseClass:a}=i;return[{rootPath:n,relativeRootPath:s},[],vY,t,a,Rc]}const{typeLabel:r="Unkown Label",typeKey:o="UnkownKey"}=i;throw new Error(`NOT IMPLEMENTED _getActorWidgetSetup for typeClass: ${e.name} label: "${r}" key: ${o}`)}c(Rc,"getActorWidgetSetup");const Dy=Symbol("LEAF_NODE_TYPE"),Ty=Symbol("CONTAINER_NODE_TYPE");function ri(i){const e=i.get("actorTypeKey").value,t=i.get("actorTypeModel"),n=t.get("label").value,s=t.get("typeClass").value,r=new Set([rd,od,ad,bl,ud]),o=new Set([sd,El]),a=c(A=>r.has(A),"isLeafNode"),l=c(A=>o.has(A),"isContainerNode");if(a(s))return Dy;if(l(s))return Ty;throw new Error(`KEY ERROR  getActorTreeNodeType for actor with key: ${e} typeClass: ${s.name} label: "${n}"`)}c(ri,"getActorTreeNodeType");ri.LEAF_NODE_TYPE=Dy;ri.CONTAINER_NODE_TYPE=Ty;function uW(i){return new Set(["LayerActorModel","LineOfTextActorModel","VideoproofArrayActorModel","VideoproofArrayV2ActorModel","VideoproofArrayV2CellActorModel"]).has(i)}c(uW,"isTypographicActorTypeKey");function hW(i){const e=[];return["LayerActorModel","LineOfTextActorModel","VideoproofArrayActorModel","VideoproofArrayV2ActorModel","VideoproofArrayV2CellActorModel"].includes(i)&&e.push("FontSelect"),i==="LayerActorModel"&&e.push("ContainerTaskAutomations"),e}c(hW,"getActorTypeKeySpecificWidgets");class dW extends dn{static{c(this,"ActorsMeta")}[Zs]=!0;constructor(e,t,n,s,r=[]){super(e,t,r),this._initAnimanionFn=n,this._isInheritingPropertyFn=s}_getActorWidgetSetup(e){const t=this.getEntry(e),n=ri(t),s=e.append("instance");if(n===ri.LEAF_NODE_TYPE)return[{rootPath:e,relativeRootPath:D.fromParts(".","instance"),"animationProperties@":s.toString()},["keyMoments","isLoop",["/activeState/t","globalT"],[`animationProperties@${s.append("..","..","..")}`,"@parentProperties"]],pc,this._initAnimanionFn,this._isInheritingPropertyFn];if(n===ri.CONTAINER_NODE_TYPE)return[{rootPath:e,relativeRootPath:D.fromParts(".","instance")},["keyMoments","isLoop",["/activeState/t","globalT"],[`animationProperties@${s.append("..","..","..")}`,"@parentProperties"]],Sc,this._zones,this._initAnimanionFn,this._isInheritingPropertyFn];throw new Error(`NOT IMPLEMENTED _getActorWidgetSetup actor ${t} with tree node type ${n.toString()}`)}_createWrapper(e){const t=this._childrenWidgetBus,[n,s,r,...o]=this._getActorWidgetSetup(e);return this._initWrapper(t,n,s,r,...o)}}class Sc extends we{static{c(this,"ContainerMeta")}constructor(e,t,n,s){const r=[[{"animationProperties@":e.rootPath.toString()},[...e.wrapper.getDependencyMapping(e.wrapper.constructor.DEPENDECIES_ALL)],pc,n,s],[{},[["activeActors","collection"]],dW,t,n,s,[]]];super(e,t,r)}}class gW extends Vo{static{c(this,"SimpleClockTaskAutomationDialog")}static TEMPLATE=`<dialog class="ui_dialog-clock">
    <form method="dialog">
      <fieldset>
        <legend>Insert a simple Clock -- Task Automation</legend>
        <p>A clock that shows correct hours, minutes and seconds between t 0 to 1,
        the hand in the time circle behaves like the hour hand of a clock. I
        I.e.: 12 hours require a total animation tie of 43200 seconds (12 * 60 * 60)</p>
        <menu>
          <button type="submit" value="create">Insert Clock</button>
          <button>Cancel</button>
        </menu>
      </fieldset>
    </form>
  </dialog>
`;constructor(e){super(e),[this.element,this._formElements]=this._initTemplate()}_initTemplate(){const[e]=super._initTemplate();return[e,new Map]}_getFont(e){const t=e.getEntry(e.rootPath);return t.has("font")?t.get("font").value:e.getEntry("/font").value}_updateDefaults(){}async show(e,...t){const n=super.show(),s=this.element;if(this._updateDefaults(e),s.returnValue=null,s.showModal(),await n==="create")return this._create(e,{},...t)}_createTimingLayer(e,t,n,s){const r=Qi("LayerActorModel",e.dependencies),o=r.get("instance"),a=o.get("keyMoments");o.get("label").value=`Control ${n}`,e.push(r);for(let h=0;h<t;h++){const d=a.constructor.Model.createPrimalState(a.dependencies).getDraft(),g=a.constructor.Model.createPrimalState(a.dependencies).getDraft(),p=d.get("numericProperties"),f=g.get("numericProperties"),m=s(h);a.push(d,g),d.get("label").value=`${m}: new ${n}`,d.get("duration").value=0,d.get("textRun").value=m,p.setSimpleValue("t",0),g.get("label").value=`${m}: animate ${n}`,g.get("duration").value=1,f.setSimpleValue("t",1)}const l=o.get("activeActors"),A=Qi("LineOfTextActorModel",l.dependencies),u=A.get("instance");return u.get("label").value=`Display ${n}`,l.push(A),[o,l,u]}async _create(e){const t={fontSize:90,wght:{max:800,min:200},opsz:18,colorA:{mode:"oklch",l:.7,c:.056999999999999995,h:144,alpha:1},colorB:{mode:"oklch",l:.3,c:0,h:144,alpha:1}};return await e.changeState(()=>{const n=e.getEntry(e.rootPath.append("activeActors")),[s,r,o]=this._createTimingLayer(n,12,"Hours",S=>`0${S||12}`.slice(-2)),[,a,l]=this._createTimingLayer(r,60,"Minutes",S=>`0${S}`.slice(-2)),[,,A]=this._createTimingLayer(a,60,"Seconds",S=>`0${S}`.slice(-2)),u=e.getEntry(e.rootPath),h=u.get("width").value,d=u.get("height").value,g=t.fontSize*4/3,p=1.2*g,f=.25*g,m=3*p+2*f,y=pr(t.colorA,n.dependencies),v=pr(t.colorB,n.dependencies),G=s.get("keyMoments"),R=G.get(0),Q=R.get("numericProperties");u.get("duration").value=12*60*60,R.get("fontSize").value=t.fontSize,R.get("heightTreatment").value="baselineToBottomFix",R.get("positioningVertical").value="bottom",Q.setSimpleValue("x",h/2-m/2),Q.setSimpleValue("y",d/2),Q.setSimpleValue("width",m);for(const[S,[M,V]]of ol([["hh:mm",r],["mm:ss",a]])){const K=Qi("LineOfTextActorModel",V.dependencies),j=K.get("instance"),Ce=j.get("keyMoments"),Ge=Ce.constructor.Model.createPrimalState(Ce.dependencies).getDraft(),Ie=Ce.constructor.Model.createPrimalState(Ce.dependencies).getDraft(),H=Ge.get("axesLocations"),Ae=Ie.get("axesLocations"),ne=Ge.get("numericProperties");j.get("label").value=`Separator ${M}`,Ge.get("label").value="settings",Ge.get("textRun").value=":",Ge.get("textAlign").value="center",ne.setSimpleValue("x",(S+1)*p+S*f),ne.setSimpleValue("width",f),H.setSimpleValue("opsz",t.opsz),H.setSimpleValue("wght",(t.wght.max-t.wght.min)*.5+t.wght.min),H.setSimpleValue("GRAD",150),Ae.setSimpleValue("GRAD",-200),Ge.set("textColor",y),Ie.set("textColor",v),Ce.push(Ge,Ie),V.push(K)}for(const[S,M]of ol([o,l,A])){const V=M.get("keyMoments"),K=["right","center","left"],j=V.constructor.Model.createPrimalState(V.dependencies).getDraft(),Ce=V.constructor.Model.createPrimalState(V.dependencies).getDraft(),Ge=j.get("numericProperties"),Ie=j.get("axesLocations"),H=Ce.get("axesLocations");j.get("label").value="start",Ce.get("label").value="end",j.get("textAlign").value=K[S%K.length],Ie.setSimpleValue("opsz",t.opsz),Ie.setSimpleValue("wght",t.wght.max),H.setSimpleValue("wght",t.wght.min),j.set("textColor",y),Ce.set("textColor",v),Ge.setSimpleValue("x",S*p+S*f),Ge.setSimpleValue("width",p),V.push(j,Ce)}})}}class pW extends Vo{static{c(this,"InchwormTaskAutomationDialog")}static TEMPLATE=`<dialog class="ui_dialog-inchworm">
    <form method="dialog">
      <fieldset>
        <legend>Insert Inchworm -- Task Automation</legend>
        <p>The Inchworm is a run of text that moves across the stage by contracting and expanding its running width.</p>
        <div>
          <div><span>Font: </span><em class="ui_dialog-inchworm-selected_font"></em></div>
          <br/>
          <label>Text <input
                  class="ui_dialog-inchworm-text"
                  type="text"
                  placeholder="(not initilized)"
                  value="" />
          </label>
          <br/>
          <label>x <input
                  class="ui_dialog-inchworm-x"
                  type="number"
                  value="0" />px
          </label>
          <br/>
          <label>y <input
                  class="ui_dialog-inchworm-y"
                  type="number"
                  value="0" />px
          </label>
          <br/>
          <input type="hidden" class="ui_dialog-inchworm-font" value="(not initialized)" />
          <!-- This is a bit more complicated, but the urgency is big
          <label> Font <select class="ui_dialog-inchworm-font">
          </select></label>
          -->
          <label>Font Size <input
                  class="ui_dialog-inchworm-font_size"
                  type="number"
                  min="8"
                  value="{set default/current}" />pt
          </label>
          <br/>
          <label> Advancement By <select class="ui_dialog-inchworm-advancement_type">
                <option selected value="repetition">number of repetitions</option>
                <option value="min-distance">minimal distance in px</option>
          </select></label>
          <br/>
          <label>Advancement Value <input
                  class="ui_dialog-inchworm-advancement_value"
                  type="number"
                  value="1" />
          </label>
          <p><em>Tip:</em> Use a negative advancement value for reverse direction.</p>
          <!--
          will animate full wdth/width axis
          other possible values will have to come in a later revision
          -->
        </div>
        <menu>
          <button type="submit" value="create">Insert Inchworm</button>
          <button>Cancel</button>
        </menu>
      </fieldset>
    </form>
  </dialog>
`;constructor(e){super(e),this._defaultText="Inchworm",[this.element,this._formElements]=this._initTemplate()}_initTemplate(){const[e]=super._initTemplate(),t=new Map;for(const n of["text","x","y",["selectedFont","selected_font"],"font",["fontSize","font_size"],["advancementType","advancement_type"],["advancementValue","advancement_value"]]){const[s,r]=typeof n=="string"?[n,n]:n,o=`.ui_dialog-inchworm-${r!==void 0?r:s}`,a=e.querySelector(o);if(!a)throw new Error(`ASSERTION FAILED ${this} an element selected by "${o}" must be in the TEMLATE.`);t.set(s,a)}return t.get("text").placeholder=this._defaultText,[e,t]}_getFont(e){const t=e.getEntry(e.rootPath);return t.has("font")?t.get("font").value:e.getEntry("/font").value}_updateDefaults(e){const t=`animationProperties@${e.rootPath.toString()}`,n=e.getEntry(t),s=n.propertyValuesMap,r=this._getFont(e);this._formElements.get("selectedFont").textContent=r.nameVersion,this._formElements.get("font").value=r.fullName,this._formElements.get("fontSize").value=s.has("fontSize")?s.get("fontSize"):25}async show(e,...t){const n=super.show(),s=this.element;if(this._updateDefaults(e),s.returnValue=null,s.showModal(),await n==="create")return this._create(e,{text:this._formElements.get("text").value||this._defaultText,x:parseFloat(this._formElements.get("x").value||0),y:parseFloat(this._formElements.get("y").value||0),font:this._formElements.get("font").value,fontSize:parseFloat(this._formElements.get("fontSize").value||1),advancement:{type:this._formElements.get("advancementType").value,value:parseFloat(this._formElements.get("advancementValue").value||1)}},...t)}async _create(e,t){const n=this._getFont(e);if(t.font!==n.fullName)throw new Error(`ASSERTION ERRROR {this} font should be "${n.fullName}" but is "${t.font}"`);if(Object.hasOwn(t,"mainAxis")||(t.mainAxis={name:"wdth",default:null}),Object.hasOwn(t,"widthParams")||(t.widthParams=new Map),!Object.hasOwn(n.axisRanges,t.mainAxis.name))throw new Error(`VALUE ERRROR {this} font "${n.nameVersion}" doesn't have an "options.mainAxis.name" axis.`);const s=n.axisRanges[t.mainAxis.name];t.widthParams.has(t.mainAxis.name)||t.widthParams.set(t.mainAxis.name,[s.min,s.max]),(!Object.hasOwn(t.mainAxis,"default")||t.mainAxis.default===null)&&(t.mainAxis.default=s.default);{const[L,T]=Array.from(t.widthParams.get(t.mainAxis.name)).sort();t.mainAxis.default=Math.min(Math.max(t.mainAxis.default,L),T)}t.advancement.value===0&&(t.advancement.value=1);const[r,o,a]=await e.changeState(()=>{const L=e.getEntry(e.rootPath.append("activeActors")),T=Qi("LayerActorModel",L.dependencies),he=T.get("instance"),W=Qi("LayerActorModel",L.dependencies),z=W.get("instance"),ie=Qi("LineOfTextActorModel",T.dependencies),ee=ie.get("instance"),J=ee.get("keyMoments"),ve=J.constructor.Model.createPrimalState(J.dependencies).getDraft(),Re=J.constructor.Model.createPrimalState(J.dependencies).getDraft(),We=Je(ve,"numericProperties"),He=Je(ve,"axesLocations"),Ke=Je(Re,"axesLocations");he.get("label").value="Inchworm",z.get("label").value="normalization",ee.get("label").value="Body",ve.get("label").value="0: Measure Expansion",Re.get("label").value="0: Measure Contraction",ve.get("textRun").value=t.text,ve.get("fontSize").value=t.fontSize,ve.get("textAlign").value="right",We.setSimpleValue("x",0),We.setSimpleValue("y",0);for(const[It,[,At]]of t.widthParams)He.setSimpleValue(It,At);for(const[It,[At]]of t.widthParams)Ke.setSimpleValue(It,At);J.push(ve,Re);const $e=0,et=0;he.get("activeActors").push(W),z.get("activeActors").push(ie);const nt=L.size;L.push(T);const Ct=e.rootPath.append("activeActors",nt,"instance"),ct=Ct.append("activeActors",$e,"instance"),pt=ct.append("activeActors",et,"instance");return[Ct,ct,pt]}),l=`animationProperties@${a.toString()}`,A=e.getEntry(l),u=this._domTool.createElement("span",{class:"measure_box-sample"}),h=this._domTool.createElement("div",{class:"measure_box"},u);{const L=A.animanion.getPropertiesFromGlobalT(0),T=e.getEntry(a.append("font")).value;u.textContent=L.get("generic/textRun"),u.style.setProperty("font-family",`"${T.fullName}"`),li(u,L)}this._domTool.document.body.append(h);const{width:d}=u.getBoundingClientRect();{const L=A.animanion.getPropertiesFromGlobalT(A.animanion.LAST_T);li(u,L)}const{width:g}=u.getBoundingClientRect(),p=d-g,f=t.advancement?t.advancement:{type:"repetition",value:1},m=f?.type==="min-distance"?f.value/p:f?.type==="repetition"?f.value:1,y=m>=0?1:-1,v=[["Contraction",1.7],["Expansion",1]],[G,R]=y===1?v:[...v].reverse(),Q=Math.abs(m),[S,M]=t.widthParams.get("wdth"),V=100,K=M-S,j=V-S,Ce=1-j/K,[,Ge]=G,[,Ie]=R,H=Ge+Ie,Ae=Ge/H,ne=y>0?Ae*Ce:1-Ae*Ce;{const L=A.animanion.getPropertiesFromGlobalT(Ce);li(u,L)}const{width:De}=u.getBoundingClientRect(),O=d-De;return h.remove(),await e.changeState(()=>{const L=e.getEntry(a.append("keyMoments"));{const W=L.get(0),z=W.get("numericProperties"),ie=W.get("axesLocations");W.get("label").value="0: Initialization",W.get("duration").value=0,W.get("textAlign").value="right",z.setSimpleValue("width",d),z.setSimpleValue("x",0);for(const[ee,[,J]]of t.widthParams)ie.setSimpleValue(ee,J)}{const W=L.constructor.Model.createPrimalState(L.dependencies).getDraft(),z=W.get("numericProperties"),ie=W.get("axesLocations"),[ee,J]=G;L.splice(1,1,W),W.get("label").value=`1: ${ee}`,W.get("duration").value=J,z.setSimpleValue("x",0);for(const[ve,[Re]]of t.widthParams)ie.setSimpleValue(ve,Re)}{const W=L.constructor.Model.createPrimalState(L.dependencies).getDraft(),z=W.get("numericProperties");L.push(W),W.get("label").value="2: Re-alignment",W.get("duration").value=0,W.get("textAlign").value="left",z.setSimpleValue("x",p)}{const W=L.constructor.Model.createPrimalState(L.dependencies).getDraft(),z=W.get("axesLocations"),[ie,ee]=R;L.push(W),W.get("label").value=`3: ${ie}`,W.get("duration").value=ee;for(const[J,[,ve]]of t.widthParams)z.setSimpleValue(J,ve)}const T=e.getEntry(o.append("keyMoments"));{const W=T.constructor.Model.createPrimalState(T.dependencies).getDraft(),z=T.constructor.Model.createPrimalState(T.dependencies).getDraft(),ie=T.constructor.Model.createPrimalState(T.dependencies).getDraft(),ee=T.constructor.Model.createPrimalState(T.dependencies).getDraft(),J=W.get("numericProperties"),ve=z.get("numericProperties"),Re=ie.get("numericProperties"),We=ee.get("numericProperties");T.push(W,z,ie,ee),W.get("label").value="Start Time Control",z.get("label").value="Pin Inital",ie.get("label").value="Advance",ee.get("label").value="End Time Control";const[He,Ke]=y>0?[-O,p-O]:[-O,-p-O],[$e,et]=y>0?[ne,1+ne]:[1-ne,-ne];W.get("duration").value=0,J.setSimpleValue("x",He),J.setSimpleValue("t",$e),z.get("duration").value=1-ne,ve.setSimpleValue("x",He),ie.get("duration").value=0,Re.setSimpleValue("x",Ke),ee.get("duration").value=ne,We.setSimpleValue("t",et),We.setSimpleValue("x",Ke)}const he=e.getEntry(r.append("keyMoments"));for(let W=0;W<Q;W++){const z=he.constructor.Model.createPrimalState(he.dependencies).getDraft(),ie=he.constructor.Model.createPrimalState(he.dependencies).getDraft(),ee=z.get("numericProperties"),J=ie.get("numericProperties"),ve=t.x+y*W*p;he.push(z,ie),z.get("label").value=`${W}: positioning`,ie.get("label").value=`${W}: time control`,z.get("duration").value=0,ee.setSimpleValue("x",ve),W===0&&(z.get("positioningHorizontal").value="left",Object.hasOwn(t,"y")&&ee.setSimpleValue("y",t.y)),ee.setSimpleValue("t",0),ie.get("duration").value=1,J.setSimpleValue("x",ve),J.setSimpleValue("t",1)}})}}const Dp=Object.freeze(new it([["clock",["Simple Clock",gW]],["inchworm",["The Inchworm",pW]]]));class fW extends qt{static{c(this,"StageDOMNode")}constructor(e,t,n,s,r=!1){super(e,t),this._automaticZoomDefault=r,this._lastContainerDimensions=null;for(const o of[...s])this.node.classList.add(o);this._layerNode=n,this._resizeObserver=null}_updateZoomLevel(e){const t=e.get("type").value;if((t==="app-default"&&this._automaticZoomDefault?"automatic":t)==="automatic")this._startResizeFitToHost();else{this._stopResizeFitToHost();const s=e.get("scaling"),r=s.isEmpty?s.Model.defaultValue:s.value,o=r*.01;this.node.style.setProperty("transform-origin","top left"),this.node.style.setProperty("transform",`scale(${o})`)}}_startResizeFitToHost(){this._resizeObserver===null&&(this._resizeObserver=new ResizeObserver(this._resizeHandler.bind(this)),this._resizeObserver.observe(this.widgetBus.wrapper.host,{box:"content-box"}))}_stopResizeFitToHost(){this._resizeObserver!==null&&(this._resizeObserver.disconnect(),this._resizeObserver=null),this.widgetBus.wrapper.host.style.setProperty("overflow",null),this.node.style.setProperty("transform-origin",null),this.node.style.setProperty("transform",null),this._lastContainerDimensions=null}_resizeFitToHost(e,t){const n=e.width/e.height,s=t.width/t.height,r=n>s?e.height/t.height:e.width/t.width,o=(e.width-t.width*r)*.5,a=(e.height-t.height*r)*.5;this.widgetBus.wrapper.host.style.setProperty("overflow","hidden"),this.node.style.setProperty("transform-origin","top left"),this.node.style.setProperty("transform",`translate(${o}px, ${a}px) scale(${r})`),this._lastContainerDimensions=e}_updateResize(){if(this._lastContainerDimensions===null)return;const e={width:this.getEntry("width").value,height:this.getEntry("height").value};this._resizeFitToHost(this._lastContainerDimensions,e)}_resizeHandler(e){const t={width:this.getEntry("width").value,height:this.getEntry("height").value},n={width:0,height:0};for(const s of e)s.contentBoxSize?s.contentBoxSize[0]?(n.width=s.contentBoxSize[0].inlineSize,n.height=s.contentBoxSize[0].blockSize):(n.width=s.contentBoxSize.inlineSize,n.height=s.contentBoxSize.blockSize):(n.width=s.contentRect.width,n.height=s.contentRect.height),this._resizeFitToHost(n,t)}destroy(){return this._stopResizeFitToHost(),super.destroy()}update(e){e.has("zoomLevel")&&this._updateZoomLevel(e.get("zoomLevel"));for(const t of["width","height"]){let n=!1;e.has(t)&&(n=!0,this.node.style.setProperty(t,`${e.get(t).value}px`)),n&&this._updateResize()}if(e.has("animationProperties@")||e.has("globalT")){const t=e.has("animationProperties@")?e.get("animationProperties@"):this.getEntry("animationProperties@"),n=(e.has("globalT")?e.get("globalT"):this.getEntry("globalT")).value,s=t.animanion.getPropertiesFromGlobalT(n),r=c(a=>[!0,Ve(a).default],"getDefault"),o=[["colors/stageBackgroundColor","background-color"],["colors/textColor","color"]];Wn(this._layerNode,s,r,o)}}}const jr=Symbol("_NOTDEF");class mW extends Bh{static{c(this,"PlainNumberAndRangeColorInput")}static TEMPLATE=`<div class="number-and-range-color-input">
    <div class="number-and-range-color-input_value-box">
        <label><!-- insert: label --></label>
        <input type='number'  /><!-- insert: unit -->
    </div>
    <div class="number-and-range-color-input_color-bar">
        <input type='range' />
    </div>
</div>`;constructor(...e){super(...e),this._colorBarContainer=this.element.querySelector(".number-and-range-color-input_color-bar"),this._canvas=this._domTool.createElement("canvas"),this._colorBarContainer.append(this._canvas),this._ctx=this._canvas.getContext("2d",{colorSpace:"display-p3"})}}class CW{static{c(this,"PlainColorComponentOrEmptyInput")}constructor(e,t="ui_color_component"){this._domTool=e,this._baseClass=t,this._componentKey=null,this._uiNumber=new mW(this._domTool,(...n)=>this._changeHandler(...n),"","",{}),this._uiToggle=new vh(this._domTool,(...n)=>this._toggleHandler(...n),"toggle","set","unset","Toggle explicit color component input or set empty."),this.element=this._uiNumber.element,this.element.classList.add(this._baseClass),this.element.append(this._uiToggle.element),this._changeHandler=null,this._toggleHandler=null}getComponentClassFragment(e){return e.toLowerCase()}_renderColorStrip(e,t){const n=Xi(t.mode).ranges,s=this._uiNumber._colorBarContainer,r=s.scrollWidth,o=s.scrollHeight,a=this._uiNumber._ctx,l=this._uiNumber._canvas,A=n[e],u=A.map(f=>({...t,[e]:f})),h=[u,t.mode],d=e==="h"?"longer hue":!1,g=new Map([["shorter hue",Kn],["longer hue",HQ],["increasing hue",zQ],["decreasing hue",XQ]]);d&&(g.has(d)||console.error(`KEY ERROR unknown hueInterpolationMethod "${d}".`),h.push({h:{fixup:g.get(d)}}),u[1].h-=Number.EPSILON*1e3);const p=Tk(...h);l.width!==r&&(l.width=r,l.style.setProperty("--width",`${r}px`)),l.height!==o&&(l.height=o,l.style.setProperty("--height",`${o}px`)),a.reset?a.reset():a.clearRect(0,0,a.canvas.width,a.canvas.height);for(let f=0;f<r;f++){const m=f/(r-1);a.fillStyle=gc(p(m)),a.fillRect(f,0,1,o)}}update(e,t,n,s,r,o=0){this._componentKey=e;for(const p of[...this.element.classList])p.startsWith(`${this._baseClass}-`)&&this.element.classList.remove(p);const a=t.get(e);let l=null;e_.has(a.constructor)?l="%":t_.has(a.constructor)&&(l="turn");const A=a instanceof ke?a.constructor.Model:a.constructor,u=A.minVal,h=A.maxVal,d=A.toFixedDigits,g=d!==null?parseFloat(o.toFixed(d)):o;this._uiNumber.updateTemplateVars(e,l,{min:u,max:h,default:A.defaultValue}),a.isEmpty?(this._uiNumber.update(g),this._uiNumber.passive=!0,this._uiToggle.update(!0)):(this._uiNumber.update(a.value),this._uiNumber.passive=!1,this._uiToggle.update(!1)),this.element.classList.add(`${this._baseClass}-${this.getComponentClassFragment(e)}`),this._changeHandler=n,this._toggleHandler=s,this._renderColorStrip(e.toLowerCase(),r)}destroy(){}}function Tp(i,e=jr){if(i.constructor.Model.defaultValue!==null)return i.constructor.Model.defaultValue;if(e!==jr)return jr;throw new Error(`KEY ERROR default value not found for ${i}.`)}c(Tp,"_getNumberInstanceDefault");function dd(i,e,t=jr){const n=i(...t===jr?[]:[t]),s=MI(e),r=Mh(n,s);return[LI(r),r]}c(dd,"_getDefaultColor");class IW extends me{static{c(this,"UIColorComponentRanges")}static TEMPLATE=`<div class="ui_color_component_ranges">
</div>`;constructor(e,t=null,n=()=>!1){super(e),this._getDefaults=t,this._requireUpdateDefaults=n,this._components=[],[this.element]=this.initTemplate()}initTemplate(){const e=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE),t=e.firstElementChild;return this._insertElement(t),[t]}_createComponent(){const e=new CW(this._domTool);return this.element.append(e.element),e}_componentToggleHandler(e){this._changeState(()=>{const t=this.getEntry("color"),n=t.get(e);if(!n.isEmpty)n.clear();else{const[s]=this._getDefaultColor(t),r=Object.hasOwn(s,e)?s[e]:Tp(n,0);n.set(r)}})}_componentChangeHandler(e,t){this._changeState(()=>{this.getEntry("color").get(e).set(t)})}_updateComponent(e,t,n,s,r){this._components[e].update(t,n,this._componentChangeHandler.bind(this,t),this._componentToggleHandler.bind(this,t),s,r)}_getDefaultColor(e){return dd(this._getDefaults.bind(this),e)}update(e){const t=this._requireUpdateDefaults(e);if(e.has("color")||t){const n=(e.has("color")?e.get("color"):this.getEntry("color")).wrapped,[s,r]=this._getDefaultColor(n),o=na(n),a=Object.assign({},r,o);let l=0;for(const[A,u]of ol(n.keys())){l+=1,this._components[A]||this._components.push(this._createComponent());const h=Object.hasOwn(s,u)?s[u]:Tp(n.get(u),0);this._updateComponent(A,u,n,a,h)}for(;this._components.length>l;){const A=this._components.pop();A.element.remove(),A.element.destroy()}}}}class yW extends me{static{c(this,"UIColorPatch")}constructor(e,t,n,s="div"){super(e),this._getDefaults=t,this._requireUpdateDefaults=n,[this.element]=this.initTemplate(s)}initTemplate(e){const t=this._domTool.createElement(e,{class:"ui_color_patch"},this._domTool.createElement("span",{class:"ui_color_patch-no_color_label"},"(inherited)"));return this._insertElement(t),[t]}_getDefaultColor(e){return dd(this._getDefaults.bind(this),e)}update(e){const t=this._requireUpdateDefaults(e);if(e.has("color")||t){const n=e.has("color")?e.get("color"):this.getEntry("color");let s;if(n.hasWrapped){this.element.classList.add("ui_color_patch-has_color"),this.element.classList.remove("ui_color_patch-no_color");const r=n.wrapped,[,o]=this._getDefaultColor(r),a=na(r);s=Object.assign({},o,a)}else this.element.classList.add("ui_color_patch-has_color"),this.element.classList.add("ui_color_patch-no_color"),s=this._getDefaults();this.element.style.setProperty("--color",gc(s))}}}class Io extends we{static{c(this,"UIColorChooser")}constructor(e,t,n,s,r,o){const a="ui_color_chooser",l=e.domTool.createElement("div",{class:a}),A=e.domTool.createElement("label",{class:`${a}-label_toggle`}),u=new Map([...t,["local",l],["label",A]]);super(e,u),e.wrapper.host&&this._insertElement(l),this._container=l,this._visibleClass="settings_visible",this._hiddenClass="settings_hidden",this._displaySettings=!1,this._toggleSettingsVisibilityClasses(),this._getDefaults=s;const h=c(()=>this._displaySettings?this.widgetBus.getEntry(this.widgetBus.rootPath).get("colorTypeKey").value!==ce.NULL:!1,"activationTest"),d=[...e.wrapper.host?[]:[[{zone:"main"},[],qt,l]],[{zone:"local",onInit:c(g=>g.node.addEventListener("click",this._toggleOptionsHandler.bind(this)),"onInit")},[],qt,A],[{zone:"label"},[],qt,this._domTool.createElement("span",null,n)],[{zone:"label"},[["instance","color"],...r],yW,s,o,"span"],[{zone:"local",activationTest:c(()=>this._displaySettings,"activationTest")},[["availableColorTypes","options"],["colorTypeKey","value"]],vr,"ui_color_model_select","Color Mode",(g,p)=>p.get("label").value,[!0,"(no color)",ce.NULL],this._changeColorModeHandler.bind(this)],[{zone:"local",activationTest:h},[["instance","color"],...r],IW,s,o]];this._initWidgets(d)}_toggleSettingsVisibilityClasses(){const[e,t]=this._displaySettings?[this._visibleClass,this._hiddenClass]:[this._hiddenClass,this._visibleClass];this._container.classList.add(e),this._container.classList.remove(t)}_toggleOptionsHandler(){this._displaySettings=!this._displaySettings,this._toggleSettingsVisibilityClasses();const e=this.getEntry("/");this.initialUpdate(e)}_getDefaultColor(e){return dd(this._getDefaults.bind(this),e)}_changeColorModeHandler(e){if(e===ce.NULL)return;const t=this.getEntry(this.widgetBus.rootPath.parent),n=this.widgetBus.rootPath.parts.at(-1),s=t.get(n).get("instance");let r;if(s.hasWrapped){const u=s.wrapped,[,h]=this._getDefaultColor(u),d=na(u);r=Object.assign({},h,d)}else if(r=this._getDefaults(null),r===null){console.error(`_changeColorModeHandler: can't get a default value for colorFieldName ${n}`);return}const o=Lh.get(e).value.get("typeClass").value,a=fl.get(o),l=Mh(r,a),A=pr(l,t.dependencies);t.set(n,A)}}function bW(i,e,t,n=null,s=null){const r=(e.leading-i.leading)/(e.lineWidth-i.lineWidth),o=i.leading-r*i.lineWidth,a=r*t+o,l=n===null?Math.min(e.lineWidth,i.lineWidth):n,A=s===null?Math.max(e.lineWidth,i.lineWidth):s;return isNaN(a)?0:Math.min(A,Math.max(l,a))}c(bW,"runion_01_lineHeight");class gd extends vr{static{c(this,"LinksMapKeyCreateSelect")}constructor(e,t,n,s=null,r=[],o=null,a=null,l=null){super(e,t,n,s,r,o,a,l)}_changeSelectedValueHandler(){this._onChangeFn&&this._onChangeFn(this.value)}_updateOptions(e){super._updateOptions(e),e!==null&&this._select.selectedIndex===-1&&(this._select.options[0].selected=!0,this._changeSelectedValueHandler())}}class Bl extends gd{static{c(this,"LinksMapKeyChangeSelect")}static CUSTOM_SELECT_VALUE=" (custom)";static CUSTOM_SELECT_MODEL_VALUE=" (custom model)";constructor(e,t,n,s=null,r=[],o=null,a=null,l=null,A=null){super(e,t,n,s,r,o,a,l),A&&(this._optionsHas=A)}_optionsHas(e,t){return e.has(t)}_updateOptions(e){const t=this._select.value,n=[];if(n.push([this.constructor.CUSTOM_SELECT_VALUE,this.constructor.CUSTOM_SELECT_MODEL_VALUE,"(custom)"]),e!==null)for(const[r,o]of this._optionsGen(e)){const a=this._optionGetLabel(r,o);n.push([r,o,a])}this._populateSelect(n),this._select.value=t;const s=this.getEntry("value").value;this._updateSelectValue(s,e)}_updateValue(e){const t=this.getEntry("options"),n=e.value;this._updateSelectValue(n,t)}checkValue(){const e=this.getEntry("options"),t=this.getEntry("value").value;this._updateSelectValue(t,e)}_updateSelectValue(e,t){e===this._nullModelValue?this._select.value=this.constructor.NULL_SELECT_VALUE:t!==null&&this._optionsHas(t,e)?this._select.value=e:this._select.value=this.constructor.CUSTOM_SELECT_VALUE,this._onChangeFn(this._select.value)}async _changeSelectedValueHandler(){if(!this.isCustom){const e=this.isNullValue?this._nullModelValue:this._select.value;await this._changeState(()=>this.getEntry("value").set(e))}this._onChangeFn(this._select.value)}get isCustom(){return this._select.value===this.constructor.CUSTOM_SELECT_VALUE}}const pd="(NULL-STYLE)",EW="(NULL-TYPESPEC)";class BW extends _s{static{c(this,"UIStylePatchLinksValueLabel")}update(e){if(e.has("data")||e.has("sourceMap")){const t=(e.has("data")?e.get("data"):this.getEntry("data")).value,n=e.has("sourceMap")?e.get("sourceMap"):this.getEntry("sourceMap"),s=n.has(t)?n.get(t):null,r=s&&s.get("stylePatchTypeKey").value,o=r?Bc(r):"[NULL]";this.element.textContent=`${t||pd} – ${o}`}}}class Fy extends Kl{static{c(this,"UILinksMapValueInput")}update(e){this.isFocused()||e.has("value")&&(this.value=e.get("value").value)}}function xy(i){return this._allowNull&&i===this._nullModelValue||i===this.constructor.CUSTOM_SELECT_MODEL_VALUE?["special","Special Options",0]:["regular","Existing Style-Patches",1]}c(xy,"stylePathchLinksOptionGetGroup");class vW extends we{static{c(this,"UIStylePatchLinksValue")}constructor(e,t,n=null,s=null){const r=e.domTool.createElement("div",{class:"ui_links_map-item_value",tabindex:"0"}),o=new Map([...t,["local",r]]);super(e,o),this._insertElement(r);const a=this.widgetBus.getExternalName("sourceKey"),l=this.widgetBus.getExternalName("sourceMap"),A=[[{zone:"local"},[[a,"data"],[l,"sourceMap"]],BW,"span",{class:"ui_links_map-item_value-value_label"}],[{zone:"local",id:"key-change-link-select"},[[l,"options"],[a,"value"]],Bl,"ui_links_map-item_value-change_select","",n,[!0,pd,""],u=>{const h=this.getWidgetById("key-change-link-input",null),d=this.getWidgetById("key-change-link-select",null);h!==null&&(u===Bl.CUSTOM_SELECT_VALUE?(h.display=!0,h.value=this.getEntry("sourceKey").value,d.isFocused()&&h.focus()):h.isFocused()||(h.display=!1))},xy,s,null],[{zone:"local",id:"key-change-link-input"},[[a,"value"]],Fy,[["input",this._valueInputChangeHandler.bind(this)],["blur",this._valueInputBlurHandler.bind(this)]],{rootClass:"ui_links_map-item_value-change_input"}]];this._initWidgets(A)}async _valueInputChangeHandler(){const e=this.getWidgetById("key-change-link-input");return await this._changeState(()=>this.getEntry("sourceKey").set(e.value))}_valueInputBlurHandler(){const e=this.getWidgetById("key-change-link-select"),t=this.getWidgetById("key-change-link-input");e.checkValue(),e.isCustom||(t.display=!1)}}function GW(i,e){return!!Je(i,e,!1)}c(GW,"typeSpecHas");class RW extends _s{static{c(this,"UIStyleNodeToTypeSpecValueLabel")}update(e){if(e.has("data")||e.has("sourceMap")){const t=(e.has("data")?e.get("data"):this.getEntry("data")).value,n=e.has("sourceMap")?e.get("sourceMap"):this.getEntry("sourceMap"),s=Je(n,t,null),r=s===null?EW:Ly(t,s);this.element.textContent=My(t,r)}}}class SW extends we{static{c(this,"UINodeToTypeSpecLinksValue")}constructor(e,t,n=null,s=null){const r=e.domTool.createElement("div",{class:"ui_links_map-item_value",tabindex:"0"}),o=new Map([...t,["local",r]]);super(e,o),this._insertElement(r);const a=this.widgetBus.getExternalName("sourceKey"),l=this.widgetBus.getExternalName("sourceMap"),A=[[{zone:"local"},[[a,"data"],[l,"sourceMap"]],RW,"span",{class:"ui_links_map-item_value-value_label"}],[{zone:"local",id:"key-change-link-select"},[[l,"options"],[a,"value"]],Bl,"ui_links_map-item_value-change_select","",n,[],u=>{const h=this.getWidgetById("key-change-link-input",null),d=this.getWidgetById("key-change-link-select",null);h!==null&&(u===Bl.CUSTOM_SELECT_VALUE?(h.display=!0,h.value=this.getEntry("sourceKey").value,d.isFocused()&&h.focus()):h.isFocused()||(h.display=!1))},null,s,GW],[{zone:"local",id:"key-change-link-input"},[[a,"value"]],Fy,[["input",this._valueInputChangeHandler.bind(this)],["blur",this._valueInputBlurHandler.bind(this)]],{rootClass:"ui_links_map-item_value-change_input"}]];this._initWidgets(A)}async _valueInputChangeHandler(){const e=this.getWidgetById("key-change-link-input");return await this._changeState(()=>this.getEntry("sourceKey").set(e.value))}_valueInputBlurHandler(){const e=this.getWidgetById("key-change-link-select"),t=this.getWidgetById("key-change-link-input");e.checkValue(),e.isCustom||(t.display=!1)}}class NW extends _t.UIKeyCreate{static{c(this,"_UILinksMapCreate")}static labelText="(uninitialized)";constructor(e,t,n={},...s){const r=e.domTool.createElement("span",{class:"typeroof-ui-label"},new.target.labelText),o="ui_links_map-create_input",a={labelContent:r,rootClass:o,...n};super(e,t,a,...s)}}class QW extends NW{static{c(this,"UIStylePatchesLinksMapCreate")}static labelText=" as style name "}class wW extends _t{static{c(this,"UIStylePatchesLinksMap")}static ROOT_CLASS="ui_links_map";static BASE_CLASSES=[...super.BASE_CLASSES,super.ROOT_CLASS,"ui_links_map"];static TYPE_CLASS_PART=null;static VISUAL_ORDER_STRATEGY=_t.VISUAL_ORDER_STRATEGY_NATURAL;static UIKeyCreate=QW;static KEY_ADD_BUTTON_LABEL="create";static KEY_DATA_TRANSFER_TYPE=pe.TYPE_SPEC_STYLE_PATCH_LINK_PATH;constructor(...e){super(...e),this._zones.get("tools").setAttribute("tabindex","0")}_validateKeyString(e){const[t,n]=super._validateKeyString(e);return t?oa(e):[t,n]}get _initialWidgets(){const e={lastSelectedValue:null},t=[{zone:"tools",id:"key-create-link-select"},[[this.widgetBus.getExternalName("sourceMap"),"options"]],gd,"ui_links_map-create_select","Link a Style",null,[!0,pd,""],r=>{const o=this.getWidgetById("key-create-input",null);if(o===null)return;const a=o.value;let l=!1;if(a===""?(e.lastSelectedValue=null,l=!0):a===e.lastSelectedValue&&(l=!0),r!==null){if(l){o.value=r,o.focus();const A=this.getWidgetById("key-add-button");o.setCustomValidity(""),A.passive=!1}e.lastSelectedValue=r}},xy],n=[{zone:"local"},[[".","rootCollection"]],Ti,"Drop here to delete style","",[this.constructor.KEY_DATA_TRANSFER_TYPE]],s=super._initialWidgets;return s.splice(0,0,t),s.push(n),s}_createWrapperValue(e,t){const n=this._childrenWidgetBus,s={rootPath:D.fromParts(this.widgetBus.getExternalName("childrenOrderedMap")),relativeRootPath:D.fromParts(".",t),zone:e},r=this.widgetBus.getExternalName("sourceMap"),o=[[".","sourceKey"],[r,"sourceMap"]],a=vW,l=[this._zones,null,null];return this._initWrapper(n,s,o,a,...l)}_createKeyValue(e){const t=this.getWidgetById("key-create-link-select"),n=e.constructor.Model.createPrimalDraft(e.dependencies);return n.value=t.value,n}}function Ly(i,e){return e.get("label").value||"[no label]"}c(Ly,"typeSpecGetRawLabel");function My(i,e){return`${i===""?"[root]":i} :: ${e}`}c(My,"_typeSpecFullLabel");function Fp(i,e){const t=Ly(i,e);return My(i,t)}c(Fp,"typeSpecGetOptionLabel");function*_u(i,e=D.fromParts(D.ROOT)){yield[`${e}`,i];const n=i.get("children");for(const[s,r]of n)yield*_u(r,e.append("children",s))}c(_u,"typeSpecOptionsGen");class ZW extends vr{static{c(this,"LinksMapTargetKeyCreateSelect")}static CUSTOM_SELECT_VALUE=" (custom)";static CUSTOM_SELECT_MODEL_VALUE=" (custom model)";constructor(e,t,n,s=null,r=[],o=null,a=null,l=null){super(e,t,n,s,r,o,a,l)}get RESET_OPTION_INDEX(){if(this._select.selectedIndex!==-1){const t=this._select.options[this._select.selectedIndex];if(t.disabled!==!0&&t.value!==this.constructor.CUSTOM_SELECT_VALUE)return this._select.selectedIndex}let e=-1;for(let t=0,n=this._select.options.length;t<n;t++){const s=this._select.item(t);if(!s.disabled){if(s.value===this.constructor.CUSTOM_SELECT_VALUE){e=t;continue}return t}}return e}_changeSelectedValueHandler(){this._onChangeFn(this.value)}isEnabledOption(e){for(let t=0,n=this._select.options.length;t<n;t++){const s=this._select.item(t);if(s.value===e)return!s.disabled}return!1}_updateRestrictions(e){for(const t of this._select.options)t.disabled=e.has(t.value)}_updateOptions(e,t){const n=this._select.value,s=[];if(e!==null)for(const[r,o]of this._optionsGen(e)){const a=this._optionGetLabel(r,o);s.push([r,o,a])}this._populateSelect(s),this._select.value=n,this._updateRestrictions(t)}update(e){const t=this._select.value,n=e.has("options")?e.get("options"):this.getEntry("options"),s=e.has("restrictions")?e.get("restrictions"):this.getEntry("restrictions");this._updateOptions(n,s),super.reset(),t!==this._select.value&&this._onChangeFn(this._select.value)}get isCustom(){return this._select.value===this.constructor.CUSTOM_SELECT_VALUE}reset(){const e=this._select.value;super.reset(),e!==this._select.value&&this._onChangeFn(this._select.value)}}class kW extends we{static{c(this,"LinksMapTargetKeyCreate")}static UIKeySelect=ZW;constructor(e,t,n,s=null,r=null){const o=e.domTool.createElement("div",{class:n,tabindex:"0"}),a=new Map([...t,["local",o]]);super(e,a),this._lastSelectedNoneCustomSelectionValue="",this._insertElement(o),this._parentCheckCallback=s,this._submitHandler=r;const l=this.widgetBus.getExternalName("options"),A=this.widgetBus.getExternalName("restrictions"),u=[[{zone:"local",id:"key-create-link-select"},[[l,"options"],[A,"restrictions"]],this.constructor.UIKeySelect,"ui_links_map-key_create-select","Link a NodeSpec",null,[],h=>{const d=this.getWidgetById("key-create-link-input",null),g=this.getWidgetById("key-create-link-select",null);if(h!==this.constructor.UIKeySelect.CUSTOM_SELECT_VALUE&&(this._lastSelectedNoneCustomSelectionValue=h),d!==null)if(h===this.constructor.UIKeySelect.CUSTOM_SELECT_VALUE){d.display=!0;const p=g.isEnabledOption(this._lastSelectedNoneCustomSelectionValue)?this._lastSelectedNoneCustomSelectionValue:"";d.value=p,g.isFocused()&&d.focus()}else d.display=!1},h=>h===this.constructor.UIKeySelect.CUSTOM_SELECT_MODEL_VALUE?["special","Special Options",0]:["regular","Existing Node-Types",1],this.constructor.optionsGen.bind(this.constructor)],[{zone:"local",id:"key-create-link-input"},[],Kl,[["input",this._customInputChangeHandler.bind(this)],["blur",this._customInputBlurHandler.bind(this)],this._submitHandler!==null?["keyup",h=>{h.key==="Enter"&&this._submitHandler(h)}]:null].filter(h=>h!==null),{rootClass:"ui_links_map-key_create-custom_input"}]];this._initWidgets(u)}static*optionsGen(e){yield[this.UIKeySelect.CUSTOM_SELECT_VALUE,this.UIKeySelect.CUSTOM_SELECT_MODEL_VALUE];for(const t of e.keys())yield[t,t]}async _customInputChangeHandler(){this._parentCheck()}_parentCheck(){this._parentCheckCallback&&this._parentCheckCallback()}_customInputBlurHandler(){const e=this.getWidgetById("key-create-link-select"),t=this.getWidgetById("key-create-link-input");e.isCustom||(t.display=!1)}get hasValue(){return this.getWidgetById("key-create-link-select",null)!==null}get value(){const e=this.getWidgetById("key-create-link-input"),t=this.getWidgetById("key-create-link-select");return t.isCustom?e.value:t.value}reset(){const e=this.getWidgetById("key-create-link-select"),t=this.getWidgetById("key-create-link-input");e.reset(),t.reset()}setCustomValidity(e=""){const t=this.getWidgetById("key-create-link-select"),n=this.getWidgetById("key-create-link-input"),[s,r]=t.isCustom?[n,t]:[t,n];s.setCustomValidity(e),r.setCustomValidity("")}}class _W extends _t{static{c(this,"UINodeSpecToTypeSpecLinksMap")}static ROOT_CLASS="ui_node_spec_to_type_spec_links_map";static BASE_CLASSES=[...super.BASE_CLASSES,super.ROOT_CLASS,"ui_links_map"];static TYPE_CLASS_PART=null;static VISUAL_ORDER_STRATEGY=_t.VISUAL_ORDER_STRATEGY_NATURAL;static UIKeyCreate=null;static KEY_ADD_BUTTON_LABEL="create";static KEY_DATA_TRANSFER_TYPE=pe.TYPE_SPEC_STYLE_PATCH_LINK_PATH;constructor(...e){super(...e),this._zones.get("tools").setAttribute("tabindex","0")}_validateKeyString(e){const[t,n]=super._validateKeyString(e);return t?oa(e):[t,n]}get _initialWidgets(){const e=[{zone:"tools",id:"key-create-link-select"},[[this.widgetBus.getExternalName("sourceMap"),"options"]],gd,"ui_links_map-create_select"," with a Type-Spec",Fp,[],null,null,_u],t=[{zone:"tools",id:"key-create-input"},[[this.widgetBus.getExternalName("targetMap"),"options"],[this.widgetBus.getExternalName("childrenOrderedMap"),"restrictions"]],kW,this._zones,"ui_links_map-key-create",this._keyCreateInputHandler.bind(this),this._keyCreateSubmitHandler.bind(this)],n=[{zone:"tools",id:"key-add-button"},[],this.constructor.UIKeyAddButton,this.constructor.KEY_ADD_BUTTON_LABEL,[["click",this._keyCreateSubmitHandler.bind(this)]]],s=[{zone:"local"},[[".","rootCollection"]],Ti,"Delete Link","",[this.constructor.KEY_DATA_TRANSFER_TYPE]];return[t,e,n,s]}_createWrapperValue(e,t){const n=this._childrenWidgetBus,s={rootPath:D.fromParts(this.widgetBus.getExternalName("childrenOrderedMap")),relativeRootPath:D.fromParts(".",t),zone:e},r=this.widgetBus.getExternalName("sourceMap"),o=[[".","sourceKey"],[r,"sourceMap"]],a=SW,l=[this._zones,Fp,_u];return this._initWrapper(n,s,o,a,...l)}_createKeyValue(e){const t=this.getWidgetById("key-create-link-select"),n=e.constructor.Model.createPrimalDraft(e.dependencies);return n.value=t.value,n}}function YW(i){const e=[];for(const[t]of qh.fields.entries()){let n=Ne,s=null,r=null;t==="leading"?s=`${i.propertyRoot}line-height-em`:s=`${i.propertyRoot}${t}`;const o=[t,Ze.createSimpleRecord(n,t,s,r)];e.push(o)}return Object.freeze(new Ze(e))}c(YW,"getManualLeadingPPSMap");function WW(i){const e=[];for(const[t]of $h.fields.entries()){let n=Ne,s=null,r=null;s=`${i.propertyRoot}${t}`;const o=[t,Ze.createSimpleRecord(n,t,s,r)];e.push(o)}return Object.freeze(new Ze(e))}c(WW,"getAutoLinearLeadingPPSMap");function DW(i,e){let t;if(i===qh)t=YW;else if(i===$h)t=WW;else throw new Error(`KEY ERROR unknown FieldType "${i.name}".`);return t(e,i)}c(DW,"_getPPSMapForModel");class Yu extends dn{static{c(this,"UILeadingAlgorithm")}constructor(e,t,n,s){const r=e.domTool.createElement("div",{class:"ui_leading-algorithm_container"}),o=new Map([...t,["local",r]]);e.insertElement(r),super(e,o),this._injectable=n,this._ppsRecord=s,this._ActiveInstanceType=null;{const a=this._initialWidgets;this._initialWidgetsAmount=a.length,this._initWidgets(a)}}get _initialWidgets(){return[[{zone:"local"},[["availableLeadingAlgorithmTypes","options"],["leadingAlgorithmTypeKey","value"]],vr,"ui_leading_algorithm_select","Leading Algorithm",(t,n)=>n.get("label").value,[!0,"(inherited)",ce.NULL],this._changeTypeHandler.bind(this,this._injectable.getDefaults,this._ppsRecord)]]}_provisionWidgets(){const e=this._widgets.splice(this._initialWidgetsAmount,1/0),t=we.prototype._provisionWidgets.call(this),n=this.getEntry("."),s=n.get("instance"),r=s.hasWrapped?s.WrappedType:null;if(r!==null)if(this._ActiveInstanceType===r)this._widgets.push(...e),e.splice(0,1/0);else{const o=DW(r,this._ppsRecord),a=this._defineGenericWidgets(r,l=>r.fields.has(l),{zone:"local",rootPath:this.widgetBus.rootPath.append("instance")},o,this._injectable);this._initWidgets(a)}this._ActiveInstanceType=r;for(const o of e)this._destroyWidget(o);for(const o of this._widgets.slice(this._initialWidgetsAmount))o.widget!==null||(this._createWidget(o),t.add(o));return t}_changeTypeHandler(e,t,n){const s=c(()=>{const h=this.getEntry(this.widgetBus.rootPath.parent),d=this.widgetBus.rootPath.parts.at(-1),g=h.get(d).get("instance");return{hostDraft:h,fieldName:d,wrapper:g}},"getStateInstances");if(n===ce.NULL)return;if(n==="ManualLeading"){const h=Ze.createSimpleRecord(t.propertyRoot,"line-height-em"),d=e(h,null,null);if(d!==null){const{hostDraft:g,fieldName:p,wrapper:f}=s(),m=q_(n,f.dependencies);m.get("instance").get("leading").value=d,g.set(p,m);return}}const r=Ze.createSimpleRecord(t.prefix,`@${n}`),o=e(r,null,null);if(o===null)return;const{hostDraft:a,fieldName:l,wrapper:A}=s(),u=dy(A.dependencies,o);if(n!==u.get("leadingAlgorithmTypeKey").value)throw new Error(`ASSERTION FAILED new instance should be a "${u}" but it's a  "${u.get("leadingAlgorithmTypeKey").value}"`);a.set(l,u)}}for(const[i,e]of Object.entries(Object.getOwnPropertyDescriptors(ca.prototype)))Object.hasOwn(Yu.prototype,i)||Object.defineProperty(Yu.prototype,i,e);class fr extends ca{static{c(this,"UITypeDrivenContainer")}constructor(e,t,n,s,r){const o=e.domTool.createElement("div",{class:"ui_generic_struct_container"}),a=new Map([...t,["local",o]]);e.insertElement(o),super(e,a);const l=this.widgetBus.getEntry(this.widgetBus.rootPath),A=l instanceof nn?l.WrappedType:l.constructor,u=this._defineWidgets(A,n,s,r);this._initWidgets(u)}_defineWidgets(e,t,n,s){return[...s?[[{zone:"local"},[],yn,"h4",{},[s]]]:[],...this._defineGenericWidgets(e,o=>e.fields.has(o),{zone:"local"},n,t)]}_update(...e){try{return super._update(...e)}finally{this._activationTestCache=null}}}const TW=new Map([[qe,[Di,Y("settings:internalPropertyName","value"),Y("label")]],[Wt,[Gh,Y("settings:internalPropertyName","value"),Y("label"),Y("items")]],[Co,[KY,Y("settings:internalPropertyName","value"),Co.charGroupsData,Y("label")]],[Ad,[cd,Y("settings:rootPath"),Y("zones"),Y("parentInjectable"),Y("propertyRoot"),Y("label")]],[ut,[Pa,Y("settings:internalPropertyName","boolean"),Y("classToken"),Y("label",i=>`turn ${i} off`),Y("label",i=>`turn ${i} on`),Y("label",i=>`Toggle ${i}`)]],[Vt,[Io,Y("settings:rootPath"),Y("zones"),Y("label"),Y("getDefault"),Y("updateDefaultsDependencies"),Y("raw:requireUpdateDefaults")]],[Gt,[xC,Y("settings:internalPropertyName","value"),Y("label"),Y("unit"),Y("getRegisteredPropertySetup",i=>{const e={};for(const t in["min","max","default","step"])t in i&&i[t]!==null&&(e[t]=i[t]);return e})]],[Qh,[gn,Y("settings:internalPropertyName","axesLocations"),Y("settings:dependencyMapping",["baseFontSize","fontSize"]),Y("settings:dependencyMapping",["/font","rootFont"]),Y("settings:dependencyMapping",["typeSpecProperties@","properties@"]),Y("settings:dependencyMapping","autoOPSZ"),Y("raw:getDefaults"),Y("ppsRecord"),Y("requireUpdateDefaults")]],[Cy,[wW,Y("settings:internalPropertyName","childrenOrderedMap"),Y("settings:dependencyMapping",["./stylePatchesSource","sourceMap"]),Y("zones"),[],"Style Links",!0]],[Xh,[Ay,Y("settings:internalPropertyName","childrenOrderedMap"),Y("zones"),[],"Axes-Locations",!1]],[aa,[Yu,Y("settings:rootPath"),Y("zones"),Y("injectable"),Y("ppsRecord")]],[fo,[fr,Y("settings:rootPath"),Y("zones"),Y("injectable"),Y("ppsMap"),Y("label")]],[zI,[mc,Y("settings:internalPropertyName","openTypeFeatures"),Y("settings:dependencyMapping",["/font","rootFont"]),Y("zones"),Y("raw:getDefaults"),Y("requireUpdateDefaults"),Y("updateDefaultsDependencies")]]]),FW=new Map([[qe,[XN,Y("settings:internalPropertyName","value"),Y("getDefault"),Y("requireUpdateDefaults"),Y("label")]],[Wt,[zN,Y("settings:internalPropertyName","value"),Y("getDefault"),Y("requireUpdateDefaults"),Y("label"),Y("items")]],[Co,[qY,Y("settings:internalPropertyName","value"),Y("getDefault"),Y("requireUpdateDefaults"),Co.charGroupsData,Y("label")]],[ut,[LC,Y("settings:internalPropertyName","value"),Y("getDefault"),Y("requireUpdateDefaults"),Y("classToken"),Y("label")]],[Gt,[ec,Y("settings:internalPropertyName","value"),Y("getDefault"),Y("requireUpdateDefaults"),Y("label"),Y("unit"),Y("getRegisteredPropertySetup",i=>{const e={};for(const t in["min","max","default","step"])t in i&&i[t]!==null&&(e[t]=i[t]);return e})]]]),Li=Ry(TW,FW);class fd extends me{static{c(this,"UIshowProcessedProperties")}static TEMPLATE=`<div class="ui-show_processed_properties">
    <h4>Inherited Properties</h4>
    <ol class="ui-show_processed_properties-list ui-show_processed_properties-list-inherited"></ol>
    <h4>Own Properties</h4>
    <ol class="ui-show_processed_properties-list ui-show_processed_properties-list-own"></ol>
</div>`;constructor(e,t){super(e),this._typeKey=t,this._baseClass="ui-show_processed_properties",this._isTypographic=null,[this.element,this.inheritedPropertiesContainer,this.ownPropertiesContainer]=this.initTemplate(),this.ownProperties=new Set}initTemplate(){const e=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE),t=e.firstElementChild,n=t.querySelector(`.${this._baseClass}-list-inherited`),s=t.querySelector(`.${this._baseClass}-list-own`);return this._insertElement(t),[t,n,s]}_createTextValueElement(e,t){let n;return typeof t=="boolean"?n=t&&"[True]"||"[False]":t===null?n="[null]":t===void 0?n="[undefined]":n=t.toString(),this._domTool.createElement("span",{class:`${this._baseClass}-value-text`},n)}_createColorValueElement(e,t){const n=this._domTool.createElement("span"),s=gc(t),r=this._domTool.createElement("span",{class:[`${this._baseClass}-value-color_patch`,"ui_color_patch","ui_color_patch-has_color"].join(" ")}),o=this._createTextValueElement(e,s);return r.style.setProperty("--color",s),n.append(r,o),n}_createBasicDisplayElement(e,t,n=null){const[s,r]=e.startsWith(at)&&typeof t=="object"?["color",this._createColorValueElement(e,t)]:["text",this._createTextValueElement(e,t)],o=this._domTool.createElement("span",{class:`${this._baseClass}-label`},n!==null?n:e),a=this._domTool.createElement("li",{class:[`${this._baseClass}-item`,`${this._baseClass}-item-type_${s}`].join(" ")},[o," ",r]);return r.classList.add(`${this._baseClass}-value`),[a,r]}update(e){if(e.has("referenceItem")){const t=e.has("properties@")?e.get("properties@"):this.getEntry("properties@"),n=t.typeSpecnion.localPropertyNames;this.ownProperties.clear();for(const s of n)this.ownProperties.add(s)}if(e.has("properties@")){const t=e.has("properties@")?e.get("properties@"):this.getEntry("properties@"),n=t.typeSpecnion.getProperties(),s=[],r=[];for(const[o,a]of n){const l=this.ownProperties.has(o)?s:r,[A,u]=zi(o,n);if(A!==null){const[d]=this._createBasicDisplayElement(o,A);l.push(d)}if(u)continue;const[h]=this._createBasicDisplayElement(o,a);l.push(h)}this.ownPropertiesContainer.replaceChildren(...s),this.inheritedPropertiesContainer.replaceChildren(...r)}}}const xp=Gt.createClass("SizeNumberModel",{defaultValue:720,min:0,max:Number.MAX_SAFE_INTEGER,toFixedDigits:0}),Vy=Wt.createClass("StageZoomTypeModel",["app-default","custom","25%","50%","75%","100%","150%","200%","automatic"],"app-default"),xW=Gt.createClass("StageZoomScalingModel",{min:0,max:Number.MAX_SAFE_INTEGER,defaultValue:100,toFixedDigits:5}),LW=ke.createClass(xW),MW=ye.createClass("StageZoomLevelModel",["type",Vy],["scaling",LW],st.create(["type","scaling"],c(function({type:e,scaling:t}){if(e.value.endsWith("%"))t.value=parseFloat(e.value.slice(0,-1));else if(e.value==="custom")t.isEmpty&&(t.value=t.constructor.Model.defaultValue);else if(e.value==="app-default")t.value=100;else if(e.value==="automatic")t.clear();else throw new Error(`NOT IMPLEMENTED StageZoomTypeModel type: ${e.value}.`)},"checkValues"))),Oy=ks.createClass("StageAndActorsModel",...fc,["keyMoments",B_],st.create(["width","height"],c(function({width:e,height:t}){e.value===void 0&&(e.value=720),t.value===void 0&&(t.value=720)},"setDefaults")),["activeActors",Vh],...Pi.createWithInternalizedDependency("availableActorTypes",Cc,hd),["width",xp],["height",xp],["zoomLevel",MW],["editingActor",Va]),ZA=Symbol("_NOTDEF");function*VW(i,e){const t=e.get("numericProperties");for(const[n,s]of t)yield[`${dr}${n}`,s.value]}c(VW,"numericPropertiesGen");function*OW(i,e){const t=e.get("fontSize");t.isEmpty||(yield[`${Ne}fontSize`,t.value])}c(OW,"fontSizeGen$2");function*PW(i,e,t){const n=e.get("autoOPSZ").value;if(n){const r=e.get("fontSize"),o=r.isEmpty?i.getPropertyAtMomentT(`${Ne}fontSize`,t,null):r.value;o!==null&&(yield["axesLocations/opsz",o])}const s=e.get("axesLocations");for(const[r,o]of s)n&&r==="opsz"||(yield[`axesLocations/${r}`,o.value])}c(PW,"axisLocationsGen$1");function*Py(i,e){const t=e.get("openTypeFeatures");for(const[n,s]of t)yield[`${bn}${n}`,s.value]}c(Py,"openTypeFeaturesGen$1");const Hy=Object.freeze(new Et(["textRun","textAlign","positioningHorizontal","positioningVertical","direction","heightTreatment","charGroup","showCellBoxes","cellAlignment"]));function*HW(i,e){for(const t of e.keys()){if(!Hy.has(t))continue;const n=e.get(t),s=Object.freeze([t]);yield*Nh(Ne,s,n)}}c(HW,"genericPropertiesBroomWagonGen");function Xy(i){const e=i.constructor.Model;return e.fields.has("fontSize")&&e.fields.get("fontSize")===go&&e.fields.has("axesLocations")&&e.fields.get("axesLocations")===Qh}c(Xy,"_keyMomentsImplementsTypography");function ha(i,e){const t=[VW,ia];return Xy(i)&&t.push(OW,PW,Py),t.push(HW),new vI(t,i,e)}c(ha,"initAnimanion");class zy extends we{static{c(this,"StageHTML")}constructor(e,t,n="Stage_HTML",s=!1){const r=e.domTool.createElement("div"),o=e.domTool.createElement("div"),a=`${n}-layer`,l=new Map([...t,["layer",o],["parent-layer",e.wrapper.host]]);o.classList.add(a),o.classList.add(`${a}-top`),r.append(o);const A=[[{zone:"parent-layer"},["width","height","zoomLevel",["t","globalT"],"animationProperties@"],fW,r,o,[n,`${n}-wrapper`],s],[{},[["activeActors","collection"]],HI,l,a,Rc]];super(e,l,A)}}class md extends me{static{c(this,"_BaseSelectAndDrag")}static TEMPLATE=`<div class="select_and_drag">
    <label><strong class="select_and_drag-effect_label"></strong>
    <select></select><span class="select_and_drag-drag_handle drag_handle">✥</span>
    <span class="select_and_drag-description_label"></span>
    </label>
</div>`;constructor(e,t,n){super(e),[this.element,this._selectElement]=this.initTemplate(t,n)}initTemplate(e,t){const n=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE),s=n.firstElementChild,r=n.querySelector("select"),o=n.querySelector(".select_and_drag-effect_label"),a=n.querySelector(".select_and_drag-description_label"),l=n.querySelector(".select_and_drag-drag_handle");return o.textContent=e,a.textContent=t,this._insertElement(s),l.setAttribute("draggable","true"),l.addEventListener("dragstart",this._dragstartHandler.bind(this)),l.addEventListener("dragend",this._dragendHandler.bind(this)),[s,r]}_setDragDataFN(e,t){throw new Error(`NOT IMPLEMENTED ${this}._setDragDataFN (with ${t})`)}_dragstartHandler(e){const t=this._selectElement.value;this._setDragDataFN(e.dataTransfer,t),e.currentTarget.classList.add("dragging"),e.dataTransfer.effectAllowed="copy",e.dataTransfer.setDragImage(this._selectElement,0,0)}_dragendHandler(e){e.currentTarget.classList.remove("dragging")}}class Jy extends md{static{c(this,"SelectAndDrag")}constructor(e,t,n,s){super(e,t,n),this._setDragDataFN=s}update(e){if(e.has("sourceTypes")){const t=this._selectElement.value,n=e.get("sourceTypes"),s=[];this._domTool.clear(this._selectElement);for(const[r,o]of n)s.push(this._domTool.createElement("option",{value:r},o.get("label").value));this._selectElement.append(...s),n.has(t)&&(this._selectElement.value=t)}}}class Cd extends md{static{c(this,"SelectAndDragByOptions")}constructor(e,t,n,s){super(e,t,n),this._options=Object.freeze(s.slice()),this._createOptions(s)}_createOptions(e){this._domTool.clear(this._selectElement);const t=[];for(const[n,[,s]]of e.entries()){const r=this._domTool.createElement("option",{value:n},s);t.push(r)}this._selectElement.append(...t)}_setDragDataFN(e,t){if(!this._options[t])throw new Error(`KEY ERROR ${t} is not an option of: ${[...this._options.keys()].join(", ")}`);const[n,,s]=this._options[t];e.setData(n,`${s}`),e.setData("text/plain",`[TypeRoof ${n}: ${s}]`)}}class XW extends me{static{c(this,"StageManager")}static TEMPLATE='<div class="stage-manager_actors">(initial)</div>';constructor(e){super(e),this._itemElements=new Map,this._activePaths=new Set,this._removeDragIndicatorTimeoutId=null,[this.element,this._actorsElement]=this.initTemplate()}_onClickHandler(e){this._changeState(()=>{const t=this.getEntry("editingActor");!t.isEmpty&&t.value.equals(e)?t.clear():t.value=e})}initTemplate(){const e=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE),t=e.firstElementChild,n=e.querySelector(".stage-manager_actors");return this._insertElement(t),n.addEventListener("dragleave",this._dragleaveHandler.bind(this)),[t,n]}_dragstartHandler({path:e},t){t.dataTransfer.setData(pe.ACTOR_PATH,`${e}`),t.dataTransfer.setData("text/plain",`[TypeRoof ${pe.ACTOR_PATH}: ${e}]`),t.currentTarget.classList.add("dragging"),t.dataTransfer.effectAllowed="all",t.dataTransfer.setDragImage(t.currentTarget.parentElement,0,0)}_dragendHandler(e,t){t.currentTarget.classList.remove("dragging")}_takeDragEventOrLeaveIt(e){const t=[pe.ACTOR_PATH,pe.ACTOR_CREATE];for(const n of t)if(e.dataTransfer.types.includes(n))return e.preventDefault(),e.stopPropagation(),[!0,n];return[!1,null]}_dragoverHandler(e,t){const[n,s]=this._takeDragEventOrLeaveIt(t);if(!n)return;t.dataTransfer.dropEffect=s===pe.ACTOR_PATH?"move":"copy";const r=this._getDropTargetInsertPosition(e,t);this._setDropTargetIndicator(t.currentTarget,r)}_dragenterHandler(e,t){const[n,s]=this._takeDragEventOrLeaveIt(t);if(!n)return;t.dataTransfer.dropEffect=s===pe.ACTOR_PATH?"move":"copy";const r=this._getDropTargetInsertPosition(e,t);this._setDropTargetIndicator(t.currentTarget,r)}_getDropTargetInsertPosition(e,t){if(e.isEmptyLayerContainer)return"insert";const{height:n,top:s}=t.currentTarget.getBoundingClientRect(),{clientY:r}=t,o=r-s,a=o/n,l=e.isEmptyLayerItem?.8:.5;return a<l?"before":"after"}_setDropTargetIndicator(e,t=null){if(this._removeDragIndicatorTimeoutId!==null){const{clearTimeout:a}=this._domTool.window;a(this._removeDragIndicatorTimeoutId),this._removeDragIndicatorTimeoutId=null}const n="drop_target_indicator-",s=`${n}marked`;for(const a of this._actorsElement.querySelectorAll(`.${s}`))for(const l of[...a.classList])l.startsWith(n)&&a.classList.remove(l);if(t===null)return;if(!["before","after","insert"].includes(t))throw new Error(`NOT IMPLEMENTED ${this} insert position "${t}".`);const[r,o]=t==="before"&&e.previousSibling?[e.previousSibling,"after"]:[e,t];r.classList.add(`${n}${o}`),r.classList.add(s)}_dragleaveHandler(e){if(!this._takeDragEventOrLeaveIt(e)[0])return;const{setTimeout:t}=this._domTool.window;this._removeDragIndicatorTimeoutId=t(this._setDropTargetIndicator.bind(this,e.currentTarget),100)}_dropHandler(e,t){const[n,s]=this._takeDragEventOrLeaveIt(t);if(!n)return;this._setDropTargetIndicator(t.currentTarget);const{path:r}=e,o=D.fromString(this.widgetBus.getExternalName("activeActors")),a=o.append(...r),l=this._getDropTargetInsertPosition(e,t);if(s===pe.ACTOR_PATH){const A=t.dataTransfer.getData(pe.ACTOR_PATH),u=o.appendString(A);return this._move(u,a,l)}else if(s===pe.ACTOR_CREATE){const A=t.dataTransfer.getData(pe.ACTOR_CREATE);return this._create(A,a,l)}}_create(e,t,n){return this._changeState(()=>{const s=n==="insert"?this.getEntry(t):this.getEntry(t.parent),r=Qi(e,s.dependencies);if(n==="insert"){s.push(r);return}const o=t.parts.at(-1),a=parseInt(o,10);if(n==="after")s.splice(a+1,0,r);else if(n==="before")s.splice(a,0,r);else throw new Error(`NOT IMPLEMENTED insert position "${n}".`)})}_move(e,t,n){if(!!e.isRootOf(t)){console.warn(`${this}._move can't move source into target as source path "${e}" is root of target path "${t}".`);return}return this._changeState(()=>{const r=n==="insert"?this.getEntry(t):this.getEntry(t.parent),o=this.getEntry(e.parent),a=e.parts.at(-1),l=o.get(a);if(n==="insert"){r.push(l),o.delete(a);return}const A=t.parts.at(-1),u=parseInt(A,10),h=parseInt(a,10);if(r===o){if(h===u)return;let d;if(n==="after")d=u+1;else if(n==="before")d=u;else throw new Error(`NOT IMPLEMENTED ${this} insert position "${n}".`);h<u&&(d=d-1),o.delete(a),r.splice(d,0,l);return}if(o.delete(a),n==="after")r.splice(u+1,0,l);else if(n==="before")r.splice(u,0,l);else throw new Error(`NOT IMPLEMENTED insert position "${n}".`)})}_renderLayer(e,t,n=null){const s=this._domTool.createElement("ol");if(t.size===0){const r={path:e,isEmptyLayerContainer:!0,isEmptyLayerItem:!1};s.addEventListener("dragenter",this._dragenterHandler.bind(this,r)),s.addEventListener("dragover",this._dragoverHandler.bind(this,r)),s.addEventListener("drop",this._dropHandler.bind(this,r))}for(const[r,o]of t){const a=this._domTool.createElement("li"),l=e.append(r),A=this._domTool.createElement("span",{class:"drag_handle"},"✥"),u=ri(o)===ri.CONTAINER_NODE_TYPE,h=u?Je(o,D.fromParts("instance","activeActors")).size===0:!1,d={path:l,isEmptyLayerContainer:!1,isEmptyLayerItem:h};n&&(a.classList.add(n.counter%2?"even-row":"odd-row"),a.style.setProperty("--structural-depth",`${n.depth}`),n.counter+=1),A.setAttribute("draggable","true"),A.addEventListener("dragstart",this._dragstartHandler.bind(this,d)),A.addEventListener("dragend",this._dragendHandler.bind(this,d)),a.addEventListener("dragenter",this._dragenterHandler.bind(this,d)),a.addEventListener("dragover",this._dragoverHandler.bind(this,d)),a.addEventListener("drop",this._dropHandler.bind(this,d)),a.append(A,...this._renderActor(l,o,n)),s.append(a),this._itemElements.set(l.toString(),a)}return[s]}_renderActor(e,t,n=null){const s=t.get("actorTypeModel"),r=s.get("label").value,o=t.get("instance").get("label").value,a=this._domTool.createFragmentFromHTML("<button><span></span> <em></em></button>"),l=[...a.childNodes],A=a.querySelector("button");if(A.addEventListener("click",this._onClickHandler.bind(this,e)),a.querySelector("span").textContent=o?`${r}: ${o}`:r,A.setAttribute("title",`local path: ${e}`),ri(t)===ri.CONTAINER_NODE_TYPE){const u=D.fromParts("instance","activeActors"),h=Je(t,u),d=e.append(...u);n&&(n.depth+=1),l.push(...this._renderLayer(d,h,n)),n&&(n.depth-=1)}return l}_markActiveItems(...e){for(const t of this._activePaths)this._itemElements.get(t).classList.remove("active");this._activePaths.clear();for(const t of e){const n=t.toString();if(!this._itemElements.has(n)){console.error(`${this}._markActiveItems not found path "${n}" in elements: ${Array.from(this._itemElements.keys()).join(", ")}`);continue}this._activePaths.add(n),this._itemElements.get(n).classList.add("active")}}update(e){const t=e.has("editingActor")?e.get("editingActor"):this.getEntry("editingActor");if(e.has("activeActors")){const n=e.get("activeActors"),s=D.fromParts("./");this._domTool.clear(this._actorsElement),this._actorsElement.append(...this._renderLayer(s,n,{counter:0,depth:0})),t.isEmpty||this._markActiveItems(t.value)}else e.has("editingActor")&&this._markActiveItems(...t.isEmpty?[]:[t.value])}}class Lp extends fd{static{c(this,"CommonActorProperties")}update(e){if(e.has("keyMoments")){const t=e.has("animationProperties@")?e.get("animationProperties@"):this.getEntry("animationProperties@"),n=t.animanion.localPropertyNames;this.ownProperties.clear();for(const s of n)this.ownProperties.add(s)}if(e.has("animationProperties@")||e.has("globalT")){const t=e.has("animationProperties@")?e.get("animationProperties@"):this.getEntry("animationProperties@"),n=(e.has("globalT")?e.get("globalT"):this.getEntry("globalT")).value,s=t.animanion.getPropertiesFromGlobalT(n),r=[],o=[];for(const[a,l]of s){const A=this.ownProperties.has(a)?r:o,[u,h]=zi(a,s);if(u!==null){const[g]=this._createBasicDisplayElement(a,u);A.push(g)}if(h)continue;a.startsWith("color/")&&console.warn(`DEPRECATED: rendering color ${a}:`,l);const[d]=this._createBasicDisplayElement(a,l);A.push(d)}this.ownPropertiesContainer.replaceChildren(...r),this.inheritedPropertiesContainer.replaceChildren(...o)}}}class Mp extends me{static{c(this,"KeyMomentsControls")}[fn]=ll;static TEMPLATE=`<div class="key_moments_controls">
        <h3>Key Moments Controls</h3>
        <div>
            <button class="key_moments_controls-add_moment" title="Add Moment">+ add</button><!--
            --><button class="key_moments_controls-remove_moment" title="Remove Active Moment">- remove</button><!--
            --><button class="key_moments_controls-insert_moment" title="Insert Moment at t">insert</button>
        </div>
        <div>
            <button class="key_moments_controls-select_previous" title="Select Previous">⇤ select previous</button><!--
            --><button class="key_moments_controls-select_next" title="Select Next">select next ⇥</button>
        </div>
</div>`;static KEY_MOMENT_BUTTON_TEMPLATE=`<li>
    <button class="key_moments_controls-button" title="Select"></button>
</li>`;constructor(e){super(e),[this.element,this.addButton,this.removeButton,this.previousButton,this.nextButton]=this.initTemplate()}initTemplate(){const e=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE),t=e.firstElementChild,n=t.querySelector(".key_moments_controls-add_moment"),s=t.querySelector(".key_moments_controls-insert_moment"),r=t.querySelector(".key_moments_controls-remove_moment"),o=t.querySelector(".key_moments_controls-select_previous"),a=t.querySelector(".key_moments_controls-select_next");s.addEventListener("click",this._changeStateHandler(()=>{const A=this.getEntry("keyMoments"),u=this.getEntry("animationProperties@"),h=u.t,d=A.constructor.Model.createPrimalState(A.dependencies).getDraft(),[g,p,f,m]=this._getInsertParameters(A,u,h),y=uo(A,Math.max(0,parseFloat(g,10)-1)),v=u.getPropertyValuesMapForLocalT(h),G={};for(const[R,Q]of v)if(R.startsWith(dr)){Object.hasOwn(G,"numericProperties")||(G.numericProperties=Je(d,"numericProperties"));const S=D.fromString(R).parts.at(-1);G.numericProperties.setSimpleValue(S,Q)}else{if(R.startsWith(at))continue;if(Xy(A))if(R.startsWith("axesLocations/")){Object.hasOwn(G,"axesLocations")||(G.axesLocations=Je(d,"axesLocations"));const S=D.fromString(R).parts.at(-1);G.axesLocations.setSimpleValue(S,Q)}else R==="fontSize"?d.get(R).value=Q:console.warn(`NOT IMPLEMENTED property "${R}" in ${this} insertButton.`);else continue}p!==null&&(d.get("duration").value=p),d.get("label").value=y,f!==null&&m!==null&&(f.get("duration").value=m),A.splice(g,0,d)})),n.addEventListener("click",this._changeStateHandler(()=>{const A=this.getEntry("keyMoments"),u=Array.from(A).filter(([,p])=>p.get("isActive").value),h=u.size?u.at(-1)[0]:null,d=h!==null?parseInt(h,10)+1:A.size,g=A.constructor.Model.createPrimalDraft(A.dependencies);g.get("isActive").value=!0,g.get("label").value=uo(A,d),A.splice(d,0,g)})),r.addEventListener("click",this._changeStateHandler(()=>{const A=this.getEntry("keyMoments"),u=Array.from(A).filter(([,h])=>h.get("isActive").value).map(([h])=>h).reverse();for(const h of u)A.delete(h)}));const l=c(A=>{if(A===0)return;const u=this.getEntry("keyMoments"),h=Array.from(u).filter(([,f])=>f.get("isActive").value),d=u.size;if(d===0)return;const g=d-1;if(h.size===0){let f=A>0?(g+A)%d:(d+A)%d;f<0&&(f=d+f),u.get(`${f}`).get("isActive").value=!0;return}const p=new Set;for(const[f]of h){let m=(parseInt(f,10)+A)%d;m<0&&(m=d+m),p.add(`${m}`)}for(const[f,m]of u)m.get("isActive").value=p.has(f)},"_changeActiveMoment");return o.addEventListener("click",this._changeStateHandler(()=>l(-1))),a.addEventListener("click",this._changeStateHandler(()=>l(1))),this._insertElement(t),[t,n,r,o,a]}_getInsertParameters(e,t,n){const s=n*t.fullDuration,r=[...t.tToKeyMoments.keys()],[o,a]=ea(r,s),l=r[o],A=r[a];let u,h=null,d=null,g=null;if(o===null&&a===null)u=0,h=null,d=null,g=null;else if(o===null)g=e.get(0),u=e.size,h=s-A,d=g.get("duration").value-h;else{if(a===null)throw new Error("Assertion Failed, rightIndex must not be null.");if(o===a){const[p]=t.tToKeyMoments.get(A).at(-1);g=null,u=parseInt(p,10)+1,h=0,d=null}else{const[p]=t.tToKeyMoments.get(A)[0];g=e.get(p),u=p,h=s-l,d=g.get("duration").value-h}}return[u,h,g,d]}initialUpdate(e){const t=ln.createInitial(e,this.widgetBus.wrapper.dependencyMapping);this.update(t)}update(e){const t=this._getChangedMapFromCompareResult(e);if(t.has("keyMoments")){const n=t.get("keyMoments");this.previousButton.disabled=n.size<2,this.nextButton.disabled=n.size<2}}}class Uy extends me{static{c(this,"ToggleKeyMomentButton")}static baseClass="ui_toggle_key_moment_button";constructor(e){super(e),this.element=this._domTool.createElement("button",{class:`${this.constructor.baseClass}`,title:"Select this Key Moment for editing."},"(initializing)"),this._insertElement(this.element),this.element.addEventListener("click",this._changeStateHandler(()=>{const t=this.getEntry("boolean");t.set(!t.value)}))}update(e){if(e.has("label")&&(this.element.textContent=e.get("label").value),e.has("boolean")){const t=e.get("boolean").value,n=c(s=>s.classList[t?"add":"remove"]("active"),"_setActiveClass");n(this.element),n(this.widgetBus.wrapper.host)}}}class Ky extends me{static{c(this,"UINumericProperties")}constructor(e,t,n=null,s=()=>!1){super(e),this._ppsMap=t,this._getDefaults=n,this._requireUpdateDefaults=s,this._propertiesChangeHandler=this._changeStateHandler(this.__propertiesChangeHandler.bind(this)),this.element=this._domTool.createElement("div",{class:"numeric_properties"},this._domTool.createElement("h3",{},"Numeric Properties")),this._insertElement(this.element),this._propertiesInterfaces=new Map,this._insertedElements=[],this._localPropertyValues={},this._numericProperties=null,this._initUI()}_setOrReset(e,t,n){n===null?e.delete(t):e.setSimpleValue(t,n)}__propertiesChangeHandler(e,t){const n=this.getEntry("numericProperties");this._setOrReset(n,e,t)}_cleanUp(){this._localPropertyValues={};for(const e of this._propertiesInterfaces.values())e.destroy();this._propertiesInterfaces.clear();for(const e of this._insertedElements)this._domTool.removeNode(e);this._insertedElements.splice(0,1/0)}_initUI(){const e=c((...t)=>{this.element.append(...t),this._insertedElements.push(...t)},"insertElement");for(const t of this.propertiesKeys()){if(this._propertiesInterfaces.has(t))continue;const n={};for(const[l,A]of Object.entries(this.propertiesGet(t))){if(l==="default"){n.value=A;continue}n[l]=A}"name"in n||(n.name=t),"value"in n||(n.value=0);const{name:s,value:r}=n,o=this._ppsMap.get(t);this._localPropertyValues[t]=r;const a=new Rh(this._domTool,l=>this._propertiesChangeHandler(t,l),()=>{const l=this._numericProperties.has(t)?null:this._getDefaults?this._getDefaults(o,t,r):r;this._propertiesChangeHandler(t,l)},s===t?`${s}`:`${s} (${t})`,void 0,n);e(a.element),this._propertiesInterfaces.set(t,a)}}propertiesHas(e){return this._ppsMap.has(e)}propertiesGet(e){const t=this._ppsMap.get(e);return Ve(t)}propertiesKeys(){return this._ppsMap.keys()}*propertiesEntries(){for(const e of this.propertiesKeys())yield[e,this.propertiesGet(e)]}_getValueForProperty(e){return this._numericProperties.has(e)?[!0,this._numericProperties.get(e).value]:[!1,this._getDefaults!==null?this._getDefaults(this._ppsMap.get(e),e,this.propertiesGet(e).default):this.propertiesGet(e).default]}_updateValueToPropertyInterface(e,t,n){if(!this._propertiesInterfaces.has(e))throw new Error(`KEY ERROR property interface for "${e}" not found.`);this._propertiesInterfaces.get(e).update(t,n),this._localPropertyValues[e]=n}update(e){const t=this._requireUpdateDefaults(e);if(e.has("numericProperties")||t){const n=e.has("numericProperties")?e.get("numericProperties"):this.getEntry("numericProperties");this._numericProperties=n;for(const s of this.propertiesKeys()){const[r,o]=this._getValueForProperty(s);this._updateValueToPropertyInterface(s,r,o)}}}}class zW extends ca{static{c(this,"KeyMomentController")}constructor(e,t,n){const s=e.domTool.createElement("li",{class:"ui_key_moment_controller"}),r=new Map([...t,["local",s]]);super(e,r),this._activationTestCache=null;const o=c(()=>{if(this._activationTestCache===null){const d=this.widgetBus.getEntry(e.rootPath);this._activationTestCache=d.get("isActive").value}return this._activationTestCache},"activationTest");this._animationPropertiesKey=`animationProperties@${this.widgetBus.rootPath.append("..","..")}`;const a=[[this._animationPropertiesKey,"animationProperties@"]],l=new Set(Array.from(tn(...a))[1]),A=c(d=>Array.from(d.keys()).some(g=>l.has(g)),"requireUpdateDefaults"),u=this.widgetBus.getEntry(this.widgetBus.rootPath).constructor,h=this._defineWidgets(u,n,s,o,A,a);this._initWidgets(h)}_defineWidgets(e,t,n,s,r,o){const a=[];return(t==="[STAGE:null]"||uW(t))&&a.push([{zone:"local",activationTest:s},[["fontSize","value"],...o],ec,this._getDefaults.bind(this,Ze.createSimpleRecord(Ne,"fontSize"),"fontSize",66),r,"Font Size","pt",{min:0,step:.01,default:36}],[{zone:"local",activationTest:s},[["openTypeFeatures","openTypeFeatures"],["/font","rootFont"]],mc,this._zones,(l,A)=>{if(l.fullKey===`${Rt}font`){const u=t==="[STAGE:null]"?D.fromString("/font"):this.widgetBus.rootPath.append("../../font");return this.getEntry(u).value}throw new Error(`getDefault for UIOTFeaturesChooser don't know how to get ppsRecord: "${l}" modelFieldName: "${A}".`)},l=>l.has("font"),[[t==="[STAGE:null]"?"/font":"../../font","font"]]],[{zone:"local",activationTest:s},[["fontSize","fontSize"],[t==="[STAGE:null]"?"/font":"../../font","font"],["axesLocations","axesLocations"],["autoOPSZ","autoOPSZ"],...o],gn,this._getDefaults.bind(this),Ze.createSimpleRecord("axesLocations/","axesLocations"),r]),[[{zone:"main"},[],qt,n],[{zone:"local"},["label",["isActive","boolean"]],Uy],[{zone:"local",activationTest:s},[["label","data"]],_s,"h3",{},l=>`Key Moment: ${l}`],[{zone:"local",activationTest:s},[["label","value"]],Di,"Label"],[{zone:"local",activationTest:s},[["duration","value"]],Wi,"Relative Duration","/ Full Relative Duration",{min:0}],[{zone:"local",activationTest:s},[...o,"numericProperties"],Ky,Ze.fromPrefix(dr,Gc[dr].keys()),this._getDefaults.bind(this),r],...a,...this._defineGenericWidgets(e,l=>e.fields.get(l)===Vt,{zone:"local",activationTest:s},at,{updateDefaultsDependencies:o,requireUpdateDefaults:r,genericTypeToUIElement:Li,getDefaults:this._getDefaults.bind(this)}),...this._defineGenericWidgets(e,l=>Hy.has(l),{zone:"local",activationTest:s},Ne,{updateDefaultsDependencies:o,requireUpdateDefaults:r,genericTypeToUIElement:Li,getDefaults:this._getDefaults.bind(this)})]}_update(...e){try{return super._update(...e)}finally{this._activationTestCache=null}}_getDefaults(e,t,n=ZA){const{fullKey:s}=e,r=this.getEntry(this._animationPropertiesKey),o=this.getEntry("/activeState/t").value,a=r.animanion.getPropertiesFromGlobalT(o);if(e.prefix===at){const[l]=zi(s,a,[null]);if(l!==null)return l;const A=Ve(s,n===ZA?Ve.NOTDEF:n);return A===n?n:A.default}else if(a.has(s))return a.get(s);if(n!==ZA)return n;throw new Error(`KEY ERROR ${this}._getDefaults: not found "${s}" for global-t ${o} in ${r}`)}}class Vp extends dn{static{c(this,"KeyMomentsController")}constructor(e,t,...n){super(e,t),this._customArgs=n}_createWrapper(e){const t={rootPath:e},n=[],s=zW,r=[this._zones,...this._customArgs],o=this._childrenWidgetBus;return this._initWrapper(o,t,n,s,...r)}}class Op extends me{static{c(this,"UISelectTaskAutomation")}static TEMPLATE=`<div class="ui_select_task_automation">
        <!-- insert: select-widget -->
        <button class="ui_select_task_automation-execute">run</button>
</div>`;constructor(e,t){super(e),this._items=t;const n=new Map(Array.from(this._items.entries()).map(([s,[r]])=>[s,r]));[this.element,this._select]=this.initTemplate(n),this._dialog=null}initTemplate(e){const t=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE),n=t.firstElementChild,s=new $l(this._domTool,null,"Macros",e),r=n.querySelector(".ui_select_task_automation-execute");return s.element.title="run task automations",r.addEventListener("click",()=>this._executeItem(this._select._input.value)),this._domTool.insertAtMarkerComment(n,"insert: select-widget",s.element),this._insertElement(n),[n,s]}async _executeItem(e){this._dialog!==null&&console.error(`${this}._executeItem can't execute this._dialog is not empty`);let t=null;const[,n]=this._items.get(e);this._dialog=new n(this._domTool);try{t=await this._dialog.show(this.widgetBus)}catch(s){console.error(`TASK_AUTOMATION_DIALOG ERROR ${this}._executeItem with "${e}":`,s)}finally{this._dialog&&(this._dialog.destroy(),this._dialog=null)}return t}destroy(){return this._dialog&&(this._dialog.destroy(),this._dialog=null),super.destroy()}}class JW extends we{static{c(this,"ZoomLevelController")}constructor(e,t){const n=new Map(t),s=e.domTool.createElement("div",{class:"ui_zoom_level"});n.set("main",s),super(e,n),this._insertElement(s);const r=[[{zone:"main"},[["./type","value"]],Gh,"Zoom Level",new Map(Vy.enumItems.map(o=>[o,o]))],[{zone:"main",activationTest:c(function(){return this.widgetBus.getEntry("type").value==="custom"},"activationTest")},[["./type","type"],["./scaling","value"]],Wi,"Custom",{min:0,max:100}]];this._initWidgets(r)}}class UW extends Br{static{c(this,"PropertiesManager")}initialUpdate=dn.prototype.initialUpdate;constructor(e,t){super(e,t),this._currentActorTypeKey=null}get dependencies(){const e=super.dependencies;return e.add(this.widgetBus.getExternalName("actorPath")),e}get modelDependencies(){const e=super.modelDependencies;return e.add(this.widgetBus.getExternalName("actorPath")),e}_createStageWrappers(){const e=D.fromParts(this.widgetBus.getExternalName("stage")),t=e.toRelative(this.widgetBus.rootPath),n=this._domTool.createElement("ol",{class:"ui_zone-key_moments_main"});return[[{zone:"main"},[],yn,"h3",{},"Stage"],[{rootPath:t,zone:"main"},[["width","value"]],Wi,"Width","px",{min:0}],[{rootPath:t,zone:"main"},[["height","value"]],Wi,"Height","px",{min:0}],[{rootPath:e,relativeRootPath:D.fromParts(".","zoomLevel"),zone:"main"},[],JW,this._zones],pl({zone:"main",rootPath:t}).isLoop,[{rootPath:t,zone:"main"},[],Op,Dp],[{rootPath:t,zone:"main"},[["keyMoments","keyMoments"],"animationProperties@"],Mp],[{zone:"main"},[],qt,n],[{rootPath:t},[["keyMoments","collection"]],Vp,new Map([...this._zones,["main",n]]),"[STAGE:null]"],[{rootPath:t,zone:"main"},["keyMoments","animationProperties@",["/activeState/t","globalT"]],Lp,"[STAGE:null]"]].map(r=>this._initWrapper(this._childrenWidgetBus,...r))}_getActorSpecificWidgetSetup(e,t){const n={FontSelect:[{rootPath:e,zone:"main"},[["/availableFonts","options"],["localActiveFontKey","activeFontKey"]],ql,!0],ContainerTaskAutomations:[{rootPath:e,zone:"main"},[],Op,Dp]};if(Object.hasOwn(n,t))return n[t];throw new Error(`KEY ERROR not found widgetKey "${t}" in ${this}._getActorSpecificWidgetSetup.`)}_createActorWrappers(e,t){const n=t.get("actorTypeKey").value,s=t.get("actorTypeModel").get("label").value,r=D.fromString(this.widgetBus.getExternalName("actors")),o=r.toRelative(this.widgetBus.rootPath),a=o.append(...e,"instance"),l=this._domTool.createElement("ol",{class:"ui_zone-key_moments_main"}),A=hW(n).map(h=>this._getActorSpecificWidgetSetup(a,h));return[[{zone:"main"},[],yn,"h3",{},`${s}:`],[{rootPath:a,zone:"main"},["animationProperties@","keyMoments"],iQ],[{rootPath:a,zone:"main"},[["label","value"]],Di,"Label"],pl({zone:"main",rootPath:a}).isLoop,...A,[{rootPath:a,zone:"main"},[["keyMoments","keyMoments"],"animationProperties@"],Mp],[{zone:"main"},[],qt,l],[{rootPath:a},[["keyMoments","collection"]],Vp,new Map([...this._zones,["main",l]]),n],[{rootPath:a,zone:"main"},["keyMoments","animationProperties@",["/activeState/t","globalT"]],Lp,n]].map(h=>this._initWrapper(this._childrenWidgetBus,...h))}_provisionWidgets(e){const t=this._getChangedMapFromCompareResult(e),n=t.has("actorPath")?t.get("actorPath"):this.getEntry("actorPath"),s=t.has("actors")?t.get("actors"):this.getEntry("actors"),r=n.isEmpty?null:Je(s,n.value,null),o=r===null?null:r.get("actorTypeKey").value,a=this._currentActorTypeKey!==o,l=t.has("actorPath")||a;if(this._currentActorTypeKey=o,l){for(const h of this._widgets)h.destroy();this._widgets.splice(0,1/0)}const A=new Set,u=[];r!==null&&l?u.push(...this._createActorWrappers(n.value,r)):l&&u.push(...this._createStageWrappers()),this._widgets.push(...u);for(const h of u)this._createWidget(h),A.add(h);return A}}class KW extends me{static{c(this,"UIFramesPerSecond")}static TEMPLATE=`<div class="ui_frames_per_second">
        <output class="ui_frames_per_second-output">-</output>
        <span>FPS</span>
    </div>`;constructor(e){super(e),this._last=this._domTool.window.performance.now(),[this.element,this._output]=this.initTemplate()}initTemplate(){const e=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE).firstElementChild,t=e.querySelector(".ui_frames_per_second-output");return this._insertElement(e),[e,t]}update(){const e=this._domTool.window.performance.now(),t=e-this._last,n=1e3/t;this._last=e,this._output.textContent=`${n.toFixed(2)}`}}class jW extends me{static{c(this,"UIClock")}static TEMPLATE=`<div class="ui_clock">
        <strong>Clock:</strong>
        <output class="ui_clock-output"></output>
    </div>`;constructor(e){super(e),[this.element,this._output]=this.initTemplate()}initTemplate(){const e=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE).firstElementChild,t=e.querySelector(".ui_clock-output");return this._insertElement(e),[e,t]}_format(e,t){return("0".repeat(e)+t).slice(-e)}update(e){const t=this._format.bind(this,2),n=(e.has("t")?e.get("t"):this.getEntry("t")).value,s=(e.has("duration")?e.get("duration"):this.getEntry("duration")).value,r=s*n,o=`${Math.trunc(s/60/60)}`,a=Math.trunc(r),l=Math.trunc(a/60),A=Math.trunc(l/60),u=l%60,h=a%60,d=Math.trunc(r%1*100),g=[this._format(o.length>2?o.length:2,A),t(u),t(h)+`.${t(d)}`];this._output.textContent=g.join(":")}}class da extends we{static{c(this,"UITimeControl")}constructor(e,t){const n=e.domTool.createElement("div",{class:"ui_time_control"}),s=e.domTool.createElement("div"),r=new Map([...t,["local",n],["contents",s]]);e.insertElement(n),super(e,r);const o=[[{zone:"local"},[],tt,"Time",s,!0],...Object.entries(pl({zone:"contents"})).filter(([a])=>a!=="isLoop").map(([,a])=>a),[{zone:"contents"},["t","playing"],PC],[{zone:"contents"},["t","duration"],jW],[{zone:"contents"},["t"],KW]];this._initWidgets(o)}}class qW extends we{static{c(this,"StageAndActorsController")}constructor(e,t){e.wrapper.setProtocolHandlerImplementation(...Nn.create("animationProperties@"));const n=e.domTool.createElement("div",{class:"stage-manager"}),s=e.domTool.createElement("div",{class:"properties-manager"}),r=new Map([...t,["stage-manager",n],["properties-manager",s]]);super(e,r);const o=[[{},["t","duration","playing","perpetual"],Uo],[{zone:"main"},[],da,r],[{zone:"main"},[],tt,"Stage",n],[{zone:"main"},[],tt,"Properties",s],[{},[["t","globalT"],"keyMoments","isLoop"],Sc,r,ha,la],[{zone:"layout"},[],zy,r,"stage_and_actors",!1],[{zone:"stage-manager"},[["availableActorTypes","sourceTypes"]],Jy,"Create","drag and drop into Stage Manager.",c(function(l,A){l.setData(pe.ACTOR_CREATE,`${A}`),l.setData("text/plain",`[TypeRoof ${pe.ACTOR_CREATE}: ${A}]`)},"setDragDataFN")],[{zone:"stage-manager"},["activeActors","editingActor"],XW],[{zone:"stage-manager"},[["activeActors","rootCollection"]],Ti,"Drop here to remove actor","",[pe.ACTOR_PATH]],[{},[["editingActor","actorPath"],["activeActors","actors"],[".","stage"]],UW,new Map([...r,["main",s]])]];this._initWidgets(o)}update(...e){this.widgetBus.wrapper.getProtocolHandlerImplementation("animationProperties@").resetUpdatedLog(),super.update(...e)}initialUpdate(...e){this.widgetBus.wrapper.getProtocolHandlerImplementation("animationProperties@").resetUpdatedLog(),super.initialUpdate(...e)}}class $W extends we{static{c(this,"StageAndActorsPlayerController")}constructor(e,t){e.wrapper.setProtocolHandlerImplementation(...Nn.create("animationProperties@")),super(e,t);const n=[[{},["t","duration","playing","perpetual"],Uo],[{zone:"main"},[],da,t],[{},[["t","globalT"],"keyMoments","isLoop"],Sc,t,ha,la],[{zone:"layout"},[],zy,t,"stage_and_actors",!0]];this._initWidgets(n)}update(...e){this.widgetBus.wrapper.getProtocolHandlerImplementation("animationProperties@").resetUpdatedLog(),super.update(...e)}initialUpdate(...e){this.widgetBus.wrapper.getProtocolHandlerImplementation("animationProperties@").resetUpdatedLog(),super.initialUpdate(...e)}}const e1={Controller:$W,Model:Oy},bL=Object.freeze(Object.defineProperty({__proto__:null,Controller:qW,Model:Oy,PlayerLayout:e1,SelectAndDrag:Jy,SelectAndDragByOptions:Cd,ToggleKeyMomentButton:Uy,UINumericProperties:Ky,UITimeControl:da,_BaseSelectAndDrag:md,initAnimanion:ha,openTypeFeaturesGen:Py},Symbol.toStringTag,{value:"Module"})),jy=hd.get("VideoproofArrayActorModel").get("typeClass").value;function*qy([i,...e]){if(!i)yield[];else for(let t of i)for(let n of qy(e))yield[t,...n]}c(qy,"cartesianProductGen");function*$y(i){let e=i.length?Array.from(tn(...i))[0]:[],t=[];for(let[n,s]of i){let r=n==="opsz"?["min","default","max"]:["default","min","max"],o=r.filter(a=>{if("default"in s){if(!(a in s))return!1}else throw new Error('SANITY CHECK ERROR: "default" must be in any axisRange.');return a==="default"?!0:s[a]!==s.default}).map(a=>s[a]);t.push(o)}for(let n of qy(t))yield Array.from(tn(e,n))}c($y,"calculateKeyframes");const tr=["opsz","wdth","wght"];function t1(i){let e=[];for(let t of tr)t in i&&e.push([t,i[t]]);return $y(e)}c(t1,"calculateRegisteredKeyframes");function Pp(i,e){return Array.from(tn(i,e)).reduce((t,[n,s])=>t+n*s,0)}c(Pp,"vecDot");function eb(i,e){return Array.from(tn(i,e)).map(([t,n])=>t+n)}c(eb,"vecSum");function tb(i,e){return i.map(t=>t*e)}c(tb,"vecScale");function kA(i,e){return eb(i,tb(e,-1))}c(kA,"vecSubstract");function n1(i){return Math.sqrt(i.map(e=>e*e).reduce((e,t)=>e+t))}c(n1,"vecLength");function i1(i,e,t){let n=kA(t,i),s=kA(e,i),r=Pp(n,s)/Pp(s,s),o=Math.min(1,Math.max(r,0)),a=tb(s,o),l=eb(i,a);return[n1(kA(n,a)),o,l]}c(i1,"closestPoint");function s1(i,e){let t=i.map((u,h,d)=>{let g=h+1===d.length?d[0]:d[h+1];return i1(u,g,e)}),n=0,s=t[n][0];for(let[u,[h]]of t.entries())h<s&&(s=h,n=u);let[r,o,a]=t[n],l=n+o,A=l/i.length;return[r,A,a]}c(s1,"_getClosestPointFromKeyFrames");class r1 extends me{static{c(this,"UIKeyMomentsLinkNavigation")}static TEMPLATE=`<div class="ui_key_moments_link_navigation">
<label><!-- insert: label --></label>
<ol class="ui_key_moments_link_navigation-list"></ol>
</div>`;static ITEM_TEMPLATE=`<li class="ui_key_moments_link_navigation-list_item"
    ><a class="ui_key_moments_link_navigation-list_item-input"
        ><!-- insert: label --></a></li>`;constructor(e,t){super(e),this._inputToKey=new Map,this._keyToElement=new Map,this._currentKeyMoments=null,this._currentKeyMomentsSecondAndLast=[null,null],[this.element,this._list]=this._initTemplate(t)}_initTemplate(e){const t=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE).firstElementChild,n=t.querySelector(".ui_key_moments_link_navigation-list");return this._domTool.insertAtMarkerComment(t,"insert: label",e),n.addEventListener("click",this._changeStateHandler(this._clickHandler.bind(this)),!0),this._insertElement(t),[t,n]}_clickHandler(e){if(!this._inputToKey.has(e.target))return;e.preventDefault();const t=D.fromString(this.widgetBus.getExternalName("keyMoments")).append(".."),n=this.getEntry(t);if(kt(n.get("keyMoments"))!==this._currentKeyMoments){n.set("keyMoments",this._currentKeyMoments),this.getEntry("duration").value=this._currentKeyMoments.size*2;const r=this.getEntry("font").value;this.getEntry("animationProperties@").propertyValuesMap;const a=[];{const S=this._inputToKey.get(e.target),M=this._currentKeyMoments.get(S),V=M.get("axesLocations");for(const K of tr){const j=V.has(K)?V.get(K).value:r.axisRanges[K].default;a.push(j)}}const l=[];for(const[,S]of this._currentKeyMoments){const M=S.get("axesLocations"),V=[];for(const K of tr){const j=M.has(K)?M.get(K).value:r.axisRanges[K].default;V.push(j)}l.push(V)}const[,A]=s1(l,a),u=l.length*A,h=Math.trunc(u),d=u%1,[g,p]=h===l.length-1?[-1,0]:[h,h+1],f=Array.from(this._currentKeyMoments).map(([,S])=>S.get("duration").value),m=f.slice(1).reduce((S,M)=>(S.push((S.length?S.at(-1):0)+M),S),[0]),y=f.reduce((S,M)=>S+M,0),v=m.at(g),G=f.at(p)*d,R=v+G,Q=R/y;this.getEntry("t").value=Q}else{const r=this._inputToKey.get(e.target),o=this.getEntry("animationProperties@"),a=o.animanion.localAnimanion,l=a.keyMomentsKeyToT.get(r)/a.fullDuration;this.getEntry("t").value=l}}_updateControlsList(e){this._domTool.clear(this._list),this._inputToKey.clear(),this._keyToElement.clear();const t=[];for(const[n,s]of e){const r=this._domTool.createFragmentFromHTML(this.constructor.ITEM_TEMPLATE).firstElementChild,o=r.querySelector(".ui_key_moments_link_navigation-list_item-input");t.push(r),this._inputToKey.set(o,n),this._keyToElement.set(n,r),this._domTool.insertAtMarkerComment(r,"insert: label",s.get("label").value||`(item #${n})`)}this._list.append(...t)}_getKeyMomentsAnimationPosition(e){const t=e.fullDuration,n=e.t,s=n*t,r=e.tToKeyMoments,o=r.isLoop,a=[...r.keys()],[l,A]=ea(a,s);if(l===null&&A===null)throw new Error("ASSERTION FAILED KeyMoments must not be  empty.");if(l===null){if(A!==a.length-1)throw new Error(`ASSERTION FAILED: unknown state right "${A}" shoud be ${a.length-1}.`);if(!o){const G=a[A],R=r.get(G).at(-1),[Q]=R;return[1,null,Q]}const u=a[A],h=u,d=r.get(u).at(-1),[g]=d,p=a[0],f=t+p;if(f===h)return[1,null,g];const m=r.get(p).at(0),[y]=m;return[(s-h)/(f-h),g,y]}if(l===A){const u=a[l],h=r.get(u).at(-1),[d]=h;return[1,null,d]}if(A===null){if(!o){const v=a[l],G=r.get(v).at(-1),[R]=G;return[1,null,R]}const u=a[a.length-1],h=u-t,d=r.get(u).at(-1),[g]=d,p=a[l];if(p===h)return[1,null,g];const f=r.get(p).at(0),[m]=f;return[(s-h)/(p-h),g,m]}else{if(A-l!==1)throw new Error(`ASSERTION FAILED left [${l}] and right [${A}] should be directly next to each other but the distance is not 1: ${A-l}.`);const u=a[l],h=r.get(u).at(-1),[d]=h,g=a[A],p=r.get(g).at(0),[f]=p;return[(s-u)/(g-u),d,f]}}_currentKeyMomentsChanged(e){const[t,n]=[e.get(1),e.get(-1)],[s,r]=this._currentKeyMomentsSecondAndLast;return t!==s||n!==r}update(e){const t=e.has("keyMoments")?e.get("keyMoments"):this.getEntry("keyMoments");if(e.has("font")?(this._currentKeyMoments=t,this._currentKeyMomentsSecondAndLast=[t.get(1),t.get(-1)],this._updateControlsList(this._currentKeyMoments)):!this._currentKeyMomentsChanged(t)&&this._currentKeyMoments!==t&&(this._currentKeyMoments=t),e.has("animationProperties@")&&!this._currentKeyMomentsChanged(t)){const n=e.get("animationProperties@");if(n.tToKeyMoments.size){const[s,r,o]=this._getKeyMomentsAnimationPosition(n),a=new Map([[o,s]]);r!==null&&a.set(r,1-s);for(const[l,A]of this._keyToElement)a.has(l)?A.style.setProperty("--animation-local-impact",`${a.get(l)}`):A.style.removeProperty("--animation-local-impact")}}}}const _A="axesLocations/";class o1 extends me{static{c(this,"UIMoreRaps")}static TEMPLATE=`<div class="ui_more_raps">
<label><!-- insert: label --></label>
<ol class="ui_more_raps-list"></ol>
</div>`;static ITEM_TEMPLATE=`<li class="ui_more_raps-list_item"
    ><a class="ui_more_raps-list_item-input"
        ><!-- insert: label --></a></li>`;constructor(e,t){super(e),this._inputToAxisTag=new Map,this._axisTagToElement=new Map,this._activeAxisTag=null,[this.element,this._list]=this._initTemplate(t)}_initTemplate(e){const t=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE).firstElementChild,n=t.querySelector(".ui_more_raps-list");return this._domTool.insertAtMarkerComment(t,"insert: label",e),n.addEventListener("click",this._changeStateHandler(this._clickHandler.bind(this)),!0),this._insertElement(t),[t,n]}_setItemsActive(e){for(const[t,n]of this._axisTagToElement)t===e?n.classList.add("active"):n.classList.remove("active")}_clickHandler(e){if(!this._inputToAxisTag.has(e.target))return;e.preventDefault();const t=this._inputToAxisTag.get(e.target),n=this.getEntry("font").value,s=n.axisRanges,r=this.getEntry("animationProperties@"),o=r.propertyValuesMap,a=[],l=this.getEntry("keyMoments");for(const d of tr){const g=`${_A}${d}`;if(!o.has(g))continue;const p=o.get(g);a.push([d,{default:p}])}a.push([t,s[t]]);const A=l.splice(0,1/0)[0];nb(l,$y(a)),this.getEntry("duration").value=l.size*2,this.getEntry("t").value=0;const u=l.get(0),h=new Set(["axesLocations","label","duration","t","isActive"]);for(const d of A.keys())h.has(d)||u.set(d,A.get(d))}_updateControlsList(e){this._domTool.clear(this._list),this._inputToAxisTag.clear(),this._axisTagToElement.clear();const t=e.fontObject.tables?.fvar?.axes,n=e.axisRanges,s=[];for(let r of t){if(tr.indexOf(r.tag)!==-1)continue;const o=this._domTool.createFragmentFromHTML(this.constructor.ITEM_TEMPLATE).firstElementChild,a=o.querySelector(".ui_more_raps-list_item-input"),l=n[r.tag],A=`${l.name} ${l.min} ${l.default} ${l.max}`;s.push(o),this._domTool.insertAtMarkerComment(o,"insert: label",A),this._inputToAxisTag.set(a,r.tag),this._axisTagToElement.set(r.tag,o)}this._list.append(...s)}update(e){if(e.has("font")&&this._updateControlsList(e.get("font").value),e.has("animationProperties@")){const t=e.get("animationProperties@"),n=t.propertyValuesMap;let s=null;for(const r of n.keys()){if(!r.startsWith(_A))continue;const o=r.slice(_A.length);if(tr.indexOf(o)===-1&&this._axisTagToElement.has(o)){s=o;break}}this._activeAxisTag!==s&&(this._activeAxisTag=s,this._setItemsActive(s))}}}function nb(i,e){const t=i.constructor.Model,n=[];for(const s of e){const r=t.createPrimalDraft(i.dependencies),o=s.map(([l,A])=>`${l} ${A}`).join(", "),a=r.getDraftFor("axesLocations");r.get("label").value=o,a.arraySplice(0,1/0);for(const[l,A]of s)a.setSimpleValue(l,A);n.push(r)}i.push(...n)}c(nb,"setKeyMomentsFromLocations");const a1=ks.createClass("VideoproofArrayModel",...fc,["videoproofArray",jy],st.create(["videoproofArray","font","duration"],c(function({videoproofArray:e,font:t,duration:n}){e.get("isLoop").value=!0;const s=e.get("keyMoments"),r=s.constructor.Model,o=s.size===0,a=e.dependencies.font!==t,l=o||a;if(o){const A=r.createPrimalDraft(s.dependencies),u=r.fields.get("charGroup").fields.get("options").Model.defaultValue;A.get("charGroup").get("options").set(u),s.push(A),console.log("CoherenceFunction setDefaultsVideoproofArray videoproofArray",e,"keyMoments",s)}if(l){console.log("CoherenceFunction setDefaultsVideoproofArray font changed",`
>from`,e.dependencies.font.value.fullName,`
>to`,t.value.fullName,`
 videoproofArray.dependencies:`,e.dependencies);const A=["charGroup"],u=[];{const d=s.get(0);u.push(...A.map(g=>[g,d.get(g)]))}s.splice(0,1/0),nb(s,t1(t.value.axisRanges));const h=s.get(0);u.map(([d,g])=>h.set(d,g)),n.value=s.size*2}},"initVideoproofArray"))),Hp=Symbol("_NOTDEF");class l1 extends we{static{c(this,"VideoproofArrayController")}constructor(e,t){super(e,t),e.wrapper.setProtocolHandlerImplementation(...Nn.create("animationProperties@"));const n=e.rootPath.append("videoproofArray"),s=`animationProperties@${n}`,r=[[s,"animationProperties@"]],o=new Set(Array.from(tn(...r))[1]),a=c(u=>Array.from(u.keys()).some(h=>o.has(h)),"requireUpdateDefaults"),l="generic/charGroup/";this._animationPropertiesKey=s;const A=[[{},["t","duration","playing","perpetual"],Uo],[{zone:"main"},[],da,t],[{rootPath:n,"animationProperties@":n.toString()},[["/activeState/t","globalT"],"keyMoments","isLoop"],pc,ha,la],Rc({typeKey:"VideoproofArray",typeLabel:"Videoproof Array",typeClass:jy,widgetRootPath:e.rootPath.append("videoproofArray"),zones:new Map([...t,["layer",t.get("layout")]]),get layerBaseClass(){throw new Error("NOT IMPLEMENTED get layerBaseClass")}}),[{zone:"main",rootPath:e.rootPath.append("videoproofArray","keyMoments","0","charGroup")},[],cd,t,{updateDefaultsDependencies:r,requireUpdateDefaults:a,genericTypeToUIElement:Li,getDefaults:function(u,h,d=Hp){const{fullKey:g}=u,p=this.getEntry(this._animationPropertiesKey),f="0",m=p.getPropertyValuesMapForKeyMoment(f);if(m.has(g))return m.get(g);if(d!==Hp)return d;throw new Error(`KEY ERROR ${this}._getDefaults: not found "${g}" for ${f} in ${p}`)}.bind(this)},l,"Glyphs"],[{zone:"main"},[["videoproofArray/keyMoments","keyMoments"],["../font","font"],"duration","t",...r],r1,"Key Moments"],[{zone:"main"},[["videoproofArray/keyMoments","keyMoments"],["../font","font"],"duration","t",...r],o1,"But wait, there’s more"]];this._initWidgets(A)}update(...e){this.widgetBus.wrapper.getProtocolHandlerImplementation("animationProperties@").resetUpdatedLog(),super.update(...e)}initialUpdate(...e){this.widgetBus.wrapper.getProtocolHandlerImplementation("animationProperties@").resetUpdatedLog(),super.initialUpdate(...e)}}const EL=Object.freeze(Object.defineProperty({__proto__:null,Controller:l1,Model:a1},Symbol.toStringTag,{value:"Module"})),ib=hd.get("VideoproofArrayV2ActorModel").get("typeClass").value,nr=Symbol("_NOTDEF");class sb extends we{static{c(this,"UIVideoproofArrayLayer")}constructor(e,t){const n=e.domTool.createElement("div",{class:"ui-videoproof_array-layer"}),s=new Map([...t,["main",n]]);super(e,s),this.element=n,this._insertElement(this.element);const r=[["animationProperties@./../../../","animationProperties@"]],o=new Set(Array.from(tn(...r))[1]),a=c(A=>Array.from(A.keys()).some(u=>o.has(u)),"requireUpdateDefaults"),l=[[{zone:"main"},[["font","data"]],_s,"span",{},A=>A.nameVersion],[{zone:"main"},[["/availableFonts","options"],["localActiveFontKey","activeFontKey"]],ql,!0],[{zone:"main",rootPath:D.fromParts(".","keyMoments","0","textColor")},[],Io,s,"Text Color",this._getDefaults.bind(this,Ze.createSimpleRecord(at,"textColor"),"textColor"),r,a],[{zone:"main",rootPath:D.fromParts(".","keyMoments","0","backgroundColor")},[],Io,s,"Background Color",this._getDefaults.bind(this,Ze.createSimpleRecord(at,"backgroundColor"),"backgroundColor"),r,a],[{zone:"main",rootPath:D.fromParts(".","keyMoments","0")},[["openTypeFeatures","openTypeFeatures"],["/font","rootFont"]],mc,this._zones,(A,u)=>{if(A.fullKey===`${Rt}font`){const h=this.widgetBus.rootPath.append("./font");return this.getEntry(h).value}throw new Error(`getDefault for UIOTFeaturesChooser don't know how to get ppsRecord: "${A}" modelFieldName: "${u}".`)},A=>A.has("font"),[["../../font","font"]]]];this._initWidgets(l)}_getDefaults(e,t,n=nr){const{fullKey:s}=e,r=this.getEntry("animationProperties@"),o="0",a=r.getPropertyValuesMapForKeyMoment(o);if(e.prefix===at){const[l]=zi(s,a,[null]);if(l!==null)return l;const A=Ve(s,n===nr?Ve.NOTDEF:n);return A===n?n:A.default}else if(a.has(s))return a.get(s);if(n!==nr)return n;throw new Error(`KEY ERROR ${this}._getDefaults: not found "${s}" for ${o} in ${r}`)}}class Wu extends me{static{c(this,"UIButton")}static TEMPLATE='<button class="ui_button"><!-- insert: label --></button>';constructor(e,t,n=[],s={title:null,classPart:null,elementAttributes:[]}){super(e),[this.element]=this._initTemplate(t,n,s)}_initTemplate(e,t,{title:n,classPart:s,elementAttributes:r}){const o=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE).firstElementChild;this._domTool.insertAtMarkerComment(o,"insert: label",e);for(const a of t)o.addEventListener(...a);if(s!=null&&o.classList.add(`ui_button-${s}`),n!=null&&(o.title=n),r!=null)for(const[a,l]of r)o.setAttribute(a,l);return this._insertElement(o),[o]}}class c1 extends we{static{c(this,"UIVideoproofArrayLayerItem")}constructor(e,t,n){const s=e.domTool.createElement("div",{class:"ui_videoproof_array_layers-item"}),r=new Map([...t,["main",s]]);super(e,r),this.element=s,this._insertElement(this.element);const o=e.rootPath.parts.at(-1);for(const[l,A,...u]of n)this.element.addEventListener(l,h=>A(`key@@${o}`,h),...u);const a=[[{zone:"main"},[],Wu,"✖",[["click",this._changeStateHandler(l=>{l.preventDefault();const A=e.rootPath.parts.at(-1),u=this.widgetBus.getEntry(e.rootPath.parent);u.delete(A),u.size===1&&(xo(u,"./0/instance/keyMoments/0/textColor/colorTypeKey").value=ce.NULL)}),!0]],{title:"Remove",classPart:"remove"}],[{zone:"main"},[],Wu,"⇵",[["dragstart",this._dragstartHandler.bind(this)],["dragend",this._dragendHandler.bind(this)]],{title:"Move",classPart:"move",elementAttributes:[["draggable","true"]]}],[{zone:"main",rootPath:D.fromParts(".","instance")},["animationProperties@"],sb,r]];this._initWidgets(a)}_dragstartHandler(e){const t=this.widgetBus.rootPath.parts.at(-1),n=D.fromParts(".",t);e.dataTransfer.setData(pe.ACTOR_PATH,`${n}`),e.dataTransfer.setData("text/plain",`[TypeRoof ${pe.ACTOR_PATH}: ${n}]`),e.currentTarget.parentElement.classList.add("dragging"),e.dataTransfer.effectAllowed="all",e.dataTransfer.setDragImage(e.currentTarget.parentElement,0,0)}_dragendHandler(e){e.currentTarget.parentElement.classList.remove("dragging")}}class A1 extends dn{static{c(this,"UIVideoproofArrayLayersController")}constructor(e,t,...n){super(e,t),this._customArgs=n}_createWrapper(e){const t={rootPath:e,zone:"main"},n=[],s=c1,r=[this._zones,...this._customArgs],o=this._childrenWidgetBus;return this._initWrapper(o,t,n,s,...r)}}class u1 extends we{static{c(this,"UIVideoproofArrayLayers")}constructor(e,t,n){const s=e.domTool.createElement("div",{class:"ui_videoproof_array_layers"}),r=e.domTool.createElement("div"),o=e.domTool.createElement("div",{class:"ui_videoproof_array_layers-items"}),a=new Map([...t,["local",s],["contents",r],["main",o]]);super(e,a),r.append(o),this._insertElement(s),this._dropTargetElement=o,this._dropTargetElement.addEventListener("dragenter",this._dragenterHandler.bind(this)),this._dropTargetElement.addEventListener("dragover",this._dragoverHandler.bind(this)),this._dropTargetElement.addEventListener("drop",this._dropHandler.bind(this)),this._dropTargetElement.addEventListener("dragleave",this._dragleaveHandler.bind(this)),this._removeDragIndicatorTimeoutId=null;const l=[[{zone:"local"},[],tt,n,r],[{zone:"main",activationTest:c(()=>e.getEntry(e.rootPath).size===1,"activationTest"),rootPath:D.fromParts(".","0","instance"),id:"Layer"},["animationProperties@"],sb,a],[{zone:"main",activationTest:c(()=>e.getEntry(e.rootPath).size>1,"activationTest"),id:"LayersController"},[[".","collection"]],A1,a,[]],[{zone:"contents"},[],Wu,"+",[["click",this._changeStateHandler(A=>{A.preventDefault();const u=this.widgetBus.getEntry(e.rootPath);ob(u)}),!0]],{title:"Add",classPart:"add"}]];this._initWidgets(l)}_takeDragEventOrLeaveIt(e){const t=[pe.ACTOR_PATH,pe.ACTOR_CREATE];for(const n of t)if(e.dataTransfer.types.includes(n))return e.preventDefault(),e.stopPropagation(),[!0,n];return[!1,null]}_getChildKeyFromElement(e){const t=this.getWidgetById("LayersController",null);if(t!==null){for(const[,s]of t.widgets())if(s.widget.element===e)return s.widgetBus.rootPath.parts.at(-1);return null}return this.getWidgetById("Layer",null)!==null?"0":null}_getClosestChild(e){if(e===this._dropTargetElement)return this._dropTargetElement;for(const t of this._dropTargetElement.children)if(t===e||t.contains(e))return t;throw new Error(`UNKOWN can't get closest child in ${this}.`)}_getDropTargetInsertPosition(e){const t={targetElement:null,childKey:null,insertPosition:null};if(this._dropTargetElement.contains(e.target)){const A=this._getClosestChild(e.target);t.targetElement=A,t.childKey=this._getChildKeyFromElement(A)}else throw new Error(`VALUE ERROR event.target can't be mapped to ${this}.`);const{height:n,top:s}=t.targetElement.getBoundingClientRect(),{clientY:r}=e,o=r-s,a=o/n,l=.5;return t.insertPosition=a<l?"before":"after",t}_setDropTargetIndicator({insertPosition:e=null,targetElement:t=null}={}){if(this._removeDragIndicatorTimeoutId!==null){const{clearTimeout:a}=this._domTool.window;a(this._removeDragIndicatorTimeoutId),this._removeDragIndicatorTimeoutId=null}const n="drop_target_indicator-",s=`${n}marked`;for(const a of[this._dropTargetElement,...this._dropTargetElement.querySelectorAll(`.${s}`)])for(const l of[...a.classList])l.startsWith(n)&&a.classList.remove(l);if(e===null)return;if(!["before","after","insert"].includes(e))throw new Error(`NOT IMPLEMENTED ${this} insert position "${e}".`);const[r,o]=this._dropTargetElement!==t&&e==="before"&&t.previousElementSibling?[t.previousElementSibling,"after"]:[t,e];r.classList.add(`${n}${o}`),r.classList.add(s)}_dropIndicatorForDragHandler(e){const[t,n]=this._takeDragEventOrLeaveIt(e);if(!t)return;e.dataTransfer.dropEffect=n===pe.ACTOR_PATH?"move":"copy";const s=this._getDropTargetInsertPosition(e);this._setDropTargetIndicator(s)}_dragoverHandler(e){return this._dropIndicatorForDragHandler(e)}_dragenterHandler(e){return this._dropIndicatorForDragHandler(e)}_dragleaveHandler(e){if(!this._takeDragEventOrLeaveIt(e)[0])return;const{setTimeout:t}=this._domTool.window;this._removeDragIndicatorTimeoutId=t(this._setDropTargetIndicator.bind(this),100)}_dropHandler(e){const[t,n]=this._takeDragEventOrLeaveIt(e);if(!t)return;this._setDropTargetIndicator();const{childKey:s,insertPosition:r}=this._getDropTargetInsertPosition(e);if(n===pe.ACTOR_PATH){const o=D.fromString(e.dataTransfer.getData(pe.ACTOR_PATH)),a=o.parts.at(-1);return this._move(a,s,r)}else if(n===pe.ACTOR_CREATE){const o=e.dataTransfer.getData(pe.ACTOR_CREATE);return this._create(o,s,r)}}_create(e,t,n){throw new Error(`NOT IMPLEMENTED ${this}._create for type ${e} at ${n}#{targetKey}.`)}_move(e,t,n){if(e!==t)return this._changeState(()=>{const s=this.widgetBus.getEntry(this.widgetBus.rootPath),r=s.get(e),o=t===null?n==="after"?s.size:0:parseInt(t,10),a=parseInt(e,10);if(a===o)return;let l;if(n==="after")l=o+1;else if(n==="before")l=o;else throw new Error(`NOT IMPLEMENTED ${this} insert position "${n}".`);a<o&&(l=l-1),s.delete(e),s.splice(l,0,r)})}}const h1=ks.createClass("VideoproofArrayV2Model",...fc,...Pi.createWithInternalizedDependency("availableAxesMathItemTypes",Hh,Jh),["axesMath",oy],st.create(["axesMath"],c(function({axesMath:e}){const t=e.get("items");if(t.size===0){console.log("VideoproofArrayV2ActorModel axesMath is empty. adding some content");const n=ay("LocationsProduct",t.dependencies),s=Je(n,"./instance/axesLocationValuesMap");for(const[r,o]of[["opsz",["min","default","max"]],["wdth",["default","min","max"]],["wght",["default","min","max"]]]){s.has(r)||s.set(r,s.constructor.Model.createPrimalDraft(s.dependencies));const a=s.get(r);for(const l of o){const A=a.constructor.Model.createPrimalDraft(a.dependencies);hy(A,l),a.push(A)}}t.push(n)}},"initAxesMath")),["videoproofArrayV2",ib],st.create(["videoproofArrayV2","font"],c(function({videoproofArrayV2:e,font:t}){e.get("isLoop").value=!0;const n=e.get("keyMoments"),s=n.constructor.Model,r=n.size===0;if(e.get("localActiveFontKey").value!==t.value.fullName&&e.get("localActiveFontKey").set(t.value.fullName),r){const o=s.createPrimalDraft(n.dependencies),a=s.fields.get("charGroup").fields.get("options").Model.defaultValue;o.get("charGroup").get("options").set(a),n.push(o),console.log("CoherenceFunction setDefaultsVideoproofArray videoproofArrayV2",e,"keyMoments",n)}},"initVideoproofArray")),st.create(["videoproofArrayV2"],c(function({videoproofArrayV2:e}){const t=e.get("activeActors");t.size===0&&(console.log("VideoproofArrayV2Model initEmptyActiveActors activeActors is empty. adding VideoproofArrayV2CellActorModel"),ob(t))},"initEmptyActiveActors")),st.create(["videoproofArrayV2","axesMath","installedFonts","font","duration"],c(function*({videoproofArrayV2:e,axesMath:t,installedFonts:n,font:s,duration:r}){const o=e.get("activeActors"),a=e.dependencies.font!==s;if(o.isDraft||t.isDraft||a){const l=kt(e,"draft");yield*P_(l,t,n,s,r)}},"updateRap")));class rb extends me{static{c(this,"UIAlignment")}static TEMPLATE=`<div class="ui_alignment">
    <label class="radio-main-label">Cell Alignment</label>
</div>`;static TEMPLATE_OPTION=`<label class="ui_alignment-radio_label">
        <input name="alignment" type="radio">
        <span class="ui_alignment-radio_icon"></span></label>`;constructor(e,t){super(e),this._getDefault=t,[this.element,this._inputs]=this._initTemplate()}_initTemplate(){const e=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE).firstElementChild,t=new Map;for(const[n,s]of[["left","Left"],["center","Center"],["right","Right"]]){const r=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE_OPTION).firstElementChild,o=r.querySelector("input");r.append(s),o.classList.add(`ui_alignment-${n}`),o.addEventListener("change",this._changeStateHandler.bind(this,n)),t.set(n,o),e.append(r)}return this._insertElement(e),[e,t]}_changeStateHandler(e){this._changeState(()=>this.getEntry("value").value=e)}update(e){if(e.has("value")){const t=e.get("value"),n=t.isEmpty?this._getDefault():t.value;for(const[s,r]of this._inputs)r.checked=s===n}}}function d1(i){const e=D.fromParts(".","instance","keyMoments","0","textColor","instance"),t=[];for(const[,n]of i){const s=kt(n),r=Je(s,e);if(!r.hasWrapped)continue;const o=na(r),a=Ko("oklch")(o);a.h!==void 0&&t.push(a.h)}return t}c(d1,"_extractFirstKeyMomentTextColorHueValues");function g1(...i){if(i.length===0)return .55;const s=i[0];i.sort();const r=i.indexOf(s);i.splice(0,1/0,...i.slice(r),...i.slice(0,r));const o=[];for(const[h,d]of i.entries()){const g=i.length>h+1?h+1:0,p=i.at(g),f=p-d,m=f<0?f+1:f;(o.length===0||o[1]<m)&&o.splice(0,1/0,h,m===0?1:m)}const[a,l]=o,A=l>=.55?.4:l*.5;return(i[a]+A)%1}c(g1,"_getNextHueValueTurns");function p1(i){const e=d1(i);return g1(...e.map(t=>t/360))}c(p1,"getNextHueValueTurns");function f1(i){return p1(i)*360}c(f1,"getNextHueValueDeg");function Xp(i,e=!0){const t=Qi("VideoproofArrayV2CellActorModel",i.dependencies),n=xo(t,"instance/keyMoments"),s=n.constructor.Model,r=s.createPrimalDraft(n.dependencies);if(e){const o={mode:"oklch",l:.7,c:.4,h:f1(i),alpha:.6},a=pr(o,r.dependencies);r.set("textColor",a)}return n.push(r),t}c(Xp,"createCellActorModel");function ob(i){if(i.size===1){const n=xo(i,"./0/instance/keyMoments/0");if(!Je(n,"./textColor/instance").hasWrapped){const r=Xp(i,!0),o=Je(r,"./instance/keyMoments/0/textColor");n.set("textColor",o)}}const e=i.size>0,t=Xp(i,e);i.push(t)}c(ob,"insertNewCellActorModel");class m1 extends we{static{c(this,"VideoproofArrayV2Controller")}constructor(e,t){const n=e.domTool.createElement("div",{class:"sidebar-group"}),s=new Map([...t,["general",n]]);super(e,s),e.wrapper.setProtocolHandlerImplementation(...Nn.create("animationProperties@"));const r=D.fromParts(".","videoproofArrayV2"),o=this.widgetBus.rootPath.append(...r),a=`animationProperties@${o}`,l=[[a,"animationProperties@"]],A=new Set(Array.from(tn(...l))[1]),u=c(g=>Array.from(g.keys()).some(p=>A.has(p)),"requireUpdateDefaults"),h="generic/charGroup/";this._animationPropertiesKey=a;const d=[[{},["t","duration","playing","perpetual"],Uo],[{rootPath:r},[["../t","globalT"],"keyMoments","isLoop"],Sc,s,ha,la],[{zone:"main"},[],da,s],Rc({typeKey:"VideoproofArrayV2",typeLabel:"Videoproof Array V2",typeClass:ib,widgetRootPath:e.rootPath.append("videoproofArrayV2"),zones:new Map([...s,["layer",s.get("layout")]]),get layerBaseClass(){throw new Error("NOT IMPLEMENTED get layerBaseClass")}}),[{zone:"main",rootPath:D.fromParts(".","videoproofArrayV2","activeActors")},[],u1,s,"Family Comparison"],[{zone:"main",rootPath:e.rootPath.append("videoproofArrayV2","keyMoments","0","charGroup")},[],cd,s,{updateDefaultsDependencies:l,requireUpdateDefaults:u,genericTypeToUIElement:Li,getDefaults:this._getDefaults.bind(this)},h,"Glyphs"],[{zone:"main"},[],tt,"Options",n],[{zone:"general",rootPath:e.rootPath.append("videoproofArrayV2","keyMoments","0")},[["cellAlignment","value"]],rb,()=>Ve("generic/cellAlignment").default],[{zone:"general",rootPath:e.rootPath.append("videoproofArrayV2","keyMoments","0","stageBackgroundColor")},[],Io,s,"Background Color",this._getDefaults.bind(this,Ze.createSimpleRecord(at,"stageBackgroundColor"),"stageBackgroundColor"),l,u],[{zone:"general",rootPath:e.rootPath.append("videoproofArrayV2","keyMoments","0")},[["showCellBoxes","value"]],LC,()=>Ve("generic/showCellBoxes").default,u,"show_cell_boxes","Show Cell Boxes"],[{zone:"main"},[],K_,s,"Rap Editor",l]];this._initWidgets(d)}_getDefaults(e,t,n=nr){const{fullKey:s}=e,r=this.getEntry(this._animationPropertiesKey),o="0",a=r.getPropertyValuesMapForKeyMoment(o);if(e.prefix===at){const[l]=zi(s,a,[null]);if(l!==null)return l;const A=Ve(s,n===nr?Ve.NOTDEF:n);return A===n?n:A.default}else if(a.has(s))return a.get(s);if(n!==nr)return n;throw new Error(`KEY ERROR ${this}._getDefaults: not found "${s}" for ${o} in ${r}`)}update(...e){this.widgetBus.wrapper.getProtocolHandlerImplementation("animationProperties@").resetUpdatedLog(),super.update(...e)}initialUpdate(...e){this.widgetBus.wrapper.getProtocolHandlerImplementation("animationProperties@").resetUpdatedLog(),super.initialUpdate(...e)}}const BL=Object.freeze(Object.defineProperty({__proto__:null,Controller:m1,Model:h1,UIAlignment:rb},Symbol.toStringTag,{value:"Module"})),C1={columnWidth:"53.0",baseFontSize:"14",autoOPSZ:"1",children:[["0",{relativeFontSize:"4.571428571",autoOPSZ:"1",axesLocations:[["wght","700"]],label:"H1"}],["1",{relativeFontSize:"1.785714286",autoOPSZ:"1",axesLocations:[["wght","600"]],label:"H2"}],["2",{relativeFontSize:"1.285714286",autoOPSZ:"1",axesLocations:[["wght","550"]],label:"H3"}],["3",{relativeFontSize:"1.285714286",autoOPSZ:"1",label:"T1",stylePatches:[["italic","italic"],["bold","bold"],["bold italic","bold italic"]]}],["4",{autoOPSZ:"1",label:"T2",stylePatches:[["italic","italic"],["bold","bold"],["bold italic","bold italic"]]}]],label:""},I1=[["italic",{instance:{axesLocations:[["slnt",{logicalValue:"min"}]]},stylePatchTypeKey:"SimpleStylePatch"}],["bold",{instance:{axesLocations:[["wght",{logicalValue:"number",numericValue:"700"}]]},stylePatchTypeKey:"SimpleStylePatch"}],["bold italic",{instance:{styles:["bold","italic"]},stylePatchTypeKey:"CompositeStylePatch"}]],y1=[["heading-1","/children/0"],["heading-2","/children/1"],["heading-3","/children/2"],["paragraph","/children/3"],["paragraph-2","/children/4"]],b1={typeKey:"doc",content:[{typeKey:"heading-1",content:[{typeKey:"text",text:"Heading One"}]},{typeKey:"heading-2",content:[{typeKey:"text",text:"Heading Two"}]},{typeKey:"heading-3",content:[{typeKey:"text",text:"Heading Three"}]},{typeKey:"paragraph",content:[{typeKey:"text",text:"Intro text leads reader into the article by the nose, with grace and dignity and a little pithy charm. "},{typeKey:"text",marks:[{typeKey:"generic-style",attrs:[["data-style-name",{type:"string",string:"bold"}]]}],text:"Typeface"},{typeKey:"text",text:" has changed to the "},{typeKey:"text",marks:[{typeKey:"generic-style",attrs:[["data-style-name",{type:"string",string:"italic"}]]}],text:"appropriate"},{typeKey:"text",text:" optical size by the miracle of modern "},{typeKey:"text",marks:[{typeKey:"generic-style",attrs:[["data-style-name",{type:"string",string:"bold italic"}]]}],text:"typography"},{typeKey:"text",text:"."}]},{typeKey:"paragraph-2",content:[{typeKey:"text",text:"Johannes Gutenberg’s work on the "},{typeKey:"text",marks:[{typeKey:"generic-style",attrs:[["data-style-name",{type:"string",string:"bold"}]]}],text:"printing press"},{typeKey:"text",text:" began in approximately 1436 when he partnered with Andreas Heilmann, owner of a "},{typeKey:"text",marks:[{typeKey:"generic-style",attrs:[["data-style-name",{type:"string",string:"italic"}]]}],text:"paper mill"},{typeKey:"text",text:". Having previously worked as a "},{typeKey:"text",marks:[{typeKey:"generic-style",attrs:[["data-style-name",{type:"string",string:"bold italic"}]]}],text:"goldsmith"},{typeKey:"text",text:", Gutenberg made skillful use of the knowledge of metals he had learned as a craftsman. He was the first to make type from an alloy of lead, tin, and antimony, which was critical for producing durable type that produced high-quality printed books and proved to be much better suited for printing than all other known materials."}]},{typeKey:"paragraph-2",content:[{typeKey:"text",text:"Επειδη δε κοινη το των "},{typeKey:"text",marks:[{typeKey:"generic-style",attrs:[["data-style-name",{type:"string",string:"bold"}]]}],text:"Αρκαδων εθνος"},{typeKey:"text",text:" εχει τινα παρα πασι τοις "},{typeKey:"text",marks:[{typeKey:"generic-style",attrs:[["data-style-name",{type:"string",string:"italic"}]]}],text:"Ελλησιν"},{typeKey:"text",text:" επ αρετη φημην, ου μονον δια ρην εν τοις ηθεσι και βιοις φιλοξενιαν και φιλανθρωπιαν, "},{typeKey:"text",marks:[{typeKey:"generic-style",attrs:[["data-style-name",{type:"string",string:"bold italic"}]]}],text:"μαλιστα δε δια την εις το θειον ευσεβειαν,"},{typeKey:"text",text:" αξιον βραχυ διαπορησαι περι της Κυναιθεων αγριοτητος, πως οντες ομολογουμενως Αρκαδες τοσουτο κατ εκεινους τοθς καιπους διηνεγκαν των αλλων Ελληνων ωμοτητι και παρανομια. δοκαυσι δε μοι, διοτι τα καλως υπο των αρχαιων επινενοημενα και φυσικως συντεθεωρημενα περι παντας τους κατοικουντας την Αρκαδιαν, ταυτα δη πρωτοι και μονοι Αρκαδων εγκατελιπον. μουσικην γαρ, την γ αληθως μουσικην, πασι μεν ανθρωποις οφελος ασκειν Αρκασι δε και αναγκαιον. ου γαρ ηγητεον μουσικην, ως Εφορος φησιν εν τω προοιμιω της ολης προγματειας, ουδαμως αρμοζοντα λογον αυτω πιψας, επ απατη και γοητεια παραισηχθαι τοις ανθρωποις, ουδε τους παλαιοθς Κρητων και Λακεδαιμονιων αυλον και ρυθμον εις τον πολεμον αντι σαλπιγγος εικη νομιστεον εισαγαγειν, ουδε τους πρωτους Αρκαδων εις την ολην πολιτειαν την μοθσικην παραλαβειν επι τοσουτον ωστε μη μονον παισιν ουσιν, αλλα ακι νεανισκοις γενομενοις εως τριακοντ ετων κατ αναγκην ουντροφον ποιειν αυτην, ταλλα τοις βιοις οντας αυστηροτατους."}]},{typeKey:"paragraph-2",content:[{typeKey:"text",text:"В глубоких и темных водах "},{typeKey:"text",marks:[{typeKey:"generic-style",attrs:[["data-style-name",{type:"string",string:"bold"}]]}],text:"Антарктики"},{typeKey:"text",text:" ученые обнаружили "},{typeKey:"text",marks:[{typeKey:"generic-style",attrs:[["data-style-name",{type:"string",string:"italic"}]]}],text:"невероятное"},{typeKey:"text",text:" изобилие до сих пор неизвестных видов морской жизни. "},{typeKey:"text",marks:[{typeKey:"generic-style",attrs:[["data-style-name",{type:"string",string:"bold italic"}]]}],text:"Исследователи"},{typeKey:"text",text:" открыли более 700 новых видов морских существ в морях, которые раньше считались слишком неблагоприятными для существования большого биологического разнообразия. Эти темные воды буквально кишат стаями хищных губок, свободноплавающих червей, ракообразных и моллюсков. Доклад о новых видах фауны был опубликован в журнале Nature. “То, что раньше считалось пустой бездной, на поверку оказалось динамичной, меняющейся и биологически богатой средой”, - сказала одна из соавторов документа, морской биолог Британского общества исследования Антарктики доктор Кэтрин Линс. “Находка этой сокровищницы морской живности - наш первый шаг на пути к пониманию сложного взаимоотношения глубоких океанов и распределения морской жизни”, - добавила она. Науке это пока неизвестно. Исследование антарктических вод было проведено в рамках проекта Andeep, изучающего биологическое разнообразие глубоководного антарктического дна. Один из ранее неизвестных ракообразных (Cylindrarcturus), найденных в Антарктитке Исследователи не ожидали обнаружить такого разнобразия морской жизни Проект призван заполнить “вакуум знаний” о фауне, населяющей самые глубокие воды Южного океана."}]},{typeKey:"paragraph-2",content:[{typeKey:"text",text:'我的征途是星辰大海 "My Conquest is the Sea of Stars", a famous sentence in Legend Of The Galactic Heroes'}]},{typeKey:"paragraph-2",content:[{typeKey:"text",text:'很久很久以前，在一个遥远的星系 "A long time ago in a galaxy far, far away", a famous sentence in Star Wars'}]}]},E1={nodes:[["paragraph-2",{content:"inline*",group:"block",tag:"p"}],["heading-1",{content:"inline*",group:"block",tag:"h1",definingAsContext:"1",definingForContent:"1"}],["heading-2",{content:"inline*",group:"block",tag:"h2",definingAsContext:"1",definingForContent:"1"}],["heading-3",{content:"inline*",group:"block",tag:"h3",definingAsContext:"1",definingForContent:"1"}],["paragraph",{content:"inline*",group:"block",tag:"p"}]],marks:[["strong",{tag:"strong"}]]},Mr={typeSpec:C1,stylePatchesSource:I1,nodeSpecToTypeSpec:y1,document:b1,proseMirrorSchema:E1},B1=["br"],v1={doc:{content:"block+"},text:{group:"inline"},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM(){return B1}},unknown:{attrs:{"unknown-type":{default:"???",validate:"string"}},content:"inline*",group:"block",parseDOM:[{tag:"div[data-unknown-type]>div",getAttrs(i){return{"data-unknown-type":i.getAttribute("data-unknown-type")}}},0],toDOM(i){return["div",{"data-unknown-type":i.attrs["unknown-type"]},["strong",{class:"message"},`UNKNOWN NODE-TYPE: ${i.attrs["unknown-type"]}`],["div",0]]}}},G1={"generic-style":{excludes:"_",attrs:{"data-style-name":{default:"",validate:"string"}},parseDOM:[{tag:"*[data-style-name]",getAttrs(i){return{"data-style-name":i.getAttribute("data-style-name")}}}],toDOM(i){return["span",{"data-style-name":i.attrs["data-style-name"]},0]}}},Os={nodes:v1,marks:G1};function Qt(i){this.content=i}c(Qt,"OrderedMap");Qt.prototype={constructor:Qt,find:c(function(i){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===i)return e;return-1},"find"),get:c(function(i){var e=this.find(i);return e==-1?void 0:this.content[e+1]},"get"),update:c(function(i,e,t){var n=t&&t!=i?this.remove(t):this,s=n.find(i),r=n.content.slice();return s==-1?r.push(t||i,e):(r[s+1]=e,t&&(r[s]=t)),new Qt(r)},"update"),remove:c(function(i){var e=this.find(i);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Qt(t)},"remove"),addToStart:c(function(i,e){return new Qt([i,e].concat(this.remove(i).content))},"addToStart"),addToEnd:c(function(i,e){var t=this.remove(i).content.slice();return t.push(i,e),new Qt(t)},"addToEnd"),addBefore:c(function(i,e,t){var n=this.remove(e),s=n.content.slice(),r=n.find(i);return s.splice(r==-1?s.length:r,0,e,t),new Qt(s)},"addBefore"),forEach:c(function(i){for(var e=0;e<this.content.length;e+=2)i(this.content[e],this.content[e+1])},"forEach"),prepend:c(function(i){return i=Qt.from(i),i.size?new Qt(i.content.concat(this.subtract(i).content)):this},"prepend"),append:c(function(i){return i=Qt.from(i),i.size?new Qt(this.subtract(i).content.concat(i.content)):this},"append"),subtract:c(function(i){var e=this;i=Qt.from(i);for(var t=0;t<i.content.length;t+=2)e=e.remove(i.content[t]);return e},"subtract"),toObject:c(function(){var i={};return this.forEach(function(e,t){i[e]=t}),i},"toObject"),get size(){return this.content.length>>1}};Qt.from=function(i){if(i instanceof Qt)return i;var e=[];if(i)for(var t in i)e.push(t,i[t]);return new Qt(e)};function ab(i,e,t){for(let n=0;;n++){if(n==i.childCount||n==e.childCount)return i.childCount==e.childCount?null:t;let s=i.child(n),r=e.child(n);if(s==r){t+=s.nodeSize;continue}if(!s.sameMarkup(r))return t;if(s.isText&&s.text!=r.text){for(let o=0;s.text[o]==r.text[o];o++)t++;return t}if(s.content.size||r.content.size){let o=ab(s.content,r.content,t+1);if(o!=null)return o}t+=s.nodeSize}}c(ab,"findDiffStart");function lb(i,e,t,n){for(let s=i.childCount,r=e.childCount;;){if(s==0||r==0)return s==r?null:{a:t,b:n};let o=i.child(--s),a=e.child(--r),l=o.nodeSize;if(o==a){t-=l,n-=l;continue}if(!o.sameMarkup(a))return{a:t,b:n};if(o.isText&&o.text!=a.text){let A=0,u=Math.min(o.text.length,a.text.length);for(;A<u&&o.text[o.text.length-A-1]==a.text[a.text.length-A-1];)A++,t--,n--;return{a:t,b:n}}if(o.content.size||a.content.size){let A=lb(o.content,a.content,t-1,n-1);if(A)return A}t-=l,n-=l}}c(lb,"findDiffEnd");class re{static{c(this,"Fragment")}constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,t,n,s=0,r){for(let o=0,a=0;a<t;o++){let l=this.content[o],A=a+l.nodeSize;if(A>e&&n(l,s+a,r||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),n,s+u)}a=A}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,s){let r="",o=!0;return this.nodesBetween(e,t,(a,l)=>{let A=a.isText?a.text.slice(Math.max(e,l)-l,t-l):a.isLeaf?s?typeof s=="function"?s(a):s:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&A||a.isTextblock)&&n&&(o?o=!1:r+=n),r+=A},0),r}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,s=this.content.slice(),r=0;for(t.isText&&t.sameMarkup(n)&&(s[s.length-1]=t.withText(t.text+n.text),r=1);r<e.content.length;r++)s.push(e.content[r]);return new re(s,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let n=[],s=0;if(t>e)for(let r=0,o=0;o<t;r++){let a=this.content[r],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),n.push(a),s+=a.nodeSize),o=l}return new re(n,s)}cutByIndex(e,t){return e==t?re.empty:e==0&&t==this.content.length?this:new re(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let s=this.content.slice(),r=this.size+t.nodeSize-n.nodeSize;return s[e]=t,new re(s,r)}addToStart(e){return new re([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new re(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let s=this.content[t];e(s,n,t),n+=s.nodeSize}}findDiffStart(e,t=0){return ab(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return lb(this,e,t,n)}findIndex(e){if(e==0)return Wa(0,e);if(e==this.size)return Wa(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,n=0;;t++){let s=this.child(t),r=n+s.nodeSize;if(r>=e)return r==e?Wa(t+1,r):Wa(t,n);n=r}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return re.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new re(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return re.empty;let t,n=0;for(let s=0;s<e.length;s++){let r=e[s];n+=r.nodeSize,s&&r.isText&&e[s-1].sameMarkup(r)?(t||(t=e.slice(0,s)),t[t.length-1]=r.withText(t[t.length-1].text+r.text)):t&&t.push(r)}return new re(t||e,n)}static from(e){if(!e)return re.empty;if(e instanceof re)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new re([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}re.empty=new re([],0);const YA={index:0,offset:0};function Wa(i,e){return YA.index=i,YA.offset=e,YA}c(Wa,"retIndex");function vl(i,e){if(i===e)return!0;if(!(i&&typeof i=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(i);if(Array.isArray(e)!=t)return!1;if(t){if(i.length!=e.length)return!1;for(let n=0;n<i.length;n++)if(!vl(i[n],e[n]))return!1}else{for(let n in i)if(!(n in e)||!vl(i[n],e[n]))return!1;for(let n in e)if(!(n in i))return!1}return!0}c(vl,"compareDeep");class xe{static{c(this,"Mark")}constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let s=0;s<e.length;s++){let r=e[s];if(this.eq(r))return e;if(this.type.excludes(r.type))t||(t=e.slice(0,s));else{if(r.type.excludes(this.type))return e;!n&&r.type.rank>this.type.rank&&(t||(t=e.slice(0,s)),t.push(this),n=!0),t&&t.push(r)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&vl(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw new RangeError(`There is no mark type ${t.type} in this schema`);let s=n.create(t.attrs);return n.checkAttrs(s.attrs),s}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return xe.none;if(e instanceof xe)return[e];let t=e.slice();return t.sort((n,s)=>n.type.rank-s.type.rank),t}}xe.none=[];class Gl extends Error{static{c(this,"ReplaceError")}}class fe{static{c(this,"Slice")}constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=Ab(this.content,e+this.openStart,t);return n&&new fe(n,this.openStart,this.openEnd)}removeBetween(e,t){return new fe(cb(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return fe.empty;let n=t.openStart||0,s=t.openEnd||0;if(typeof n!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new fe(re.fromJSON(e,t.content),n,s)}static maxOpen(e,t=!0){let n=0,s=0;for(let r=e.firstChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.firstChild)n++;for(let r=e.lastChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.lastChild)s++;return new fe(e,n,s)}}fe.empty=new fe(re.empty,0,0);function cb(i,e,t){let{index:n,offset:s}=i.findIndex(e),r=i.maybeChild(n),{index:o,offset:a}=i.findIndex(t);if(s==e||r.isText){if(a!=t&&!i.child(o).isText)throw new RangeError("Removing non-flat range");return i.cut(0,e).append(i.cut(t))}if(n!=o)throw new RangeError("Removing non-flat range");return i.replaceChild(n,r.copy(cb(r.content,e-s-1,t-s-1)))}c(cb,"removeRange");function Ab(i,e,t,n){let{index:s,offset:r}=i.findIndex(e),o=i.maybeChild(s);if(r==e||o.isText)return n&&!n.canReplace(s,s,t)?null:i.cut(0,e).append(t).append(i.cut(e));let a=Ab(o.content,e-r-1,t,o);return a&&i.replaceChild(s,o.copy(a))}c(Ab,"insertInto");function R1(i,e,t){if(t.openStart>i.depth)throw new Gl("Inserted content deeper than insertion position");if(i.depth-t.openStart!=e.depth-t.openEnd)throw new Gl("Inconsistent open depths");return ub(i,e,t,0)}c(R1,"replace");function ub(i,e,t,n){let s=i.index(n),r=i.node(n);if(s==e.index(n)&&n<i.depth-t.openStart){let o=ub(i,e,t,n+1);return r.copy(r.content.replaceChild(s,o))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&i.depth==n&&e.depth==n){let o=i.parent,a=o.content;return hs(o,a.cut(0,i.parentOffset).append(t.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=S1(t,i);return hs(r,db(i,o,a,e,n))}else return hs(r,Rl(i,e,n))}c(ub,"replaceOuter");function hb(i,e){if(!e.type.compatibleContent(i.type))throw new Gl("Cannot join "+e.type.name+" onto "+i.type.name)}c(hb,"checkJoin");function Du(i,e,t){let n=i.node(t);return hb(n,e.node(t)),n}c(Du,"joinable$1");function us(i,e){let t=e.length-1;t>=0&&i.isText&&i.sameMarkup(e[t])?e[t]=i.withText(e[t].text+i.text):e.push(i)}c(us,"addNode");function qr(i,e,t,n){let s=(e||i).node(t),r=0,o=e?e.index(t):s.childCount;i&&(r=i.index(t),i.depth>t?r++:i.textOffset&&(us(i.nodeAfter,n),r++));for(let a=r;a<o;a++)us(s.child(a),n);e&&e.depth==t&&e.textOffset&&us(e.nodeBefore,n)}c(qr,"addRange");function hs(i,e){return i.type.checkContent(e),i.copy(e)}c(hs,"close");function db(i,e,t,n,s){let r=i.depth>s&&Du(i,e,s+1),o=n.depth>s&&Du(t,n,s+1),a=[];return qr(null,i,s,a),r&&o&&e.index(s)==t.index(s)?(hb(r,o),us(hs(r,db(i,e,t,n,s+1)),a)):(r&&us(hs(r,Rl(i,e,s+1)),a),qr(e,t,s,a),o&&us(hs(o,Rl(t,n,s+1)),a)),qr(n,null,s,a),new re(a)}c(db,"replaceThreeWay");function Rl(i,e,t){let n=[];if(qr(null,i,t,n),i.depth>t){let s=Du(i,e,t+1);us(hs(s,Rl(i,e,t+1)),n)}return qr(e,null,t,n),new re(n)}c(Rl,"replaceTwoWay");function S1(i,e){let t=e.depth-i.openStart,s=e.node(t).copy(i.content);for(let r=t-1;r>=0;r--)s=e.node(r).copy(re.from(s));return{start:s.resolveNoCache(i.openStart+t),end:s.resolveNoCache(s.content.size-i.openEnd-t)}}c(S1,"prepareSliceForReplace");class yo{static{c(this,"ResolvedPos")}constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],s=e.child(t);return n?e.child(t).cut(n):s}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[t*3],s=t==0?0:this.path[t*3-1]+1;for(let r=0;r<e;r++)s+=n.child(r).nodeSize;return s}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return xe.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),s=e.maybeChild(t);if(!n){let a=n;n=s,s=a}let r=n.marks;for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!s||!r[o].isInSet(s.marks))&&(r=r[o--].removeFromSet(r));return r}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,s=e.parent.maybeChild(e.index());for(var r=0;r<n.length;r++)n[r].type.spec.inclusive===!1&&(!s||!n[r].isInSet(s.marks))&&(n=n[r--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new w1(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let n=[],s=0,r=t;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(r),A=r-l;if(n.push(o,a,s+l),!A||(o=o.child(a),o.isText))break;r=A-1,s+=l+1}return new yo(t,n,r)}static resolveCached(e,t){let n=zp.get(e);if(n)for(let r=0;r<n.elts.length;r++){let o=n.elts[r];if(o.pos==t)return o}else zp.set(e,n=new N1);let s=n.elts[n.i]=yo.resolve(e,t);return n.i=(n.i+1)%Q1,s}}class N1{static{c(this,"ResolveCache")}constructor(){this.elts=[],this.i=0}}const Q1=12,zp=new WeakMap;class w1{static{c(this,"NodeRange")}constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Z1=Object.create(null);class Hn{static{c(this,"Node")}constructor(e,t,n,s=xe.none){this.type=e,this.attrs=t,this.marks=s,this.content=n||re.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n,s=0){this.content.nodesBetween(e,t,n,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,s){return this.content.textBetween(e,t,n,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&vl(this.attrs,t||e.defaultAttrs||Z1)&&xe.sameSet(this.marks,n||xe.none)}copy(e=null){return e==this.content?this:new Hn(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Hn(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,n=!1){if(e==t)return fe.empty;let s=this.resolve(e),r=this.resolve(t),o=n?0:s.sharedDepth(t),a=s.start(o),A=s.node(o).content.cut(s.pos-a,r.pos-a);return new fe(A,s.depth-o,r.depth-o)}replace(e,t,n){return R1(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:s}=t.content.findIndex(e);if(t=t.maybeChild(n),!t)return null;if(s==e||t.isText)return t;e-=s+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let s=this.content.child(t-1);return{node:s,index:t-1,offset:n-s.nodeSize}}resolve(e){return yo.resolveCached(this,e)}resolveNoCache(e){return yo.resolve(this,e)}rangeHasMark(e,t,n){let s=!1;return t>e&&this.nodesBetween(e,t,r=>(n.isInSet(r.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),gb(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,n=re.empty,s=0,r=n.childCount){let o=this.contentMatchAt(e).matchFragment(n,s,r),a=o&&o.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let l=s;l<r;l++)if(!this.type.allowsMarks(n.child(l).marks))return!1;return!0}canReplaceWith(e,t,n,s){if(s&&!this.type.allowsMarks(s))return!1;let r=this.contentMatchAt(e).matchType(n),o=r&&r.matchFragment(this.content,t);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=xe.none;for(let t=0;t<this.marks.length;t++){let n=this.marks[t];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!xe.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let n;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}let s=re.fromJSON(e,t.content),r=e.nodeType(t.type).create(t.attrs,s,n);return r.type.checkAttrs(r.attrs),r}}Hn.prototype.text=void 0;class Sl extends Hn{static{c(this,"TextNode")}constructor(e,t,n,s){if(super(e,t,null,s),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):gb(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Sl(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Sl(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function gb(i,e){for(let t=i.length-1;t>=0;t--)e=i[t].type.name+"("+e+")";return e}c(gb,"wrapMarks");class Bs{static{c(this,"ContentMatch")}constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let n=new k1(e,t);if(n.next==null)return Bs.empty;let s=pb(n);n.next&&n.err("Unexpected trailing text");let r=x1(F1(s));return L1(r,n),r}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,n=e.childCount){let s=this;for(let r=t;s&&r<n;r++)s=s.matchType(e.child(r).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e,t=!1,n=0){let s=[this];function r(o,a){let l=o.matchFragment(e,n);if(l&&(!t||l.validEnd))return re.from(a.map(A=>A.createAndFill()));for(let A=0;A<o.next.length;A++){let{type:u,next:h}=o.next[A];if(!(u.isText||u.hasRequiredAttrs())&&s.indexOf(h)==-1){s.push(h);let d=r(h,a.concat(u));if(d)return d}}return null}return c(r,"search"),r(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let s=n.shift(),r=s.match;if(r.matchType(e)){let o=[];for(let a=s;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<r.next.length;o++){let{type:a,next:l}=r.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in t)&&(!s.type||l.validEnd)&&(n.push({match:a.contentMatch,type:a,via:s}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(n){e.push(n);for(let s=0;s<n.next.length;s++)e.indexOf(n.next[s].next)==-1&&t(n.next[s].next)}return c(t,"scan"),t(this),e.map((n,s)=>{let r=s+(n.validEnd?"*":" ")+" ";for(let o=0;o<n.next.length;o++)r+=(o?", ":"")+n.next[o].type.name+"->"+e.indexOf(n.next[o].next);return r}).join(`
`)}}Bs.empty=new Bs(!0);class k1{static{c(this,"TokenStream")}constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function pb(i){let e=[];do e.push(_1(i));while(i.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}c(pb,"parseExpr");function _1(i){let e=[];do e.push(Y1(i));while(i.next&&i.next!=")"&&i.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}c(_1,"parseExprSeq");function Y1(i){let e=T1(i);for(;;)if(i.eat("+"))e={type:"plus",expr:e};else if(i.eat("*"))e={type:"star",expr:e};else if(i.eat("?"))e={type:"opt",expr:e};else if(i.eat("{"))e=W1(i,e);else break;return e}c(Y1,"parseExprSubscript");function Jp(i){/\D/.test(i.next)&&i.err("Expected number, got '"+i.next+"'");let e=Number(i.next);return i.pos++,e}c(Jp,"parseNum");function W1(i,e){let t=Jp(i),n=t;return i.eat(",")&&(i.next!="}"?n=Jp(i):n=-1),i.eat("}")||i.err("Unclosed braced range"),{type:"range",min:t,max:n,expr:e}}c(W1,"parseExprRange");function D1(i,e){let t=i.nodeTypes,n=t[e];if(n)return[n];let s=[];for(let r in t){let o=t[r];o.isInGroup(e)&&s.push(o)}return s.length==0&&i.err("No node type or group '"+e+"' found"),s}c(D1,"resolveName");function T1(i){if(i.eat("(")){let e=pb(i);return i.eat(")")||i.err("Missing closing paren"),e}else if(/\W/.test(i.next))i.err("Unexpected token '"+i.next+"'");else{let e=D1(i,i.next).map(t=>(i.inline==null?i.inline=t.isInline:i.inline!=t.isInline&&i.err("Mixing inline and block content"),{type:"name",value:t}));return i.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}c(T1,"parseExprAtom");function F1(i){let e=[[]];return s(r(i,0),t()),e;function t(){return e.push([])-1}c(t,"node");function n(o,a,l){let A={term:l,to:a};return e[o].push(A),A}c(n,"edge");function s(o,a){o.forEach(l=>l.to=a)}c(s,"connect");function r(o,a){if(o.type=="choice")return o.exprs.reduce((l,A)=>l.concat(r(A,a)),[]);if(o.type=="seq")for(let l=0;;l++){let A=r(o.exprs[l],a);if(l==o.exprs.length-1)return A;s(A,a=t())}else if(o.type=="star"){let l=t();return n(a,l),s(r(o.expr,l),l),[n(l)]}else if(o.type=="plus"){let l=t();return s(r(o.expr,a),l),s(r(o.expr,l),l),[n(l)]}else{if(o.type=="opt")return[n(a)].concat(r(o.expr,a));if(o.type=="range"){let l=a;for(let A=0;A<o.min;A++){let u=t();s(r(o.expr,l),u),l=u}if(o.max==-1)s(r(o.expr,l),l);else for(let A=o.min;A<o.max;A++){let u=t();n(l,u),s(r(o.expr,l),u),l=u}return[n(l)]}else{if(o.type=="name")return[n(a,void 0,o.value)];throw new Error("Unknown expr type")}}}c(r,"compile")}c(F1,"nfa");function fb(i,e){return e-i}c(fb,"cmp");function Up(i,e){let t=[];return n(e),t.sort(fb);function n(s){let r=i[s];if(r.length==1&&!r[0].term)return n(r[0].to);t.push(s);for(let o=0;o<r.length;o++){let{term:a,to:l}=r[o];!a&&t.indexOf(l)==-1&&n(l)}}c(n,"scan")}c(Up,"nullFrom");function x1(i){let e=Object.create(null);return t(Up(i,0));function t(n){let s=[];n.forEach(o=>{i[o].forEach(({term:a,to:l})=>{if(!a)return;let A;for(let u=0;u<s.length;u++)s[u][0]==a&&(A=s[u][1]);Up(i,l).forEach(u=>{A||s.push([a,A=[]]),A.indexOf(u)==-1&&A.push(u)})})});let r=e[n.join(",")]=new Bs(n.indexOf(i.length-1)>-1);for(let o=0;o<s.length;o++){let a=s[o][1].sort(fb);r.next.push({type:s[o][0],next:e[a.join(",")]||t(a)})}return r}}c(x1,"dfa");function L1(i,e){for(let t=0,n=[i];t<n.length;t++){let s=n[t],r=!s.validEnd,o=[];for(let a=0;a<s.next.length;a++){let{type:l,next:A}=s.next[a];o.push(l.name),r&&!(l.isText||l.hasRequiredAttrs())&&(r=!1),n.indexOf(A)==-1&&n.push(A)}r&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}c(L1,"checkForDeadEnds");function mb(i){let e=Object.create(null);for(let t in i){let n=i[t];if(!n.hasDefault)return null;e[t]=n.default}return e}c(mb,"defaultAttrs");function Cb(i,e){let t=Object.create(null);for(let n in i){let s=e&&e[n];if(s===void 0){let r=i[n];if(r.hasDefault)s=r.default;else throw new RangeError("No value supplied for attribute "+n)}t[n]=s}return t}c(Cb,"computeAttrs");function Ib(i,e,t,n){for(let s in e)if(!(s in i))throw new RangeError(`Unsupported attribute ${s} for ${t} of type ${s}`);for(let s in i){let r=i[s];r.validate&&r.validate(e[s])}}c(Ib,"checkAttrs");function yb(i,e){let t=Object.create(null);if(e)for(let n in e)t[n]=new V1(i,n,e[n]);return t}c(yb,"initAttrs");let Kp=class bb{static{c(this,"NodeType")}constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=yb(e,n.attrs),this.defaultAttrs=mb(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Bs.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Cb(this.attrs,e)}create(e=null,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Hn(this,this.computeAttrs(e),re.from(t),xe.setFrom(n))}createChecked(e=null,t,n){return t=re.from(t),this.checkContent(t),new Hn(this,this.computeAttrs(e),t,xe.setFrom(n))}createAndFill(e=null,t,n){if(e=this.computeAttrs(e),t=re.from(t),t.size){let o=this.contentMatch.fillBefore(t);if(!o)return null;t=o.append(t)}let s=this.contentMatch.matchFragment(t),r=s&&s.fillBefore(re.empty,!0);return r?new Hn(this,e,t.append(r),xe.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Ib(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:xe.none:e}static compile(e,t){let n=Object.create(null);e.forEach((r,o)=>n[r]=new bb(r,t,o));let s=t.spec.topNode||"doc";if(!n[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let r in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function M1(i,e,t){let n=t.split("|");return s=>{let r=s===null?"null":typeof s;if(n.indexOf(r)<0)throw new RangeError(`Expected value of type ${n} for attribute ${e} on type ${i}, got ${r}`)}}c(M1,"validateType");class V1{static{c(this,"Attribute")}constructor(e,t,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?M1(e,t,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class Nc{static{c(this,"MarkType")}constructor(e,t,n,s){this.name=e,this.rank=t,this.schema=n,this.spec=s,this.attrs=yb(e,s.attrs),this.excluded=null;let r=mb(this.attrs);this.instance=r?new xe(this,r):null}create(e=null){return!e&&this.instance?this.instance:new xe(this,Cb(this.attrs,e))}static compile(e,t){let n=Object.create(null),s=0;return e.forEach((r,o)=>n[r]=new Nc(r,s++,t,o)),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){Ib(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class jp{static{c(this,"Schema")}constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let s in e)t[s]=e[s];t.nodes=Qt.from(e.nodes),t.marks=Qt.from(e.marks||{}),this.nodes=Kp.compile(this.spec.nodes,this),this.marks=Nc.compile(this.spec.marks,this);let n=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let r=this.nodes[s],o=r.spec.content||"",a=r.spec.marks;if(r.contentMatch=n[o]||(n[o]=Bs.parse(o,this.nodes)),r.inlineContent=r.contentMatch.inlineContent,r.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!r.isInline||!r.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=r}r.markSet=a=="_"?null:a?qp(this,a.split(" ")):a==""||!r.inlineContent?[]:null}for(let s in this.marks){let r=this.marks[s],o=r.spec.excludes;r.excluded=o==null?[r]:o==""?[]:qp(this,o.split(" "))}this.nodeFromJSON=s=>Hn.fromJSON(this,s),this.markFromJSON=s=>xe.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,n,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Kp){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,n,s)}text(e,t){let n=this.nodes.text;return new Sl(n,n.defaultAttrs,e,xe.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function qp(i,e){let t=[];for(let n=0;n<e.length;n++){let s=e[n],r=i.marks[s],o=r;if(r)t.push(r);else for(let a in i.marks){let l=i.marks[a];(s=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(s)>-1)&&t.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return t}c(qp,"gatherMarks");function O1(i){return i.tag!=null}c(O1,"isTagRule");function P1(i){return i.style!=null}c(P1,"isStyleRule");let Eb=class Tu{static{c(this,"DOMParser")}constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let n=this.matchedStyles=[];t.forEach(s=>{if(O1(s))this.tags.push(s);else if(P1(s)){let r=/[^=]*/.exec(s.style)[0];n.indexOf(r)<0&&n.push(r),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let r=e.nodes[s.node];return r.contentMatch.matchType(r)})}parse(e,t={}){let n=new ef(this,t,!1);return n.addAll(e,xe.none,t.from,t.to),n.finish()}parseSlice(e,t={}){let n=new ef(this,t,!0);return n.addAll(e,xe.none,t.from,t.to),fe.maxOpen(n.finish())}matchTag(e,t,n){for(let s=n?this.tags.indexOf(n)+1:0;s<this.tags.length;s++){let r=this.tags[s];if(z1(e,r.tag)&&(r.namespace===void 0||e.namespaceURI==r.namespace)&&(!r.context||t.matchesContext(r.context))){if(r.getAttrs){let o=r.getAttrs(e);if(o===!1)continue;r.attrs=o||void 0}return r}}}matchStyle(e,t,n,s){for(let r=s?this.styles.indexOf(s)+1:0;r<this.styles.length;r++){let o=this.styles[r],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!n.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function n(s){let r=s.priority==null?50:s.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<r)break}t.splice(o,0,s)}c(n,"insert");for(let s in e.marks){let r=e.marks[s].spec.parseDOM;r&&r.forEach(o=>{n(o=tf(o)),o.mark||o.ignore||o.clearMark||(o.mark=s)})}for(let s in e.nodes){let r=e.nodes[s].spec.parseDOM;r&&r.forEach(o=>{n(o=tf(o)),o.node||o.ignore||o.mark||(o.node=s)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Tu(e,Tu.schemaRules(e)))}};const Bb={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},H1={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},vb={ol:!0,ul:!0},bo=1,Fu=2,$r=4;function $p(i,e,t){return e!=null?(e?bo:0)|(e==="full"?Fu:0):i&&i.whitespace=="pre"?bo|Fu:t&~$r}c($p,"wsOptionsFor");class Da{static{c(this,"NodeContext")}constructor(e,t,n,s,r,o){this.type=e,this.attrs=t,this.marks=n,this.solid=s,this.options=o,this.content=[],this.activeMarks=xe.none,this.match=r||(o&$r?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(re.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let n=this.type.contentMatch,s;return(s=n.findWrapping(e.type))?(this.match=n,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&bo)){let n=this.content[this.content.length-1],s;if(n&&n.isText&&(s=/[ \t\r\n\u000c]+$/.exec(n.text))){let r=n;n.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=r.withText(r.text.slice(0,r.text.length-s[0].length))}}let t=re.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(re.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Bb.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class ef{static{c(this,"ParseContext")}constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let s=t.topNode,r,o=$p(null,t.preserveWhitespace,0)|(n?$r:0);s?r=new Da(s.type,s.attrs,xe.none,!0,t.topMatch||s.type.contentMatch,o):n?r=new Da(null,null,xe.none,!0,null,o):r=new Da(e.schema.topNodeType,null,xe.none,!0,null,o),this.nodes=[r],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let n=e.nodeValue,s=this.top,r=s.options&Fu?"full":this.localPreserveWS||(s.options&bo)>0;if(r==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(r)r!=="full"?n=n.replace(/\r?\n|\r/g," "):n=n.replace(/\r\n?/g,`
`);else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let o=s.content[s.content.length-1],a=e.previousSibling;(!o||a&&a.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),t,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,t,n){let s=this.localPreserveWS,r=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;vb.hasOwnProperty(o)&&this.parser.normalizeLists&&X1(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,n));e:if(l?l.ignore:H1.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,t);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let A,u=this.needsBlock;if(Bb.hasOwnProperty(o))r.content.length&&r.content[0].isInline&&this.open&&(this.open--,r=this.top),A=!0,r.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let h=l&&l.skip?t:this.readStyles(e,t);h&&this.addAll(e,h),A&&this.sync(r),this.needsBlock=u}else{let A=this.readStyles(e,t);A&&this.addElementByRule(e,l,A,l.consuming===!1?a:void 0)}this.localPreserveWS=s}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let n=e.style;if(n&&n.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let r=this.parser.matchedStyles[s],o=n.getPropertyValue(r);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(r,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?t=t.filter(A=>!l.clearMark(A)):t=t.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return t}addElementByRule(e,t,n,s){let r,o;if(t.node)if(o=this.parser.schema.nodes[t.node],o.isLeaf)this.insertNode(o.create(t.attrs),n,e.nodeName=="BR")||this.leafFallback(e,n);else{let l=this.enter(o,t.attrs||null,n,t.preserveWhitespace);l&&(r=!0,n=l)}else{let l=this.parser.schema.marks[t.mark];n=n.concat(l.create(t.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(s)this.addElement(e,n,s);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,n,!1));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l,n),this.findAround(e,l,!1)}r&&this.sync(a)&&this.open--}addAll(e,t,n,s){let r=n||0;for(let o=n?e.childNodes[n]:e.firstChild,a=s==null?null:e.childNodes[s];o!=a;o=o.nextSibling,++r)this.findAtPoint(e,r),this.addDOM(o,t);this.findAtPoint(e,r)}findPlace(e,t,n){let s,r;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],A=l.findWrapping(e);if(A&&(!s||s.length>A.length+a)&&(s=A,r=l,!A.length))break;if(l.solid){if(n)break;a+=2}}if(!s)return null;this.sync(r);for(let o=0;o<s.length;o++)t=this.enterInner(s[o],null,t,!1);return t}insertNode(e,t,n){if(e.isInline&&this.needsBlock&&!this.top.type){let r=this.textblockFromContext();r&&(t=this.enterInner(r,null,t))}let s=this.findPlace(e,t,n);if(s){this.closeExtra();let r=this.top;r.match&&(r.match=r.match.matchType(e.type));let o=xe.none;for(let a of s.concat(e.marks))(r.type?r.type.allowsMarkType(a.type):nf(a.type,e.type))&&(o=a.addToSet(o));return r.content.push(e.mark(o)),!0}return!1}enter(e,t,n,s){let r=this.findPlace(e.create(t),n,!1);return r&&(r=this.enterInner(e,t,n,!0,s)),r}enterInner(e,t,n,s=!1,r){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=$p(e,r,o.options);o.options&$r&&o.content.length==0&&(a|=$r);let l=xe.none;return n=n.filter(A=>(o.type?o.type.allowsMarkType(A.type):nf(A.type,e))?(l=A.addToSet(l),!1):!0),this.nodes.push(new Da(e,t,l,s,null,a)),this.open++,n}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=bo)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let s=n.length-1;s>=0;s--)e+=n[s].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&t.compareDocumentPosition(this.find[s].node)&(n?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,s=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),r=-(n?n.depth+1:0)+(s?0:1),o=c((a,l)=>{for(;a>=0;a--){let A=t[a];if(A==""){if(a==t.length-1||a==0)continue;for(;l>=r;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&s?this.nodes[l].type:n&&l>=r?n.node(l-r).type:null;if(!u||u.name!=A&&!u.isInGroup(A))return!1;l--}}return!0},"match");return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let t in this.parser.schema.nodes){let n=this.parser.schema.nodes[t];if(n.isTextblock&&n.defaultAttrs)return n}}}function X1(i){for(let e=i.firstChild,t=null;e;e=e.nextSibling){let n=e.nodeType==1?e.nodeName.toLowerCase():null;n&&vb.hasOwnProperty(n)&&t?(t.appendChild(e),e=t):n=="li"?t=e:n&&(t=null)}}c(X1,"normalizeList");function z1(i,e){return(i.matches||i.msMatchesSelector||i.webkitMatchesSelector||i.mozMatchesSelector).call(i,e)}c(z1,"matches");function tf(i){let e={};for(let t in i)e[t]=i[t];return e}c(tf,"copy");function nf(i,e){let t=e.schema.nodes;for(let n in t){let s=t[n];if(!s.allowsMarkType(i))continue;let r=[],o=c(a=>{r.push(a);for(let l=0;l<a.edgeCount;l++){let{type:A,next:u}=a.edge(l);if(A==e||r.indexOf(u)<0&&o(u))return!0}},"scan");if(o(s.contentMatch))return!0}}c(nf,"markMayApply");class Nr{static{c(this,"DOMSerializer")}constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},n){n||(n=WA(t).createDocumentFragment());let s=n,r=[];return e.forEach(o=>{if(r.length||o.marks.length){let a=0,l=0;for(;a<r.length&&l<o.marks.length;){let A=o.marks[l];if(!this.marks[A.type.name]){l++;continue}if(!A.eq(r[a][0])||A.type.spec.spanning===!1)break;a++,l++}for(;a<r.length;)s=r.pop()[1];for(;l<o.marks.length;){let A=o.marks[l++],u=this.serializeMark(A,o.isInline,t);u&&(r.push([A,s]),s.appendChild(u.dom),s=u.contentDOM||u.dom)}}s.appendChild(this.serializeNodeInner(o,t))}),n}serializeNodeInner(e,t){let{dom:n,contentDOM:s}=Ha(WA(t),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,s)}return n}serializeNode(e,t={}){let n=this.serializeNodeInner(e,t);for(let s=e.marks.length-1;s>=0;s--){let r=this.serializeMark(e.marks[s],e.isInline,t);r&&((r.contentDOM||r.dom).appendChild(n),n=r.dom)}return n}serializeMark(e,t,n={}){let s=this.marks[e.type.name];return s&&Ha(WA(n),s(e,t),null,e.attrs)}static renderSpec(e,t,n=null,s){return Ha(e,t,n,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Nr(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=sf(e.nodes);return t.text||(t.text=n=>n.text),t}static marksFromSchema(e){return sf(e.marks)}}function sf(i){let e={};for(let t in i){let n=i[t].spec.toDOM;n&&(e[t]=n)}return e}c(sf,"gatherToDOM");function WA(i){return i.document||window.document}c(WA,"doc$1");const rf=new WeakMap;function J1(i){let e=rf.get(i);return e===void 0&&rf.set(i,e=U1(i)),e}c(J1,"suspiciousAttributes");function U1(i){let e=null;function t(n){if(n&&typeof n=="object")if(Array.isArray(n))if(typeof n[0]=="string")e||(e=[]),e.push(n);else for(let s=0;s<n.length;s++)t(n[s]);else for(let s in n)t(n[s])}return c(t,"scan"),t(i),e}c(U1,"suspiciousAttributesInner");function Ha(i,e,t,n){if(typeof e=="string")return{dom:i.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],r;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(r=J1(n))&&r.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=s.indexOf(" ");o>0&&(t=s.slice(0,o),s=s.slice(o+1));let a,l=t?i.createElementNS(t,s):i.createElement(s),A=e[1],u=1;if(A&&typeof A=="object"&&A.nodeType==null&&!Array.isArray(A)){u=2;for(let h in A)if(A[h]!=null){let d=h.indexOf(" ");d>0?l.setAttributeNS(h.slice(0,d),h.slice(d+1),A[h]):h=="style"&&l.style?l.style.cssText=A[h]:l.setAttribute(h,A[h])}}for(let h=u;h<e.length;h++){let d=e[h];if(d===0){if(h<e.length-1||h>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:g,contentDOM:p}=Ha(i,d,t,n);if(l.appendChild(g),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}c(Ha,"renderSpec");const Gb=65535,Rb=Math.pow(2,16);function K1(i,e){return i+e*Rb}c(K1,"makeRecover");function of(i){return i&Gb}c(of,"recoverIndex");function j1(i){return(i-(i&Gb))/Rb}c(j1,"recoverOffset");const Sb=1,Nb=2,Xa=4,Qb=8;class xu{static{c(this,"MapResult")}constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(this.delInfo&Qb)>0}get deletedBefore(){return(this.delInfo&(Sb|Xa))>0}get deletedAfter(){return(this.delInfo&(Nb|Xa))>0}get deletedAcross(){return(this.delInfo&Xa)>0}}class on{static{c(this,"StepMap")}constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&on.empty)return on.empty}recover(e){let t=0,n=of(e);if(!this.inverted)for(let s=0;s<n;s++)t+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[n*3]+t+j1(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let s=0,r=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?s:0);if(l>e)break;let A=this.ranges[a+r],u=this.ranges[a+o],h=l+A;if(e<=h){let d=A?e==l?-1:e==h?1:t:t,g=l+s+(d<0?0:u);if(n)return g;let p=e==(t<0?l:h)?null:K1(a/3,e-l),f=e==l?Nb:e==h?Sb:Xa;return(t<0?e!=l:e!=h)&&(f|=Qb),new xu(g,f,p)}s+=u-A}return n?e+s:new xu(e+s,0,null)}touches(e,t){let n=0,s=of(t),r=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?n:0);if(l>e)break;let A=this.ranges[a+r],u=l+A;if(e<=u&&a==s*3)return!0;n+=this.ranges[a+o]-A}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let s=0,r=0;s<this.ranges.length;s+=3){let o=this.ranges[s],a=o-(this.inverted?r:0),l=o+(this.inverted?0:r),A=this.ranges[s+t],u=this.ranges[s+n];e(a,a+A,l,l+u),r+=u-A}}invert(){return new on(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?on.empty:new on(e<0?[0,-e,0]:[0,0,e])}}on.empty=new on([]);class Eo{static{c(this,"Mapping")}constructor(e,t,n=0,s=e?e.length:0){this.mirror=t,this.from=n,this.to=s,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Eo(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,n=this._maps.length;t<e._maps.length;t++){let s=e.getMirror(t);this.appendMap(e._maps[t],s!=null&&s<t?n+s:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this._maps.length+e._maps.length;t>=0;t--){let s=e.getMirror(t);this.appendMap(e._maps[t].invert(),s!=null&&s>t?n-s-1:void 0)}}invert(){let e=new Eo;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,n){let s=0;for(let r=this.from;r<this.to;r++){let o=this._maps[r],a=o.mapResult(e,t);if(a.recover!=null){let l=this.getMirror(r);if(l!=null&&l>r&&l<this.to){r=l,e=this._maps[l].recover(a.recover);continue}}s|=a.delInfo,e=a.pos}return n?e:new xu(e,s,null)}}const DA=Object.create(null);class Ht{static{c(this,"Step")}getMap(){return on.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=DA[t.stepType];if(!n)throw new RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in DA)throw new RangeError("Duplicate use of step JSON ID "+e);return DA[e]=t,t.prototype.jsonID=e,t}}class dt{static{c(this,"StepResult")}constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new dt(e,null)}static fail(e){return new dt(null,e)}static fromReplace(e,t,n,s){try{return dt.ok(e.replace(t,n,s))}catch(r){if(r instanceof Gl)return dt.fail(r.message);throw r}}}function Id(i,e,t){let n=[];for(let s=0;s<i.childCount;s++){let r=i.child(s);r.content.size&&(r=r.copy(Id(r.content,e,r))),r.isInline&&(r=e(r,t,s)),n.push(r)}return re.fromArray(n)}c(Id,"mapFragment");class vi extends Ht{static{c(this,"AddMarkStep")}constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),s=n.node(n.sharedDepth(this.to)),r=new fe(Id(t.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),s),t.openStart,t.openEnd);return dt.fromReplace(e,this.from,this.to,r)}invert(){return new Vn(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new vi(t.pos,n.pos,this.mark)}merge(e){return e instanceof vi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new vi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new vi(t.from,t.to,e.markFromJSON(t.mark))}}Ht.jsonID("addMark",vi);class Vn extends Ht{static{c(this,"RemoveMarkStep")}constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new fe(Id(t.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),t.openStart,t.openEnd);return dt.fromReplace(e,this.from,this.to,n)}invert(){return new vi(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new Vn(t.pos,n.pos,this.mark)}merge(e){return e instanceof Vn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Vn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Vn(t.from,t.to,e.markFromJSON(t.mark))}}Ht.jsonID("removeMark",Vn);class Gi extends Ht{static{c(this,"AddNodeMarkStep")}constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return dt.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return dt.fromReplace(e,this.pos,this.pos+1,new fe(re.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let n=this.mark.addToSet(t.marks);if(n.length==t.marks.length){for(let s=0;s<t.marks.length;s++)if(!t.marks[s].isInSet(n))return new Gi(this.pos,t.marks[s]);return new Gi(this.pos,this.mark)}}return new vs(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Gi(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Gi(t.pos,e.markFromJSON(t.mark))}}Ht.jsonID("addNodeMark",Gi);class vs extends Ht{static{c(this,"RemoveNodeMarkStep")}constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return dt.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return dt.fromReplace(e,this.pos,this.pos+1,new fe(re.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Gi(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new vs(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new vs(t.pos,e.markFromJSON(t.mark))}}Ht.jsonID("removeNodeMark",vs);class Ft extends Ht{static{c(this,"ReplaceStep")}constructor(e,t,n,s=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=s}apply(e){return this.structure&&Lu(e,this.from,this.to)?dt.fail("Structure replace would overwrite content"):dt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new on([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ft(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new Ft(t.pos,Math.max(t.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Ft)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?fe.empty:new fe(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ft(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?fe.empty:new fe(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ft(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ft(t.from,t.to,fe.fromJSON(e,t.slice),!!t.structure)}}Ht.jsonID("replace",Ft);class cn extends Ht{static{c(this,"ReplaceAroundStep")}constructor(e,t,n,s,r,o,a=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=s,this.slice=r,this.insert=o,this.structure=a}apply(e){if(this.structure&&(Lu(e,this.from,this.gapFrom)||Lu(e,this.gapTo,this.to)))return dt.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return dt.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?dt.fromReplace(e,this.from,this.to,n):dt.fail("Content does not fit in gap")}getMap(){return new on([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new cn(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),s=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),r=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||s<t.pos||r>n.pos?null:new cn(t.pos,n.pos,s,r,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new cn(t.from,t.to,t.gapFrom,t.gapTo,fe.fromJSON(e,t.slice),t.insert,!!t.structure)}}Ht.jsonID("replaceAround",cn);function Lu(i,e,t){let n=i.resolve(e),s=t-e,r=n.depth;for(;s>0&&r>0&&n.indexAfter(r)==n.node(r).childCount;)r--,s--;if(s>0){let o=n.node(r).maybeChild(n.indexAfter(r));for(;s>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,s--}}return!1}c(Lu,"contentBetween");function q1(i,e,t,n){let s=[],r=[],o,a;i.doc.nodesBetween(e,t,(l,A,u)=>{if(!l.isInline)return;let h=l.marks;if(!n.isInSet(h)&&u.type.allowsMarkType(n.type)){let d=Math.max(A,e),g=Math.min(A+l.nodeSize,t),p=n.addToSet(h);for(let f=0;f<h.length;f++)h[f].isInSet(p)||(o&&o.to==d&&o.mark.eq(h[f])?o.to=g:s.push(o=new Vn(d,g,h[f])));a&&a.to==d?a.to=g:r.push(a=new vi(d,g,n))}}),s.forEach(l=>i.step(l)),r.forEach(l=>i.step(l))}c(q1,"addMark");function $1(i,e,t,n){let s=[],r=0;i.doc.nodesBetween(e,t,(o,a)=>{if(!o.isInline)return;r++;let l=null;if(n instanceof Nc){let A=o.marks,u;for(;u=n.isInSet(A);)(l||(l=[])).push(u),A=u.removeFromSet(A)}else n?n.isInSet(o.marks)&&(l=[n]):l=o.marks;if(l&&l.length){let A=Math.min(a+o.nodeSize,t);for(let u=0;u<l.length;u++){let h=l[u],d;for(let g=0;g<s.length;g++){let p=s[g];p.step==r-1&&h.eq(s[g].style)&&(d=p)}d?(d.to=A,d.step=r):s.push({style:h,from:Math.max(a,e),to:A,step:r})}}}),s.forEach(o=>i.step(new Vn(o.from,o.to,o.style)))}c($1,"removeMark");function yd(i,e,t,n=t.contentMatch,s=!0){let r=i.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<r.childCount;l++){let A=r.child(l),u=a+A.nodeSize,h=n.matchType(A.type);if(!h)o.push(new Ft(a,u,fe.empty));else{n=h;for(let d=0;d<A.marks.length;d++)t.allowsMarkType(A.marks[d].type)||i.step(new Vn(a,u,A.marks[d]));if(s&&A.isText&&t.whitespace!="pre"){let d,g=/\r?\n|\r/g,p;for(;d=g.exec(A.text);)p||(p=new fe(re.from(t.schema.text(" ",t.allowedMarks(A.marks))),0,0)),o.push(new Ft(a+d.index,a+d.index+d[0].length,p))}}a=u}if(!n.validEnd){let l=n.fillBefore(re.empty,!0);i.replace(a,a,new fe(l,0,0))}for(let l=o.length-1;l>=0;l--)i.step(o[l])}c(yd,"clearIncompatible");function eD(i,e,t){return(e==0||i.canReplace(e,i.childCount))&&(t==i.childCount||i.canReplace(0,t))}c(eD,"canCut");function bd(i){let t=i.parent.content.cutByIndex(i.startIndex,i.endIndex);for(let n=i.depth;;--n){let s=i.$from.node(n),r=i.$from.index(n),o=i.$to.indexAfter(n);if(n<i.depth&&s.canReplace(r,o,t))return n;if(n==0||s.type.spec.isolating||!eD(s,r,o))break}return null}c(bd,"liftTarget");function tD(i,e,t){let{$from:n,$to:s,depth:r}=e,o=n.before(r+1),a=s.after(r+1),l=o,A=a,u=re.empty,h=0;for(let p=r,f=!1;p>t;p--)f||n.index(p)>0?(f=!0,u=re.from(n.node(p).copy(u)),h++):l--;let d=re.empty,g=0;for(let p=r,f=!1;p>t;p--)f||s.after(p+1)<s.end(p)?(f=!0,d=re.from(s.node(p).copy(d)),g++):A++;i.step(new cn(l,A,o,a,new fe(u.append(d),h,g),u.size-h,!0))}c(tD,"lift");function nD(i,e,t){let n=re.empty;for(let o=t.length-1;o>=0;o--){if(n.size){let a=t[o].type.contentMatch.matchFragment(n);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=re.from(t[o].type.create(t[o].attrs,n))}let s=e.start,r=e.end;i.step(new cn(s,r,s,r,new fe(n,0,0),t.length,!0))}c(nD,"wrap");function iD(i,e,t,n,s){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let r=i.steps.length;i.doc.nodesBetween(e,t,(o,a)=>{let l=typeof s=="function"?s(o):s;if(o.isTextblock&&!o.hasMarkup(n,l)&&sD(i.doc,i.mapping.slice(r).map(a),n)){let A=null;if(n.schema.linebreakReplacement){let g=n.whitespace=="pre",p=!!n.contentMatch.matchType(n.schema.linebreakReplacement);g&&!p?A=!1:!g&&p&&(A=!0)}A===!1&&Zb(i,o,a,r),yd(i,i.mapping.slice(r).map(a,1),n,void 0,A===null);let u=i.mapping.slice(r),h=u.map(a,1),d=u.map(a+o.nodeSize,1);return i.step(new cn(h,d,h+1,d-1,new fe(re.from(n.create(l,null,o.marks)),0,0),1,!0)),A===!0&&wb(i,o,a,r),!1}})}c(iD,"setBlockType$1");function wb(i,e,t,n){e.forEach((s,r)=>{if(s.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(s.text);){let l=i.mapping.slice(n).map(t+1+r+o.index);i.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}c(wb,"replaceNewlines");function Zb(i,e,t,n){e.forEach((s,r)=>{if(s.type==s.type.schema.linebreakReplacement){let o=i.mapping.slice(n).map(t+1+r);i.replaceWith(o,o+1,e.type.schema.text(`
`))}})}c(Zb,"replaceLinebreaks");function sD(i,e,t){let n=i.resolve(e),s=n.index();return n.parent.canReplaceWith(s,s+1,t)}c(sD,"canChangeType");function rD(i,e,t,n,s){let r=i.doc.nodeAt(e);if(!r)throw new RangeError("No node at given position");t||(t=r.type);let o=t.create(n,null,s||r.marks);if(r.isLeaf)return i.replaceWith(e,e+r.nodeSize,o);if(!t.validContent(r.content))throw new RangeError("Invalid content for node type "+t.name);i.step(new cn(e,e+r.nodeSize,e+1,e+r.nodeSize-1,new fe(re.from(o),0,0),1,!0))}c(rD,"setNodeMarkup");function za(i,e,t=1,n){let s=i.resolve(e),r=s.depth-t,o=n&&n[n.length-1]||s.parent;if(r<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!o.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let A=s.depth-1,u=t-2;A>r;A--,u--){let h=s.node(A),d=s.index(A);if(h.type.spec.isolating)return!1;let g=h.content.cutByIndex(d,h.childCount),p=n&&n[u+1];p&&(g=g.replaceChild(0,p.type.create(p.attrs)));let f=n&&n[u]||h;if(!h.canReplace(d+1,h.childCount)||!f.type.validContent(g))return!1}let a=s.indexAfter(r),l=n&&n[0];return s.node(r).canReplaceWith(a,a,l?l.type:s.node(r+1).type)}c(za,"canSplit");function oD(i,e,t=1,n){let s=i.doc.resolve(e),r=re.empty,o=re.empty;for(let a=s.depth,l=s.depth-t,A=t-1;a>l;a--,A--){r=re.from(s.node(a).copy(r));let u=n&&n[A];o=re.from(u?u.type.create(u.attrs,o):s.node(a).copy(o))}i.step(new Ft(e,e,new fe(r.append(o),t,t),!0))}c(oD,"split");function kb(i,e){let t=i.resolve(e),n=t.index();return lD(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(n,n+1)}c(kb,"canJoin");function aD(i,e){e.content.size||i.type.compatibleContent(e.type);let t=i.contentMatchAt(i.childCount),{linebreakReplacement:n}=i.type.schema;for(let s=0;s<e.childCount;s++){let r=e.child(s),o=r.type==n?i.type.schema.nodes.text:r.type;if(t=t.matchType(o),!t||!i.type.allowsMarks(r.marks))return!1}return t.validEnd}c(aD,"canAppendWithSubstitutedLinebreaks");function lD(i,e){return!!(i&&e&&!i.isLeaf&&aD(i,e))}c(lD,"joinable");function cD(i,e,t){let n=null,{linebreakReplacement:s}=i.doc.type.schema,r=i.doc.resolve(e-t),o=r.node().type;if(s&&o.inlineContent){let u=o.whitespace=="pre",h=!!o.contentMatch.matchType(s);u&&!h?n=!1:!u&&h&&(n=!0)}let a=i.steps.length;if(n===!1){let u=i.doc.resolve(e+t);Zb(i,u.node(),u.before(),a)}o.inlineContent&&yd(i,e+t-1,o,r.node().contentMatchAt(r.index()),n==null);let l=i.mapping.slice(a),A=l.map(e-t);if(i.step(new Ft(A,l.map(e+t,-1),fe.empty,!0)),n===!0){let u=i.doc.resolve(A);wb(i,u.node(),u.before(),i.steps.length)}return i}c(cD,"join");function AD(i,e,t){let n=i.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),t))return e;if(n.parentOffset==0)for(let s=n.depth-1;s>=0;s--){let r=n.index(s);if(n.node(s).canReplaceWith(r,r,t))return n.before(s+1);if(r>0)return null}if(n.parentOffset==n.parent.content.size)for(let s=n.depth-1;s>=0;s--){let r=n.indexAfter(s);if(n.node(s).canReplaceWith(r,r,t))return n.after(s+1);if(r<n.node(s).childCount)return null}return null}c(AD,"insertPoint");function uD(i,e,t){let n=i.resolve(e);if(!t.content.size)return e;let s=t.content;for(let r=0;r<t.openStart;r++)s=s.firstChild.content;for(let r=1;r<=(t.openStart==0&&t.size?2:1);r++)for(let o=n.depth;o>=0;o--){let a=o==n.depth?0:n.pos<=(n.start(o+1)+n.end(o+1))/2?-1:1,l=n.index(o)+(a>0?1:0),A=n.node(o),u=!1;if(r==1)u=A.canReplace(l,l,s);else{let h=A.contentMatchAt(l).findWrapping(s.firstChild.type);u=h&&A.canReplaceWith(l,l,h[0])}if(u)return a==0?n.pos:a<0?n.before(o+1):n.after(o+1)}return null}c(uD,"dropPoint");function Ed(i,e,t=e,n=fe.empty){if(e==t&&!n.size)return null;let s=i.resolve(e),r=i.resolve(t);return _b(s,r,n)?new Ft(e,t,n):new hD(s,r,n).fit()}c(Ed,"replaceStep");function _b(i,e,t){return!t.openStart&&!t.openEnd&&i.start()==e.start()&&i.parent.canReplace(i.index(),e.index(),t.content)}c(_b,"fitsTrivially");class hD{static{c(this,"Fitter")}constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=re.empty;for(let s=0;s<=e.depth;s++){let r=e.node(s);this.frontier.push({type:r.type,match:r.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=re.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let A=this.findFittable();A?this.placeNodes(A):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,s=this.close(e<0?this.$to:n.doc.resolve(e));if(!s)return null;let r=this.placed,o=n.depth,a=s.depth;for(;o&&a&&r.childCount==1;)r=r.firstChild.content,o--,a--;let l=new fe(r,o,a);return e>-1?new cn(n.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||n.pos!=this.$to.pos?new Ft(n.pos,s.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,s=this.unplaced.openEnd;n<e;n++){let r=t.firstChild;if(t.childCount>1&&(s=0),r.type.spec.isolating&&s<=n){e=n;break}t=r.content}for(let t=1;t<=2;t++)for(let n=t==1?e:this.unplaced.openStart;n>=0;n--){let s,r=null;n?(r=TA(this.unplaced.content,n-1).firstChild,s=r.content):s=this.unplaced.content;let o=s.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:A}=this.frontier[a],u,h=null;if(t==1&&(o?A.matchType(o.type)||(h=A.fillBefore(re.from(o),!1)):r&&l.compatibleContent(r.type)))return{sliceDepth:n,frontierDepth:a,parent:r,inject:h};if(t==2&&o&&(u=A.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:a,parent:r,wrap:u};if(r&&A.matchType(r.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,s=TA(e,t);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new fe(e,t+1,Math.max(n,s.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,s=TA(e,t);if(s.childCount<=1&&t>0){let r=e.size-t<=t+s.size;this.unplaced=new fe(Hr(e,t-1,1),t-1,r?t-1:n)}else this.unplaced=new fe(Hr(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:s,wrap:r}){for(;this.depth>t;)this.closeFrontierNode();if(r)for(let f=0;f<r.length;f++)this.openFrontierNode(r[f]);let o=this.unplaced,a=n?n.content:o.content,l=o.openStart-e,A=0,u=[],{match:h,type:d}=this.frontier[t];if(s){for(let f=0;f<s.childCount;f++)u.push(s.child(f));h=h.matchFragment(s)}let g=a.size+e-(o.content.size-o.openEnd);for(;A<a.childCount;){let f=a.child(A),m=h.matchType(f.type);if(!m)break;A++,(A>1||l==0||f.content.size)&&(h=m,u.push(Yb(f.mark(d.allowedMarks(f.marks)),A==1?l:0,A==a.childCount?g:-1)))}let p=A==a.childCount;p||(g=-1),this.placed=Xr(this.placed,t,re.from(u)),this.frontier[t].match=h,p&&g<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let f=0,m=a;f<g;f++){let y=m.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),m=y.content}this.unplaced=p?e==0?fe.empty:new fe(Hr(o.content,e-1,1),e-1,g<0?o.openEnd:e-1):new fe(Hr(o.content,e,A),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!FA(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:n}=this.$to,s=this.$to.after(n);for(;n>1&&s==this.$to.end(--n);)++s;return s}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:s}=this.frontier[t],r=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=FA(e,t,s,n,r);if(o){for(let a=t-1;a>=0;a--){let{match:l,type:A}=this.frontier[a],u=FA(e,a,A,l,!0);if(!u||u.childCount)continue e}return{depth:t,fit:o,move:r?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Xr(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let s=e.node(n),r=s.type.contentMatch.fillBefore(s.content,!0,e.index(n));this.openFrontierNode(s.type,s.attrs,r)}return e}openFrontierNode(e,t=null,n){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=Xr(this.placed,this.depth,re.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(re.empty,!0);t.childCount&&(this.placed=Xr(this.placed,this.frontier.length,t))}}function Hr(i,e,t){return e==0?i.cutByIndex(t,i.childCount):i.replaceChild(0,i.firstChild.copy(Hr(i.firstChild.content,e-1,t)))}c(Hr,"dropFromFragment");function Xr(i,e,t){return e==0?i.append(t):i.replaceChild(i.childCount-1,i.lastChild.copy(Xr(i.lastChild.content,e-1,t)))}c(Xr,"addToFragment");function TA(i,e){for(let t=0;t<e;t++)i=i.firstChild.content;return i}c(TA,"contentAt");function Yb(i,e,t){if(e<=0)return i;let n=i.content;return e>1&&(n=n.replaceChild(0,Yb(n.firstChild,e-1,n.childCount==1?t-1:0))),e>0&&(n=i.type.contentMatch.fillBefore(n).append(n),t<=0&&(n=n.append(i.type.contentMatch.matchFragment(n).fillBefore(re.empty,!0)))),i.copy(n)}c(Yb,"closeNodeStart");function FA(i,e,t,n,s){let r=i.node(e),o=s?i.indexAfter(e):i.index(e);if(o==r.childCount&&!t.compatibleContent(r.type))return null;let a=n.fillBefore(r.content,!0,o);return a&&!dD(t,r.content,o)?a:null}c(FA,"contentAfterFits");function dD(i,e,t){for(let n=t;n<e.childCount;n++)if(!i.allowsMarks(e.child(n).marks))return!0;return!1}c(dD,"invalidMarks");function gD(i){return i.spec.defining||i.spec.definingForContent}c(gD,"definesContent");function pD(i,e,t,n){if(!n.size)return i.deleteRange(e,t);let s=i.doc.resolve(e),r=i.doc.resolve(t);if(_b(s,r,n))return i.step(new Ft(e,t,n));let o=Db(s,i.doc.resolve(t));o[o.length-1]==0&&o.pop();let a=-(s.depth+1);o.unshift(a);for(let d=s.depth,g=s.pos-1;d>0;d--,g--){let p=s.node(d).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(d)>-1?a=d:s.before(d)==g&&o.splice(1,0,-d)}let l=o.indexOf(a),A=[],u=n.openStart;for(let d=n.content,g=0;;g++){let p=d.firstChild;if(A.push(p),g==n.openStart)break;d=p.content}for(let d=u-1;d>=0;d--){let g=A[d],p=gD(g.type);if(p&&!g.sameMarkup(s.node(Math.abs(a)-1)))u=d;else if(p||!g.type.isTextblock)break}for(let d=n.openStart;d>=0;d--){let g=(d+u+1)%(n.openStart+1),p=A[g];if(p)for(let f=0;f<o.length;f++){let m=o[(f+l)%o.length],y=!0;m<0&&(y=!1,m=-m);let v=s.node(m-1),G=s.index(m-1);if(v.canReplaceWith(G,G,p.type,p.marks))return i.replace(s.before(m),y?r.after(m):t,new fe(Wb(n.content,0,n.openStart,g),g,n.openEnd))}}let h=i.steps.length;for(let d=o.length-1;d>=0&&(i.replace(e,t,n),!(i.steps.length>h));d--){let g=o[d];g<0||(e=s.before(g),t=r.after(g))}}c(pD,"replaceRange");function Wb(i,e,t,n,s){if(e<t){let r=i.firstChild;i=i.replaceChild(0,r.copy(Wb(r.content,e+1,t,n,r)))}if(e>n){let r=s.contentMatchAt(0),o=r.fillBefore(i).append(i);i=o.append(r.matchFragment(o).fillBefore(re.empty,!0))}return i}c(Wb,"closeFragment");function fD(i,e,t,n){if(!n.isInline&&e==t&&i.doc.resolve(e).parent.content.size){let s=AD(i.doc,e,n.type);s!=null&&(e=t=s)}i.replaceRange(e,t,new fe(re.from(n),0,0))}c(fD,"replaceRangeWith");function mD(i,e,t){let n=i.doc.resolve(e),s=i.doc.resolve(t),r=Db(n,s);for(let o=0;o<r.length;o++){let a=r[o],l=o==r.length-1;if(l&&a==0||n.node(a).type.contentMatch.validEnd)return i.delete(n.start(a),s.end(a));if(a>0&&(l||n.node(a-1).canReplace(n.index(a-1),s.indexAfter(a-1))))return i.delete(n.before(a),s.after(a))}for(let o=1;o<=n.depth&&o<=s.depth;o++)if(e-n.start(o)==n.depth-o&&t>n.end(o)&&s.end(o)-t!=s.depth-o&&n.start(o-1)==s.start(o-1)&&n.node(o-1).canReplace(n.index(o-1),s.index(o-1)))return i.delete(n.before(o),t);i.delete(e,t)}c(mD,"deleteRange");function Db(i,e){let t=[],n=Math.min(i.depth,e.depth);for(let s=n;s>=0;s--){let r=i.start(s);if(r<i.pos-(i.depth-s)||e.end(s)>e.pos+(e.depth-s)||i.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(r==e.start(s)||s==i.depth&&s==e.depth&&i.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==r-1)&&t.push(s)}return t}c(Db,"coveredDepths");class ir extends Ht{static{c(this,"AttrStep")}constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return dt.fail("No node at attribute step's position");let n=Object.create(null);for(let r in t.attrs)n[r]=t.attrs[r];n[this.attr]=this.value;let s=t.type.create(n,null,t.marks);return dt.fromReplace(e,this.pos,this.pos+1,new fe(re.from(s),0,t.isLeaf?0:1))}getMap(){return on.empty}invert(e){return new ir(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ir(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new ir(t.pos,t.attr,t.value)}}Ht.jsonID("attr",ir);class Bo extends Ht{static{c(this,"DocAttrStep")}constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let s in e.attrs)t[s]=e.attrs[s];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return dt.ok(n)}getMap(){return on.empty}invert(e){return new Bo(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Bo(t.attr,t.value)}}Ht.jsonID("docAttr",Bo);let mr=class extends Error{static{c(this,"TransformError")}};mr=c(function i(e){let t=Error.call(this,e);return t.__proto__=i.prototype,t},"TransformError");mr.prototype=Object.create(Error.prototype);mr.prototype.constructor=mr;mr.prototype.name="TransformError";class CD{static{c(this,"Transform")}constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Eo}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new mr(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,n=fe.empty){let s=Ed(this.doc,e,t,n);return s&&this.step(s),this}replaceWith(e,t,n){return this.replace(e,t,new fe(re.from(n),0,0))}delete(e,t){return this.replace(e,t,fe.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return pD(this,e,t,n),this}replaceRangeWith(e,t,n){return fD(this,e,t,n),this}deleteRange(e,t){return mD(this,e,t),this}lift(e,t){return tD(this,e,t),this}join(e,t=1){return cD(this,e,t),this}wrap(e,t){return nD(this,e,t),this}setBlockType(e,t=e,n,s=null){return iD(this,e,t,n,s),this}setNodeMarkup(e,t,n=null,s){return rD(this,e,t,n,s),this}setNodeAttribute(e,t,n){return this.step(new ir(e,t,n)),this}setDocAttribute(e,t){return this.step(new Bo(e,t)),this}addNodeMark(e,t){return this.step(new Gi(e,t)),this}removeNodeMark(e,t){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(t instanceof xe)t.isInSet(n.marks)&&this.step(new vs(e,t));else{let s=n.marks,r,o=[];for(;r=t.isInSet(s);)o.push(new vs(e,r)),s=r.removeFromSet(s);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,t=1,n){return oD(this,e,t,n),this}addMark(e,t,n){return q1(this,e,t,n),this}removeMark(e,t,n){return $1(this,e,t,n),this}clearIncompatible(e,t,n){return yd(this,e,t,n),this}}const xA=Object.create(null);class Fe{static{c(this,"Selection")}constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new Mu(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=fe.empty){let n=t.content.lastChild,s=null;for(let a=0;a<t.openEnd;a++)s=n,n=n.lastChild;let r=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:A}=o[a],u=e.mapping.slice(r);e.replaceRange(u.map(l.pos),u.map(A.pos),a?fe.empty:t),a==0&&cf(e,r,(n?n.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,s=this.ranges;for(let r=0;r<s.length;r++){let{$from:o,$to:a}=s[r],l=e.mapping.slice(n),A=l.map(o.pos),u=l.map(a.pos);r?e.deleteRange(A,u):(e.replaceRangeWith(A,u,t),cf(e,n,t.isInline?-1:1))}}static findFrom(e,t,n=!1){let s=e.parent.inlineContent?new Xe(e):Xs(e.node(0),e.parent,e.pos,e.index(),t,n);if(s)return s;for(let r=e.depth-1;r>=0;r--){let o=t<0?Xs(e.node(0),e.node(r),e.before(r+1),e.index(r),t,n):Xs(e.node(0),e.node(r),e.after(r+1),e.index(r)+1,t,n);if(o)return o}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new An(e.node(0))}static atStart(e){return Xs(e,e,0,0,1)||new An(e)}static atEnd(e){return Xs(e,e,e.content.size,e.childCount,-1)||new An(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=xA[t.type];if(!n)throw new RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in xA)throw new RangeError("Duplicate use of selection JSON ID "+e);return xA[e]=t,t.prototype.jsonID=e,t}getBookmark(){return Xe.between(this.$anchor,this.$head).getBookmark()}}Fe.prototype.visible=!0;class Mu{static{c(this,"SelectionRange")}constructor(e,t){this.$from=e,this.$to=t}}let af=!1;function lf(i){!af&&!i.parent.inlineContent&&(af=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+i.parent.type.name+")"))}c(lf,"checkTextSelection");class Xe extends Fe{static{c(this,"TextSelection")}constructor(e,t=e){lf(e),lf(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return Fe.near(n);let s=e.resolve(t.map(this.anchor));return new Xe(s.parent.inlineContent?s:n,n)}replace(e,t=fe.empty){if(super.replace(e,t),t==fe.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof Xe&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Qc(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Xe(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){let s=e.resolve(t);return new this(s,n==t?s:e.resolve(n))}static between(e,t,n){let s=e.pos-t.pos;if((!n||s)&&(n=s>=0?1:-1),!t.parent.inlineContent){let r=Fe.findFrom(t,n,!0)||Fe.findFrom(t,-n,!0);if(r)t=r.$head;else return Fe.near(t,n)}return e.parent.inlineContent||(s==0?e=t:(e=(Fe.findFrom(e,-n,!0)||Fe.findFrom(e,n,!0)).$anchor,e.pos<t.pos!=s<0&&(e=t))),new Xe(e,t)}}Fe.jsonID("text",Xe);class Qc{static{c(this,"TextBookmark")}constructor(e,t){this.anchor=e,this.head=t}map(e){return new Qc(e.map(this.anchor),e.map(this.head))}resolve(e){return Xe.between(e.resolve(this.anchor),e.resolve(this.head))}}class Se extends Fe{static{c(this,"NodeSelection")}constructor(e){let t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);super(e,n),this.node=t}map(e,t){let{deleted:n,pos:s}=t.mapResult(this.anchor),r=e.resolve(s);return n?Fe.near(r):new Se(r)}content(){return new fe(re.from(this.node),0,0)}eq(e){return e instanceof Se&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Bd(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Se(e.resolve(t.anchor))}static create(e,t){return new Se(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Se.prototype.visible=!1;Fe.jsonID("node",Se);class Bd{static{c(this,"NodeBookmark")}constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new Qc(n,n):new Bd(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&Se.isSelectable(n)?new Se(t):Fe.near(t)}}class An extends Fe{static{c(this,"AllSelection")}constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=fe.empty){if(t==fe.empty){e.delete(0,e.doc.content.size);let n=Fe.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new An(e)}map(e){return new An(e)}eq(e){return e instanceof An}getBookmark(){return ID}}Fe.jsonID("all",An);const ID={map(){return this},resolve(i){return new An(i)}};function Xs(i,e,t,n,s,r=!1){if(e.inlineContent)return Xe.create(i,t);for(let o=n-(s>0?0:1);s>0?o<e.childCount:o>=0;o+=s){let a=e.child(o);if(a.isAtom){if(!r&&Se.isSelectable(a))return Se.create(i,t-(s<0?a.nodeSize:0))}else{let l=Xs(i,a,t+s,s<0?a.childCount:0,s,r);if(l)return l}t+=a.nodeSize*s}return null}c(Xs,"findSelectionIn");function cf(i,e,t){let n=i.steps.length-1;if(n<e)return;let s=i.steps[n];if(!(s instanceof Ft||s instanceof cn))return;let r=i.mapping.maps[n],o;r.forEach((a,l,A,u)=>{o==null&&(o=u)}),i.setSelection(Fe.near(i.doc.resolve(o),t))}c(cf,"selectionToInsertionEnd");const Af=1,Ta=2,uf=4;class yD extends CD{static{c(this,"Transaction")}constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Af)&~Ta,this.storedMarks=null,this}get selectionSet(){return(this.updated&Af)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Ta,this}ensureMarks(e){return xe.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Ta)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~Ta,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||xe.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let s=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(n==null&&(n=t),n=n??t,!e)return this.deleteRange(t,n);let r=this.storedMarks;if(!r){let o=this.doc.resolve(t);r=n==t?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,s.text(e,r)),this.selection.empty||this.setSelection(Fe.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=uf,this}get scrolledIntoView(){return(this.updated&uf)>0}}function hf(i,e){return!e||!i?i:i.bind(e)}c(hf,"bind");class zr{static{c(this,"FieldDesc")}constructor(e,t,n){this.name=e,this.init=hf(t.init,n),this.apply=hf(t.apply,n)}}const bD=[new zr("doc",{init(i){return i.doc||i.schema.topNodeType.createAndFill()},apply(i){return i.doc}}),new zr("selection",{init(i,e){return i.selection||Fe.atStart(e.doc)},apply(i){return i.selection}}),new zr("storedMarks",{init(i){return i.storedMarks||null},apply(i,e,t,n){return n.selection.$cursor?i.storedMarks:null}}),new zr("scrollToSelection",{init(){return 0},apply(i,e){return i.scrolledIntoView?e+1:e}})];class LA{static{c(this,"Configuration")}constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=bD.slice(),t&&t.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new zr(n.key,n.spec.state,n))})}}class rs{static{c(this,"EditorState")}constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let s=this.config.plugins[n];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),s=null;for(;;){let r=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=s?s[o].n:0,A=s?s[o].state:this,u=l<t.length&&a.spec.appendTransaction.call(a,l?t.slice(l):t,A,n);if(u&&n.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!s){s=[];for(let h=0;h<this.config.plugins.length;h++)s.push(h<o?{state:n,n:t.length}:{state:this,n:0})}t.push(u),n=n.applyInner(u),r=!0}s&&(s[o]={state:n,n:t.length})}}if(!r)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new rs(this.config),n=this.config.fields;for(let s=0;s<n.length;s++){let r=n[s];t[r.name]=r.apply(e,this[r.name],this,t)}return t}get tr(){return new yD(this)}static create(e){let t=new LA(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new rs(t);for(let s=0;s<t.fields.length;s++)n[t.fields[s].name]=t.fields[s].init(e,n);return n}reconfigure(e){let t=new LA(this.schema,e.plugins),n=t.fields,s=new rs(t);for(let r=0;r<n.length;r++){let o=n[r].name;s[o]=this.hasOwnProperty(o)?this[o]:n[r].init(e,s)}return s}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(n=>n.toJSON())),e&&typeof e=="object")for(let n in e){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[n],r=s.spec.state;r&&r.toJSON&&(t[n]=r.toJSON.call(s,this[s.key]))}return t}static fromJSON(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new LA(e.schema,e.plugins),r=new rs(s);return s.fields.forEach(o=>{if(o.name=="doc")r.doc=Hn.fromJSON(e.schema,t.doc);else if(o.name=="selection")r.selection=Fe.fromJSON(r.doc,t.selection);else if(o.name=="storedMarks")t.storedMarks&&(r.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let a in n){let l=n[a],A=l.spec.state;if(l.key==o.name&&A&&A.fromJSON&&Object.prototype.hasOwnProperty.call(t,a)){r[o.name]=A.fromJSON.call(l,e,t[a],r);return}}r[o.name]=o.init(e,r)}}),r}}function Tb(i,e,t){for(let n in i){let s=i[n];s instanceof Function?s=s.bind(e):n=="handleDOMEvents"&&(s=Tb(s,e,{})),t[n]=s}return t}c(Tb,"bindProps");class vd{static{c(this,"Plugin")}constructor(e){this.spec=e,this.props={},e.props&&Tb(e.props,this,this.props),this.key=e.key?e.key.key:Fb("plugin")}getState(e){return e[this.key]}}const MA=Object.create(null);function Fb(i){return i in MA?i+"$"+ ++MA[i]:(MA[i]=0,i+"$")}c(Fb,"createKey");class xb{static{c(this,"PluginKey")}constructor(e="key"){this.key=Fb(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const wt=c(function(i){for(var e=0;;e++)if(i=i.previousSibling,!i)return e},"domIndex"),Cr=c(function(i){let e=i.assignedSlot||i.parentNode;return e&&e.nodeType==11?e.host:e},"parentNode");let Vu=null;const ni=c(function(i,e,t){let n=Vu||(Vu=document.createRange());return n.setEnd(i,t??i.nodeValue.length),n.setStart(i,e||0),n},"textRange"),ED=c(function(){Vu=null},"clearReusedRange"),Gs=c(function(i,e,t,n){return t&&(df(i,e,t,n,-1)||df(i,e,t,n,1))},"isEquivalentPosition"),BD=/^(img|br|input|textarea|hr)$/i;function df(i,e,t,n,s){for(var r;;){if(i==t&&e==n)return!0;if(e==(s<0?0:mn(i))){let o=i.parentNode;if(!o||o.nodeType!=1||ga(i)||BD.test(i.nodeName)||i.contentEditable=="false")return!1;e=wt(i)+(s<0?0:1),i=o}else if(i.nodeType==1){let o=i.childNodes[e+(s<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((r=o.pmViewDesc)===null||r===void 0)&&r.ignoreForSelection)e+=s;else return!1;else i=o,e=s<0?mn(i):0}else return!1}}c(df,"scanFor");function mn(i){return i.nodeType==3?i.nodeValue.length:i.childNodes.length}c(mn,"nodeSize");function vD(i,e){for(;;){if(i.nodeType==3&&e)return i;if(i.nodeType==1&&e>0){if(i.contentEditable=="false")return null;i=i.childNodes[e-1],e=mn(i)}else if(i.parentNode&&!ga(i))e=wt(i),i=i.parentNode;else return null}}c(vD,"textNodeBefore$1");function GD(i,e){for(;;){if(i.nodeType==3&&e<i.nodeValue.length)return i;if(i.nodeType==1&&e<i.childNodes.length){if(i.contentEditable=="false")return null;i=i.childNodes[e],e=0}else if(i.parentNode&&!ga(i))e=wt(i)+1,i=i.parentNode;else return null}}c(GD,"textNodeAfter$1");function RD(i,e,t){for(let n=e==0,s=e==mn(i);n||s;){if(i==t)return!0;let r=wt(i);if(i=i.parentNode,!i)return!1;n=n&&r==0,s=s&&r==mn(i)}}c(RD,"isOnEdge");function ga(i){let e;for(let t=i;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==i||e.contentDOM==i)}c(ga,"hasBlockDesc");const wc=c(function(i){return i.focusNode&&Gs(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)},"selectionCollapsed");function ss(i,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=i,t.key=t.code=e,t}c(ss,"keyEvent");function SD(i){let e=i.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}c(SD,"deepActiveElement");function ND(i,e,t){if(i.caretPositionFromPoint)try{let n=i.caretPositionFromPoint(e,t);if(n)return{node:n.offsetNode,offset:Math.min(mn(n.offsetNode),n.offset)}}catch{}if(i.caretRangeFromPoint){let n=i.caretRangeFromPoint(e,t);if(n)return{node:n.startContainer,offset:Math.min(mn(n.startContainer),n.startOffset)}}}c(ND,"caretFromPoint");const Jn=typeof navigator<"u"?navigator:null,gf=typeof document<"u"?document:null,Ki=Jn&&Jn.userAgent||"",Ou=/Edge\/(\d+)/.exec(Ki),Lb=/MSIE \d/.exec(Ki),Pu=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ki),en=!!(Lb||Pu||Ou),wi=Lb?document.documentMode:Pu?+Pu[1]:Ou?+Ou[1]:0,Cn=!en&&/gecko\/(\d+)/i.test(Ki);Cn&&+(/Firefox\/(\d+)/.exec(Ki)||[0,0])[1];const Hu=!en&&/Chrome\/(\d+)/.exec(Ki),Lt=!!Hu,Mb=Hu?+Hu[1]:0,Ut=!en&&!!Jn&&/Apple Computer/.test(Jn.vendor),Ir=Ut&&(/Mobile\/\w+/.test(Ki)||!!Jn&&Jn.maxTouchPoints>2),pn=Ir||(Jn?/Mac/.test(Jn.platform):!1),QD=Jn?/Win/.test(Jn.platform):!1,oi=/Android \d/.test(Ki),pa=!!gf&&"webkitFontSmoothing"in gf.documentElement.style,wD=pa?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function ZD(i){let e=i.defaultView&&i.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:i.documentElement.clientWidth,top:0,bottom:i.documentElement.clientHeight}}c(ZD,"windowRect");function ti(i,e){return typeof i=="number"?i:i[e]}c(ti,"getSide");function kD(i){let e=i.getBoundingClientRect(),t=e.width/i.offsetWidth||1,n=e.height/i.offsetHeight||1;return{left:e.left,right:e.left+i.clientWidth*t,top:e.top,bottom:e.top+i.clientHeight*n}}c(kD,"clientRect");function pf(i,e,t){let n=i.someProp("scrollThreshold")||0,s=i.someProp("scrollMargin")||5,r=i.dom.ownerDocument;for(let o=t||i.dom;o;){if(o.nodeType!=1){o=Cr(o);continue}let a=o,l=a==r.body,A=l?ZD(r):kD(a),u=0,h=0;if(e.top<A.top+ti(n,"top")?h=-(A.top-e.top+ti(s,"top")):e.bottom>A.bottom-ti(n,"bottom")&&(h=e.bottom-e.top>A.bottom-A.top?e.top+ti(s,"top")-A.top:e.bottom-A.bottom+ti(s,"bottom")),e.left<A.left+ti(n,"left")?u=-(A.left-e.left+ti(s,"left")):e.right>A.right-ti(n,"right")&&(u=e.right-A.right+ti(s,"right")),u||h)if(l)r.defaultView.scrollBy(u,h);else{let g=a.scrollLeft,p=a.scrollTop;h&&(a.scrollTop+=h),u&&(a.scrollLeft+=u);let f=a.scrollLeft-g,m=a.scrollTop-p;e={left:e.left-f,top:e.top-m,right:e.right-f,bottom:e.bottom-m}}let d=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(d))break;o=d=="absolute"?o.offsetParent:Cr(o)}}c(pf,"scrollRectIntoView");function _D(i){let e=i.dom.getBoundingClientRect(),t=Math.max(0,e.top),n,s;for(let r=(e.left+e.right)/2,o=t+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=i.root.elementFromPoint(r,o);if(!a||a==i.dom||!i.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=t-20){n=a,s=l.top;break}}return{refDOM:n,refTop:s,stack:Vb(i.dom)}}c(_D,"storeScrollPos");function Vb(i){let e=[],t=i.ownerDocument;for(let n=i;n&&(e.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),i!=t);n=Cr(n));return e}c(Vb,"scrollStack");function YD({refDOM:i,refTop:e,stack:t}){let n=i?i.getBoundingClientRect().top:0;Ob(t,n==0?0:n-e)}c(YD,"resetScrollPos");function Ob(i,e){for(let t=0;t<i.length;t++){let{dom:n,top:s,left:r}=i[t];n.scrollTop!=s+e&&(n.scrollTop=s+e),n.scrollLeft!=r&&(n.scrollLeft=r)}}c(Ob,"restoreScrollStack");let Ps=null;function WD(i){if(i.setActive)return i.setActive();if(Ps)return i.focus(Ps);let e=Vb(i);i.focus(Ps==null?{get preventScroll(){return Ps={preventScroll:!0},!0}}:void 0),Ps||(Ps=!1,Ob(e,0))}c(WD,"focusPreventScroll");function Pb(i,e){let t,n=2e8,s,r=0,o=e.top,a=e.top,l,A;for(let u=i.firstChild,h=0;u;u=u.nextSibling,h++){let d;if(u.nodeType==1)d=u.getClientRects();else if(u.nodeType==3)d=ni(u).getClientRects();else continue;for(let g=0;g<d.length;g++){let p=d[g];if(p.top<=o&&p.bottom>=a){o=Math.max(p.bottom,o),a=Math.min(p.top,a);let f=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(f<n){t=u,n=f,s=f&&t.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&f&&(r=h+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=u,A={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!t&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(r=h+1)}}return!t&&l&&(t=l,s=A,n=0),t&&t.nodeType==3?DD(t,s):!t||n&&t.nodeType==1?{node:i,offset:r}:Pb(t,s)}c(Pb,"findOffsetInNode");function DD(i,e){let t=i.nodeValue.length,n=document.createRange();for(let s=0;s<t;s++){n.setEnd(i,s+1),n.setStart(i,s);let r=fi(n,1);if(r.top!=r.bottom&&Gd(e,r))return{node:i,offset:s+(e.left>=(r.left+r.right)/2?1:0)}}return{node:i,offset:0}}c(DD,"findOffsetInText");function Gd(i,e){return i.left>=e.left-1&&i.left<=e.right+1&&i.top>=e.top-1&&i.top<=e.bottom+1}c(Gd,"inRect");function TD(i,e){let t=i.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<i.getBoundingClientRect().left?t:i}c(TD,"targetKludge");function FD(i,e,t){let{node:n,offset:s}=Pb(e,t),r=-1;if(n.nodeType==1&&!n.firstChild){let o=n.getBoundingClientRect();r=o.left!=o.right&&t.left>(o.left+o.right)/2?1:-1}return i.docView.posFromDOM(n,s,r)}c(FD,"posFromElement");function xD(i,e,t,n){let s=-1;for(let r=e,o=!1;r!=i.dom;){let a=i.docView.nearestDesc(r,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>n.left||l.top>n.top?s=a.posBefore:(!o&&l.right<n.left||l.bottom<n.top)&&(s=a.posAfter),o=!0),!a.contentDOM&&s<0&&!a.node.isText))return(a.node.isBlock?n.top<(l.top+l.bottom)/2:n.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;r=a.dom.parentNode}return s>-1?s:i.docView.posFromDOM(e,t,-1)}c(xD,"posFromCaret");function Hb(i,e,t){let n=i.childNodes.length;if(n&&t.top<t.bottom)for(let s=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-t.top)/(t.bottom-t.top))-2)),r=s;;){let o=i.childNodes[r];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let A=a[l];if(Gd(e,A))return Hb(o,e,A)}}if((r=(r+1)%n)==s)break}return i}c(Hb,"elementFromPoint");function LD(i,e){let t=i.dom.ownerDocument,n,s=0,r=ND(t,e.left,e.top);r&&({node:n,offset:s}=r);let o=(i.root.elementFromPoint?i.root:t).elementFromPoint(e.left,e.top),a;if(!o||!i.dom.contains(o.nodeType!=1?o.parentNode:o)){let A=i.dom.getBoundingClientRect();if(!Gd(e,A)||(o=Hb(i.dom,e,A),!o))return null}if(Ut)for(let A=o;n&&A;A=Cr(A))A.draggable&&(n=void 0);if(o=TD(o,e),n){if(Cn&&n.nodeType==1&&(s=Math.min(s,n.childNodes.length),s<n.childNodes.length)){let u=n.childNodes[s],h;u.nodeName=="IMG"&&(h=u.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&s++}let A;pa&&s&&n.nodeType==1&&(A=n.childNodes[s-1]).nodeType==1&&A.contentEditable=="false"&&A.getBoundingClientRect().top>=e.top&&s--,n==i.dom&&s==n.childNodes.length-1&&n.lastChild.nodeType==1&&e.top>n.lastChild.getBoundingClientRect().bottom?a=i.state.doc.content.size:(s==0||n.nodeType!=1||n.childNodes[s-1].nodeName!="BR")&&(a=xD(i,n,s,e))}a==null&&(a=FD(i,o,e));let l=i.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}c(LD,"posAtCoords");function ff(i){return i.top<i.bottom||i.left<i.right}c(ff,"nonZero");function fi(i,e){let t=i.getClientRects();if(t.length){let n=t[e<0?0:t.length-1];if(ff(n))return n}return Array.prototype.find.call(t,ff)||i.getBoundingClientRect()}c(fi,"singleRect");const MD=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Xb(i,e,t){let{node:n,offset:s,atom:r}=i.docView.domFromPos(e,t<0?-1:1),o=pa||Cn;if(n.nodeType==3)if(o&&(MD.test(n.nodeValue)||(t<0?!s:s==n.nodeValue.length))){let l=fi(ni(n,s,s),t);if(Cn&&s&&/\s/.test(n.nodeValue[s-1])&&s<n.nodeValue.length){let A=fi(ni(n,s-1,s-1),-1);if(A.top==l.top){let u=fi(ni(n,s,s+1),-1);if(u.top!=l.top)return Vr(u,u.left<A.left)}}return l}else{let l=s,A=s,u=t<0?1:-1;return t<0&&!s?(A++,u=-1):t>=0&&s==n.nodeValue.length?(l--,u=1):t<0?l--:A++,Vr(fi(ni(n,l,A),u),u<0)}if(!i.state.doc.resolve(e-(r||0)).parent.inlineContent){if(r==null&&s&&(t<0||s==mn(n))){let l=n.childNodes[s-1];if(l.nodeType==1)return VA(l.getBoundingClientRect(),!1)}if(r==null&&s<mn(n)){let l=n.childNodes[s];if(l.nodeType==1)return VA(l.getBoundingClientRect(),!0)}return VA(n.getBoundingClientRect(),t>=0)}if(r==null&&s&&(t<0||s==mn(n))){let l=n.childNodes[s-1],A=l.nodeType==3?ni(l,mn(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(A)return Vr(fi(A,1),!1)}if(r==null&&s<mn(n)){let l=n.childNodes[s];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let A=l?l.nodeType==3?ni(l,0,o?0:1):l.nodeType==1?l:null:null;if(A)return Vr(fi(A,-1),!0)}return Vr(fi(n.nodeType==3?ni(n):n,-t),t>=0)}c(Xb,"coordsAtPos");function Vr(i,e){if(i.width==0)return i;let t=e?i.left:i.right;return{top:i.top,bottom:i.bottom,left:t,right:t}}c(Vr,"flattenV");function VA(i,e){if(i.height==0)return i;let t=e?i.top:i.bottom;return{top:t,bottom:t,left:i.left,right:i.right}}c(VA,"flattenH");function zb(i,e,t){let n=i.state,s=i.root.activeElement;n!=e&&i.updateState(e),s!=i.dom&&i.focus();try{return t()}finally{n!=e&&i.updateState(n),s!=i.dom&&s&&s.focus()}}c(zb,"withFlushedState");function VD(i,e,t){let n=e.selection,s=t=="up"?n.$from:n.$to;return zb(i,e,()=>{let{node:r}=i.docView.domFromPos(s.pos,t=="up"?-1:1);for(;;){let a=i.docView.nearestDesc(r,!0);if(!a)break;if(a.node.isBlock){r=a.contentDOM||a.dom;break}r=a.dom.parentNode}let o=Xb(i,s.pos,1);for(let a=r.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=ni(a,0,a.nodeValue.length).getClientRects();else continue;for(let A=0;A<l.length;A++){let u=l[A];if(u.bottom>u.top+1&&(t=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}c(VD,"endOfTextblockVertical");const OD=/[\u0590-\u08ac]/;function PD(i,e,t){let{$head:n}=e.selection;if(!n.parent.isTextblock)return!1;let s=n.parentOffset,r=!s,o=s==n.parent.content.size,a=i.domSelection();return a?!OD.test(n.parent.textContent)||!a.modify?t=="left"||t=="backward"?r:o:zb(i,e,()=>{let{focusNode:l,focusOffset:A,anchorNode:u,anchorOffset:h}=i.domSelectionRange(),d=a.caretBidiLevel;a.modify("move",t,"character");let g=n.depth?i.docView.domAfterPos(n.before()):i.dom,{focusNode:p,focusOffset:f}=i.domSelectionRange(),m=p&&!g.contains(p.nodeType==1?p:p.parentNode)||l==p&&A==f;try{a.collapse(u,h),l&&(l!=u||A!=h)&&a.extend&&a.extend(l,A)}catch{}return d!=null&&(a.caretBidiLevel=d),m}):n.pos==n.start()||n.pos==n.end()}c(PD,"endOfTextblockHorizontal");let mf=null,Cf=null,If=!1;function HD(i,e,t){return mf==e&&Cf==t?If:(mf=e,Cf=t,If=t=="up"||t=="down"?VD(i,e,t):PD(i,e,t))}c(HD,"endOfTextblock");const In=0,yf=1,as=2,Un=3;class fa{static{c(this,"ViewDesc")}constructor(e,t,n,s){this.parent=e,this.children=t,this.dom=n,this.contentDOM=s,this.dirty=In,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let s=this.children[t];if(s==e)return n;n+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(n<0){let r,o;if(e==this.contentDOM)r=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.previousSibling}for(;r&&!((o=r.pmViewDesc)&&o.parent==this);)r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}else{let r,o;if(e==this.contentDOM)r=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.nextSibling}for(;r&&!((o=r.pmViewDesc)&&o.parent==this);)r=r.nextSibling;return r?this.posBeforeChild(o):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=t>wt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let r=e;;r=r.parentNode){if(r==this.dom){s=!1;break}if(r.previousSibling)break}if(s==null&&t==e.childNodes.length)for(let r=e;;r=r.parentNode){if(r==this.dom){s=!0;break}if(r.nextSibling)break}}return s??n>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let n=!0,s=e;s;s=s.parentNode){let r=this.getDesc(s),o;if(r&&(!t||r.node))if(n&&(o=r.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))n=!1;else return r}}getDesc(e){let t=e.pmViewDesc;for(let n=t;n;n=n.parent)if(n==this)return t}posFromDOM(e,t,n){for(let s=e;s;s=s.parentNode){let r=this.getDesc(s);if(r)return r.localPosFromDOM(e,t,n)}return-1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let s=this.children[t],r=n+s.size;if(n==e&&r!=n){for(;!s.border&&s.children.length;)for(let o=0;o<s.children.length;o++){let a=s.children[o];if(a.size){s=a;break}}return s}if(e<r)return s.descAt(e-n-s.border);n=r}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,s=0;for(let r=0;n<this.children.length;n++){let o=this.children[n],a=r+o.size;if(a>e||o instanceof Ub){s=e-r;break}r=a}if(s)return this.children[n].domFromPos(s-this.children[n].border,t);for(let r;n&&!(r=this.children[n-1]).size&&r instanceof Jb&&r.side>=0;n--);if(t<=0){let r,o=!0;for(;r=n?this.children[n-1]:null,!(!r||r.dom.parentNode==this.contentDOM);n--,o=!1);return r&&t&&o&&!r.border&&!r.domAtom?r.domFromPos(r.size,t):{node:this.contentDOM,offset:r?wt(r.dom)+1:0}}else{let r,o=!0;for(;r=n<this.children.length?this.children[n]:null,!(!r||r.dom.parentNode==this.contentDOM);n++,o=!1);return r&&o&&!r.border&&!r.domAtom?r.domFromPos(0,t):{node:this.contentDOM,offset:r?wt(r.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,n=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,r=-1;for(let o=n,a=0;;a++){let l=this.children[a],A=o+l.size;if(s==-1&&e<=A){let u=o+l.border;if(e>=u&&t<=A-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,t,u);e=o;for(let h=a;h>0;h--){let d=this.children[h-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){s=wt(d.dom)+1;break}e-=d.size}s==-1&&(s=0)}if(s>-1&&(A>t||a==this.children.length-1)){t=A;for(let u=a+1;u<this.children.length;u++){let h=this.children[u];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){r=wt(h.dom);break}t+=h.size}r==-1&&(r=this.contentDOM.childNodes.length);break}o=A}return{node:this.contentDOM,from:e,to:t,fromOffset:s,toOffset:r}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(t.nodeType!=1||n==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n,s=!1){let r=Math.min(e,t),o=Math.max(e,t);for(let g=0,p=0;g<this.children.length;g++){let f=this.children[g],m=p+f.size;if(r>p&&o<m)return f.setSelection(e-p-f.border,t-p-f.border,n,s);p=m}let a=this.domFromPos(e,e?-1:1),l=t==e?a:this.domFromPos(t,t?-1:1),A=n.root.getSelection(),u=n.domSelectionRange(),h=!1;if((Cn||Ut)&&e==t){let{node:g,offset:p}=a;if(g.nodeType==3){if(h=!!(p&&g.nodeValue[p-1]==`
`),h&&p==g.nodeValue.length)for(let f=g,m;f;f=f.parentNode){if(m=f.nextSibling){m.nodeName=="BR"&&(a=l={node:m.parentNode,offset:wt(m)+1});break}let y=f.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let f=g.childNodes[p-1];h=f&&(f.nodeName=="BR"||f.contentEditable=="false")}}if(Cn&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let g=u.focusNode.childNodes[u.focusOffset];g&&g.contentEditable=="false"&&(s=!0)}if(!(s||h&&Ut)&&Gs(a.node,a.offset,u.anchorNode,u.anchorOffset)&&Gs(l.node,l.offset,u.focusNode,u.focusOffset))return;let d=!1;if((A.extend||e==t)&&!(h&&Cn)){A.collapse(a.node,a.offset);try{e!=t&&A.extend(l.node,l.offset),d=!0}catch{}}if(!d){if(e>t){let p=a;a=l,l=p}let g=document.createRange();g.setEnd(l.node,l.offset),g.setStart(a.node,a.offset),A.removeAllRanges(),A.addRange(g)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,s=0;s<this.children.length;s++){let r=this.children[s],o=n+r.size;if(n==o?e<=o&&t>=n:e<o&&t>n){let a=n+r.border,l=o-r.border;if(e>=a&&t<=l){this.dirty=e==n||t==o?as:yf,e==a&&t==l&&(r.contentLost||r.dom.parentNode!=this.contentDOM)?r.dirty=Un:r.markDirty(e-a,t-a);return}else r.dirty=r.dom==r.contentDOM&&r.dom.parentNode==this.contentDOM&&!r.children.length?as:Un}n=o}this.dirty=as}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=e==1?as:yf;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class Jb extends fa{static{c(this,"WidgetViewDesc")}constructor(e,t,n,s){let r,o=t.type.toDOM;if(typeof o=="function"&&(o=o(n,()=>{if(!r)return s;if(r.parent)return r.parent.posBeforeChild(r)})),!t.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,r=this}matchesWidget(e){return this.dirty==In&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class XD extends fa{static{c(this,"CompositionViewDesc")}constructor(e,t,n,s){super(e,[],t,null),this.textDOM=n,this.text=s}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Rs extends fa{static{c(this,"MarkViewDesc")}constructor(e,t,n,s,r){super(e,[],n,s),this.mark=t,this.spec=r}static create(e,t,n,s){let r=s.nodeViews[t.type.name],o=r&&r(t,s,n);return(!o||!o.dom)&&(o=Nr.renderSpec(document,t.type.spec.toDOM(t,n),null,t.attrs)),new Rs(e,t,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Un||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Un&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=In){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=In}}slice(e,t,n){let s=Rs.create(this.parent,this.mark,!0,n),r=this.children,o=this.size;t<o&&(r=zu(r,t,o,n)),e>0&&(r=zu(r,0,e,n));for(let a=0;a<r.length;a++)r[a].parent=s;return s.children=r,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Zi extends fa{static{c(this,"NodeViewDesc")}constructor(e,t,n,s,r,o,a,l,A){super(e,[],r,o),this.node=t,this.outerDeco=n,this.innerDeco=s,this.nodeDOM=a}static create(e,t,n,s,r,o){let a=r.nodeViews[t.type.name],l,A=a&&a(t,r,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},n,s),u=A&&A.dom,h=A&&A.contentDOM;if(t.isText){if(!u)u=document.createTextNode(t.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:h}=Nr.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!h&&!t.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),t.type.spec.draggable&&(u.draggable=!0));let d=u;return u=qb(u,n,t),A?l=new zD(e,t,n,s,u,h||null,d,A,r,o+1):t.isText?new Zc(e,t,n,s,u,d,r):new Zi(e,t,n,s,u,h||null,d,r,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>re.empty)}return e}matchesNode(e,t,n){return this.dirty==In&&e.eq(this.node)&&Nl(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let n=this.node.inlineContent,s=t,r=e.composing?this.localCompositionInfo(e,t):null,o=r&&r.pos>-1?r:null,a=r&&r.pos<0,l=new UD(this,o&&o.node,e);qD(this.node,this.innerDeco,(A,u,h)=>{A.spec.marks?l.syncToMarks(A.spec.marks,n,e):A.type.side>=0&&!h&&l.syncToMarks(u==this.node.childCount?xe.none:this.node.child(u).marks,n,e),l.placeWidget(A,e,s)},(A,u,h,d)=>{l.syncToMarks(A.marks,n,e);let g;l.findNodeMatch(A,u,h,d)||a&&e.state.selection.from>s&&e.state.selection.to<s+A.nodeSize&&(g=l.findIndexWithChild(r.node))>-1&&l.updateNodeAt(A,u,h,g,e)||l.updateNextNode(A,u,h,e,d,s)||l.addNode(A,u,h,e,s),s+=A.nodeSize}),l.syncToMarks([],n,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==as)&&(o&&this.protectLocalComposition(e,o),Kb(this.contentDOM,this.children,e),Ir&&$D(this.dom))}localCompositionInfo(e,t){let{from:n,to:s}=e.state.selection;if(!(e.state.selection instanceof Xe)||n<t||s>t+this.node.content.size)return null;let r=e.input.compositionNode;if(!r||!this.dom.contains(r.parentNode))return null;if(this.node.inlineContent){let o=r.nodeValue,a=eT(this.node.content,o,n-t,s-t);return a<0?null:{node:r,pos:a,text:o}}else return{node:r,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:n,text:s}){if(this.getDesc(t))return;let r=t;for(;r.parentNode!=this.contentDOM;r=r.parentNode){for(;r.previousSibling;)r.parentNode.removeChild(r.previousSibling);for(;r.nextSibling;)r.parentNode.removeChild(r.nextSibling);r.pmViewDesc&&(r.pmViewDesc=void 0)}let o=new XD(this,r,t,s);e.input.compositionNodes.push(o),this.children=zu(this.children,n,n+s.length,e,o)}update(e,t,n,s){return this.dirty==Un||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,n,s),!0)}updateInner(e,t,n,s){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=In}updateOuterDeco(e){if(Nl(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=jb(this.dom,this.nodeDOM,Xu(this.outerDeco,this.node,t),Xu(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function bf(i,e,t,n,s){qb(n,e,i);let r=new Zi(void 0,i,e,t,n,n,n,s,0);return r.contentDOM&&r.updateChildren(s,0),r}c(bf,"docViewDesc");class Zc extends Zi{static{c(this,"TextViewDesc")}constructor(e,t,n,s,r,o,a){super(e,t,n,s,r,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,s){return this.dirty==Un||this.dirty!=In&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=In||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=In,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,n){let s=this.node.cut(e,t),r=document.createTextNode(s.text);return new Zc(this.parent,s,this.outerDeco,this.innerDeco,r,r,n)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Un)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Ub extends fa{static{c(this,"TrailingHackViewDesc")}parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==In&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class zD extends Zi{static{c(this,"CustomNodeViewDesc")}constructor(e,t,n,s,r,o,a,l,A,u){super(e,t,n,s,r,o,a,A,u),this.spec=l}update(e,t,n,s){if(this.dirty==Un)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let r=this.spec.update(e,t,n);return r&&this.updateInner(e,t,n,s),r}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,n,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,s){this.spec.setSelection?this.spec.setSelection(e,t,n.root):super.setSelection(e,t,n,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Kb(i,e,t){let n=i.firstChild,s=!1;for(let r=0;r<e.length;r++){let o=e[r],a=o.dom;if(a.parentNode==i){for(;a!=n;)n=Ef(n),s=!0;n=n.nextSibling}else s=!0,i.insertBefore(a,n);if(o instanceof Rs){let l=n?n.previousSibling:i.lastChild;Kb(o.contentDOM,o.children,t),n=l?l.nextSibling:i.firstChild}}for(;n;)n=Ef(n),s=!0;s&&t.trackWrites==i&&(t.trackWrites=null)}c(Kb,"renderDescs");const eo=c(function(i){i&&(this.nodeName=i)},"OuterDecoLevel");eo.prototype=Object.create(null);const ls=[new eo];function Xu(i,e,t){if(i.length==0)return ls;let n=t?ls[0]:new eo,s=[n];for(let r=0;r<i.length;r++){let o=i[r].type.attrs;if(o){o.nodeName&&s.push(n=new eo(o.nodeName));for(let a in o){let l=o[a];l!=null&&(t&&s.length==1&&s.push(n=new eo(e.isInline?"span":"div")),a=="class"?n.class=(n.class?n.class+" ":"")+l:a=="style"?n.style=(n.style?n.style+";":"")+l:a!="nodeName"&&(n[a]=l))}}}return s}c(Xu,"computeOuterDeco");function jb(i,e,t,n){if(t==ls&&n==ls)return e;let s=e;for(let r=0;r<n.length;r++){let o=n[r],a=t[r];if(r){let l;a&&a.nodeName==o.nodeName&&s!=i&&(l=s.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(s),a=ls[0]),s=l}JD(s,a||ls[0],o)}return s}c(jb,"patchOuterDeco");function JD(i,e,t){for(let n in e)n!="class"&&n!="style"&&n!="nodeName"&&!(n in t)&&i.removeAttribute(n);for(let n in t)n!="class"&&n!="style"&&n!="nodeName"&&t[n]!=e[n]&&i.setAttribute(n,t[n]);if(e.class!=t.class){let n=e.class?e.class.split(" ").filter(Boolean):[],s=t.class?t.class.split(" ").filter(Boolean):[];for(let r=0;r<n.length;r++)s.indexOf(n[r])==-1&&i.classList.remove(n[r]);for(let r=0;r<s.length;r++)n.indexOf(s[r])==-1&&i.classList.add(s[r]);i.classList.length==0&&i.removeAttribute("class")}if(e.style!=t.style){if(e.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=n.exec(e.style);)i.style.removeProperty(s[1])}t.style&&(i.style.cssText+=t.style)}}c(JD,"patchAttributes");function qb(i,e,t){return jb(i,i,ls,Xu(e,t,i.nodeType!=1))}c(qb,"applyOuterDeco");function Nl(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++)if(!i[t].type.eq(e[t].type))return!1;return!0}c(Nl,"sameOuterDeco");function Ef(i){let e=i.nextSibling;return i.parentNode.removeChild(i),e}c(Ef,"rm");class UD{static{c(this,"ViewTreeUpdater")}constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=KD(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let s=0,r=this.stack.length>>1,o=Math.min(r,e.length);for(;s<o&&(s==r-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<r;)this.destroyRest(),this.top.dirty=In,this.index=this.stack.pop(),this.top=this.stack.pop(),r--;for(;r<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let A=this.top.children[l];if(A.matchesMark(e[r])&&!this.isLocked(A.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Rs.create(this.top,e[r],t,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,r++}}findNodeMatch(e,t,n,s){let r=-1,o;if(s>=this.preMatch.index&&(o=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,n))r=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let A=this.top.children[a];if(A.matchesNode(e,t,n)&&!this.preMatch.matched.has(A)){r=a;break}}return r<0?!1:(this.destroyBetween(this.index,r),this.index++,!0)}updateNodeAt(e,t,n,s,r){let o=this.top.children[s];return o.dirty==Un&&o.dom==o.contentDOM&&(o.dirty=as),o.update(e,t,n,r)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let n=e.pmViewDesc;if(n){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==n)return s}return-1}e=t}}updateNextNode(e,t,n,s,r,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Zi){let A=this.preMatch.matched.get(l);if(A!=null&&A!=r)return!1;let u=l.dom,h,d=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Un&&Nl(t,l.outerDeco));if(!d&&l.update(e,t,n,s))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!d&&(h=this.recreateWrapper(l,e,t,n,s,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=h,h.contentDOM&&(h.dirty=as,h.updateChildren(s,o+1),h.dirty=In),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,n,s,r,o){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Nl(n,e.outerDeco)||!s.eq(e.innerDeco))return null;let a=Zi.create(this.top,t,n,s,r,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,t,n,s,r){let o=Zi.create(this.top,e,t,n,s,r);o.contentDOM&&o.updateChildren(s,r+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,t,n){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let r=new Jb(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Rs;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Zc)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Ut||Lt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);e=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),e=="BR"&&(n.className="ProseMirror-trailingBreak");let s=new Ub(this.top,[],n,null);t!=this.top?t.children.push(s):t.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function KD(i,e){let t=e,n=t.children.length,s=i.childCount,r=new Map,o=[];e:for(;s>0;){let a;for(;;)if(n){let A=t.children[n-1];if(A instanceof Rs)t=A,n=A.children.length;else{a=A,n--;break}}else{if(t==e)break e;n=t.parent.children.indexOf(t),t=t.parent}let l=a.node;if(l){if(l!=i.child(s-1))break;--s,r.set(a,s),o.push(a)}}return{index:s,matched:r,matches:o.reverse()}}c(KD,"preMatch");function jD(i,e){return i.type.side-e.type.side}c(jD,"compareSide");function qD(i,e,t,n){let s=e.locals(i),r=0;if(s.length==0){for(let A=0;A<i.childCount;A++){let u=i.child(A);n(u,s,e.forChild(r,u),A),r+=u.nodeSize}return}let o=0,a=[],l=null;for(let A=0;;){let u,h;for(;o<s.length&&s[o].to==r;){let m=s[o++];m.widget&&(u?(h||(h=[u])).push(m):u=m)}if(u)if(h){h.sort(jD);for(let m=0;m<h.length;m++)t(h[m],A,!!l)}else t(u,A,!!l);let d,g;if(l)g=-1,d=l,l=null;else if(A<i.childCount)g=A,d=i.child(A++);else break;for(let m=0;m<a.length;m++)a[m].to<=r&&a.splice(m--,1);for(;o<s.length&&s[o].from<=r&&s[o].to>r;)a.push(s[o++]);let p=r+d.nodeSize;if(d.isText){let m=p;o<s.length&&s[o].from<m&&(m=s[o].from);for(let y=0;y<a.length;y++)a[y].to<m&&(m=a[y].to);m<p&&(l=d.cut(m-r),d=d.cut(0,m-r),p=m,g=-1)}else for(;o<s.length&&s[o].to<p;)o++;let f=d.isInline&&!d.isLeaf?a.filter(m=>!m.inline):a.slice();n(d,f,e.forChild(r,d),g),r=p}}c(qD,"iterDeco");function $D(i){if(i.nodeName=="UL"||i.nodeName=="OL"){let e=i.style.cssText;i.style.cssText=e+"; list-style: square !important",window.getComputedStyle(i).listStyle,i.style.cssText=e}}c($D,"iosHacks");function eT(i,e,t,n){for(let s=0,r=0;s<i.childCount&&r<=n;){let o=i.child(s++),a=r;if(r+=o.nodeSize,!o.isText)continue;let l=o.text;for(;s<i.childCount;){let A=i.child(s++);if(r+=A.nodeSize,!A.isText)break;l+=A.text}if(r>=t){if(r>=n&&l.slice(n-e.length-a,n-a)==e)return n-e.length;let A=a<n?l.lastIndexOf(e,n-a-1):-1;if(A>=0&&A+e.length+a>=t)return a+A;if(t==n&&l.length>=n+e.length-a&&l.slice(n-a,n-a+e.length)==e)return n}}return-1}c(eT,"findTextInFragment");function zu(i,e,t,n,s){let r=[];for(let o=0,a=0;o<i.length;o++){let l=i[o],A=a,u=a+=l.size;A>=t||u<=e?r.push(l):(A<e&&r.push(l.slice(0,e-A,n)),s&&(r.push(s),s=void 0),u>t&&r.push(l.slice(t-A,l.size,n)))}return r}c(zu,"replaceNodes");function Rd(i,e=null){let t=i.domSelectionRange(),n=i.state.doc;if(!t.focusNode)return null;let s=i.docView.nearestDesc(t.focusNode),r=s&&s.size==0,o=i.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(o<0)return null;let a=n.resolve(o),l,A;if(wc(t)){for(l=o;s&&!s.node;)s=s.parent;let h=s.node;if(s&&h.isAtom&&Se.isSelectable(h)&&s.parent&&!(h.isInline&&RD(t.focusNode,t.focusOffset,s.dom))){let d=s.posBefore;A=new Se(o==d?a:n.resolve(d))}}else{if(t instanceof i.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let h=o,d=o;for(let g=0;g<t.rangeCount;g++){let p=t.getRangeAt(g);h=Math.min(h,i.docView.posFromDOM(p.startContainer,p.startOffset,1)),d=Math.max(d,i.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(h<0)return null;[l,o]=d==i.state.selection.anchor?[d,h]:[h,d],a=n.resolve(o)}else l=i.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(l<0)return null}let u=n.resolve(l);if(!A){let h=e=="pointer"||i.state.selection.head<a.pos&&!r?1:-1;A=Sd(i,u,a,h)}return A}c(Rd,"selectionFromDOM");function $b(i){return i.editable?i.hasFocus():tE(i)&&document.activeElement&&document.activeElement.contains(i.dom)}c($b,"editorOwnsSelection");function ci(i,e=!1){let t=i.state.selection;if(eE(i,t),!!$b(i)){if(!e&&i.input.mouseDown&&i.input.mouseDown.allowDefault&&Lt){let n=i.domSelectionRange(),s=i.domObserver.currentSelection;if(n.anchorNode&&s.anchorNode&&Gs(n.anchorNode,n.anchorOffset,s.anchorNode,s.anchorOffset)){i.input.mouseDown.delayedSelectionSync=!0,i.domObserver.setCurSelection();return}}if(i.domObserver.disconnectSelection(),i.cursorWrapper)nT(i);else{let{anchor:n,head:s}=t,r,o;Bf&&!(t instanceof Xe)&&(t.$from.parent.inlineContent||(r=vf(i,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(o=vf(i,t.to))),i.docView.setSelection(n,s,i,e),Bf&&(r&&Gf(r),o&&Gf(o)),t.visible?i.dom.classList.remove("ProseMirror-hideselection"):(i.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&tT(i))}i.domObserver.setCurSelection(),i.domObserver.connectSelection()}}c(ci,"selectionToDOM");const Bf=Ut||Lt&&Mb<63;function vf(i,e){let{node:t,offset:n}=i.docView.domFromPos(e,0),s=n<t.childNodes.length?t.childNodes[n]:null,r=n?t.childNodes[n-1]:null;if(Ut&&s&&s.contentEditable=="false")return OA(s);if((!s||s.contentEditable=="false")&&(!r||r.contentEditable=="false")){if(s)return OA(s);if(r)return OA(r)}}c(vf,"temporarilyEditableNear");function OA(i){return i.contentEditable="true",Ut&&i.draggable&&(i.draggable=!1,i.wasDraggable=!0),i}c(OA,"setEditable");function Gf(i){i.contentEditable="false",i.wasDraggable&&(i.draggable=!0,i.wasDraggable=null)}c(Gf,"resetEditable");function tT(i){let e=i.dom.ownerDocument;e.removeEventListener("selectionchange",i.input.hideSelectionGuard);let t=i.domSelectionRange(),n=t.anchorNode,s=t.anchorOffset;e.addEventListener("selectionchange",i.input.hideSelectionGuard=()=>{(t.anchorNode!=n||t.anchorOffset!=s)&&(e.removeEventListener("selectionchange",i.input.hideSelectionGuard),setTimeout(()=>{(!$b(i)||i.state.selection.visible)&&i.dom.classList.remove("ProseMirror-hideselection")},20))})}c(tT,"removeClassOnSelectionChange");function nT(i){let e=i.domSelection();if(!e)return;let t=i.cursorWrapper.dom,n=t.nodeName=="IMG";n?e.collapse(t.parentNode,wt(t)+1):e.collapse(t,0),!n&&!i.state.selection.visible&&en&&wi<=11&&(t.disabled=!0,t.disabled=!1)}c(nT,"selectCursorWrapper");function eE(i,e){if(e instanceof Se){let t=i.docView.descAt(e.from);t!=i.lastSelectedViewDesc&&(Rf(i),t&&t.selectNode(),i.lastSelectedViewDesc=t)}else Rf(i)}c(eE,"syncNodeSelection");function Rf(i){i.lastSelectedViewDesc&&(i.lastSelectedViewDesc.parent&&i.lastSelectedViewDesc.deselectNode(),i.lastSelectedViewDesc=void 0)}c(Rf,"clearNodeSelection");function Sd(i,e,t,n){return i.someProp("createSelectionBetween",s=>s(i,e,t))||Xe.between(e,t,n)}c(Sd,"selectionBetween");function Sf(i){return i.editable&&!i.hasFocus()?!1:tE(i)}c(Sf,"hasFocusAndSelection");function tE(i){let e=i.domSelectionRange();if(!e.anchorNode)return!1;try{return i.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(i.editable||i.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}c(tE,"hasSelection");function iT(i){let e=i.docView.domFromPos(i.state.selection.anchor,0),t=i.domSelectionRange();return Gs(e.node,e.offset,t.anchorNode,t.anchorOffset)}c(iT,"anchorInRightPlace");function Ju(i,e){let{$anchor:t,$head:n}=i.selection,s=e>0?t.max(n):t.min(n),r=s.parent.inlineContent?s.depth?i.doc.resolve(e>0?s.after():s.before()):null:s;return r&&Fe.findFrom(r,e)}c(Ju,"moveSelectionBlock");function Ci(i,e){return i.dispatch(i.state.tr.setSelection(e).scrollIntoView()),!0}c(Ci,"apply");function Nf(i,e,t){let n=i.state.selection;if(n instanceof Xe)if(t.indexOf("s")>-1){let{$head:s}=n,r=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!r||r.isText||!r.isLeaf)return!1;let o=i.state.doc.resolve(s.pos+r.nodeSize*(e<0?-1:1));return Ci(i,new Xe(n.$anchor,o))}else if(n.empty){if(i.endOfTextblock(e>0?"forward":"backward")){let s=Ju(i.state,e);return s&&s instanceof Se?Ci(i,s):!1}else if(!(pn&&t.indexOf("m")>-1)){let s=n.$head,r=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,o;if(!r||r.isText)return!1;let a=e<0?s.pos-r.nodeSize:s.pos;return r.isAtom||(o=i.docView.descAt(a))&&!o.contentDOM?Se.isSelectable(r)?Ci(i,new Se(e<0?i.state.doc.resolve(s.pos-r.nodeSize):s)):pa?Ci(i,new Xe(i.state.doc.resolve(e<0?a:a+r.nodeSize))):!1:!1}}else return!1;else{if(n instanceof Se&&n.node.isInline)return Ci(i,new Xe(e>0?n.$to:n.$from));{let s=Ju(i.state,e);return s?Ci(i,s):!1}}}c(Nf,"selectHorizontally");function Ql(i){return i.nodeType==3?i.nodeValue.length:i.childNodes.length}c(Ql,"nodeLen");function to(i,e){let t=i.pmViewDesc;return t&&t.size==0&&(e<0||i.nextSibling||i.nodeName!="BR")}c(to,"isIgnorable");function Hs(i,e){return e<0?sT(i):rT(i)}c(Hs,"skipIgnoredNodes");function sT(i){let e=i.domSelectionRange(),t=e.focusNode,n=e.focusOffset;if(!t)return;let s,r,o=!1;for(Cn&&t.nodeType==1&&n<Ql(t)&&to(t.childNodes[n],-1)&&(o=!0);;)if(n>0){if(t.nodeType!=1)break;{let a=t.childNodes[n-1];if(to(a,-1))s=t,r=--n;else if(a.nodeType==3)t=a,n=t.nodeValue.length;else break}}else{if(nE(t))break;{let a=t.previousSibling;for(;a&&to(a,-1);)s=t.parentNode,r=wt(a),a=a.previousSibling;if(a)t=a,n=Ql(t);else{if(t=t.parentNode,t==i.dom)break;n=0}}}o?Uu(i,t,n):s&&Uu(i,s,r)}c(sT,"skipIgnoredNodesBefore");function rT(i){let e=i.domSelectionRange(),t=e.focusNode,n=e.focusOffset;if(!t)return;let s=Ql(t),r,o;for(;;)if(n<s){if(t.nodeType!=1)break;let a=t.childNodes[n];if(to(a,1))r=t,o=++n;else break}else{if(nE(t))break;{let a=t.nextSibling;for(;a&&to(a,1);)r=a.parentNode,o=wt(a)+1,a=a.nextSibling;if(a)t=a,n=0,s=Ql(t);else{if(t=t.parentNode,t==i.dom)break;n=s=0}}}r&&Uu(i,r,o)}c(rT,"skipIgnoredNodesAfter");function nE(i){let e=i.pmViewDesc;return e&&e.node&&e.node.isBlock}c(nE,"isBlockNode");function oT(i,e){for(;i&&e==i.childNodes.length&&!ga(i);)e=wt(i)+1,i=i.parentNode;for(;i&&e<i.childNodes.length;){let t=i.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;i=t,e=0}}c(oT,"textNodeAfter");function aT(i,e){for(;i&&!e&&!ga(i);)e=wt(i),i=i.parentNode;for(;i&&e;){let t=i.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;i=t,e=i.childNodes.length}}c(aT,"textNodeBefore");function Uu(i,e,t){if(e.nodeType!=3){let r,o;(o=oT(e,t))?(e=o,t=0):(r=aT(e,t))&&(e=r,t=r.nodeValue.length)}let n=i.domSelection();if(!n)return;if(wc(n)){let r=document.createRange();r.setEnd(e,t),r.setStart(e,t),n.removeAllRanges(),n.addRange(r)}else n.extend&&n.extend(e,t);i.domObserver.setCurSelection();let{state:s}=i;setTimeout(()=>{i.state==s&&ci(i)},50)}c(Uu,"setSelFocus");function Qf(i,e){let t=i.state.doc.resolve(e);if(!(Lt||QD)&&t.parent.inlineContent){let s=i.coordsAtPos(e);if(e>t.start()){let r=i.coordsAtPos(e-1),o=(r.top+r.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(r.left-s.left)>1)return r.left<s.left?"ltr":"rtl"}if(e<t.end()){let r=i.coordsAtPos(e+1),o=(r.top+r.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(r.left-s.left)>1)return r.left>s.left?"ltr":"rtl"}}return getComputedStyle(i.dom).direction=="rtl"?"rtl":"ltr"}c(Qf,"findDirection");function wf(i,e,t){let n=i.state.selection;if(n instanceof Xe&&!n.empty||t.indexOf("s")>-1||pn&&t.indexOf("m")>-1)return!1;let{$from:s,$to:r}=n;if(!s.parent.inlineContent||i.endOfTextblock(e<0?"up":"down")){let o=Ju(i.state,e);if(o&&o instanceof Se)return Ci(i,o)}if(!s.parent.inlineContent){let o=e<0?s:r,a=n instanceof An?Fe.near(o,e):Fe.findFrom(o,e);return a?Ci(i,a):!1}return!1}c(wf,"selectVertically");function Zf(i,e){if(!(i.state.selection instanceof Xe))return!0;let{$head:t,$anchor:n,empty:s}=i.state.selection;if(!t.sameParent(n))return!0;if(!s)return!1;if(i.endOfTextblock(e>0?"forward":"backward"))return!0;let r=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(r&&!r.isText){let o=i.state.tr;return e<0?o.delete(t.pos-r.nodeSize,t.pos):o.delete(t.pos,t.pos+r.nodeSize),i.dispatch(o),!0}return!1}c(Zf,"stopNativeHorizontalDelete");function kf(i,e,t){i.domObserver.stop(),e.contentEditable=t,i.domObserver.start()}c(kf,"switchEditable");function lT(i){if(!Ut||i.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=i.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let n=e.firstChild;kf(i,n,"true"),setTimeout(()=>kf(i,n,"false"),20)}return!1}c(lT,"safariDownArrowBug");function cT(i){let e="";return i.ctrlKey&&(e+="c"),i.metaKey&&(e+="m"),i.altKey&&(e+="a"),i.shiftKey&&(e+="s"),e}c(cT,"getMods");function AT(i,e){let t=e.keyCode,n=cT(e);if(t==8||pn&&t==72&&n=="c")return Zf(i,-1)||Hs(i,-1);if(t==46&&!e.shiftKey||pn&&t==68&&n=="c")return Zf(i,1)||Hs(i,1);if(t==13||t==27)return!0;if(t==37||pn&&t==66&&n=="c"){let s=t==37?Qf(i,i.state.selection.from)=="ltr"?-1:1:-1;return Nf(i,s,n)||Hs(i,s)}else if(t==39||pn&&t==70&&n=="c"){let s=t==39?Qf(i,i.state.selection.from)=="ltr"?1:-1:1;return Nf(i,s,n)||Hs(i,s)}else{if(t==38||pn&&t==80&&n=="c")return wf(i,-1,n)||Hs(i,-1);if(t==40||pn&&t==78&&n=="c")return lT(i)||wf(i,1,n)||Hs(i,1);if(n==(pn?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}c(AT,"captureKeyDown");function Nd(i,e){i.someProp("transformCopied",g=>{e=g(e,i)});let t=[],{content:n,openStart:s,openEnd:r}=e;for(;s>1&&r>1&&n.childCount==1&&n.firstChild.childCount==1;){s--,r--;let g=n.firstChild;t.push(g.type.name,g.attrs!=g.type.defaultAttrs?g.attrs:null),n=g.content}let o=i.someProp("clipboardSerializer")||Nr.fromSchema(i.state.schema),a=lE(),l=a.createElement("div");l.appendChild(o.serializeFragment(n,{document:a}));let A=l.firstChild,u,h=0;for(;A&&A.nodeType==1&&(u=aE[A.nodeName.toLowerCase()]);){for(let g=u.length-1;g>=0;g--){let p=a.createElement(u[g]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),h++}A=l.firstChild}A&&A.nodeType==1&&A.setAttribute("data-pm-slice",`${s} ${r}${h?` -${h}`:""} ${JSON.stringify(t)}`);let d=i.someProp("clipboardTextSerializer",g=>g(e,i))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:d,slice:e}}c(Nd,"serializeForClipboard");function iE(i,e,t,n,s){let r=s.parent.type.spec.code,o,a;if(!t&&!e)return null;let l=!!e&&(n||r||!t);if(l){if(i.someProp("transformPastedText",d=>{e=d(e,r||n,i)}),r)return a=new fe(re.from(i.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),i.someProp("transformPasted",d=>{a=d(a,i,!0)}),a;let h=i.someProp("clipboardTextParser",d=>d(e,s,n,i));if(h)a=h;else{let d=s.marks(),{schema:g}=i.state,p=Nr.fromSchema(g);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(f=>{let m=o.appendChild(document.createElement("p"));f&&m.appendChild(p.serializeNode(g.text(f,d)))})}}else i.someProp("transformPastedHTML",h=>{t=h(t,i)}),o=gT(t),pa&&pT(o);let A=o&&o.querySelector("[data-pm-slice]"),u=A&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(A.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let h=+u[3];h>0;h--){let d=o.firstChild;for(;d&&d.nodeType!=1;)d=d.nextSibling;if(!d)break;o=d}if(a||(a=(i.someProp("clipboardParser")||i.someProp("domParser")||Eb.fromSchema(i.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:s,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!uT.test(d.parentNode.nodeName)?{ignore:!0}:null}})),u)a=fT(_f(a,+u[1],+u[2]),u[4]);else if(a=fe.maxOpen(hT(a.content,s),!0),a.openStart||a.openEnd){let h=0,d=0;for(let g=a.content.firstChild;h<a.openStart&&!g.type.spec.isolating;h++,g=g.firstChild);for(let g=a.content.lastChild;d<a.openEnd&&!g.type.spec.isolating;d++,g=g.lastChild);a=_f(a,h,d)}return i.someProp("transformPasted",h=>{a=h(a,i,l)}),a}c(iE,"parseFromClipboard");const uT=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function hT(i,e){if(i.childCount<2)return i;for(let t=e.depth;t>=0;t--){let s=e.node(t).contentMatchAt(e.index(t)),r,o=[];if(i.forEach(a=>{if(!o)return;let l=s.findWrapping(a.type),A;if(!l)return o=null;if(A=o.length&&r.length&&rE(l,r,a,o[o.length-1],0))o[o.length-1]=A;else{o.length&&(o[o.length-1]=oE(o[o.length-1],r.length));let u=sE(a,l);o.push(u),s=s.matchType(u.type),r=l}}),o)return re.from(o)}return i}c(hT,"normalizeSiblings");function sE(i,e,t=0){for(let n=e.length-1;n>=t;n--)i=e[n].create(null,re.from(i));return i}c(sE,"withWrappers");function rE(i,e,t,n,s){if(s<i.length&&s<e.length&&i[s]==e[s]){let r=rE(i,e,t,n.lastChild,s+1);if(r)return n.copy(n.content.replaceChild(n.childCount-1,r));if(n.contentMatchAt(n.childCount).matchType(s==i.length-1?t.type:i[s+1]))return n.copy(n.content.append(re.from(sE(t,i,s+1))))}}c(rE,"addToSibling");function oE(i,e){if(e==0)return i;let t=i.content.replaceChild(i.childCount-1,oE(i.lastChild,e-1)),n=i.contentMatchAt(i.childCount).fillBefore(re.empty,!0);return i.copy(t.append(n))}c(oE,"closeRight");function Ku(i,e,t,n,s,r){let o=e<0?i.firstChild:i.lastChild,a=o.content;return i.childCount>1&&(r=0),s<n-1&&(a=Ku(a,e,t,n,s+1,r)),s>=t&&(a=e<0?o.contentMatchAt(0).fillBefore(a,r<=s).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(re.empty,!0))),i.replaceChild(e<0?0:i.childCount-1,o.copy(a))}c(Ku,"closeRange");function _f(i,e,t){return e<i.openStart&&(i=new fe(Ku(i.content,-1,e,i.openStart,0,i.openEnd),e,i.openEnd)),t<i.openEnd&&(i=new fe(Ku(i.content,1,t,i.openEnd,0,0),i.openStart,t)),i}c(_f,"closeSlice");const aE={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Yf=null;function lE(){return Yf||(Yf=document.implementation.createHTMLDocument("title"))}c(lE,"detachedDoc");let PA=null;function dT(i){let e=window.trustedTypes;return e?(PA||(PA=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:c(t=>t,"createHTML")})),PA.createHTML(i)):i}c(dT,"maybeWrapTrusted");function gT(i){let e=/^(\s*<meta [^>]*>)*/.exec(i);e&&(i=i.slice(e[0].length));let t=lE().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(i),s;if((s=n&&aE[n[1].toLowerCase()])&&(i=s.map(r=>"<"+r+">").join("")+i+s.map(r=>"</"+r+">").reverse().join("")),t.innerHTML=dT(i),s)for(let r=0;r<s.length;r++)t=t.querySelector(s[r])||t;return t}c(gT,"readHTML");function pT(i){let e=i.querySelectorAll(Lt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let n=e[t];n.childNodes.length==1&&n.textContent==" "&&n.parentNode&&n.parentNode.replaceChild(i.ownerDocument.createTextNode(" "),n)}}c(pT,"restoreReplacedSpaces");function fT(i,e){if(!i.size)return i;let t=i.content.firstChild.type.schema,n;try{n=JSON.parse(e)}catch{return i}let{content:s,openStart:r,openEnd:o}=i;for(let a=n.length-2;a>=0;a-=2){let l=t.nodes[n[a]];if(!l||l.hasRequiredAttrs())break;s=re.from(l.create(n[a+1],s)),r++,o++}return new fe(s,r,o)}c(fT,"addContext");const Kt={},jt={},mT={touchstart:!0,touchmove:!0};class CT{static{c(this,"InputState")}constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function IT(i){for(let e in Kt){let t=Kt[e];i.dom.addEventListener(e,i.input.eventHandlers[e]=n=>{bT(i,n)&&!Qd(i,n)&&(i.editable||!(n.type in jt))&&t(i,n)},mT[e]?{passive:!0}:void 0)}Ut&&i.dom.addEventListener("input",()=>null),ju(i)}c(IT,"initInput");function Ri(i,e){i.input.lastSelectionOrigin=e,i.input.lastSelectionTime=Date.now()}c(Ri,"setSelectionOrigin");function yT(i){i.domObserver.stop();for(let e in i.input.eventHandlers)i.dom.removeEventListener(e,i.input.eventHandlers[e]);clearTimeout(i.input.composingTimeout),clearTimeout(i.input.lastIOSEnterFallbackTimeout)}c(yT,"destroyInput");function ju(i){i.someProp("handleDOMEvents",e=>{for(let t in e)i.input.eventHandlers[t]||i.dom.addEventListener(t,i.input.eventHandlers[t]=n=>Qd(i,n))})}c(ju,"ensureListeners");function Qd(i,e){return i.someProp("handleDOMEvents",t=>{let n=t[e.type];return n?n(i,e)||e.defaultPrevented:!1})}c(Qd,"runCustomHandler");function bT(i,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=i.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}c(bT,"eventBelongsToView");function ET(i,e){!Qd(i,e)&&Kt[e.type]&&(i.editable||!(e.type in jt))&&Kt[e.type](i,e)}c(ET,"dispatchEvent");jt.keydown=(i,e)=>{let t=e;if(i.input.shiftKey=t.keyCode==16||t.shiftKey,!AE(i,t)&&(i.input.lastKeyCode=t.keyCode,i.input.lastKeyCodeTime=Date.now(),!(oi&&Lt&&t.keyCode==13)))if(t.keyCode!=229&&i.domObserver.forceFlush(),Ir&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let n=Date.now();i.input.lastIOSEnter=n,i.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{i.input.lastIOSEnter==n&&(i.someProp("handleKeyDown",s=>s(i,ss(13,"Enter"))),i.input.lastIOSEnter=0)},200)}else i.someProp("handleKeyDown",n=>n(i,t))||AT(i,t)?t.preventDefault():Ri(i,"key")};jt.keyup=(i,e)=>{e.keyCode==16&&(i.input.shiftKey=!1)};jt.keypress=(i,e)=>{let t=e;if(AE(i,t)||!t.charCode||t.ctrlKey&&!t.altKey||pn&&t.metaKey)return;if(i.someProp("handleKeyPress",s=>s(i,t))){t.preventDefault();return}let n=i.state.selection;if(!(n instanceof Xe)||!n.$from.sameParent(n.$to)){let s=String.fromCharCode(t.charCode),r=c(()=>i.state.tr.insertText(s).scrollIntoView(),"deflt");!/[\r\n]/.test(s)&&!i.someProp("handleTextInput",o=>o(i,n.$from.pos,n.$to.pos,s,r))&&i.dispatch(r()),t.preventDefault()}};function kc(i){return{left:i.clientX,top:i.clientY}}c(kc,"eventCoords");function BT(i,e){let t=e.x-i.clientX,n=e.y-i.clientY;return t*t+n*n<100}c(BT,"isNear");function wd(i,e,t,n,s){if(n==-1)return!1;let r=i.state.doc.resolve(n);for(let o=r.depth+1;o>0;o--)if(i.someProp(e,a=>o>r.depth?a(i,t,r.nodeAfter,r.before(o),s,!0):a(i,t,r.node(o),r.before(o),s,!1)))return!0;return!1}c(wd,"runHandlerOnContext");function sr(i,e,t){if(i.focused||i.focus(),i.state.selection.eq(e))return;let n=i.state.tr.setSelection(e);n.setMeta("pointer",!0),i.dispatch(n)}c(sr,"updateSelection");function vT(i,e){if(e==-1)return!1;let t=i.state.doc.resolve(e),n=t.nodeAfter;return n&&n.isAtom&&Se.isSelectable(n)?(sr(i,new Se(t)),!0):!1}c(vT,"selectClickedLeaf");function GT(i,e){if(e==-1)return!1;let t=i.state.selection,n,s;t instanceof Se&&(n=t.node);let r=i.state.doc.resolve(e);for(let o=r.depth+1;o>0;o--){let a=o>r.depth?r.nodeAfter:r.node(o);if(Se.isSelectable(a)){n&&t.$from.depth>0&&o>=t.$from.depth&&r.before(t.$from.depth+1)==t.$from.pos?s=r.before(t.$from.depth):s=r.before(o);break}}return s!=null?(sr(i,Se.create(i.state.doc,s)),!0):!1}c(GT,"selectClickedNode");function RT(i,e,t,n,s){return wd(i,"handleClickOn",e,t,n)||i.someProp("handleClick",r=>r(i,e,n))||(s?GT(i,t):vT(i,t))}c(RT,"handleSingleClick");function ST(i,e,t,n){return wd(i,"handleDoubleClickOn",e,t,n)||i.someProp("handleDoubleClick",s=>s(i,e,n))}c(ST,"handleDoubleClick");function NT(i,e,t,n){return wd(i,"handleTripleClickOn",e,t,n)||i.someProp("handleTripleClick",s=>s(i,e,n))||QT(i,t,n)}c(NT,"handleTripleClick");function QT(i,e,t){if(t.button!=0)return!1;let n=i.state.doc;if(e==-1)return n.inlineContent?(sr(i,Xe.create(n,0,n.content.size)),!0):!1;let s=n.resolve(e);for(let r=s.depth+1;r>0;r--){let o=r>s.depth?s.nodeAfter:s.node(r),a=s.before(r);if(o.inlineContent)sr(i,Xe.create(n,a+1,a+1+o.content.size));else if(Se.isSelectable(o))sr(i,Se.create(n,a));else continue;return!0}}c(QT,"defaultTripleClick");function Zd(i){return wl(i)}c(Zd,"forceDOMFlush");const cE=pn?"metaKey":"ctrlKey";Kt.mousedown=(i,e)=>{let t=e;i.input.shiftKey=t.shiftKey;let n=Zd(i),s=Date.now(),r="singleClick";s-i.input.lastClick.time<500&&BT(t,i.input.lastClick)&&!t[cE]&&i.input.lastClick.button==t.button&&(i.input.lastClick.type=="singleClick"?r="doubleClick":i.input.lastClick.type=="doubleClick"&&(r="tripleClick")),i.input.lastClick={time:s,x:t.clientX,y:t.clientY,type:r,button:t.button};let o=i.posAtCoords(kc(t));o&&(r=="singleClick"?(i.input.mouseDown&&i.input.mouseDown.done(),i.input.mouseDown=new wT(i,o,t,!!n)):(r=="doubleClick"?ST:NT)(i,o.pos,o.inside,t)?t.preventDefault():Ri(i,"pointer"))};class wT{static{c(this,"MouseDown")}constructor(e,t,n,s){this.view=e,this.pos=t,this.event=n,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[cE],this.allowDefault=n.shiftKey;let r,o;if(t.inside>-1)r=e.state.doc.nodeAt(t.inside),o=t.inside;else{let u=e.state.doc.resolve(t.pos);r=u.parent,o=u.depth?u.before():0}const a=s?null:n.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:A}=e.state;(n.button==0&&r.type.spec.draggable&&r.type.spec.selectable!==!1||A instanceof Se&&A.from<=o&&A.to>o)&&(this.mightDrag={node:r,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Cn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ri(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>ci(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(kc(e))),this.updateAllowDefault(e),this.allowDefault||!t?Ri(this.view,"pointer"):RT(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Ut&&this.mightDrag&&!this.mightDrag.node.isAtom||Lt&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(sr(this.view,Fe.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Ri(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ri(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Kt.touchstart=i=>{i.input.lastTouch=Date.now(),Zd(i),Ri(i,"pointer")};Kt.touchmove=i=>{i.input.lastTouch=Date.now(),Ri(i,"pointer")};Kt.contextmenu=i=>Zd(i);function AE(i,e){return i.composing?!0:Ut&&Math.abs(e.timeStamp-i.input.compositionEndedAt)<500?(i.input.compositionEndedAt=-2e8,!0):!1}c(AE,"inOrNearComposition");const ZT=oi?5e3:-1;jt.compositionstart=jt.compositionupdate=i=>{if(!i.composing){i.domObserver.flush();let{state:e}=i,t=e.selection.$to;if(e.selection instanceof Xe&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)))i.markCursor=i.state.storedMarks||t.marks(),wl(i,!0),i.markCursor=null;else if(wl(i,!e.selection.empty),Cn&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let n=i.domSelectionRange();for(let s=n.focusNode,r=n.focusOffset;s&&s.nodeType==1&&r!=0;){let o=r<0?s.lastChild:s.childNodes[r-1];if(!o)break;if(o.nodeType==3){let a=i.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else s=o,r=-1}}i.input.composing=!0}uE(i,ZT)};jt.compositionend=(i,e)=>{i.composing&&(i.input.composing=!1,i.input.compositionEndedAt=e.timeStamp,i.input.compositionPendingChanges=i.domObserver.pendingRecords().length?i.input.compositionID:0,i.input.compositionNode=null,i.input.compositionPendingChanges&&Promise.resolve().then(()=>i.domObserver.flush()),i.input.compositionID++,uE(i,20))};function uE(i,e){clearTimeout(i.input.composingTimeout),e>-1&&(i.input.composingTimeout=setTimeout(()=>wl(i),e))}c(uE,"scheduleComposeEnd");function hE(i){for(i.composing&&(i.input.composing=!1,i.input.compositionEndedAt=_T());i.input.compositionNodes.length>0;)i.input.compositionNodes.pop().markParentsDirty()}c(hE,"clearComposition");function kT(i){let e=i.domSelectionRange();if(!e.focusNode)return null;let t=vD(e.focusNode,e.focusOffset),n=GD(e.focusNode,e.focusOffset);if(t&&n&&t!=n){let s=n.pmViewDesc,r=i.domObserver.lastChangedTextNode;if(t==r||n==r)return r;if(!s||!s.isText(n.nodeValue))return n;if(i.input.compositionNode==n){let o=t.pmViewDesc;if(!(!o||!o.isText(t.nodeValue)))return n}}return t||n}c(kT,"findCompositionNode");function _T(){let i=document.createEvent("Event");return i.initEvent("event",!0,!0),i.timeStamp}c(_T,"timestampFromCustomEvent");function wl(i,e=!1){if(!(oi&&i.domObserver.flushingSoon>=0)){if(i.domObserver.forceFlush(),hE(i),e||i.docView&&i.docView.dirty){let t=Rd(i),n=i.state.selection;return t&&!t.eq(n)?i.dispatch(i.state.tr.setSelection(t)):(i.markCursor||e)&&!n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?i.dispatch(i.state.tr.deleteSelection()):i.updateState(i.state),!0}return!1}}c(wl,"endComposition");function YT(i,e){if(!i.dom.parentNode)return;let t=i.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),s=document.createRange();s.selectNodeContents(e),i.dom.blur(),n.removeAllRanges(),n.addRange(s),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),i.focus()},50)}c(YT,"captureCopy");const vo=en&&wi<15||Ir&&wD<604;Kt.copy=jt.cut=(i,e)=>{let t=e,n=i.state.selection,s=t.type=="cut";if(n.empty)return;let r=vo?null:t.clipboardData,o=n.content(),{dom:a,text:l}=Nd(i,o);r?(t.preventDefault(),r.clearData(),r.setData("text/html",a.innerHTML),r.setData("text/plain",l)):YT(i,a),s&&i.dispatch(i.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function WT(i){return i.openStart==0&&i.openEnd==0&&i.content.childCount==1?i.content.firstChild:null}c(WT,"sliceSingleNode");function DT(i,e){if(!i.dom.parentNode)return;let t=i.input.shiftKey||i.state.selection.$from.parent.type.spec.code,n=i.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let s=i.input.shiftKey&&i.input.lastKeyCode!=45;setTimeout(()=>{i.focus(),n.parentNode&&n.parentNode.removeChild(n),t?Go(i,n.value,null,s,e):Go(i,n.textContent,n.innerHTML,s,e)},50)}c(DT,"capturePaste");function Go(i,e,t,n,s){let r=iE(i,e,t,n,i.state.selection.$from);if(i.someProp("handlePaste",l=>l(i,s,r||fe.empty)))return!0;if(!r)return!1;let o=WT(r),a=o?i.state.tr.replaceSelectionWith(o,n):i.state.tr.replaceSelection(r);return i.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}c(Go,"doPaste");function dE(i){let e=i.getData("text/plain")||i.getData("Text");if(e)return e;let t=i.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}c(dE,"getText");jt.paste=(i,e)=>{let t=e;if(i.composing&&!oi)return;let n=vo?null:t.clipboardData,s=i.input.shiftKey&&i.input.lastKeyCode!=45;n&&Go(i,dE(n),n.getData("text/html"),s,t)?t.preventDefault():DT(i,t)};class gE{static{c(this,"Dragging")}constructor(e,t,n){this.slice=e,this.move=t,this.node=n}}const TT=pn?"altKey":"ctrlKey";function pE(i,e){let t=i.someProp("dragCopies",n=>!n(e));return t??!e[TT]}c(pE,"dragMoves");Kt.dragstart=(i,e)=>{let t=e,n=i.input.mouseDown;if(n&&n.done(),!t.dataTransfer)return;let s=i.state.selection,r=s.empty?null:i.posAtCoords(kc(t)),o;if(!(r&&r.pos>=s.from&&r.pos<=(s instanceof Se?s.to-1:s.to))){if(n&&n.mightDrag)o=Se.create(i.state.doc,n.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let h=i.docView.nearestDesc(t.target,!0);h&&h.node.type.spec.draggable&&h!=i.docView&&(o=Se.create(i.state.doc,h.posBefore))}}let a=(o||i.state.selection).content(),{dom:l,text:A,slice:u}=Nd(i,a);(!t.dataTransfer.files.length||!Lt||Mb>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(vo?"Text":"text/html",l.innerHTML),t.dataTransfer.effectAllowed="copyMove",vo||t.dataTransfer.setData("text/plain",A),i.dragging=new gE(u,pE(i,t),o)};Kt.dragend=i=>{let e=i.dragging;window.setTimeout(()=>{i.dragging==e&&(i.dragging=null)},50)};jt.dragover=jt.dragenter=(i,e)=>e.preventDefault();jt.drop=(i,e)=>{let t=e,n=i.dragging;if(i.dragging=null,!t.dataTransfer)return;let s=i.posAtCoords(kc(t));if(!s)return;let r=i.state.doc.resolve(s.pos),o=n&&n.slice;o?i.someProp("transformPasted",p=>{o=p(o,i,!1)}):o=iE(i,dE(t.dataTransfer),vo?null:t.dataTransfer.getData("text/html"),!1,r);let a=!!(n&&pE(i,t));if(i.someProp("handleDrop",p=>p(i,t,o||fe.empty,a))){t.preventDefault();return}if(!o)return;t.preventDefault();let l=o?uD(i.state.doc,r.pos,o):r.pos;l==null&&(l=r.pos);let A=i.state.tr;if(a){let{node:p}=n;p?p.replace(A):A.deleteSelection()}let u=A.mapping.map(l),h=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,d=A.doc;if(h?A.replaceRangeWith(u,u,o.content.firstChild):A.replaceRange(u,u,o),A.doc.eq(d))return;let g=A.doc.resolve(u);if(h&&Se.isSelectable(o.content.firstChild)&&g.nodeAfter&&g.nodeAfter.sameMarkup(o.content.firstChild))A.setSelection(new Se(g));else{let p=A.mapping.map(l);A.mapping.maps[A.mapping.maps.length-1].forEach((f,m,y,v)=>p=v),A.setSelection(Sd(i,g,A.doc.resolve(p)))}i.focus(),i.dispatch(A.setMeta("uiEvent","drop"))};Kt.focus=i=>{i.input.lastFocus=Date.now(),i.focused||(i.domObserver.stop(),i.dom.classList.add("ProseMirror-focused"),i.domObserver.start(),i.focused=!0,setTimeout(()=>{i.docView&&i.hasFocus()&&!i.domObserver.currentSelection.eq(i.domSelectionRange())&&ci(i)},20))};Kt.blur=(i,e)=>{let t=e;i.focused&&(i.domObserver.stop(),i.dom.classList.remove("ProseMirror-focused"),i.domObserver.start(),t.relatedTarget&&i.dom.contains(t.relatedTarget)&&i.domObserver.currentSelection.clear(),i.focused=!1)};Kt.beforeinput=(i,e)=>{if(Lt&&oi&&e.inputType=="deleteContentBackward"){i.domObserver.flushSoon();let{domChangeCount:n}=i.input;setTimeout(()=>{if(i.input.domChangeCount!=n||(i.dom.blur(),i.focus(),i.someProp("handleKeyDown",r=>r(i,ss(8,"Backspace")))))return;let{$cursor:s}=i.state.selection;s&&s.pos>0&&i.dispatch(i.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let i in jt)Kt[i]=jt[i];function Ro(i,e){if(i==e)return!0;for(let t in i)if(i[t]!==e[t])return!1;for(let t in e)if(!(t in i))return!1;return!0}c(Ro,"compareObjs");class Zl{static{c(this,"WidgetType")}constructor(e,t){this.toDOM=e,this.spec=t||ds,this.side=this.spec.side||0}map(e,t,n,s){let{pos:r,deleted:o}=e.mapResult(t.from+s,this.side<0?-1:1);return o?null:new Sn(r-n,r-n,this)}valid(){return!0}eq(e){return this==e||e instanceof Zl&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ro(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ki{static{c(this,"InlineType")}constructor(e,t){this.attrs=e,this.spec=t||ds}map(e,t,n,s){let r=e.map(t.from+s,this.spec.inclusiveStart?-1:1)-n,o=e.map(t.to+s,this.spec.inclusiveEnd?1:-1)-n;return r>=o?null:new Sn(r,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof ki&&Ro(this.attrs,e.attrs)&&Ro(this.spec,e.spec)}static is(e){return e.type instanceof ki}destroy(){}}class kd{static{c(this,"NodeType")}constructor(e,t){this.attrs=e,this.spec=t||ds}map(e,t,n,s){let r=e.mapResult(t.from+s,1);if(r.deleted)return null;let o=e.mapResult(t.to+s,-1);return o.deleted||o.pos<=r.pos?null:new Sn(r.pos-n,o.pos-n,this)}valid(e,t){let{index:n,offset:s}=e.content.findIndex(t.from),r;return s==t.from&&!(r=e.child(n)).isText&&s+r.nodeSize==t.to}eq(e){return this==e||e instanceof kd&&Ro(this.attrs,e.attrs)&&Ro(this.spec,e.spec)}destroy(){}}class Sn{static{c(this,"Decoration")}constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new Sn(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new Sn(e,e,new Zl(t,n))}static inline(e,t,n,s){return new Sn(e,t,new ki(n,s))}static node(e,t,n,s){return new Sn(e,t,new kd(n,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof ki}get widget(){return this.type instanceof Zl}}const zs=[],ds={};class yt{static{c(this,"DecorationSet")}constructor(e,t){this.local=e.length?e:zs,this.children=t.length?t:zs}static create(e,t){return t.length?kl(t,e,0,ds):Tt}find(e,t,n){let s=[];return this.findInner(e??0,t??1e9,s,0,n),s}findInner(e,t,n,s,r){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=t&&a.to>=e&&(!r||r(a.spec))&&n.push(a.copy(a.from+s,a.to+s))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,t-a,n,s+a,r)}}map(e,t,n){return this==Tt||e.maps.length==0?this:this.mapInner(e,t,0,0,n||ds)}mapInner(e,t,n,s,r){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,n,s);l&&l.type.valid(t,l)?(o||(o=[])).push(l):r.onRemove&&r.onRemove(this.local[a].spec)}return this.children.length?FT(this.children,o||[],e,t,n,s,r):o?new yt(o.sort(gs),zs):Tt}add(e,t){return t.length?this==Tt?yt.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let s,r=0;e.forEach((a,l)=>{let A=l+n,u;if(u=mE(t,a,A)){for(s||(s=this.children.slice());r<s.length&&s[r]<l;)r+=3;s[r]==l?s[r+2]=s[r+2].addInner(a,u,A+1):s.splice(r,0,l,l+a.nodeSize,kl(u,a,A+1,ds)),r+=3}});let o=fE(r?CE(t):t,-n);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new yt(o.length?this.local.concat(o).sort(gs):this.local,s||this.children)}remove(e){return e.length==0||this==Tt?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,s=this.local;for(let r=0;r<n.length;r+=3){let o,a=n[r]+t,l=n[r+1]+t;for(let u=0,h;u<e.length;u++)(h=e[u])&&h.from>a&&h.to<l&&(e[u]=null,(o||(o=[])).push(h));if(!o)continue;n==this.children&&(n=this.children.slice());let A=n[r+2].removeInner(o,a+1);A!=Tt?n[r+2]=A:(n.splice(r,3),r-=3)}if(s.length){for(let r=0,o;r<e.length;r++)if(o=e[r])for(let a=0;a<s.length;a++)s[a].eq(o,t)&&(s==this.local&&(s=this.local.slice()),s.splice(a--,1))}return n==this.children&&s==this.local?this:s.length||n.length?new yt(s,n):Tt}forChild(e,t){if(this==Tt)return this;if(t.isLeaf)return yt.empty;let n,s;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(n=this.children[a+2]);break}let r=e+1,o=r+t.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>r&&l.type instanceof ki){let A=Math.max(r,l.from)-r,u=Math.min(o,l.to)-r;A<u&&(s||(s=[])).push(l.copy(A,u))}}if(s){let a=new yt(s.sort(gs),zs);return n?new yi([a,n]):a}return n||Tt}eq(e){if(this==e)return!0;if(!(e instanceof yt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return _d(this.localsInner(e))}localsInner(e){if(this==Tt)return zs;if(e.inlineContent||!this.local.some(ki.is))return this.local;let t=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof ki||t.push(this.local[n]);return t}forEachSet(e){e(this)}}yt.empty=new yt([],[]);yt.removeOverlap=_d;const Tt=yt.empty;class yi{static{c(this,"DecorationGroup")}constructor(e){this.members=e}map(e,t){const n=this.members.map(s=>s.map(e,t,ds));return yi.from(n)}forChild(e,t){if(t.isLeaf)return yt.empty;let n=[];for(let s=0;s<this.members.length;s++){let r=this.members[s].forChild(e,t);r!=Tt&&(r instanceof yi?n=n.concat(r.members):n.push(r))}return yi.from(n)}eq(e){if(!(e instanceof yi)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let s=0;s<this.members.length;s++){let r=this.members[s].localsInner(e);if(r.length)if(!t)t=r;else{n&&(t=t.slice(),n=!1);for(let o=0;o<r.length;o++)t.push(r[o])}}return t?_d(n?t:t.sort(gs)):zs}static from(e){switch(e.length){case 0:return Tt;case 1:return e[0];default:return new yi(e.every(t=>t instanceof yt)?e:e.reduce((t,n)=>t.concat(n instanceof yt?n:n.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function FT(i,e,t,n,s,r,o){let a=i.slice();for(let A=0,u=r;A<t.maps.length;A++){let h=0;t.maps[A].forEach((d,g,p,f)=>{let m=f-p-(g-d);for(let y=0;y<a.length;y+=3){let v=a[y+1];if(v<0||d>v+u-h)continue;let G=a[y]+u-h;g>=G?a[y+1]=d<=G?-2:-1:d>=u&&m&&(a[y]+=m,a[y+1]+=m)}h+=m}),u=t.maps[A].map(u,-1)}let l=!1;for(let A=0;A<a.length;A+=3)if(a[A+1]<0){if(a[A+1]==-2){l=!0,a[A+1]=-1;continue}let u=t.map(i[A]+r),h=u-s;if(h<0||h>=n.content.size){l=!0;continue}let d=t.map(i[A+1]+r,-1),g=d-s,{index:p,offset:f}=n.content.findIndex(h),m=n.maybeChild(p);if(m&&f==h&&f+m.nodeSize==g){let y=a[A+2].mapInner(t,m,u+1,i[A]+r+1,o);y!=Tt?(a[A]=h,a[A+1]=g,a[A+2]=y):(a[A+1]=-2,l=!0)}else l=!0}if(l){let A=xT(a,i,e,t,s,r,o),u=kl(A,n,0,o);e=u.local;for(let h=0;h<a.length;h+=3)a[h+1]<0&&(a.splice(h,3),h-=3);for(let h=0,d=0;h<u.children.length;h+=3){let g=u.children[h];for(;d<a.length&&a[d]<g;)d+=3;a.splice(d,0,u.children[h],u.children[h+1],u.children[h+2])}}return new yt(e.sort(gs),a)}c(FT,"mapChildren");function fE(i,e){if(!e||!i.length)return i;let t=[];for(let n=0;n<i.length;n++){let s=i[n];t.push(new Sn(s.from+e,s.to+e,s.type))}return t}c(fE,"moveSpans");function xT(i,e,t,n,s,r,o){function a(l,A){for(let u=0;u<l.local.length;u++){let h=l.local[u].map(n,s,A);h?t.push(h):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+A+1)}c(a,"gather");for(let l=0;l<i.length;l+=3)i[l+1]==-1&&a(i[l+2],e[l]+r+1);return t}c(xT,"mapAndGatherRemainingDecorations");function mE(i,e,t){if(e.isLeaf)return null;let n=t+e.nodeSize,s=null;for(let r=0,o;r<i.length;r++)(o=i[r])&&o.from>t&&o.to<n&&((s||(s=[])).push(o),i[r]=null);return s}c(mE,"takeSpansForNode");function CE(i){let e=[];for(let t=0;t<i.length;t++)i[t]!=null&&e.push(i[t]);return e}c(CE,"withoutNulls");function kl(i,e,t,n){let s=[],r=!1;e.forEach((a,l)=>{let A=mE(i,a,l+t);if(A){r=!0;let u=kl(A,a,t+l+1,n);u!=Tt&&s.push(l,l+a.nodeSize,u)}});let o=fE(r?CE(i):i,-t).sort(gs);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(n.onRemove&&n.onRemove(o[a].spec),o.splice(a--,1));return o.length||s.length?new yt(o,s):Tt}c(kl,"buildTree");function gs(i,e){return i.from-e.from||i.to-e.to}c(gs,"byPos");function _d(i){let e=i;for(let t=0;t<e.length-1;t++){let n=e[t];if(n.from!=n.to)for(let s=t+1;s<e.length;s++){let r=e[s];if(r.from==n.from){r.to!=n.to&&(e==i&&(e=i.slice()),e[s]=r.copy(r.from,n.to),Wf(e,s+1,r.copy(n.to,r.to)));continue}else{r.from<n.to&&(e==i&&(e=i.slice()),e[t]=n.copy(n.from,r.from),Wf(e,s,n.copy(r.from,n.to)));break}}}return e}c(_d,"removeOverlap");function Wf(i,e,t){for(;e<i.length&&gs(t,i[e])>0;)e++;i.splice(e,0,t)}c(Wf,"insertAhead");function HA(i){let e=[];return i.someProp("decorations",t=>{let n=t(i.state);n&&n!=Tt&&e.push(n)}),i.cursorWrapper&&e.push(yt.create(i.state.doc,[i.cursorWrapper.deco])),yi.from(e)}c(HA,"viewDecorations");const LT={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},MT=en&&wi<=11;class VT{static{c(this,"SelectionState")}constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class OT{static{c(this,"DOMObserver")}constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new VT,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let s=0;s<n.length;s++)this.queue.push(n[s]);en&&wi<=11&&n.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),MT&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,LT)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Sf(this.view)){if(this.suppressingSelectionUpdates)return ci(this.view);if(en&&wi<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Gs(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,n;for(let r=e.focusNode;r;r=Cr(r))t.add(r);for(let r=e.anchorNode;r;r=Cr(r))if(t.has(r)){n=r;break}let s=n&&this.view.docView.nearestDesc(n);if(s&&s.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let n=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&Sf(e)&&!this.ignoreSelectionChange(n),r=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<t.length;u++){let h=this.registerMutation(t[u],l);h&&(r=r<0?h.from:Math.min(h.from,r),o=o<0?h.to:Math.max(h.to,o),h.typeOver&&(a=!0))}if(Cn&&l.length){let u=l.filter(h=>h.nodeName=="BR");if(u.length==2){let[h,d]=u;h.parentNode&&h.parentNode.parentNode==d.parentNode?d.remove():h.remove()}else{let{focusNode:h}=this.currentSelection;for(let d of u){let g=d.parentNode;g&&g.nodeName=="LI"&&(!h||XT(e,h)!=g)&&d.remove()}}}let A=null;r<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&wc(n)&&(A=Rd(e))&&A.eq(Fe.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,ci(e),this.currentSelection.set(n),e.scrollToSelection()):(r>-1||s)&&(r>-1&&(e.docView.markDirty(r,o),PT(e)),this.handleDOMChange(r,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||ci(e),this.currentSelection.set(n))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(n==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let h=e.addedNodes[u];t.push(h),h.nodeType==3&&(this.lastChangedTextNode=h)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let s=e.previousSibling,r=e.nextSibling;if(en&&wi<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:h,nextSibling:d}=e.addedNodes[u];(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(s=h),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(r=d)}let o=s&&s.parentNode==e.target?wt(s)+1:0,a=n.localPosFromDOM(e.target,o,-1),l=r&&r.parentNode==e.target?wt(r):e.target.childNodes.length,A=n.localPosFromDOM(e.target,l,1);return{from:a,to:A}}else return e.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Df=new WeakMap,Tf=!1;function PT(i){if(!Df.has(i)&&(Df.set(i,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(i.dom).whiteSpace)!==-1)){if(i.requiresGeckoHackNode=Cn,Tf)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Tf=!0}}c(PT,"checkCSS");function Ff(i,e){let t=e.startContainer,n=e.startOffset,s=e.endContainer,r=e.endOffset,o=i.domAtPos(i.state.selection.anchor);return Gs(o.node,o.offset,s,r)&&([t,n,s,r]=[s,r,t,n]),{anchorNode:t,anchorOffset:n,focusNode:s,focusOffset:r}}c(Ff,"rangeToSelectionRange");function HT(i,e){if(e.getComposedRanges){let s=e.getComposedRanges(i.root)[0];if(s)return Ff(i,s)}let t;function n(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return c(n,"read"),i.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),i.dom.removeEventListener("beforeinput",n,!0),t?Ff(i,t):null}c(HT,"safariShadowSelectionRange");function XT(i,e){for(let t=e.parentNode;t&&t!=i.dom;t=t.parentNode){let n=i.docView.nearestDesc(t,!0);if(n&&n.node.isBlock)return t}return null}c(XT,"blockParent");function zT(i,e,t){let{node:n,fromOffset:s,toOffset:r,from:o,to:a}=i.docView.parseRange(e,t),l=i.domSelectionRange(),A,u=l.anchorNode;if(u&&i.dom.contains(u.nodeType==1?u:u.parentNode)&&(A=[{node:u,offset:l.anchorOffset}],wc(l)||A.push({node:l.focusNode,offset:l.focusOffset})),Lt&&i.input.lastKeyCode===8)for(let m=r;m>s;m--){let y=n.childNodes[m-1],v=y.pmViewDesc;if(y.nodeName=="BR"&&!v){r=m;break}if(!v||v.size)break}let h=i.state.doc,d=i.someProp("domParser")||Eb.fromSchema(i.state.schema),g=h.resolve(o),p=null,f=d.parse(n,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:s,to:r,preserveWhitespace:g.parent.type.whitespace=="pre"?"full":!0,findPositions:A,ruleFromNode:JT,context:g});if(A&&A[0].pos!=null){let m=A[0].pos,y=A[1]&&A[1].pos;y==null&&(y=m),p={anchor:m+o,head:y+o}}return{doc:f,sel:p,from:o,to:a}}c(zT,"parseBetween");function JT(i){let e=i.pmViewDesc;if(e)return e.parseRule();if(i.nodeName=="BR"&&i.parentNode){if(Ut&&/^(ul|ol)$/i.test(i.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(i.parentNode.lastChild==i||Ut&&/^(tr|table)$/i.test(i.parentNode.nodeName))return{ignore:!0}}else if(i.nodeName=="IMG"&&i.getAttribute("mark-placeholder"))return{ignore:!0};return null}c(JT,"ruleFromNode");const UT=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function KT(i,e,t,n,s){let r=i.input.compositionPendingChanges||(i.composing?i.input.compositionID:0);if(i.input.compositionPendingChanges=0,e<0){let V=i.input.lastSelectionTime>Date.now()-50?i.input.lastSelectionOrigin:null,K=Rd(i,V);if(K&&!i.state.selection.eq(K)){if(Lt&&oi&&i.input.lastKeyCode===13&&Date.now()-100<i.input.lastKeyCodeTime&&i.someProp("handleKeyDown",Ce=>Ce(i,ss(13,"Enter"))))return;let j=i.state.tr.setSelection(K);V=="pointer"?j.setMeta("pointer",!0):V=="key"&&j.scrollIntoView(),r&&j.setMeta("composition",r),i.dispatch(j)}return}let o=i.state.doc.resolve(e),a=o.sharedDepth(t);e=o.before(a+1),t=i.state.doc.resolve(t).after(a+1);let l=i.state.selection,A=zT(i,e,t),u=i.state.doc,h=u.slice(A.from,A.to),d,g;i.input.lastKeyCode===8&&Date.now()-100<i.input.lastKeyCodeTime?(d=i.state.selection.to,g="end"):(d=i.state.selection.from,g="start"),i.input.lastKeyCode=null;let p=$T(h.content,A.doc.content,A.from,d,g);if(p&&i.input.domChangeCount++,(Ir&&i.input.lastIOSEnter>Date.now()-225||oi)&&s.some(V=>V.nodeType==1&&!UT.test(V.nodeName))&&(!p||p.endA>=p.endB)&&i.someProp("handleKeyDown",V=>V(i,ss(13,"Enter")))){i.input.lastIOSEnter=0;return}if(!p)if(n&&l instanceof Xe&&!l.empty&&l.$head.sameParent(l.$anchor)&&!i.composing&&!(A.sel&&A.sel.anchor!=A.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(A.sel){let V=xf(i,i.state.doc,A.sel);if(V&&!V.eq(i.state.selection)){let K=i.state.tr.setSelection(V);r&&K.setMeta("composition",r),i.dispatch(K)}}return}i.state.selection.from<i.state.selection.to&&p.start==p.endB&&i.state.selection instanceof Xe&&(p.start>i.state.selection.from&&p.start<=i.state.selection.from+2&&i.state.selection.from>=A.from?p.start=i.state.selection.from:p.endA<i.state.selection.to&&p.endA>=i.state.selection.to-2&&i.state.selection.to<=A.to&&(p.endB+=i.state.selection.to-p.endA,p.endA=i.state.selection.to)),en&&wi<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>A.from&&A.doc.textBetween(p.start-A.from-1,p.start-A.from+1)=="  "&&(p.start--,p.endA--,p.endB--);let f=A.doc.resolveNoCache(p.start-A.from),m=A.doc.resolveNoCache(p.endB-A.from),y=u.resolve(p.start),v=f.sameParent(m)&&f.parent.inlineContent&&y.end()>=p.endA,G;if((Ir&&i.input.lastIOSEnter>Date.now()-225&&(!v||s.some(V=>V.nodeName=="DIV"||V.nodeName=="P"))||!v&&f.pos<A.doc.content.size&&(!f.sameParent(m)||!f.parent.inlineContent)&&!/\S/.test(A.doc.textBetween(f.pos,m.pos,"",""))&&(G=Fe.findFrom(A.doc.resolve(f.pos+1),1,!0))&&G.head>f.pos)&&i.someProp("handleKeyDown",V=>V(i,ss(13,"Enter")))){i.input.lastIOSEnter=0;return}if(i.state.selection.anchor>p.start&&qT(u,p.start,p.endA,f,m)&&i.someProp("handleKeyDown",V=>V(i,ss(8,"Backspace")))){oi&&Lt&&i.domObserver.suppressSelectionUpdates();return}Lt&&p.endB==p.start&&(i.input.lastChromeDelete=Date.now()),oi&&!v&&f.start()!=m.start()&&m.parentOffset==0&&f.depth==m.depth&&A.sel&&A.sel.anchor==A.sel.head&&A.sel.head==p.endA&&(p.endB-=2,m=A.doc.resolveNoCache(p.endB-A.from),setTimeout(()=>{i.someProp("handleKeyDown",function(V){return V(i,ss(13,"Enter"))})},20));let R=p.start,Q=p.endA,S=c(V=>{let K=V||i.state.tr.replace(R,Q,A.doc.slice(p.start-A.from,p.endB-A.from));if(A.sel){let j=xf(i,K.doc,A.sel);j&&!(Lt&&i.composing&&j.empty&&(p.start!=p.endB||i.input.lastChromeDelete<Date.now()-100)&&(j.head==R||j.head==K.mapping.map(Q)-1)||en&&j.empty&&j.head==R)&&K.setSelection(j)}return r&&K.setMeta("composition",r),K.scrollIntoView()},"mkTr"),M;if(v){if(f.pos==m.pos){en&&wi<=11&&f.parentOffset==0&&(i.domObserver.suppressSelectionUpdates(),setTimeout(()=>ci(i),20));let V=S(i.state.tr.delete(R,Q)),K=u.resolve(p.start).marksAcross(u.resolve(p.endA));K&&V.ensureMarks(K),i.dispatch(V)}else if(p.endA==p.endB&&(M=jT(f.parent.content.cut(f.parentOffset,m.parentOffset),y.parent.content.cut(y.parentOffset,p.endA-y.start())))){let V=S(i.state.tr);M.type=="add"?V.addMark(R,Q,M.mark):V.removeMark(R,Q,M.mark),i.dispatch(V)}else if(f.parent.child(f.index()).isText&&f.index()==m.index()-(m.textOffset?0:1)){let V=f.parent.textBetween(f.parentOffset,m.parentOffset),K=c(()=>S(i.state.tr.insertText(V,R,Q)),"deflt");i.someProp("handleTextInput",j=>j(i,R,Q,V,K))||i.dispatch(K())}}else i.dispatch(S())}c(KT,"readDOMChange");function xf(i,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:Sd(i,e.resolve(t.anchor),e.resolve(t.head))}c(xf,"resolveSelection");function jT(i,e){let t=i.firstChild.marks,n=e.firstChild.marks,s=t,r=n,o,a,l;for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);for(let u=0;u<t.length;u++)r=t[u].removeFromSet(r);if(s.length==1&&r.length==0)a=s[0],o="add",l=c(u=>u.mark(a.addToSet(u.marks)),"update");else if(s.length==0&&r.length==1)a=r[0],o="remove",l=c(u=>u.mark(a.removeFromSet(u.marks)),"update");else return null;let A=[];for(let u=0;u<e.childCount;u++)A.push(l(e.child(u)));if(re.from(A).eq(i))return{mark:a,type:o}}c(jT,"isMarkChange");function qT(i,e,t,n,s){if(t-e<=s.pos-n.pos||XA(n,!0,!1)<s.pos)return!1;let r=i.resolve(e);if(!n.parent.isTextblock){let a=r.nodeAfter;return a!=null&&t==e+a.nodeSize}if(r.parentOffset<r.parent.content.size||!r.parent.isTextblock)return!1;let o=i.resolve(XA(r,!0,!0));return!o.parent.isTextblock||o.pos>t||XA(o,!0,!1)<t?!1:n.parent.content.cut(n.parentOffset).eq(o.parent.content)}c(qT,"looksLikeBackspace");function XA(i,e,t){let n=i.depth,s=e?i.end():i.pos;for(;n>0&&(e||i.indexAfter(n)==i.node(n).childCount);)n--,s++,e=!1;if(t){let r=i.node(n).maybeChild(i.indexAfter(n));for(;r&&!r.isLeaf;)r=r.firstChild,s++}return s}c(XA,"skipClosingAndOpening");function $T(i,e,t,n,s){let r=i.findDiffStart(e,t);if(r==null)return null;let{a:o,b:a}=i.findDiffEnd(e,t+i.size,t+e.size);if(s=="end"){let l=Math.max(0,r-Math.min(o,a));n-=o+l-r}if(o<r&&i.size<e.size){let l=n<=r&&n>=o?r-n:0;r-=l,r&&r<e.size&&Lf(e.textBetween(r-1,r+1))&&(r+=l?1:-1),a=r+(a-o),o=r}else if(a<r){let l=n<=r&&n>=a?r-n:0;r-=l,r&&r<i.size&&Lf(i.textBetween(r-1,r+1))&&(r+=l?1:-1),o=r+(o-a),a=r}return{start:r,endA:o,endB:a}}c($T,"findDiff");function Lf(i){if(i.length!=2)return!1;let e=i.charCodeAt(0),t=i.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}c(Lf,"isSurrogatePair");class IE{static{c(this,"EditorView")}constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new CT,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Hf),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Of(this),Vf(this),this.nodeViews=Pf(this),this.docView=bf(this.state.doc,Mf(this),HA(this),this.dom,this),this.domObserver=new OT(this,(n,s,r,o)=>KT(this,n,s,r,o)),this.domObserver.start(),IT(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&ju(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Hf),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let n in this._props)t[n]=this._props[n];t.state=this.state;for(let n in e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var n;let s=this.state,r=!1,o=!1;e.storedMarks&&this.composing&&(hE(this),o=!0),this.state=e;let a=s.plugins!=e.plugins||this._props.plugins!=t.plugins;if(a||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let g=Pf(this);tF(g,this.nodeViews)&&(this.nodeViews=g,r=!0)}(a||t.handleDOMEvents!=this._props.handleDOMEvents)&&ju(this),this.editable=Of(this),Vf(this);let l=HA(this),A=Mf(this),u=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",h=r||!this.docView.matchesNode(e.doc,A,l);(h||!e.selection.eq(s.selection))&&(o=!0);let d=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&_D(this);if(o){this.domObserver.stop();let g=h&&(en||Lt)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&eF(s.selection,e.selection);if(h){let p=Lt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=kT(this)),(r||!this.docView.update(e.doc,A,l,this))&&(this.docView.updateOuterDeco(A),this.docView.destroy(),this.docView=bf(e.doc,A,l,this.dom,this)),p&&!this.trackWrites&&(g=!0)}g||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&iT(this))?ci(this,g):(eE(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((n=this.dragging)===null||n===void 0)&&n.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():d&&YD(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof Se){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&pf(this,t.getBoundingClientRect(),e)}else pf(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let n=this.directPlugins[t];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let n=this.state.plugins[t];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}}updateDraggedNode(e,t){let n=e.node,s=-1;if(this.state.doc.nodeAt(n.from)==n.node)s=n.from;else{let r=n.from+(this.state.doc.content.size-t.doc.content.size);(r>0&&this.state.doc.nodeAt(r))==n.node&&(s=r)}this.dragging=new gE(e.slice,e.move,s<0?void 0:Se.create(this.state.doc,s))}someProp(e,t){let n=this._props&&this._props[e],s;if(n!=null&&(s=t?t(n):n))return s;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(s=t?t(a):a))return s}let r=this.state.plugins;if(r)for(let o=0;o<r.length;o++){let a=r[o].props[e];if(a!=null&&(s=t?t(a):a))return s}}hasFocus(){if(en){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&WD(this.dom),ci(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return LD(this,e)}coordsAtPos(e,t=1){return Xb(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,n=-1){let s=this.docView.posFromDOM(e,t,n);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,t){return HD(this,t||this.state,e)}pasteHTML(e,t){return Go(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Go(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return Nd(this,e)}destroy(){this.docView&&(yT(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],HA(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,ED())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return ET(this,e)}domSelectionRange(){let e=this.domSelection();return e?Ut&&this.root.nodeType===11&&SD(this.dom.ownerDocument)==this.dom&&HT(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}IE.prototype.dispatch=function(i){let e=this._props.dispatchTransaction;e?e.call(this,i):this.updateState(this.state.apply(i))};function Mf(i){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(i.editable),i.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(i.state)),t)for(let n in t)n=="class"?e.class+=" "+t[n]:n=="style"?e.style=(e.style?e.style+";":"")+t[n]:!e[n]&&n!="contenteditable"&&n!="nodeName"&&(e[n]=String(t[n]))}),e.translate||(e.translate="no"),[Sn.node(0,i.state.doc.content.size,e)]}c(Mf,"computeDocDeco");function Vf(i){if(i.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),i.cursorWrapper={dom:e,deco:Sn.widget(i.state.selection.from,e,{raw:!0,marks:i.markCursor})}}else i.cursorWrapper=null}c(Vf,"updateCursorWrapper");function Of(i){return!i.someProp("editable",e=>e(i.state)===!1)}c(Of,"getEditable");function eF(i,e){let t=Math.min(i.$anchor.sharedDepth(i.head),e.$anchor.sharedDepth(e.head));return i.$anchor.start(t)!=e.$anchor.start(t)}c(eF,"selectionContextChanged");function Pf(i){let e=Object.create(null);function t(n){for(let s in n)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=n[s])}return c(t,"add"),i.someProp("nodeViews",t),i.someProp("markViews",t),e}c(Pf,"buildNodeViews");function tF(i,e){let t=0,n=0;for(let s in i){if(i[s]!=e[s])return!0;t++}for(let s in e)n++;return t!=n}c(tF,"changedNodeViews");function Hf(i){if(i.spec.state||i.spec.filterTransaction||i.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}c(Hf,"checkStateComponent");var _l=200,Bt=c(function(){},"RopeSequence");Bt.prototype.append=c(function(e){return e.length?(e=Bt.from(e),!this.length&&e||e.length<_l&&this.leafAppend(e)||this.length<_l&&e.leafPrepend(this)||this.appendInner(e)):this},"append");Bt.prototype.prepend=c(function(e){return e.length?Bt.from(e).append(this):this},"prepend");Bt.prototype.appendInner=c(function(e){return new nF(this,e)},"appendInner");Bt.prototype.slice=c(function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?Bt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},"slice");Bt.prototype.get=c(function(e){if(!(e<0||e>=this.length))return this.getInner(e)},"get");Bt.prototype.forEach=c(function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},"forEach");Bt.prototype.map=c(function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=this.length);var s=[];return this.forEach(function(r,o){return s.push(e(r,o))},t,n),s},"map");Bt.from=c(function(e){return e instanceof Bt?e:e&&e.length?new yE(e):Bt.empty},"from");var yE=function(i){function e(n){i.call(this),this.values=n}c(e,"Leaf"),i&&(e.__proto__=i),e.prototype=Object.create(i&&i.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=c(function(){return this.values},"flatten"),e.prototype.sliceInner=c(function(s,r){return s==0&&r==this.length?this:new e(this.values.slice(s,r))},"sliceInner"),e.prototype.getInner=c(function(s){return this.values[s]},"getInner"),e.prototype.forEachInner=c(function(s,r,o,a){for(var l=r;l<o;l++)if(s(this.values[l],a+l)===!1)return!1},"forEachInner"),e.prototype.forEachInvertedInner=c(function(s,r,o,a){for(var l=r-1;l>=o;l--)if(s(this.values[l],a+l)===!1)return!1},"forEachInvertedInner"),e.prototype.leafAppend=c(function(s){if(this.length+s.length<=_l)return new e(this.values.concat(s.flatten()))},"leafAppend"),e.prototype.leafPrepend=c(function(s){if(this.length+s.length<=_l)return new e(s.flatten().concat(this.values))},"leafPrepend"),t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(Bt);Bt.empty=new yE([]);var nF=function(i){function e(t,n){i.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return c(e,"Append"),i&&(e.__proto__=i),e.prototype=Object.create(i&&i.prototype),e.prototype.constructor=e,e.prototype.flatten=c(function(){return this.left.flatten().concat(this.right.flatten())},"flatten"),e.prototype.getInner=c(function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},"getInner"),e.prototype.forEachInner=c(function(n,s,r,o){var a=this.left.length;if(s<a&&this.left.forEachInner(n,s,Math.min(r,a),o)===!1||r>a&&this.right.forEachInner(n,Math.max(s-a,0),Math.min(this.length,r)-a,o+a)===!1)return!1},"forEachInner"),e.prototype.forEachInvertedInner=c(function(n,s,r,o){var a=this.left.length;if(s>a&&this.right.forEachInvertedInner(n,s-a,Math.max(r,a)-a,o+a)===!1||r<a&&this.left.forEachInvertedInner(n,Math.min(s,a),r,o)===!1)return!1},"forEachInvertedInner"),e.prototype.sliceInner=c(function(n,s){if(n==0&&s==this.length)return this;var r=this.left.length;return s<=r?this.left.slice(n,s):n>=r?this.right.slice(n-r,s-r):this.left.slice(n,r).append(this.right.slice(0,s-r))},"sliceInner"),e.prototype.leafAppend=c(function(n){var s=this.right.leafAppend(n);if(s)return new e(this.left,s)},"leafAppend"),e.prototype.leafPrepend=c(function(n){var s=this.left.leafPrepend(n);if(s)return new e(s,this.right)},"leafPrepend"),e.prototype.appendInner=c(function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},"appendInner"),e}(Bt);const iF=500;class Rn{static{c(this,"Branch")}constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let s,r;t&&(s=this.remapping(n,this.items.length),r=s.maps.length);let o=e.tr,a,l,A=[],u=[];return this.items.forEach((h,d)=>{if(!h.step){s||(s=this.remapping(n,d+1),r=s.maps.length),r--,u.push(h);return}if(s){u.push(new Fn(h.map));let g=h.step.map(s.slice(r)),p;g&&o.maybeStep(g).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],A.push(new Fn(p,void 0,void 0,A.length+u.length))),r--,p&&s.appendMap(p,r)}else o.maybeStep(h.step);if(h.selection)return a=s?h.selection.map(s.slice(r)):h.selection,l=new Rn(this.items.slice(0,n).append(u.reverse().concat(A)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,t,n,s){let r=[],o=this.eventCount,a=this.items,l=!s&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let h=e.steps[u].invert(e.docs[u]),d=new Fn(e.mapping.maps[u],h,t),g;(g=l&&l.merge(d))&&(d=g,u?r.pop():a=a.slice(0,a.length-1)),r.push(d),t&&(o++,t=void 0),s||(l=d)}let A=o-n.depth;return A>rF&&(a=sF(a,A),o-=A),new Rn(a.append(r),o)}remapping(e,t){let n=new Eo;return this.items.forEach((s,r)=>{let o=s.mirrorOffset!=null&&r-s.mirrorOffset>=e?n.maps.length-s.mirrorOffset:void 0;n.appendMap(s.map,o)},e,t),n}addMaps(e){return this.eventCount==0?this:new Rn(this.items.append(e.map(t=>new Fn(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],s=Math.max(0,this.items.length-t),r=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(d=>{d.selection&&a--},s);let l=t;this.items.forEach(d=>{let g=r.getMirror(--l);if(g==null)return;o=Math.min(o,g);let p=r.maps[g];if(d.step){let f=e.steps[g].invert(e.docs[g]),m=d.selection&&d.selection.map(r.slice(l+1,g));m&&a++,n.push(new Fn(p,f,m))}else n.push(new Fn(p))},s);let A=[];for(let d=t;d<o;d++)A.push(new Fn(r.maps[d]));let u=this.items.slice(0,s).append(A).append(n),h=new Rn(u,a);return h.emptyItemCount()>iF&&(h=h.compress(this.items.length-n.length)),h}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),n=t.maps.length,s=[],r=0;return this.items.forEach((o,a)=>{if(a>=e)s.push(o),o.selection&&r++;else if(o.step){let l=o.step.map(t.slice(n)),A=l&&l.getMap();if(n--,A&&t.appendMap(A,n),l){let u=o.selection&&o.selection.map(t.slice(n));u&&r++;let h=new Fn(A.invert(),l,u),d,g=s.length-1;(d=s.length&&s[g].merge(h))?s[g]=d:s.push(h)}}else o.map&&n--},this.items.length,0),new Rn(Bt.from(s.reverse()),r)}}Rn.empty=new Rn(Bt.empty,0);function sF(i,e){let t;return i.forEach((n,s)=>{if(n.selection&&e--==0)return t=s,!1}),i.slice(t)}c(sF,"cutOffEvents");class Fn{static{c(this,"Item")}constructor(e,t,n,s){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Fn(t.getMap().invert(),t,this.selection)}}}class Ii{static{c(this,"HistoryState")}constructor(e,t,n,s,r){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=s,this.prevComposition=r}}const rF=20;function oF(i,e,t,n){let s=t.getMeta(ps),r;if(s)return s.historyState;t.getMeta(cF)&&(i=new Ii(i.done,i.undone,null,0,-1));let o=t.getMeta("appendedTransaction");if(t.steps.length==0)return i;if(o&&o.getMeta(ps))return o.getMeta(ps).redo?new Ii(i.done.addTransform(t,void 0,n,Ja(e)),i.undone,Xf(t.mapping.maps),i.prevTime,i.prevComposition):new Ii(i.done,i.undone.addTransform(t,void 0,n,Ja(e)),null,i.prevTime,i.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=t.getMeta("composition"),l=i.prevTime==0||!o&&i.prevComposition!=a&&(i.prevTime<(t.time||0)-n.newGroupDelay||!aF(t,i.prevRanges)),A=o?zA(i.prevRanges,t.mapping):Xf(t.mapping.maps);return new Ii(i.done.addTransform(t,l?e.selection.getBookmark():void 0,n,Ja(e)),Rn.empty,A,t.time,a??i.prevComposition)}else return(r=t.getMeta("rebased"))?new Ii(i.done.rebased(t,r),i.undone.rebased(t,r),zA(i.prevRanges,t.mapping),i.prevTime,i.prevComposition):new Ii(i.done.addMaps(t.mapping.maps),i.undone.addMaps(t.mapping.maps),zA(i.prevRanges,t.mapping),i.prevTime,i.prevComposition)}c(oF,"applyTransaction");function aF(i,e){if(!e)return!1;if(!i.docChanged)return!0;let t=!1;return i.mapping.maps[0].forEach((n,s)=>{for(let r=0;r<e.length;r+=2)n<=e[r+1]&&s>=e[r]&&(t=!0)}),t}c(aF,"isAdjacentTo");function Xf(i){let e=[];for(let t=i.length-1;t>=0&&e.length==0;t--)i[t].forEach((n,s,r,o)=>e.push(r,o));return e}c(Xf,"rangesFor");function zA(i,e){if(!i)return null;let t=[];for(let n=0;n<i.length;n+=2){let s=e.map(i[n],1),r=e.map(i[n+1],-1);s<=r&&t.push(s,r)}return t}c(zA,"mapRanges");function lF(i,e,t){let n=Ja(e),s=ps.get(e).spec.config,r=(t?i.undone:i.done).popEvent(e,n);if(!r)return null;let o=r.selection.resolve(r.transform.doc),a=(t?i.done:i.undone).addTransform(r.transform,e.selection.getBookmark(),s,n),l=new Ii(t?a:r.remaining,t?r.remaining:a,null,0,-1);return r.transform.setSelection(o).setMeta(ps,{redo:t,historyState:l})}c(lF,"histTransaction");let JA=!1,zf=null;function Ja(i){let e=i.plugins;if(zf!=e){JA=!1,zf=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){JA=!0;break}}return JA}c(Ja,"mustPreserveItems");const ps=new xb("history"),cF=new xb("closeHistory");function AF(i={}){return i={depth:i.depth||100,newGroupDelay:i.newGroupDelay||500},new vd({key:ps,state:{init(){return new Ii(Rn.empty,Rn.empty,null,0,-1)},apply(e,t,n){return oF(t,n,e,i)}},config:i,props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,s=n=="historyUndo"?EE:n=="historyRedo"?BE:null;return s?(t.preventDefault(),s(e.state,e.dispatch)):!1}}}})}c(AF,"history");function bE(i,e){return(t,n)=>{let s=ps.getState(t);if(!s||(i?s.undone:s.done).eventCount==0)return!1;if(n){let r=lF(s,t,i);r&&n(e?r.scrollIntoView():r)}return!0}}c(bE,"buildCommand");const EE=bE(!1,!0),BE=bE(!0,!0);var Mi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Yl={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},uF=typeof navigator<"u"&&/Mac/.test(navigator.platform),hF=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Zt=0;Zt<10;Zt++)Mi[48+Zt]=Mi[96+Zt]=String(Zt);for(var Zt=1;Zt<=24;Zt++)Mi[Zt+111]="F"+Zt;for(var Zt=65;Zt<=90;Zt++)Mi[Zt]=String.fromCharCode(Zt+32),Yl[Zt]=String.fromCharCode(Zt);for(var UA in Mi)Yl.hasOwnProperty(UA)||(Yl[UA]=Mi[UA]);function dF(i){var e=uF&&i.metaKey&&i.shiftKey&&!i.ctrlKey&&!i.altKey||hF&&i.shiftKey&&i.key&&i.key.length==1||i.key=="Unidentified",t=!e&&i.key||(i.shiftKey?Yl:Mi)[i.keyCode]||i.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}c(dF,"keyName");const gF=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),pF=typeof navigator<"u"&&/Win/.test(navigator.platform);function fF(i){let e=i.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let n,s,r,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))r=!0;else if(/^mod$/i.test(l))gF?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+l)}return n&&(t="Alt-"+t),s&&(t="Ctrl-"+t),o&&(t="Meta-"+t),r&&(t="Shift-"+t),t}c(fF,"normalizeKeyName");function mF(i){let e=Object.create(null);for(let t in i)e[fF(t)]=i[t];return e}c(mF,"normalize");function KA(i,e,t=!0){return e.altKey&&(i="Alt-"+i),e.ctrlKey&&(i="Ctrl-"+i),e.metaKey&&(i="Meta-"+i),t&&e.shiftKey&&(i="Shift-"+i),i}c(KA,"modifiers");function Jf(i){return new vd({props:{handleKeyDown:CF(i)}})}c(Jf,"keymap");function CF(i){let e=mF(i);return function(t,n){let s=dF(n),r,o=e[KA(s,n)];if(o&&o(t.state,t.dispatch,t))return!0;if(s.length==1&&s!=" "){if(n.shiftKey){let a=e[KA(s,n,!1)];if(a&&a(t.state,t.dispatch,t))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(pF&&n.ctrlKey&&n.altKey)&&(r=Mi[n.keyCode])&&r!=s){let a=e[KA(r,n)];if(a&&a(t.state,t.dispatch,t))return!0}}return!1}}c(CF,"keydownHandler");const vE=c((i,e)=>i.selection.empty?!1:(e&&e(i.tr.deleteSelection().scrollIntoView()),!0),"deleteSelection");function IF(i,e){let{$cursor:t}=i.selection;return!t||(e?!e.endOfTextblock("backward",i):t.parentOffset>0)?null:t}c(IF,"atBlockStart");const yF=c((i,e,t)=>{let n=IF(i,t);if(!n)return!1;let s=GE(n);if(!s){let o=n.blockRange(),a=o&&bd(o);return a==null?!1:(e&&e(i.tr.lift(o,a).scrollIntoView()),!0)}let r=s.nodeBefore;if(ZE(i,s,e,-1))return!0;if(n.parent.content.size==0&&(yr(r,"end")||Se.isSelectable(r)))for(let o=n.depth;;o--){let a=Ed(i.doc,n.before(o),n.after(o),fe.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=i.tr.step(a);l.setSelection(yr(r,"end")?Fe.findFrom(l.doc.resolve(l.mapping.map(s.pos,-1)),-1):Se.create(l.doc,s.pos-r.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||n.node(o-1).childCount>1)break}return r.isAtom&&s.depth==n.depth-1?(e&&e(i.tr.delete(s.pos-r.nodeSize,s.pos).scrollIntoView()),!0):!1},"joinBackward");function yr(i,e,t=!1){for(let n=i;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(t&&n.childCount!=1)return!1}return!1}c(yr,"textblockAt");const bF=c((i,e,t)=>{let{$head:n,empty:s}=i.selection,r=n;if(!s)return!1;if(n.parent.isTextblock){if(t?!t.endOfTextblock("backward",i):n.parentOffset>0)return!1;r=GE(n)}let o=r&&r.nodeBefore;return!o||!Se.isSelectable(o)?!1:(e&&e(i.tr.setSelection(Se.create(i.doc,r.pos-o.nodeSize)).scrollIntoView()),!0)},"selectNodeBackward");function GE(i){if(!i.parent.type.spec.isolating)for(let e=i.depth-1;e>=0;e--){if(i.index(e)>0)return i.doc.resolve(i.before(e+1));if(i.node(e).type.spec.isolating)break}return null}c(GE,"findCutBefore");function EF(i,e){let{$cursor:t}=i.selection;return!t||(e?!e.endOfTextblock("forward",i):t.parentOffset<t.parent.content.size)?null:t}c(EF,"atBlockEnd");const BF=c((i,e,t)=>{let n=EF(i,t);if(!n)return!1;let s=RE(n);if(!s)return!1;let r=s.nodeAfter;if(ZE(i,s,e,1))return!0;if(n.parent.content.size==0&&(yr(r,"start")||Se.isSelectable(r))){let o=Ed(i.doc,n.before(),n.after(),fe.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=i.tr.step(o);a.setSelection(yr(r,"start")?Fe.findFrom(a.doc.resolve(a.mapping.map(s.pos)),1):Se.create(a.doc,a.mapping.map(s.pos))),e(a.scrollIntoView())}return!0}}return r.isAtom&&s.depth==n.depth-1?(e&&e(i.tr.delete(s.pos,s.pos+r.nodeSize).scrollIntoView()),!0):!1},"joinForward"),vF=c((i,e,t)=>{let{$head:n,empty:s}=i.selection,r=n;if(!s)return!1;if(n.parent.isTextblock){if(t?!t.endOfTextblock("forward",i):n.parentOffset<n.parent.content.size)return!1;r=RE(n)}let o=r&&r.nodeAfter;return!o||!Se.isSelectable(o)?!1:(e&&e(i.tr.setSelection(Se.create(i.doc,r.pos)).scrollIntoView()),!0)},"selectNodeForward");function RE(i){if(!i.parent.type.spec.isolating)for(let e=i.depth-1;e>=0;e--){let t=i.node(e);if(i.index(e)+1<t.childCount)return i.doc.resolve(i.after(e+1));if(t.type.spec.isolating)break}return null}c(RE,"findCutAfter");const SE=c((i,e)=>{let{$head:t,$anchor:n}=i.selection;return!t.parent.type.spec.code||!t.sameParent(n)?!1:(e&&e(i.tr.insertText(`
`).scrollIntoView()),!0)},"newlineInCode");function Yd(i){for(let e=0;e<i.edgeCount;e++){let{type:t}=i.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}c(Yd,"defaultBlockAt");const GF=c((i,e)=>{let{$head:t,$anchor:n}=i.selection;if(!t.parent.type.spec.code||!t.sameParent(n))return!1;let s=t.node(-1),r=t.indexAfter(-1),o=Yd(s.contentMatchAt(r));if(!o||!s.canReplaceWith(r,r,o))return!1;if(e){let a=t.after(),l=i.tr.replaceWith(a,a,o.createAndFill());l.setSelection(Fe.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},"exitCode"),NE=c((i,e)=>{let t=i.selection,{$from:n,$to:s}=t;if(t instanceof An||n.parent.inlineContent||s.parent.inlineContent)return!1;let r=Yd(s.parent.contentMatchAt(s.indexAfter()));if(!r||!r.isTextblock)return!1;if(e){let o=(!n.parentOffset&&s.index()<s.parent.childCount?n:s).pos,a=i.tr.insert(o,r.createAndFill());a.setSelection(Xe.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},"createParagraphNear"),QE=c((i,e)=>{let{$cursor:t}=i.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let r=t.before();if(za(i.doc,r))return e&&e(i.tr.split(r).scrollIntoView()),!0}let n=t.blockRange(),s=n&&bd(n);return s==null?!1:(e&&e(i.tr.lift(n,s).scrollIntoView()),!0)},"liftEmptyBlock");function wE(i){return(e,t)=>{let{$from:n,$to:s}=e.selection;if(e.selection instanceof Se&&e.selection.node.isBlock)return!n.parentOffset||!za(e.doc,n.pos)?!1:(t&&t(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let r=[],o,a,l=!1,A=!1;for(let g=n.depth;;g--)if(n.node(g).isBlock){l=n.end(g)==n.pos+(n.depth-g),A=n.start(g)==n.pos-(n.depth-g),a=Yd(n.node(g-1).contentMatchAt(n.indexAfter(g-1))),r.unshift(l&&a?{type:a}:null),o=g;break}else{if(g==1)return!1;r.unshift(null)}let u=e.tr;(e.selection instanceof Xe||e.selection instanceof An)&&u.deleteSelection();let h=u.mapping.map(n.pos),d=za(u.doc,h,r.length,r);if(d||(r[0]=a?{type:a}:null,d=za(u.doc,h,r.length,r)),!d)return!1;if(u.split(h,r.length,r),!l&&A&&n.node(o).type!=a){let g=u.mapping.map(n.before(o)),p=u.doc.resolve(g);a&&n.node(o-1).canReplaceWith(p.index(),p.index()+1,a)&&u.setNodeMarkup(u.mapping.map(n.before(o)),a)}return t&&t(u.scrollIntoView()),!0}}c(wE,"splitBlockAs");const RF=wE(),SF=c((i,e)=>(e&&e(i.tr.setSelection(new An(i.doc))),!0),"selectAll");function NF(i,e,t){let n=e.nodeBefore,s=e.nodeAfter,r=e.index();return!n||!s||!n.type.compatibleContent(s.type)?!1:!n.content.size&&e.parent.canReplace(r-1,r)?(t&&t(i.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(r,r+1)||!(s.isTextblock||kb(i.doc,e.pos))?!1:(t&&t(i.tr.join(e.pos).scrollIntoView()),!0)}c(NF,"joinMaybeClear");function ZE(i,e,t,n){let s=e.nodeBefore,r=e.nodeAfter,o,a,l=s.type.spec.isolating||r.type.spec.isolating;if(!l&&NF(i,e,t))return!0;let A=!l&&e.parent.canReplace(e.index(),e.index()+1);if(A&&(o=(a=s.contentMatchAt(s.childCount)).findWrapping(r.type))&&a.matchType(o[0]||r.type).validEnd){if(t){let g=e.pos+r.nodeSize,p=re.empty;for(let y=o.length-1;y>=0;y--)p=re.from(o[y].create(null,p));p=re.from(s.copy(p));let f=i.tr.step(new cn(e.pos-1,g,e.pos,g,new fe(p,1,0),o.length,!0)),m=f.doc.resolve(g+2*o.length);m.nodeAfter&&m.nodeAfter.type==s.type&&kb(f.doc,m.pos)&&f.join(m.pos),t(f.scrollIntoView())}return!0}let u=r.type.spec.isolating||n>0&&l?null:Fe.findFrom(e,1),h=u&&u.$from.blockRange(u.$to),d=h&&bd(h);if(d!=null&&d>=e.depth)return t&&t(i.tr.lift(h,d).scrollIntoView()),!0;if(A&&yr(r,"start",!0)&&yr(s,"end")){let g=s,p=[];for(;p.push(g),!g.isTextblock;)g=g.lastChild;let f=r,m=1;for(;!f.isTextblock;f=f.firstChild)m++;if(g.canReplace(g.childCount,g.childCount,f.content)){if(t){let y=re.empty;for(let G=p.length-1;G>=0;G--)y=re.from(p[G].copy(y));let v=i.tr.step(new cn(e.pos-p.length,e.pos+r.nodeSize,e.pos+m,e.pos+r.nodeSize-m,new fe(y,p.length,0),0,!0));t(v.scrollIntoView())}return!0}}return!1}c(ZE,"deleteBarrier");function kE(i){return function(e,t){let n=e.selection,s=i<0?n.$from:n.$to,r=s.depth;for(;s.node(r).isInline;){if(!r)return!1;r--}return s.node(r).isTextblock?(t&&t(e.tr.setSelection(Xe.create(e.doc,i<0?s.start(r):s.end(r)))),!0):!1}}c(kE,"selectTextblockSide");const QF=kE(-1),wF=kE(1);function ZF(i,e=null){return function(t,n){let s=!1;for(let r=0;r<t.selection.ranges.length&&!s;r++){let{$from:{pos:o},$to:{pos:a}}=t.selection.ranges[r];t.doc.nodesBetween(o,a,(l,A)=>{if(s)return!1;if(!(!l.isTextblock||l.hasMarkup(i,e)))if(l.type==i)s=!0;else{let u=t.doc.resolve(A),h=u.index();s=u.parent.canReplaceWith(h,h+1,i)}})}if(!s)return!1;if(n){let r=t.tr;for(let o=0;o<t.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=t.selection.ranges[o];r.setBlockType(a,l,i,e)}n(r.scrollIntoView())}return!0}}c(ZF,"setBlockType");function kF(i,e,t,n){for(let s=0;s<e.length;s++){let{$from:r,$to:o}=e[s],a=r.depth==0?i.inlineContent&&i.type.allowsMarkType(t):!1;if(i.nodesBetween(r.pos,o.pos,(l,A)=>{if(a||!n&&l.isAtom&&l.isInline&&A>=r.pos&&A+l.nodeSize<=o.pos)return!1;a=l.inlineContent&&l.type.allowsMarkType(t)}),a)return!0}return!1}c(kF,"markApplies");function _F(i){let e=[];for(let t=0;t<i.length;t++){let{$from:n,$to:s}=i[t];n.doc.nodesBetween(n.pos,s.pos,(r,o)=>{if(r.isAtom&&r.content.size&&r.isInline&&o>=n.pos&&o+r.nodeSize<=s.pos)return o+1>n.pos&&e.push(new Mu(n,n.doc.resolve(o+1))),n=n.doc.resolve(o+1+r.content.size),!1}),n.pos<s.pos&&e.push(new Mu(n,s))}return e}c(_F,"removeInlineAtoms");function YF(i,e=null,t){let n=(t&&t.removeWhenPresent)!==!1,s=(t&&t.enterInlineAtoms)!==!1,r=!(t&&t.includeWhitespace);return function(o,a){let{empty:l,$cursor:A,ranges:u}=o.selection;if(l&&!A||!kF(o.doc,u,i,s))return!1;if(a)if(A)i.isInSet(o.storedMarks||A.marks())?a(o.tr.removeStoredMark(i)):a(o.tr.addStoredMark(i.create(e)));else{let h,d=o.tr;s||(u=_F(u)),n?h=!u.some(g=>o.doc.rangeHasMark(g.$from.pos,g.$to.pos,i)):h=!u.every(g=>{let p=!1;return d.doc.nodesBetween(g.$from.pos,g.$to.pos,(f,m,y)=>{if(p)return!1;p=!i.isInSet(f.marks)&&!!y&&y.type.allowsMarkType(i)&&!(f.isText&&/^\s*$/.test(f.textBetween(Math.max(0,g.$from.pos-m),Math.min(f.nodeSize,g.$to.pos-m))))}),!p});for(let g=0;g<u.length;g++){let{$from:p,$to:f}=u[g];if(!h)d.removeMark(p.pos,f.pos,i);else{let m=p.pos,y=f.pos,v=p.nodeAfter,G=f.nodeBefore,R=r&&v&&v.isText?/^\s*/.exec(v.text)[0].length:0,Q=r&&G&&G.isText?/\s*$/.exec(G.text)[0].length:0;m+R<y&&(m+=R,y-=Q),d.addMark(m,y,i.create(e))}}a(d.scrollIntoView())}return!0}}c(YF,"toggleMark");function _c(...i){return function(e,t,n){for(let s=0;s<i.length;s++)if(i[s](e,t,n))return!0;return!1}}c(_c,"chainCommands");let jA=_c(vE,yF,bF),Uf=_c(vE,BF,vF);const ii={Enter:_c(SE,NE,QE,RF),"Mod-Enter":GF,Backspace:jA,"Mod-Backspace":jA,"Shift-Backspace":jA,Delete:Uf,"Mod-Delete":Uf,"Mod-a":SF},_E={"Ctrl-h":ii.Backspace,"Alt-Backspace":ii["Mod-Backspace"],"Ctrl-d":ii.Delete,"Ctrl-Alt-Backspace":ii["Mod-Delete"],"Alt-Delete":ii["Mod-Delete"],"Alt-d":ii["Mod-Delete"],"Ctrl-a":QF,"Ctrl-e":wF};for(let i in ii)_E[i]=ii[i];const WF=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,DF=WF?_E:ii;function Yc(i){return typeof i!="string"?[!1,`NodeSpecName must be string but is typeof ${typeof i}.`]:i.length<1?[!1,`NodeSpecName must be at least 1 char long but name.length is ${i.length}. NodeSpecName: "${i}".`]:/^[a-zA-Z0-9_-]+$/.test(i)?[!0,null]:[!1,`NodeSpecName must only contain a-z, A-Z, 0-9, "-", and "_" but NodeSpecName is: "${i}".`]}c(Yc,"validateNodeSpecName");const YE=Yc,Wd=Yc,TF=Wt.createClass("AttrValidateTypeModel",["no-validation","number","string","boolean","null","undefined","application-specific"],"no-validation"),FF=ye.createClass("AttrValidateModel",["type",TF],["appSpecific",an],st.create(["type","appSpecific"],c(function({type:e,appSpecific:t}){e.value==="application-specific"?t.isEmpty&&(t.value=""):t.clear()},"checkValues"))),xF=ye.createClass("AttributeSpecModel",["default",qe],["validate",FF]),WE=Ue.createClass("AttributeSpecMapModel",xF,{validateKeyFn:Wd}),DE=ye.createClass("NodeSpecModel",["content",an],["marks",an],["group",an],["tag",an],["inline",ut],["atom",ut],["attrs",WE],["selectable",ys],["draggable",ut],["code",ut],["definingAsContext",ut],["definingForContent",ut],["isolating",ut],["linebreakReplacement",ut]),LF=ye.createClass("MarkSpecModel",["attrs",WE],["inclusive",ys],["excludes",an],["group",an],["tag",an],["spanning",ys],["code",ut]),MF=Ue.createClass("NodeSpecMapModel",DE,{validateKeyFn:Yc}),VF=Ue.createClass("MarkSpecMapModel",LF,{validateKeyFn:YE}),Kf=Ue.createClass("NodeSpecToTypeSpecMapModel",qe),jf=ye.createClass("ProseMirrorSchemaModel",["nodes",MF],["marks",VF]),OF=Wt.createClass("JSONTypeModel",["object","array","string","number","true","false","null"],"null"),TE=ye.createClass("JSONModel",["type",OF],["string",an],["number",f_],["object",ye.WITH_SELF_REFERENCE,i=>Ue.createClass("JSONMapModel",i,{ordering:Ue.ORDER.KEYS_ALPHA})],["array",ye.WITH_SELF_REFERENCE,i=>vt.createClass("JSONListModel",i)],st.create(["type","string","number","object","array"],c(function({type:e,...t}){e.value==="string"?t.string.isEmpty&&(t.string.value=""):e.value==="number"&&t.number.isEmpty&&(t.number.value=0);for(const[n,s]of Object.entries(t))if(e.value!==n)if(n==="string"||n==="number")s.clear();else if(n==="object")s.arraySplice(0,1/0);else if(n==="array")s.splice(0,1/0);else throw new Error(`NOT IMPLEMENTED don't know how to empty ${n}: ${s}`)},"checkValues2"))),FE=Ue.createClass("AttrsMapModel",TE,{validateKeyFn:Wd}),PF=ye.createClass("MarkModel",["typeKey",qe],["attrs",FE]),HF=vt.createClass("MarksListModel",PF),qu=ye.createClass("NodeModel",["typeKey",qe],["attrs",FE],["marks",HF],["text",an],["content",ye.WITH_SELF_REFERENCE,i=>vt.createClass("FragmentModel",i)]),XF=ks.createClass("TypeSpecRampModel",["typeSpec",Es],["editingTypeSpec",Va],["stylePatchesSource",Zu],["editingStylePatch",Va],["proseMirrorSchema",jf],["editingNodeSpecPath",Va],["nodeSpecToTypeSpec",Kf],["document",qu],st.create(["document","typeSpec","stylePatchesSource","proseMirrorSchema","nodeSpecToTypeSpec"],c(function({typeSpec:e,document:t,stylePatchesSource:n,proseMirrorSchema:s,nodeSpecToTypeSpec:r}){if(t.get("content").size===0&&e.get("children").size===0&&n.size===0)for(const[o,a,l]of[[qu,t,Mr.document],[Es,e,Mr.typeSpec],[Zu,n,Mr.stylePatchesSource],[jf,s,Mr.proseMirrorSchema],[Kf,r,Mr.nodeSpecToTypeSpec]]){const A=Object.assign({},Le,{format:Ol}),u=gC(o,a.dependencies,l,A);for(const[h,d]of u.entries())a.set(h,d)}},"initTypeSpec")));function Wl(i){const e=i.get("type").value;if(e==="true")return!0;if(e==="false")return!1;if(e==="null")return null;if(e==="string"||e==="number")return i.get(e).value;if(e==="array")return Array.from(i.get(e).value).map(Wl);if(e==="object")return Object.fromEntries(Array.from(i.get(e)).map(([t,n])=>[t,Wl(n)]));throw new Error(`NOT IMPLEMENTED don't know how to handle type "${e}"`)}c(Wl,"fromMetaModelJSON");function Dl(i,e={}){const t=TE.createPrimalDraft(e),n=t.get("type"),s=typeof i;if(i===!0)n.value="true";else if(i===!1)n.value="false";else if(i===null)n.value="null";else if(s==="string"||s==="number")n.value=s,t.get(s).value=i;else if(s==="object"&&Array.isArray(i))n.value="array",t.get("array").push(...i.map(r=>Dl(r,e)));else if(s==="object")n.value="object",t.get("object").push(...Object.entries(i).map(([r,o])=>[r,Dl(o,e)]));else throw new Error(`NOT IMPLEMENTED don't know how to handle value ${i.toString()}:${s}`);return t.metamorphose()}c(Dl,"toMetaModelJSON");function qA(i){const e=new Set(i),t=new Set;let n=null;for(const o of e){const a=parseFloat(o);isFinite(a)&&(t.has(a)||(t.add(a),(n===null||a>n)&&(n=a)))}let s=n===null?0:Math.ceil(n),r=`${s}`;for(;e.has(r);){do s+=1;while(t.has(s));r=`${s}`}return r}c(qA,"_uniqueKey");class zF extends me{static{c(this,"_BaseTreeEditor")}static TEMPLATE='<div class="tree_editor stage-manager_actors">(initial)</div>';constructor(e,t){super(e),this._dataTransferTypes=Object.freeze(Object.assign({},t)),this._itemElements=new Map,this._activePaths=new Set,this._removeDragIndicatorTimeoutId=null,[this.element,this._actorsElement]=this.initTemplate()}_onClickHandler(e){this._changeState(()=>{const t=this.getEntry("editingActor");!t.isEmpty&&t.value.equals(e)?t.clear():t.value=e})}initTemplate(){const e=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE),t=e.firstElementChild,n=e.querySelector(".stage-manager_actors");return this._insertElement(t),n.addEventListener("dragleave",this._dragleaveHandler.bind(this)),[t,n]}get DATA_TRANSFER_TYPES(){return this._dataTransferTypes}_dragstartHandler({path:e},t){const n=this.DATA_TRANSFER_TYPES.PATH;t.dataTransfer.setData(n,`${e}`),t.dataTransfer.setData("text/plain",`[TypeRoof ${n}: ${e}]`),t.currentTarget.classList.add("dragging"),t.dataTransfer.effectAllowed="all",t.dataTransfer.setDragImage(t.currentTarget.parentElement,0,0)}_dragendHandler(e,t){t.currentTarget.classList.remove("dragging")}_takeDragEventOrLeaveIt(e){const t=[this.DATA_TRANSFER_TYPES.PATH,this.DATA_TRANSFER_TYPES.CREATE];for(const n of t)if(e.dataTransfer.types.includes(n))return e.preventDefault(),e.stopPropagation(),[!0,n];return[!1,null]}_dragoverHandler(e,t){const[n,s]=this._takeDragEventOrLeaveIt(t);if(!n)return;t.dataTransfer.dropEffect=s===this.DATA_TRANSFER_TYPES.PATH?"move":"copy";const r=this._getDropTargetInsertPosition(e,t);this._setDropTargetIndicator(t.currentTarget,r)}_dragenterHandler(e,t){const[n,s]=this._takeDragEventOrLeaveIt(t);if(!n)return;t.dataTransfer.dropEffect=s===this.DATA_TRANSFER_TYPES.PATH?"move":"copy";const r=this._getDropTargetInsertPosition(e,t);this._setDropTargetIndicator(t.currentTarget,r)}_getDropTargetInsertPosition(e,t){if(e.isEmptyLayerContainer)return"insert";const{height:n,top:s}=t.currentTarget.getBoundingClientRect(),{clientY:r}=t,o=r-s,a=o/n,l=e.isEmptyLayerItem?.8:.5;return a<l?"before":"after"}_setDropTargetIndicator(e,t=null){if(this._removeDragIndicatorTimeoutId!==null){const{clearTimeout:a}=this._domTool.window;a(this._removeDragIndicatorTimeoutId),this._removeDragIndicatorTimeoutId=null}const n="drop_target_indicator-",s=`${n}marked`;for(const a of this._actorsElement.querySelectorAll(`.${s}`))for(const l of[...a.classList])l.startsWith(n)&&a.classList.remove(l);if(t===null)return;if(!["before","after","insert"].includes(t))throw new Error(`NOT IMPLEMENTED ${this} insert position "${t}".`);const[r,o]=t==="before"&&e.previousSibling?[e.previousSibling,"after"]:[e,t];r.classList.add(`${n}${o}`),r.classList.add(s)}_dragleaveHandler(e){if(!this._takeDragEventOrLeaveIt(e)[0])return;const{setTimeout:t}=this._domTool.window;this._removeDragIndicatorTimeoutId=t(this._setDropTargetIndicator.bind(this,e.currentTarget),100)}_dropHandler(e,t){const[n,s]=this._takeDragEventOrLeaveIt(t);if(!n)return;this._setDropTargetIndicator(t.currentTarget);const{path:r}=e,o=D.fromString(this.widgetBus.getExternalName("activeActors")),a=o.append(...r),l=this._getDropTargetInsertPosition(e,t);if(s===this.DATA_TRANSFER_TYPES.PATH){const A=t.dataTransfer.getData(this.DATA_TRANSFER_TYPES.PATH),u=o.appendString(A);return this._move(u,a,l)}else if(s===this.DATA_TRANSFER_TYPES.CREATE){const A=t.dataTransfer.getData(this.DATA_TRANSFER_TYPES.CREATE);return this._create(A,a,l)}}_create(e,t,n){return this._changeState(()=>{const s=n==="insert"?this.getEntry(t):this.getEntry(t.parent),r=this._createItem(e,s.dependencies),o=qA(s.keys()),a=[o,r];if(n==="insert"){s.push(a);return}const l=t.parts.at(-1),A=s.indexOfKey(l);if(n==="after")s.arraySplice(A+1,0,a);else if(n==="before")s.arraySplice(A,0,a);else throw new Error(`NOT IMPLEMENTED insert position "${n}".`)})}_move(e,t,n){if(!!e.isRootOf(t)){console.warn(`${this}._move can't move source into target as source path "${e}" is root of target path "${t}".`);return}return this._changeState(()=>{const r=n==="insert"?this.getEntry(t):this.getEntry(t.parent),o=this.getEntry(e.parent),a=e.parts.at(-1),l=o.get(a),A=[null,l];if(n==="insert"){const p=r.has(a)?qA(r.keys()):a;A[0]=p,r.push(A),o.delete(a);return}const u=t.parts.at(-1),h=r.indexOfKey(u),d=o.indexOfKey(a);if(r===o){if(d===h)return;let p;if(n==="after")p=h+1;else if(n==="before")p=h;else throw new Error(`NOT IMPLEMENTED ${this} insert position "${n}".`);d<h&&(p=p-1),A[0]=a,o.delete(a),r.arraySplice(p,0,A);return}const g=r.has(a)?qA(r.keys()):a;if(A[0]=g,o.delete(a),n==="after")r.arraySplice(h+1,0,A);else if(n==="before")r.arraySplice(h,0,A);else throw new Error(`NOT IMPLEMENTED insert position "${n}".`)})}_renderLayer(e,t,n=null){const s=this._domTool.createElement("ol");if(t.size===0){const r={path:e,isEmptyLayerContainer:!0,isEmptyLayerItem:!1};s.addEventListener("dragenter",this._dragenterHandler.bind(this,r)),s.addEventListener("dragover",this._dragoverHandler.bind(this,r)),s.addEventListener("drop",this._dropHandler.bind(this,r))}for(const[r,o]of t){const a=this._domTool.createElement("li"),l=e.append(r),A=this._domTool.createElement("span",{class:"drag_handle"},"✥"),u=this._isContainerItem(o),h=u?Je(o,this._containerRelPathToChildren).size===0:!1,d={path:l,isEmptyLayerContainer:!1,isEmptyLayerItem:h};n&&(a.classList.add(n.counter%2?"even-row":"odd-row"),a.style.setProperty("--structural-depth",`${n.depth}`),n.counter+=1),A.setAttribute("draggable","true"),A.addEventListener("dragstart",this._dragstartHandler.bind(this,d)),A.addEventListener("dragend",this._dragendHandler.bind(this,d)),a.addEventListener("dragenter",this._dragenterHandler.bind(this,d)),a.addEventListener("dragover",this._dragoverHandler.bind(this,d)),a.addEventListener("drop",this._dropHandler.bind(this,d)),a.append(A,...this._renderActor(l,o,n)),s.append(a),this._itemElements.set(l.toString(),a)}return[s]}_renderActor(e,t,n=null){const s=this._domTool.createFragmentFromHTML("<button><span></span> <em></em></button>"),r=[...s.childNodes],o=s.querySelector("button");if(o.addEventListener("click",this._onClickHandler.bind(this,e)),s.querySelector("span").textContent=this._getItemLabel(t),o.setAttribute("title",`local path: ${e}`),this._isContainerItem(t)){const a=this._containerRelPathToChildren,l=Je(t,a),A=e.append(...a);n&&(n.depth+=1),r.push(...this._renderLayer(A,l,n)),n&&(n.depth-=1)}return r}_markActiveItems(...e){for(const t of this._activePaths)this._itemElements.get(t).classList.remove("active");this._activePaths.clear();for(const t of e){const n=t.toString();if(!this._itemElements.has(n)){console.error(`${this}._markActiveItems not found path "${n}" in elements: ${Array.from(this._itemElements.keys()).join(", ")}`);continue}this._activePaths.add(n),this._itemElements.get(n).classList.add("active")}}update(e){const t=e.has("editingActor")?e.get("editingActor"):this.getEntry("editingActor");if(e.has("activeActors")){const n=e.get("activeActors"),s=D.fromParts("./");this._domTool.clear(this._actorsElement),this._actorsElement.append(...this._renderLayer(s,n,{counter:0,depth:0})),t.isEmpty||this._markActiveItems(t.value)}else e.has("editingActor")&&this._markActiveItems(...t.isEmpty?[]:[t.value])}_isContainerItem(){throw new Error(`NOT IMPLEMENTED ${this}._isContainerItem`)}_createItem(e){throw new Error(`NOT IMPLEMENTED ${this}._createItem (for ${e}).`)}_getContainerRelPathToChildren(){throw new Error(`NOT IMPLEMENTED ${this}._getContainerRelPathToChildren`)}get _containerRelPathToChildren(){return this._getContainerRelPathToChildren()}_getItemLabel(){throw new Error(`NOT IMPLEMENTED ${this}._getItemLabel`)}}class JF extends zF{static{c(this,"TypeSpecTreeEditor")}_isContainerItem(e){return e instanceof Es}_getContainerRelPathToChildren(){return D.fromParts("children")}_getItemLabel(e){const t="TypeSpec",n=e.get("label").value;return n?`${t}: ${n}`:t}_createItem(e,t){if(e!=="TypeSpec")throw new Error(`VALUE ERROR don't know how to create item for typeKey: "${e}"`);return Es.createPrimalDraft(t)}}class UF extends _s{static{c(this,"UIFontLabel")}constructor(e,t,n,s,r=Er,o="(initializing)"){super(e,n,s,r,o),this._ppsRecord=t}update(e){if(e.has("rootFont")||e.has("properties@")){const t=(e.has("properties@")?e.get("properties@"):this.getEntry("properties@")).typeSpecnion.getProperties(),n=t.has(this._ppsRecord.fullKey)?t.get(this._ppsRecord.fullKey):this.getEntry("rootFont").value,s=this.getEntry("font")===ce.NULL;this.element.textContent=this._formatter(n,s)}}}const KF=new Set(["children","label","autoOPSZ"]);function jF(i,e){const t=[];for(const[n,s]of e.fields.entries()){let r=Ne,o=null,a=null;if(KF.has(n)?r=null:s===Vt?r=at:s===aa?r=Hi:n==="axesLocations"?r="axesLocations/":n==="stylePatches"?r="stylePatches/":n==="openTypeFeatures"&&(r=bn),r===null)continue;const l=[n,Ze.createSimpleRecord(r,n,o,a)];t.push(l)}return Object.freeze(new Ze(t))}c(jF,"getTypeSpecPPSMap");const qF=new Set(["attrs"]);function $F(i,e){const t=[];for(const[n,s]of e.fields.entries()){let r=Ne,o=null,a=null;if(qF.has(n)?r=null:s===Vt?r=at:s===aa?r=Hi:n==="axesLocations"?r="axesLocations/":n==="stylePatches"?r="stylePatches/":n==="openTypeFeatures"&&(r=bn),r===null)continue;const l=[n,Ze.createSimpleRecord(r,n,o,a)];t.push(l)}return Object.freeze(new Ze(t))}c($F,"getNodeSpecPPSMap");const Dd=jF(null,Es),ex=$F(null,DE),rr=Symbol("_NOTDEF");function $u(i,e=rr){const t=Ve(i,e===rr?Ve.NOTDEF:e);return t===e?e:t.default}c($u,"_getFallback$1");function no(i,e,t,n=rr){const{fullKey:s}=e,r=i(),o=r!==null?r.typeSpecnion.getProperties():new Map;if(e.prefix===at){const[a]=zi(s,o,[null]);return a!==null?a:$u(s,n)}else if(e.prefix==="axesLocations/"||e.prefix===bn){const a=`${e.prefix}${t}`,l=o.has(a)?o.get(a):n;if(l===rr)throw new Error(`KEY ERROR typeSpecGetDefaults: not found "${s}".`);return l}else if(e.prefix===Rt){const a=o.has(s)?o.get(s):n;if(a===rr)throw new Error(`KEY ERROR typeSpecGetDefaults: not found "${s}".`);return a}else return o.has(s)?o.get(s):$u(s,n)}c(no,"typeSpecGetDefaults");function tx(i){return e=>Array.from(e.keys()).some(t=>i.has(t))}c(tx,"getRequireUpdateDefaultsFn");function nx(i,e,t=rr){const{fullKey:n}=i;return $u(n,t)}c(nx,"nodeSpecGetDefaults");class ix extends Br{static{c(this,"TypeSpecPropertiesManager")}initialUpdate=dn.prototype.initialUpdate;constructor(e,t){super(e,t)}get dependencies(){const e=super.dependencies;return e.add(this.widgetBus.getExternalName("typeSpecPath")),e}get modelDependencies(){const e=super.modelDependencies;return e.add(this.widgetBus.getExternalName("typeSpecPath")),e}_createTypeSpecWrappers(e,t){const n=this.widgetBus.getEntry(e).constructor;if(n!==Es)throw new Error(`TYPE ERROR expected TypeSpecModel at path ${e} but instead got ${n.name}.`);const s=`typeSpecProperties@${e}`,r=[[s,"properties@"]],o=c(()=>!0,"requireUpdateDefaults"),a=c(()=>s==="typeSpecProperties@"?null:this.getEntry(s),"getLiveProperties"),l=no.bind(null,a);return[[{zone:"main"},[],yn,"h3",{},(e.equals(t)?"Origin ":"")+"Type-Spec:"],[{rootPath:e,zone:"main"},[["label","value"]],Di,"Label"],[{rootPath:e,zone:"main"},["font",["/font","rootFont"],["typeSpecProperties@","properties@"]],UF,Ze.createSimpleRecord(Rt,"font"),"span",{},(u,h=!1)=>`${u.nameVersion}`+(h?" (inherited)":"")],[{rootPath:e,zone:"main"},[["/availableFonts","options"],"activeFontKey"],ql,!0],[{rootPath:e,zone:"main"},[],fr,this._zones,{getDefaults:l,updateDefaultsDependencies:r,genericTypeToUIElement:Li,requireUpdateDefaults:o},Dd],[{rootPath:e,zone:"main"},[[".","referenceItem"],["typeSpecProperties@","properties@"]],fd,"Type-Spec"]].map(u=>this._initWrapper(this._childrenWidgetBus,...u))}_provisionWidgets(e){const t=this._getChangedMapFromCompareResult(e),n=t.has("typeSpecPath")?t.get("typeSpecPath"):this.getEntry("typeSpecPath"),s=D.fromString(this.widgetBus.getExternalName("rootTypeSpec")),[r,o]=(u=>{if(u.isEmpty)return[s,!0];const h=s.append("children",...u.value),d=this.getEntry("/"),g=Je(d,h,!1)!==!1;return[g?h:s,g]})(n),a=t.has("typeSpecPath")||!o;if(a){for(const u of this._widgets)u.destroy();this._widgets.splice(0,1/0)}const l=new Set,A=[];a&&A.push(...this._createTypeSpecWrappers(r,s)),this._widgets.push(...A);for(const u of A)this._createWidget(u),l.add(u);return l}}class sx extends bs.UIItem{static{c(this,"UICompositeStylePatchItem")}static ROOT_CLASS="ui-style_patch-composite-item";static BASE_CLASSES=[...super.BASE_CLASSES,super.ROOT_CLASS];static TYPE_CLASS_PART=null;static ITEM_DATA_TRANSFER_TYPE_PATH=pe.TYPE_SPEC_STYLE_PATCH_LINK_PATH;static additionalDependencies=["sourceMap"];update(e){const t=e.has("sourceMap")?e.get("sourceMap"):this.getEntry("sourceMap"),n=e.has("value")?e.get("value"):this.getEntry("value"),s=n.value,r=t.has(s)?t.get(s):null;let o;if(r!==null){const a=r.get("stylePatchTypeKey").value;o=Bc(a)}else o="[NULL]";this._output.textContent=`${s} – ${o}`}}class rx extends bs{static{c(this,"UICompositeStylePatch")}static ROOT_CLASS="ui-style_patch-composite";static BASE_CLASSES=[...super.BASE_CLASSES,super.ROOT_CLASS];static TYPE_CLASS_PART=null;static UIItem=sx;static ITEM_DATA_TRANSFER_TYPE_PATH=pe.TYPE_SPEC_STYLE_PATCH_LINK_PATH;static ITEM_DATA_TRANSFER_TYPE_CREATE=pe.TYPE_SPEC_STYLE_PATCH_PATH;_createNewItem(e,t,n,s){const r=n.constructor.Model.createPrimalDraft(n.dependencies),o=D.fromString(s);return r.value=o.parts.at(-1),r}}class ox extends we{static{c(this,"UIStylePatch")}constructor(e,t){super(e,t),this._currentTypeKey=null}_createWrappersForType(e){const t=[],n={rootPath:this.widgetBus.rootPath.append("instance"),zone:"local"};let s,r,o;if(e==="SimpleStylePatch"){t.push([{...n},[["/availableFonts","options"],"activeFontKey"],ql,!0]),r=[],s=fr;const a=c(()=>null,"getLiveProperties"),l=c((d,g,p)=>{if(d.fullKey===`${Rt}font`){const f=this.getEntry(n.rootPath.append("activeFontKey"));if(f.value!==ce.NULL)return this.getEntry("/installedFonts").get(f.value).value}return no(a,d,g,p)},"getDefaults"),A=new Set([]),u=new Ze(Array.from(Dd.entries()).filter(([d])=>!A.has(d))),h=[[`${this.widgetBus.rootPath.append("instance/activeFontKey")}`,"activeFontKey"]];o=[this._zones,{getDefaults:l,updateDefaultsDependencies:h,genericTypeToUIElement:Li,requireUpdateDefaults:tx(new Set(h.map(d=>typeof d=="string"?d:d.at(-1))))},u]}else if(e==="CompositeStylePatch")r=[["./styles","collection"],[this.widgetBus.getExternalName("sourceMap"),"sourceMap"]],s=rx,o=[this._zones];else throw new Error(`KEY ERROR unknown typeKey ${e}.`);return t.push([n,r,s,...o]),t.map(a=>this._initWrapper(this._childrenWidgetBus,...a))}_provisionWidgets(){const e=this.getEntry("."),t=e.get("stylePatchTypeKey").value;if(this._currentTypeKey===t)return new Set;this._currentTypeKey=t;const n=this._createWrappersForType(t),s=this._widgets.splice(0,1/0,...n);for(const r of s)this._destroyWidget(r);return super._provisionWidgets()}}class xE extends Br{static{c(this,"_BaseByPathContainerComponent")}initialUpdate=dn.prototype.initialUpdate;constructor(e,t,n,s,r,o=null){const a=e.domTool.createElement("div",{class:n}),l=new Map([...t,["local",a]]);e.insertElement(a),super(e,l),this._pathEntryName=s,this._childrenMapEntryName=r,this._typeKeyName=o,this._currentTypeKey=null}get dependencies(){const e=super.dependencies;return e.add(this.widgetBus.getExternalName(this._pathEntryName)),e}get modelDependencies(){const e=super.modelDependencies;return e.add(this.widgetBus.getExternalName(this._pathEntryName)),e}_provisionWidgets(e){const t=this._getChangedMapFromCompareResult(e),n=t.has(this._pathEntryName)?t.get(this._pathEntryName):this.getEntry(this._pathEntryName),s=D.fromString(this.widgetBus.getExternalName(this._childrenMapEntryName)),r=n.isEmpty?null:s.append(...n.value),o=t.has(this._childrenMapEntryName)?t.get(this._childrenMapEntryName):this.getEntry(this._childrenMapEntryName),a=n.isEmpty?null:Je(o,n.value,null),l=a===null||this._typeKeyName===null?null:a.get(this._typeKeyName).value,A=this._currentTypeKey!==l,u=t.has(this._pathEntryName)||A;if(this._currentTypeKey=l,u){for(const g of this._widgets)g.destroy();this._widgets.splice(0,1/0)}const h=new Set,d=[];u&&(a!==null?d.push(...this._createItemWrappers(r,a)):d.push(...this._createEmptyWrappers())),this._widgets.push(...d);for(const g of d)this._createWidget(g),h.add(g);return h}_createEmptyWrappers(){return[[{zone:"local"},[],yn,"span",{},"(Select an item)"]].map(t=>this._initWrapper(this._childrenWidgetBus,...t))}_createItemWrappers(e,t){return[[{zone:"local"},[],yn,"span",{},`(_createItemWrappers is not implemented ${t} ${e})`]].map(s=>this._initWrapper(this._childrenWidgetBus,...s))}}class ax extends xE{static{c(this,"StylePatchPropertiesManager")}constructor(e,t){super(e,t,"ui_style_patch-properties_manager","stylePatchPath","childrenOrderedMap","stylePatchTypeKey")}_createEmptyWrappers(){return[[{zone:"local"},[],yn,"span",{},"(Select a Style)"]].map(t=>this._initWrapper(this._childrenWidgetBus,...t))}_createItemWrappers(e,t){const n=t.constructor;if(n!==ed)throw new Error(`TYPE ERROR expected StylePatchModel at path ${e} but instead got ${n.name}.`);const s=t.get(this._typeKeyName).value,r=Bc(s);return[[{zone:"local"},[],yn,"h3",{},`Style: ${e.parts.at(-1)} – ${r}`],[{rootPath:e,zone:"local"},[[this.widgetBus.rootPath.toString(),"sourceMap"]],ox,this._zones,e]].map(a=>this._initWrapper(this._childrenWidgetBus,...a))}}class lx extends xE{static{c(this,"NodeSpecPropertiesManager")}constructor(e,t){super(e,t,"ui_node_spec-properties_manager","nodeSpecPath","childrenOrderedMap",null)}_createEmptyWrappers(){return[[{zone:"local"},[],yn,"span",{},"(Select a NodeSpec)"]].map(t=>this._initWrapper(this._childrenWidgetBus,...t))}_createItemWrappers(e){const t=e.parts.at(-1),n=[[{zone:"local"},[],yn,"h3",{},`NodeSpec: ${t}`]],s={getDefaults:nx,updateDefaultsDependencies:[],genericTypeToUIElement:Li,requireUpdateDefaults:c(()=>!0,"requireUpdateDefaults")};return n.push([{rootPath:e,zone:"local"},[],fr,this._zones,s,ex]),n.map(r=>this._initWrapper(this._childrenWidgetBus,...r))}}class cx extends me{static{c(this,"SimpleSelect")}constructor(e,t,n,s=null){super(e),this._ui=new $l(this._domTool,s,t,n),this._insertElement(this._ui.element)}get value(){return this._ui._input.value}}class LE extends _s{static{c(this,"MapSelectButton")}constructor(e,t,n,s,...r){super(e,t,n,...r);for(const o of s)this.element.addEventListener(...o)}_setActive(e){let t=!1;if(!e.isEmpty){const n=this.widgetBus.rootPath.parts.at(-1),s=e.value,r=s.parts.at(-1);t=n===r}this.element.classList[t?"add":"remove"]("active")}update(e){if(super.update(e),e.has("activePath")){const t=e.get("activePath");this._setActive(t)}e.has("data")&&(this.element.textContent=this._formatter(e.get("data").value))}}class Ax extends _t{static{c(this,"UIStylePatchesMap")}static ROOT_CLASS="ui_style_patches_map";static BASE_CLASSES=[...super.BASE_CLASSES,super.ROOT_CLASS];static TYPE_CLASS_PART=null;static VISUAL_ORDER_STRATEGY=_t.VISUAL_ORDER_STRATEGY_NATURAL;static KEY_ADD_BUTTON_LABEL="add style patch";static KEY_DATA_TRANSFER_TYPE=pe.TYPE_SPEC_STYLE_PATCH_PATH;_validateKeyString(e){const[t,n]=super._validateKeyString(e);return t?oa(e):[t,n]}get _initialWidgets(){const e=Array.from(Il.keys()).map(s=>[s,Bc(s)]),t=[{zone:"tools",id:"key-create-type-select"},[],cx,null,e],n=super._initialWidgets;return n.splice(1,0,t),n}_createWrapperValue(e,t){const n=this._childrenWidgetBus,s={relativeRootPath:D.fromParts(".",t),zone:e},r=[["./stylePatchTypeKey","data"],[this.widgetBus.getExternalName("stylePatchPath"),"activePath"]],o=LE,a=["button",{class:"ui_style_patches_map-item-value"},[["click",()=>this._onClickHandler(t)]],function(l){return`${Cl.has(l)?Cl.get(l):Il.get(l).get("label").value} Edit`}];return this._initWrapper(n,s,r,o,...a)}_onClickHandler(e){this._changeState(()=>{const t=D.fromParts(".",e),n=this.getEntry("stylePatchPath");!n.isEmpty&&n.value.equals(t)?n.clear():n.value=t})}_createKeyValue(e){const t=this.getWidgetById("key-create-type-select"),n=t.value;return cY(n,e.dependencies)}_onItemCreated(e){const t=D.fromParts(".",e),n=this.getEntry("stylePatchPath");n.isEmpty&&(n.value=t)}}class ux extends _t{static{c(this,"UINodeSpecMap")}static ROOT_CLASS="ui_node_spec_map";static BASE_CLASSES=[...super.BASE_CLASSES,super.ROOT_CLASS];static TYPE_CLASS_PART=null;static VISUAL_ORDER_STRATEGY=_t.VISUAL_ORDER_STRATEGY_NATURAL;static KEY_ADD_BUTTON_LABEL="create";static KEY_DATA_TRANSFER_TYPE=pe.PROSEMIROOR_NODE_SPEC_PATH;get _initialWidgets(){const e=[{zone:"local"},[[".","rootCollection"]],Ti,"Delete NodeSpec","",[this.constructor.KEY_DATA_TRANSFER_TYPE]],t=super._initialWidgets;return t.splice(1/0,0,e),t}_createWrapperValue(e,t){const n=this._childrenWidgetBus,s={relativeRootPath:D.fromParts(".",t),zone:e},r=[[this.widgetBus.getExternalName("nodeSpecPath"),"activePath"]],o=LE,a=["button",{class:"ui_node_spec_map-item-value"},[["click",()=>this._onClickHandler(t)]],Er,"Edit"];return this._initWrapper(n,s,r,o,...a)}_onClickHandler(e){this._changeState(()=>{const t=D.fromParts(".",e),n=this.getEntry("nodeSpecPath");!n.isEmpty&&n.value.equals(t)?n.clear():n.value=t})}}class _n{static{c(this,"SyntheticValue")}constructor(e,t){Object.defineProperties(this,{fn:{value:e},dependencies:{value:Object.freeze(Array.from(t))}})}toString(){return`[SyntheticValue ${this.dependencies.join(", ")}]`}call(...e){return this.fn(...e)}}function Tl(i,...e){for(const t of e)for(const[n,s]of t)i.set(n,s);return i}c(Tl,"mapSetProperties");class Vi{static{c(this,"LocalScopeTypeSpecnion")}static resolveSyntheticProperties(e,t){const n=new Set(Array.from(e).filter(([,u])=>u instanceof _n).map(([u])=>u));if(!n.size)return e;const s=new Map,r=new Map,o=new Set(t.keys());for(const u of e.keys()){if(!n.has(u)){o.add(u);continue}const h=e.get(u);if(h.dependencies.length===0){o.add(u);continue}s.set(u,new Set(h.dependencies));for(const d of h.dependencies)r.has(d)||r.set(d,[]),r.get(d).push(u)}const a=mC(o,r,s),l=new Map(e),A=new Set;for(const u of a){if(!n.has(u)||A.has(u))continue;A.add(u);const h=l.get(u),d=[];let g=0;for(const f of h.dependencies)if(l.has(f))g+=1,d.push(l.get(f));else if(t.has(f))d.push(t.get(f));else break;(g===0||arguments.length!==h.dependencies.length)&&l.delete(u);const p=h.call(...d);p===null?l.delete(u):l.set(u,p)}return l}static*propertiesGenerator(e,t,n){const s={hasParentProtperty:n.has.bind(n),getParentProperty:n.get.bind(n)};for(const r of e.values())yield*r(s,t)}static initPropertyValuesMap(e,t){const n=new Map(e);return this.resolveSyntheticProperties(n,t)}}class Fl{static{c(this,"_BaseTypeSpecnion")}static _NOTDEF=Symbol("_NOTDEF");constructor(){Object.defineProperties(this,{_localPropertyValuesMap:{get:c(()=>{throw new Error("NOT IMPLEMENTED {this}._localPropertyValuesMap.")},"get"),set:c(e=>{Object.defineProperty(this,"_localPropertyValuesMap",{value:e})},"set"),configurable:!0,writtable:!0},_propertyValuesMap:{get:c(()=>{throw new Error("NOT IMPLEMENTED {this}._propertyValuesMap.")},"get"),set:c(e=>{Object.defineProperty(this,"_propertyValuesMap",{value:e})},"set"),configurable:!0,writtable:!0}})}toString(){return`[${this.constructor.name}]`}getProperties(){return this._propertyValuesMap}getOwnProperty(e,t=super._NOTDEF){if(!this._localPropertyValuesMap.has(e)){if(t!==this.constructor._NOTDEF)return t;throw new Error(`KEY ERROR ${e} not in {$this.constructor.name}.`)}return this._localPropertyValuesMap.get(e)}get localPropertyNames(){return Array.from(this._localPropertyValuesMap.keys())}getPropertyValuesMap(){return this._localPropertyValuesMap}}class hx extends Fl{static{c(this,"PatchedTypeSpecnion")}constructor(e,t,n){super();const[s,r]=e,o=Tl(new Map,t,n),a=Vi.initPropertyValuesMap(o,s),l=Tl(new Map,r,a);this._localPropertyValuesMap=a,this._propertyValuesMap=l}}class eh extends Fl{static{c(this,"HierarchicalScopeTypeSpecnion")}constructor(e,t,n,s=null){super();const[r,o]=n instanceof Fl?[n,null]:[null,n];if(Object.defineProperty(this,"parentTypeSpecnion",{value:r}),this._propertiesGenerators=e,this._typeSpec=t,r!==null&&!s)throw new Error("ASSERTION FAILED parentTypeSpecnion is not null but isInheritingPropertyFn is not set.");this._isInheritingPropertyFn=s,this._typeSpecDefaultsMap=o,[this._rawProperties,this._localPropertyValuesMap,this._propertyValuesMap]=this._initPropertyValuesMaps()}createPatched(e){return new hx(this._getParentMaps(),this._rawProperties,e)}_isInheritingProperty(e){return this._isInheritingPropertyFn?this._isInheritingPropertyFn(e):!0}_getParentMaps(){const e=this.parentTypeSpecnion===null?this._typeSpecDefaultsMap:this.parentTypeSpecnion.getProperties(),t=new Map(Array.from(e).filter(([n])=>this._isInheritingProperty(n)));return[e,t]}_initPropertyValuesMaps(){const[e,t]=this._getParentMaps(),n=Vi.propertiesGenerator(this._propertiesGenerators,this._typeSpec,e),s=Tl(new Map,n),r=Vi.initPropertyValuesMap(s,e),o=Tl(new Map,t,r);return[s,r,o]}}function*Td(i,e,t,n,s=null){if(!n.length){s instanceof ke&&s.isEmpty||(yield i(t,s));return}const[r,...o]=n,a=typeof r=="function"?r(s):r;for(const l of a){const A=e?e(s,l):null,u=[...t,l];yield*Td(i,e,u,o,A)}}c(Td,"_pathSpecGen");function*ME(i,e){function t(n){return n}c(t,"getLeave");for(const n of i)yield*Td(t,null,[e],n)}c(ME,"pathSpecPathsGen");function*VE(i,e,t){function n(r,o){return r.get(o)}c(n,"nextNode");function s(r,o){return[r.join("/"),o.value]}c(s,"getLeave");for(const r of i)yield*Td(s,n,[e],r,t)}c(VE,"pathSpecValuesGen");const OE=[[["a","b"],["leading","lineWidth"]],[["minLeading","maxLeading"]]];function PE(i,e){const t=e.join("/");let n=i.get(t);if(!n){n={},i.set(t,n);const s=e.at(-1),r=PE(i,e.slice(0,-1));r[s]=n}return n}c(PE,"_fillTreeGetNodeFromRegistry");function HE(i,e,t){const n=new Map([[i,{}]]);for(const s of e){const r=s.join("/"),o=s.at(-1),a=PE(n,s.slice(0,-1));if(!t.has(r))throw new Error(`KEY ERROR fillTreeFromPaths "${r}" is not in valuesMap.`);a[o]=t.get(r)}return n.get(i)}c(HE,"fillTreeFromPaths");function qf(i){const e=`${Ne}columnWidth`,t=`${Ne}relativeFontSize`,n=[e,t],s=[];for(const o of ME(OE,i)){const a=o.join("/");n.push(a),s.push(o)}function r(...o){const a=new Map(tn(n,o)),{a:l,b:A,minLeading:u,maxLeading:h}=HE(i,s,a),d=a.get(e),g=a.get(t),p=d/g;return bW(l,A,p,u,h)}return c(r,"calculate"),new _n(r,n)}c(qf,"AutoLinearLeadingSyntheticValue");function*dx(i,e){for(const t of yh(e.constructor,aa)){const n=`${Hi}${t}`,s=`${n}/algorithm`,r=`${n}/line-height-em`,o=e.get(t),a=o.get("leadingAlgorithmTypeKey").value;if(a===ce.NULL){i.hasParentProtperty(s)&&i.getParentProperty(s)==="AutoLinearLeading"&&(yield[r,new qf(n)]);continue}const l=o.get("instance").wrapped;if(yield[s,a],a==="AutoLinearLeading")yield*VE(OE,n,l),yield[r,new qf(n)];else if(a==="ManualLeading")yield[r,l.get("leading").value];else throw new Error(`NOT IMPLEMENTED leadingGen don't know how to handle algorithm type "${a}".`)}}c(dx,"leadingGen");function*XE(i,e){const t=e.get("font");t!==ce.NULL&&(yield[`${Rt}font`,t.value])}c(XE,"fontGen$1");function*zE(i,e){const t=e.get("baseFontSize"),n=e.get("relativeFontSize");t.isEmpty||(yield[`${Ne}baseFontSize`,t.value]),n.isEmpty||(yield[`${Ne}relativeFontSize`,n.value])}c(zE,"baseFontSizeGen");function*JE(i,e){const t=e.get("baseFontSize"),n=e.get("relativeFontSize");if(t.isEmpty&&n.isEmpty)return;function s(o,a){return o===null?null:o*(a===null?1:a)}c(s,"calculate");const r=[`${Ne}baseFontSize`,`${Ne}relativeFontSize`];yield[`${Ne}fontSize`,new _n(s,r)]}c(JE,"fontSizeGen$1");function*Wc(i,e){const t=e.get("autoOPSZ").value;yield[`${Ne}autoOPSZ`,t],t&&(yield["axesLocations/opsz",new _n(Er,[`${Ne}fontSize`])]);const n=e.get("axesLocations");for(const[s,r]of n)t&&s==="opsz"||(yield[`axesLocations/${s}`,r.value])}c(Wc,"axisLocationsGen");function*ma(i,e){const t=e.get("openTypeFeatures");for(const[n,s]of t)yield[`${bn}${n}`,s.value]}c(ma,"openTypeFeaturesGen");function gx(i,e,t){const n=t.axisRanges;if(!(i in n))return null;const s=n[i];return e in s?s[e]:null}c(gx,"calculateFontAxisValueSynthetic");function*px(i,e,t){const n=t.get("logicalValue").value;if(n==="number"){const s=t.get("numericValue").value;yield[i,s]}else{const s=`${i}/logicalValue`;yield[s,n];const r=[s,`${Rt}font`];yield[i,new _n(gx.bind(null,e),r)]}}c(px,"axesMathAxisLocationValueGen");function*fx(i,e){const t=e.get("autoOPSZ");!t.isEmpty&&t.value&&(yield["axesLocations/opsz",new _n(Er,[`${Ne}fontSize`])]);const n=e.get("axesLocations");for(const[s,r]of n)s==="opsz"&&!t.isEmpty&&t.value||(yield*px(`axesLocations/${s}`,s,r))}c(fx,"axisMathLocationsGen");const mx=Object.freeze(new Et(["textAlign","direction","columnWidth"])),UE=Object.freeze([ia,XE,zE,JE,Wc,ma,tc(Ne,mx),dx]),Cx=Object.freeze(new Et([])),Ix=Object.freeze([ia,XE,zE,JE,fx,ma,tc(Ne,Cx)]);class Fd extends me{static{c(this,"TypeSpecLiveProperties")}constructor(e,t,n=null,s=null){if(super(e),this._propertiesGenerators=t,this._typeSpecnion=null,this.propertyValuesMap=null,this._isInheritingPropertyFn=n,this.hasParentProperties&&s!==null)throw new Error(`VALUE ERROR ${this} typeSpecDefaultsMap must be null if hasParentProperties.`);if(!this.hasParentProperties&&s===null)throw new Error(`VALUE ERROR ${this} typeSpecDefaultsMap must NOT be null if not hasParentProperties.`);this._typeSpecDefaultsMap=s}get typeSpecnion(){if(this._typeSpecnion===null)throw new Error("LIFECYCLE ERROR this._typeSpecnion is null, must update initially first.");return this._typeSpecnion}get hasParentProperties(){return this.widgetBus.wrapper.dependencyReverseMapping.has("@parentProperties")}update(e){const t=this.widgetBus.wrapper.dependencyReverseMapping.has("rootFont");let n=!1;if(e.has("typeSpec")||e.has("@parentProperties")||e.has("rootFont")){const s=e.has("typeSpec"),r=e.has("rootFont"),o=e.has("typeSpec")?e.get("typeSpec"):this.getEntry("typeSpec"),a=o.hasWrapped?o.wrapped:o;if(this.hasParentProperties){const l=e.has("@parentProperties")?e.get("@parentProperties"):this.getEntry("@parentProperties"),A=s||this._typeSpecnion===null,u=this._typeSpecnion===null||l.typeSpecnion!==this._typeSpecnion.parentTypeSpecnion;(A||u||r)&&(this._typeSpecnion=new eh(this._propertiesGenerators,a,l.typeSpecnion,this._isInheritingPropertyFn),n=!0)}else{let l=this._typeSpecDefaultsMap;if(t){const A=(e.has("rootFont")?e.get("rootFont"):this.getEntry("rootFont")).value;l=new Map(this._typeSpecDefaultsMap),l.set(`${Rt}font`,A)}this._typeSpecnion=new eh(this._propertiesGenerators,a,l),n=!0}}if(n){const[s,r]=this.widgetBus.getProtocolHandlerRegistration("typeSpecProperties@");r.setUpdated(s)}}getPropertyValuesMap(){return this._typeSpecnion.getPropertyValuesMap()}}class KE extends me{static{c(this,"StylePatchSourceLiveProperties")}constructor(e){super(e),this.propertyValuesMap=null,this._propertiesGenerators=Ix}*_propertiesGenerator(e){for(const t of this._propertiesGenerators.values())yield*t({hasParentProtperty:c(()=>!1,"hasParentProtperty"),getParentProperty:c((...n)=>{throw new Error(`KEY ERROR ${this}.getParentProperty ${n.join(",     ")}`)},"getParentProperty"),toString:c(()=>`${this}._propertiesGenerator ${this.widgetBus.rootPath}`,"toString")},e)}_resolveStylePatchRecursive(e,t,n,s){const r=s.get("stylePatchTypeKey").value,o=s.get("instance");if(r==="SimpleStylePatch")return Array.from(this._propertiesGenerator(o.wrapped));if(r==="CompositeStylePatch"){const a=o.get("styles"),l=[];for(const[,A]of a){const u=A.value;let h;if(!t.has(u)){if(n.has(u))h=n.get(u);else if(e.has(u)){const d=e.get(u),g=new Set([...t,u]);h=this._resolveStylePatchRecursive(e,g,n,d),n.set(u,h)}else h=[],n.set(u,h);for(const d of h)l.push(d)}}return l}throw new Error(`NOT IMPLEMENTED ${this}._getPropertyValuesMap don't know how to handle type "${r}".`)}_getPropertyValuesMap(e){const t=this.getEntry("stylePatchesSource"),n=new Set,s=new Map;return new Map(this._resolveStylePatchRecursive(t,n,s,e))}update(e){const t=e.has("stylePatch")?e.get("stylePatch"):this.getEntry("stylePatch");if(e.has("stylePatch")||e.has("stylePatchesSource")&&t.get("stylePatchTypeKey").value==="CompositeStylePatch"){this.propertyValuesMap=this._getPropertyValuesMap(t);const[s,r]=this.widgetBus.getProtocolHandlerRegistration("stylePatchProperties@");r.setUpdated(s)}}}class jE extends me{static{c(this,"StyleLinkLiveProperties")}constructor(e){super(e),this._typeSpecnion=null,this.propertyValuesMap=null}get typeSpecnion(){if(this._typeSpecnion===null)throw new Error("LIFECYCLE ERROR this._typeSpecnion is null, must update initially first.");return this._typeSpecnion}update(e){const t=e.has("stylePatchProperties@")?e.get("stylePatchProperties@"):this.getEntry("stylePatchProperties@"),n=e.has("typeSpecProperties@")?e.get("typeSpecProperties@"):this.getEntry("typeSpecProperties@"),s=t!==null?t.propertyValuesMap:new Map,r=s.size!==0?n.typeSpecnion.createPatched(t.propertyValuesMap):n.typeSpecnion;if(this._typeSpecnion!==r){this._typeSpecnion=r;const[o,a]=this.widgetBus.getProtocolHandlerRegistration("styleLinkProperties@");a.setUpdated(o)}}getPropertyValuesMap(){return this._typeSpecnion.getPropertyValuesMap()}}class yx extends Mo{static{c(this,"StylePatchSourcesMeta")}[Zs]=!0;constructor(e,t){super(e,t)}_getWidgetSetup(e){return[{rootPath:e,"stylePatchProperties@":e.toString()},[[".","stylePatch"],[this.widgetBus.getExternalName("collection"),"stylePatchesSource"]],KE]}_createWrapper(e){const t=this._childrenWidgetBus,[n,s,r,...o]=this._getWidgetSetup(e);return this._initWrapper(t,n,s,r,...o)}}class bx extends Mo{static{c(this,"TypeSpecChildrenMeta")}[Zs]=!0;constructor(e,t,n,s,r=[]){super(e,t,r),this._typeSpecPropertiesGenerators=n,this._isInheritingPropertyFn=s}_getWidgetSetup(e){return[{rootPath:e},[[".","typeSpec"],[`typeSpecProperties@${e.append("..","..")}`,"@parentProperties"],[this.widgetBus.getExternalName("stylePatchesSource"),"stylePatchesSource"]],xd,this._zones,this._typeSpecPropertiesGenerators,this._isInheritingPropertyFn]}_createWrapper(e){const t=this._childrenWidgetBus,[n,s,r,...o]=this._getWidgetSetup(e);return this._initWrapper(t,n,s,r,...o)}}class Ex extends Mo{static{c(this,"StyleLinksMeta")}[Zs]=!0;constructor(e,t){super(e,t)}_getWidgetSetup(e){const t=D.fromString(this.widgetBus.getExternalName("stylePatchesSource")),n=this.getEntry(e),s=n.value;return[{rootPath:e,"styleLinkProperties@":e.toString()},[[`stylePatchProperties@${t.append(s)}`,"stylePatchProperties@"],[`typeSpecProperties@${e.append("..","..")}`,"typeSpecProperties@"]],jE]}_createWrapper(e){const t=this._childrenWidgetBus,[n,s,r,...o]=this._getWidgetSetup(e);return this._initWrapper(t,n,s,r,...o)}}class xd extends we{static{c(this,"TypeSpecMeta")}constructor(e,t,n,s=null,r=null){const o=[[{"typeSpecProperties@":e.rootPath.toString()},[...e.wrapper.getDependencyMapping(e.wrapper.constructor.DEPENDECIES_ALL)],Fd,n,s,r],[{},[[e.getExternalName("stylePatchesSource"),"stylePatchesSource"],["stylePatches","collection"]],Ex,t],[{},[["children","collection"],[e.getExternalName("stylePatchesSource"),"stylePatchesSource"]],bx,t,n,s,[]]];super(e,t,o)}}class Bx extends me{static{c(this,"GenericUpdater")}constructor(e,t){super(e),this._updateHandlerFn=t}update(e){return this._updateHandlerFn(e)}}class vx extends we{static{c(this,"UIDocumentTextRun")}constructor(e,t,n,s){super(e,t),this.node=this._domTool.createTextNode("(initializing)"),this.widgetBus.insertDocumentNode(this.node),this._originTypeSpecPath=n,this._documentRootPath=s,this._stylerWrapper=null;const r=[[{},["text"],Bx,this._updateNode.bind(this)]];this._initWidgets(r)}_updateNode(e){if(e.has("text")){const{Node:t}=this._domTool.window,n=e.get("text").value;this.node.nodeType===t.TEXT_NODE?this.node.data=n:this.node.textContent=n}}_getTypeSpecPropertiesId=Dc;_getPathOfTypes=t0.prototype._getPathOfTypes;_swapNode(e){this.node.parentElement&&this.node.parentElement.replaceChild(e,this.node),this.node=e}_setNodeToTextNode(){const e=this.getEntry("text").value,t=this._domTool.createTextNode(e);this._swapNode(t)}_setNodeToElement(e){const t=this.getEntry("text").value,n=this._domTool.createElement("span",{},t);e!==null&&n.setAttribute("data-style-name",e),this._swapNode(n)}_createStylerWrapper(e,t=null){const{Node:n}=this._domTool.window;if(e===null)return this.node.nodeType!==n.TEXT_NODE&&this._setNodeToTextNode(),null;this.node.nodeType!==n.ELEMENT_NODE&&this._setNodeToElement(t);const s={},r=e===null?[]:[[e,"properties@"],["/font","rootFont"]],o=e===null?qE:$E,a=[this.node];return this._initWrapper(this._childrenWidgetBus,s,r,o,...a)}_getStyleLinkPropertiesId(e,t){const n=`styleLinkProperties@${e.append("stylePatches",t)}`,s=this.widgetBus.getProtocolHandlerImplementation("styleLinkProperties@",null);if(s===null)throw new Error('KEY ERROR ProtocolHandler for identifier "styleLinkProperties@" not found.');return s.hasRegistered(n)?n:null}_getStyleName(e){const t=e.get("marks");for(const n of t.value){if(n.get("typeKey").value!=="generic-style")continue;const r=n.get("attrs");if(!r.has("data-style-name"))continue;const o=r.get("data-style-name");if(o.get("type").value==="string")return o.get("string").value}return null}_provisionWidgets(...e){const t=this._getPathOfTypes(this.widgetBus.rootPath).slice(0,-1),n=this._getTypeSpecPropertiesId(t,!0),s=this.getEntry("."),r=this._getStyleName(s),o=r===null?null:this._getStyleLinkPropertiesId(n,r),a=this._stylerWrapper!==null?this._widgets.indexOf(this._stylerWrapper):-1;if(a===-1)this._stylerWrapper=this._createStylerWrapper(o,r),this._stylerWrapper!==null&&this._widgets.splice(0,0,this._stylerWrapper);else{const l=this._widgets[a];if(l.dependencyReverseMapping.get("styleLinkProperties@")!==o){const A=this._createStylerWrapper(o,r);A===null?this._widgets.splice(a,1):this._widgets.splice(a,1,A),l.destroy(),this._stylerWrapper=A}}return super._provisionWidgets(...e)}}class Gx extends MC{static{c(this,"UIDocumentElementTypeSpecDropTarget")}static BASE_CLASS="ui_document_element_typespec";constructor(e,t,n){super(e,null,null,t),this._addEventListeners(n),this.element=n}initTemplate(){return[]}_dropHandlerImplementation(e){const[t,n]=this._takeDragEventOrLeaveIt(e);if(t)return this._changeState(()=>{const s=this.getEntry("typeSpecLink");s.value=e.dataTransfer.getData(n)})}}class qE extends me{static{c(this,"UIDocumentUnkownStyleStyler")}_CLASS="unknown-style";constructor(e,t){super(e),this.element=t,this.element.classList.add(this._CLASS)}destroy(){this.element.classList.remove(this._CLASS)}}class $E extends me{static{c(this,"UIDocumentStyleStyler")}constructor(e,t){super(e),this.element=t}destroy(){this.element.style=""}update(e){const t=[],n=(e.has("properties@")?e.get("properties@"):this.getEntry("properties@")).typeSpecnion.getProperties();if(e.has("rootFont")||e.has("properties@")){const s=Ze.createSimpleRecord(Rt,"font"),r=n.has(s.fullKey)?n.get(s.fullKey):this.getEntry("rootFont").value;this.element.style.setProperty("font-family",`"${r.fullName}"`),this.element.style.setProperty("--units-per-em",`${r.fontObject.unitsPerEm}`),this.element.style.setProperty("--ascender",`${r.fontObject.ascender}`),this.element.style.setProperty("--descender",`${r.fontObject.descender}`)}if(e.has("properties@")){const s=[["colors/backgroundColor","background-color"],["colors/textColor","color"]],r=c(o=>[!0,Ve(o).default],"getDefault");Wn(this.element,n,r,s),Ui(this.element,n,r,t),li(this.element,n)}}}class e0 extends me{static{c(this,"UIDocumentTypeSpecStyler")}constructor(e,t){super(e),this.element=t}update(e){const t=[["generic/textAlign","text-align",""],["generic/direction","direction",""],["generic/columnWidth",(s,r,o,a)=>{const[,l]=ra(o,a,"generic/baseFontSize"),A=r*l*.5;s.style.setProperty("width",`${A}pt`)}],[`${Hi}leading/line-height-em`,"--line-height","em"]],n=(e.has("properties@")?e.get("properties@"):this.getEntry("properties@")).typeSpecnion.getProperties();if(e.has("rootFont")||e.has("properties@")){const s=Ze.createSimpleRecord(Rt,"font"),r=n.has(s.fullKey)?n.get(s.fullKey):this.getEntry("rootFont").value;this.element.style.setProperty("font-family",`"${r.fullName}"`),this.element.style.setProperty("--units-per-em",`${r.fontObject.unitsPerEm}`),this.element.style.setProperty("--ascender",`${r.fontObject.ascender}`),this.element.style.setProperty("--descender",`${r.fontObject.descender}`)}if(e.has("properties@")){const s=[["colors/backgroundColor","background-color"],["colors/textColor","color"]],r=c(o=>[!0,Ve(o).default],"getDefault");Wn(this.element,n,r,s),Ui(this.element,n,r,t),li(this.element,n)}}}class t0 extends we{static{c(this,"UIDocumentElement")}constructor(e,t,n,s,r="typeroof-document-element"){const o=new Map(t);super(e,o);const a=this.getEntry("."),l=a.get("typeKey").value,A=this.getEntry("nodeSpec");let u="div";A.has(l)&&(u=A.get(l).get("tag",{value:u}).value);const h=e.domTool.createElement(u,{class:`${r}`});o.set("local",h),this.node=h,this.nodesElement=h,this.widgetBus.insertDocumentNode(this.node),this._originTypeSpecPath=n,this._documentRootPath=s,this._typeSpecStylerWrapper=null;const d=[[{},[["./content","collection"],[this.widgetBus.getExternalName("nodeSpec"),"nodeSpec"],[this.widgetBus.getExternalName("nodeSpecToTypeSpec"),"nodeSpecToTypeSpec"]],n0,this._zones,this.nodesElement,n,s]];this._initWidgets(d)}_getTypeSpecPropertiesId=Dc;_createTypeSpecStylerWrapper(e){const t={},n=[[e,"properties@"],["/font","rootFont"]],s=e0,r=[this.node];return this._initWrapper(this._childrenWidgetBus,t,n,s,...r)}_getPathOfTypes(e){const t=[];let n=e;do{const s=this.getEntry(n);t.unshift(s.get("typeKey").value),n=n.parent.parent}while(n.startsWith(this._documentRootPath));return t}_provisionWidgets(){const e=this._getPathOfTypes(this.widgetBus.rootPath),t=this._getTypeSpecPropertiesId(e),n=this._typeSpecStylerWrapper!==null?this._widgets.indexOf(this._typeSpecStylerWrapper):-1;if(n===-1)this._typeSpecStylerWrapper=this._createTypeSpecStylerWrapper(t),this._widgets.splice(0,0,this._typeSpecStylerWrapper);else{const s=this._widgets[n];if(s.dependencyReverseMapping.get("typeSpecProperties@")!==t){const r=this._createTypeSpecStylerWrapper(t);this._widgets.splice(n,1,r),s.destroy(),this._typeSpecStylerWrapper=r}}return super._provisionWidgets()}}class Rx extends we{static{c(this,"UIDocumentNode")}constructor(e,t,n,s){super(e,t),this._originTypeSpecPath=n,this._documentRootPath=s,this._currentTypeKey=null}_createWrapperForType(e){const t={rootPath:D.fromParts("."),id:"contentWidget"};let n,s;e==="text"?(s=["text",[this.widgetBus.getExternalName("nodeSpec"),"nodeSpec"],[this.widgetBus.getExternalName("nodeSpecToTypeSpec"),"nodeSpecToTypeSpec"]],n=vx):(s=[["./content","nodes"],[this.widgetBus.getExternalName("nodeSpec"),"nodeSpec"],[this.widgetBus.getExternalName("nodeSpecToTypeSpec"),"nodeSpecToTypeSpec"]],n=t0);const r=[this._zones,this._originTypeSpecPath,this._documentRootPath],o=this._childrenWidgetBus;return this._initWrapper(o,t,s,n,...r)}_provisionWidgets(){const e=this.getEntry(this.widgetBus.rootPath.parent),t=this.widgetBus.rootPath.parts.at(-1),n=e.get(t),s=n.get("typeKey").value;if(this._currentTypeKey===s)return new Set;this._currentTypeKey=s;const r=this._createWrapperForType(s),o=this._widgets.splice(0,1/0,r);for(const a of o)this._destroyWidget(a);return super._provisionWidgets()}}class n0 extends Mo{static{c(this,"UIDocumentNodes")}constructor(e,t,n,s,r){super(e,t),this._nodesElement=n,this._nodeSlots=new Map,this._originTypeSpecPath=s,this._documentRootPath=r;const o=this._insertNodeIntoSlot.bind(this);this._childrenWidgetBus.insertDocumentNode=function(a){o(this.nodeKey,a)}}_insertIntoSlot(e,t,n){const s=c(o=>{const a=e instanceof vt?`${o}`:e.keyOfIndex(o);return this._keyToWidget.get(a).widget.getWidgetWrapperById("contentWidget",null)?.widget?.node},"getNodeByIndex");let r;if(e instanceof vt){const[o,a]=e.keyToIndex(t);if(o===null)throw new Error(a);r=o}else r=e.indexOfKey(t);if(r<0)throw new Error(`NOT FOUND ERROR don't know where to insert ${t} as it was not found in collection (${r}).`);if(r===0)for(let o=r+1;o<e.size;o++){const a=s(o);if(a&&a.parentElement&&a.parentElement===this._nodesElement){a.parentElement.insertBefore(n,a);return}}else for(let o=r-1;o<e.size;o++){const a=s(o);if(a&&a.parentElement&&a.parentElement===this._nodesElement){a.parentElement.insertBefore(n,a.nextSibling);return}}this._nodesElement.append(n)}_insertNodeIntoSlot(e,t){const n=this.getEntry("collection");this._insertIntoSlot(n,e,t)}_reorderChildren(e,t){if(!e.has("changed"))return;const n=this.getEntry("collection"),s=Array.from(n.keys()).slice(t);for(const r of s){const o=this._keyToWidget.get(r).widget,a=o.getWidgetWrapperById("contentWidget",null),l=a?.widget?.node;l&&this._insertIntoSlot(n,r,l)}}_destroyWidget(e){const t=e.widget.getWidgetById("contentWidget").node;this._nodesElement.removeChild(t),super._destroyWidget(e)}_createWrapper(e){const t=e.parts.at(-1),n={rootPath:e,nodeKey:t},s=[[this.widgetBus.getExternalName("collection"),"collection"],[this.widgetBus.getExternalName("nodeSpec"),"nodeSpec"],[this.widgetBus.getExternalName("nodeSpecToTypeSpec"),"nodeSpecToTypeSpec"]],r=Rx,o=[this._zones,this._originTypeSpecPath,this._documentRootPath],a=Object.create(this._childrenWidgetBus);return a.nodeKey=t,this._initWrapper(a,n,s,r,...o)}}class Sx extends we{static{c(this,"UIDocument")}constructor(e,t,n,s="typeroof-document"){const r=e.domTool.createElement("article",{class:s});e.insertElement(r),super(e,t),this.nodesElement=r;const o=[[{},[["content","collection"],[this.widgetBus.getExternalName("nodeSpec"),"nodeSpec"],[this.widgetBus.getExternalName("nodeSpecToTypeSpec"),"nodeSpecToTypeSpec"]],n0,this._zones,this.nodesElement,n,this.widgetBus.rootPath]];this._initWidgets(o)}}function Nx(i,e,t,n,s=!1){const r=D.fromString(i),o=c(l=>`${e}${l}`,"format");if(t===null)throw new Error(`KEY ERROR ProtocolHandler for identifier "${e}" not found.`);let a=r.parts.length===0||r.parts[0]==="children"?n.append(...r):n.append("children",...r);for(;n.isRootOf(a);){const l=o(a);if(t.hasRegistered(l))return s?a:l;a=a.slice(0,-2)}return s?n:o(n)}c(Nx,"_getBestTypeSpecPropertiesId");function Dc(i,e=!1,t="nodeSpecToTypeSpec",n="typeSpecProperties@"){const s=this.getEntry(t),r=i.at(-1),o=s.get(r,{value:""}).value,a=this.widgetBus.getProtocolHandlerImplementation(n,null);return Nx(o,n,a,this._originTypeSpecPath,e)}c(Dc,"_getTypeSpecPropertiesIdMethod");class Qx extends Br{static{c(this,"TypeSpecSubscriptions")}constructor(e,t,n){super(e,t),this._originTypeSpecPath=n,this._subscribers=new Map,this._newlySubscribedMarks=new Map,this._marksDomObserver=new MutationObserver(this._checkNewlySubscribedMarks.bind(this)),this._styleSubscribers=new Map}get dependencies(){const e=super.dependencies;return e.add(this.widgetBus.getExternalName("nodeSpecToTypeSpec")),e}get modelDependencies(){const e=super.modelDependencies;return e.add(this.widgetBus.getExternalName("nodeSpecToTypeSpec")),e}_getStyleLinkPropertiesId(e,t){const n=e.slice(19),s=`styleLinkProperties@${D.fromParts(n,"stylePatches",t)}`,r=this.widgetBus.getProtocolHandlerImplementation("styleLinkProperties@",null);if(r===null)throw new Error('KEY ERROR ProtocolHandler for identifier "styleLinkProperties@" not found.');return r.hasRegistered(s)?s:null}_createStyleStylerWrapper(e,t){const n={},s=e===null?[]:[[e,"properties@"],["/font","rootFont"]],r=e===null?qE:$E,o=[t];return this._initWrapper(this._childrenWidgetBus,n,s,r,...o)}_createStyleSubscription(e,t,n,s=null){return{widgetWrapper:this._createStyleStylerWrapper(s,e),mark:n,styleLinkPropertiesId:s,parentSubscription:t}}_registerStyleSubscription(e,t,n){this._styleSubscribers.set(e,n),t.styles.add(e)}_unregisterStyleSubscription(e){if(!this._styleSubscribers.has(e))return;const{parentSubscription:t}=this._styleSubscribers.get(e);this._styleSubscribers.delete(e),t.styles.delete(e)}_finalizeMarkSubscription(e,t){const n=this._subscribers.get(e.parentElement),s=this._getStyleLinkPropertiesId(n.typeSpecProperties,t.attrs["data-style-name"]),r=this._createStyleSubscription(e,n,t,s);this._registerStyleSubscription(e,n,r),this._updateDOM(()=>this._activateWidget(r.widgetWrapper))}_checkNewlySubscribedMarks(e){const t=Array.from(e);for(;t.length;){if(this._newlySubscribedMarks.size===0){this._marksDomObserver.disconnect();break}const n=t.pop();for(const s of n.addedNodes)if(this._newlySubscribedMarks.has(s)){const r=this._newlySubscribedMarks.get(s);this._newlySubscribedMarks.delete(s),this._finalizeMarkSubscription(s,r)}}for(const[n,s]of this._newlySubscribedMarks)n.parentElement&&this._subscribers.has(n.parentElement)&&(this._newlySubscribedMarks.delete(n),this._finalizeMarkSubscription(n,s));this._newlySubscribedMarks.size===0&&this._marksDomObserver.disconnect()}_createTypeSpecStylerWrapper(e,t){const n={},s=[[e,"properties@"],["/font","rootFont"]],r=e0,o=[t];return this._initWrapper(this._childrenWidgetBus,n,s,r,...o)}_getTypeSpecPropertiesId=Dc;subscribe(e,t){const n=this._getTypeSpecPropertiesId(t),s=this._createTypeSpecStylerWrapper(n,e);this._subscribers.set(e,{widgetWrapper:s,pathOfTypes:t,typeSpecProperties:n,styles:new Set}),this._updateDOM(()=>this._activateWidget(s))}_activateWidget(e){this._widgets.push(e),this._createWidget(e);const t=ln.createInitial(this.getEntry("/"),e.dependencyMapping),n=e.getChangedMapFromCompareResult(!0,t);n.size&&e.widget.update(n)}_deactivateWidget(e){this._destroyWidget(e),this._widgets.splice(this._widgets.indexOf(e),1)}unsubscribe(e){const t=this._subscribers.get(e);this._subscribers.delete(e),this._updateDOM(()=>this._deactivateWidget(t.widgetWrapper));for(const n of t.styles){const{mark:s}=this._styleSubscribers.get(n);this.unsubscribeMark(n),this.subscribeMark(n,s)}}subscribeMark(e,t){if(this._newlySubscribedMarks.size===0){const n={childList:!0,subtree:!0},s=this.widgetBus.getWidgetById("proseMirror",null);if(s===null)return;this._marksDomObserver.observe(s.element,n)}this._newlySubscribedMarks.set(e,t)}unsubscribeMark(e){if(this._newlySubscribedMarks.has(e)&&(this._newlySubscribedMarks.delete(e),this._newlySubscribedMarks.size===0&&this._marksDomObserver.disconnect()),!this._styleSubscribers.has(e))return;const t=this._styleSubscribers.get(e);this._unregisterStyleSubscription(e),this._updateDOM(()=>this._deactivateWidget(t.widgetWrapper))}initialUpdate(){}_provisionWidgets(e){const t=new Set,n=this._getChangedMapFromCompareResult(e);if(!n.has("nodeSpecToTypeSpec")&&!n.has("typeSpec"))return t;const s=new Map;for(const[r,o]of this._subscribers){const a=this._getTypeSpecPropertiesId(o.pathOfTypes);if(a===o.typeSpecProperties)continue;const l=this._createTypeSpecStylerWrapper(a,r);this._destroyWidget(o.widgetWrapper),this._widgets.splice(this._widgets.indexOf(o.widgetWrapper),1,l),this._createWidget(l),o.typeSpecProperties=a,o.widgetWrapper=l,t.add(l);for(const A of Array.from(o.styles)){const u=this._styleSubscribers.get(A),h=this._getStyleLinkPropertiesId(o.typeSpecProperties,u.mark.attrs["data-style-name"]);s.set(A,[o,u,h])}}for(const[r,o]of this._styleSubscribers){if(s.has(r))continue;const{parentSubscription:a,mark:l}=o,A=this._getStyleLinkPropertiesId(a.typeSpecProperties,l.attrs["data-style-name"]);A!==o.styleLinkPropertiesId&&s.set(r,[a,o,A])}for(const[r,[o,a,l]]of s){const A=this._createStyleSubscription(r,o,a.mark,l),{widgetWrapper:u}=A;this._destroyWidget(a.widgetWrapper),this._widgets.splice(this._widgets.indexOf(a.widgetWrapper),1,u),this._createWidget(u),t.add(u),this._registerStyleSubscription(r,o,A)}return t}_viewDomObserver=null;_updateDOMContext=!1;_updateDOM(e){if(this._viewDomObserver===null&&(this._viewDomObserver=this.widgetBus.getWidgetById("proseMirror").view.domObserver),this._viewDomObserverIsStoppped)return e();this._viewDomObserver.stop(),this._updateDOMContext=!0;try{return e()}finally{this._viewDomObserver.start(),this._updateDOMContext=!1}}update(...e){this._updateDOM(()=>super.update(...e))}}function i0(i,e=null){const t=[];for(let n=0,s=i.length;n<s;n+=3)t.push(i[n].type.name);return e&&t.push(e),t}c(i0,"_getPathOfTypes");class wx{static{c(this,"ProsemirrorNodeView")}constructor(e,t,n,s){this.widgetBus=e;const r=this.widgetBus.getLinked(t.type.schema).get("nodes").get(t.type.name),o=r.get("tag").value,a=e.domTool.createElement(o,{"data-node-type":t.type.name});this.dom=a,this._stylerDOM=a,this.contentDOM=a;const l=n.state.doc.resolve(s()),A=i0(l.path,t.type.name);e.getWidgetById("typeSpecSubscriptionsRegistry").subscribe(this._stylerDOM,A)}destroy(){this.widgetBus.getWidgetById("typeSpecSubscriptionsRegistry",null)?.unsubscribe(this._stylerDOM)}}class Zx{static{c(this,"ProsemirrorMarkView")}constructor(e,t){this.widgetBus=e;const n="span",s=e.domTool.createElement(n,{"data-style-name":t.attrs["data-style-name"]});this.dom=s,this._stylerDOM=s,this.contentDOM=s,e.getWidgetById("typeSpecSubscriptionsRegistry").subscribeMark(this._stylerDOM,t)}destroy(){this.widgetBus.getWidgetById("typeSpecSubscriptionsRegistry").unsubscribeMark(this._stylerDOM)}}class kx{static{c(this,"ProseMirrorMenuView")}constructor(e,t){this.widgetBus=e,this.widgetBus.getWidgetById("proseMirrorMenu").updateView(t)}update(e,t){this.widgetBus.getWidgetById("proseMirrorMenu").updateView(e,t)}destroy(){this.widgetBus.getWidgetById("proseMirrorMenu",null)?.destroyView()}}function Or(i,e,t){i.set(e,t),i.set(t,e)}c(Or,"mapSetBiDirectional");class _x extends me{static{c(this,"ProseMirror")}static TEMPLATE='<div class="prosemirror-host"></div>';constructor(e){super(e),this._nodesCache=new WeakMap,this._childrenWidgetBus=Object.assign(Object.create(e),{getLinked:c(t=>this._nodesCache.get(t),"getLinked")}),this._createGenericNodeView=(...t)=>new wx(this._childrenWidgetBus,...t),this._createGenericMarkView=(...t)=>new Zx(this._childrenWidgetBus,...t),[this.element,this.view]=this.initTemplate()}_menuPlugin(){return new vd({view:c(e=>new kx(this._childrenWidgetBus,e),"view")})}destroy(){this.view&&!this.view.isDestroyed&&this.view.destroy()}_initProseMirrorView(e){const t={nodes:{...Os.nodes,"generic-bloc":{content:"inline*",group:"block",toDOM:c(()=>["div",0],"toDOM")}},marks:{...Os.marks}},n=new jp(t),s=wE(),r=Object.assign({},DF,{Enter:_c(SE,NE,QE,s)}),o=rs.create({schema:n,plugins:[AF(),Jf({"Mod-z":EE,"Mod-y":BE}),Jf(r),this._menuPlugin()],doc:n.topNodeType.createAndFill()});return new IE(e,{state:o,dispatchTransaction:this._prosemirrorDispatchTranscation.bind(this),markViews:{"generic-style":this._createGenericMarkView}})}initTemplate(){const e=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE),t=e.firstElementChild;this._insertElement(t);const n=this._initProseMirrorView(t);return[t,n]}_createProseMirrorSchema(e){const t={nodes:{},marks:{}};for(const[n,s]of e.get("nodes")){if(n in Os.nodes){console.warn(`PROSEMIRROR NODE_SPEC: attempt to override reserved node name ${n}, SKIPPING.`);continue}const r={};for(const[a,l]of s){if(a==="attrs"){console.warn(`PROSEMIRROR SKIPPING nodeSpec property "${a}" in dynamic schema definition`);continue}l.isEmpty||a!=="tag"&&(r[a]=l.value)}const o=s.get("tag");o.isEmpty||o.value===""?console.warn(`PROSEMIRROR NODE_SPEC: node does not define a tag, node name "${n}"`):(r.parseDOM=[{tag:o.value}],r.toDOM=()=>[o.value,0]),t.nodes[n]=r}Object.assign(t.nodes,Os.nodes);for(const[n,s]of e.get("marks")){if(n in Os.marks){console.warn(`PROSEMIRROR MARK_SPEC: attempt to override reserved mark name ${n}, SKIPPING.`);continue}const r={};for(const[a,l]of s){if(a==="attrs"){console.warn(`PROSEMIRROR SKIPPING markSpec property "${a}" in dynamic schema definition`);continue}l.isEmpty||a!=="tag"&&(r[a]=l.value)}const o=s.get("tag");o.isEmpty||o.value===""?console.warn(`PROSEMIRROR MARK_SPEC: mark does not define a tag, mark name: "${n}"`):(r.parseDOM=[{tag:o.value}],r.toDOM=()=>[o.value,0]),t.marks[n]=r}return Object.assign(t.marks,Os.marks),new jp(t)}_rawCreateMetamodelNode(e,t,n){const s=qu.createPrimalDraft(n),r=t.type.name==="unknown"&&"unknown-type"in t.attrs?t.attrs["unknown-type"]:t.type.name;if(s.get("typeKey").value=r,t.type.name==="text")s.get("text").value=t.text;else{const A=s.get("content");for(let u=0,h=t.content.childCount;u<h;u++){const d=t.content.child(u);A.push(this._createMetamodelNode(e,d,n))}}const o=s.get("marks");for(const A of t.marks){const u=o.constructor.Model.createPrimalDraft(n);u.get("typeKey").value=A.type.name;const h=u.get("attrs");for(const[d,g]of Object.entries(A.attrs))h.set(d,Dl(g,n));o.push(u)}const a=s.get("attrs");for(const[A,u]of Object.entries(t.attrs))t.type.name==="unknown"&&A==="unknown-type"&&r!=="unknown"||a.set(A,Dl(u,n));return s.metamorphose()}_rawCreateProseMirrorNode(e,t,n){const s=t.get("typeKey").value;let r;const o=[];for(const[,a]of t.get("marks")){const l=a.get("attrs");let A=null;if(l.size){A={};for(const[h,d]of l)A[h]=Wl(d)}const u=n.mark(a.get("typeKey").value,A);o.push(u)}if(s==="text"){let a=t.get("text");if(a.isEmpty||a.value.lenght===0)throw new Error(`${this} text can't be empty`);r=n.text(a.value,o)}else{const a=t.get("content"),l=[];for(const[,d]of a){const g=this._createProseMirrorNode(e,d,n);l.push(g)}const A=t.get("attrs");let u=null;if(A.size){u={};for(const[d,g]of A)u[d]=Wl(g)}let h=s;s in n.nodes||(h="unknown",u===null&&(u={}),u["unknown-type"]=s),r=n.node(h,u,l,o)}return r}_createMetamodelNode(e,t,n){if(e!==null&&e.has(t))return e.get(t);const s=this._rawCreateMetamodelNode(e,t,n);return e!==null&&Or(e,t,s),s}_createProseMirrorNode(e,t,n){if(e!==null&&e.has(t))return e.get(t);const s=this._rawCreateProseMirrorNode(e,t,n);return e!==null&&Or(e,t,s),s}_prosemirrorDispatchTranscation(e){const t=this.view.state.apply(e),n=this.getEntry("document");this.view.updateState(t),this._nodesCache.get(n)===this.view.state.doc||this._changeState(()=>{const r=this.getEntry("document"),o=this.view.state.doc,a=this._createMetamodelNode(this._nodesCache,o,r.oldState.dependencies),l=D.fromString(this.widgetBus.getExternalName("document")),A=this.getEntry(l.parent),u=l.parts.at(-1);A.set(u,a),this._nodesCache.set(a,this.view.state.doc),Or(this._nodesCache,a,this.view.state.doc)})}update(e){const t=[];let n=this.view.state.schema;const s={};if(e.has("proseMirrorSchema")){const a=e.get("proseMirrorSchema");n=this._createProseMirrorSchema(a),t.push(["schema",n]);const l=this.view.props.nodeViews||{},A=a.get("nodes");for(const u of A.keys())if(!(u in l)){if(!("nodeViews"in s)){s.nodeViews={};for(const[h,d]of Object.entries(l))A.has(h)&&(s.nodeViews[h]=d)}s.nodeViews[u]=this._createGenericNodeView}this._nodesCache=new WeakMap,Or(this._nodesCache,n,a)}const r=e.has("document")?e.get("document"):this.getEntry("document"),o=this._createProseMirrorNode(this._nodesCache,r,n);if(o!==this.view.state.doc&&(t.push(["doc",o]),Or(this._nodesCache,r,o)),t.length){const a=Object.fromEntries(["schema","doc","selection","storedMarks","plugins"].map(h=>[h,this.view.state[h]])),l=Object.fromEntries(t),A=Object.assign({},a,l),u=rs.create(A);s.state=u,this.view.setProps(s)}}}class Yx extends we{static{c(this,"ProseMirrorContext")}constructor(e,t,n,s,r){super(e,t,[[{...r,id:"proseMirrorMenu"},["stylePatchesSource","typeSpec","proseMirrorSchema","nodeSpecToTypeSpec","document"],Fx,s],[{...n,id:"proseMirror"},["stylePatchesSource","typeSpec","proseMirrorSchema","nodeSpecToTypeSpec","document"],_x],[{id:"typeSpecSubscriptionsRegistry"},["nodeSpecToTypeSpec","typeSpec"],Qx,t,s]])}}function Wx(i,e,t,n=Object.freeze(new Et)){const s=new Map,r=new Set;for(let o=0;o<e.length;o++){const{$from:a,$to:l}=e[o];a.depth===0&&!s.has(0)&&s.set(0,[i.type.name]),i.nodesBetween(a.pos,l.pos,(A,u)=>{if(r.has(u)||n.has(A.type.name)||A.isAtom&&A.isInline&&u>=a.pos&&u+A.nodeSize<=l.pos)return;const h=i.resolve(u);s.set(u,i0(h.path,A.type.name))})}return s.values()}c(Wx,"_getPathsOfTypes");function Dx(i,e){i.has(e.type)||i.set(e.type,new Set),"data-style-name"in e.attrs&&i.get(e.type).add(e.attrs["data-style-name"])}c(Dx,"_addMark");function Tx(i){const{from:e,$from:t,to:n,empty:s}=i.selection,r=new Map,o=new Set,a=[o,r],l=c(A=>Dx(r,A),"addMark");return s?((i.storedMarks||t.marks()).forEach(l),t.parent&&o.add(t.parent.type),a):(n>e&&i.doc.nodesBetween(e,n,A=>{A.marks.forEach(l),o.add(A.type)}),a)}c(Tx,"getActiveNodesAndMarks");class Fx extends me{static{c(this,"UIProseMirrorMenu")}constructor(e,t){super(e),this._originTypeSpecPath=t,this._buttonToStyle=new Map,this._buttonToBlock=new Map,[this.element,this._stylesContainer,this._blocksContainer]=this._initTemplate()}_getTemplate(e){return e("div",{class:"ui_prose_mirror_menu"},e("div",{class:"ui_prose_mirror_menu-container ui_prose_mirror_menu-container-blocks"},e("span",{class:"typeroof-ui-label"},"Nodes:"),e("div",{class:"ui_prose_mirror_menu-blocks"})),e("div",{class:"ui_prose_mirror_menu-container ui_prose_mirror_menu-container-styles"},e("span",{class:"typeroof-ui-label"},"Styles:"),e("div",{class:"ui_prose_mirror_menu-styles"})))}_initTemplate(){const e=this._getTemplate(this._domTool.h),t=e.querySelector(".ui_prose_mirror_menu-styles"),n=e.querySelector(".ui_prose_mirror_menu-blocks");return this._insertElement(e),t.addEventListener("pointerdown",this._stylesClickHandler.bind(this)),n.addEventListener("pointerdown",this._blocksClickHandler.bind(this)),[e,t,n]}_stylesClickHandler(e){if(!this._buttonToStyle.has(e.target)||!this._editorView||(e.preventDefault(),this._editorView.focus(),e.target.disabled))return;const t=this._buttonToStyle.get(e.target),{dispatch:n,state:s}=this._editorView,r=s.schema.marks["generic-style"];YF(r,{"data-style-name":t},{})(s,n)}_blocksClickHandler(e){if(!this._buttonToBlock.has(e.target)||!this._editorView||(e.preventDefault(),this._editorView.focus(),e.target.disabled))return;const t=this._buttonToBlock.get(e.target),{dispatch:n,state:s}=this._editorView,r=s.schema.nodes[t];ZF(r)(s,n)}_getTypeSpecPropertiesId=Dc;_getTypeSpecs(e){const{empty:t,$cursor:n,ranges:s}=e.selection,r=new Map;if(t&&!n)return r;const o=Wx(e.doc,s,!1,new Set(["text"]));for(const a of o){const l=this._getTypeSpecPropertiesId(a,!0),A=this.getEntry(l);r.set(A,l)}return r}updateView(e){this._editorView=e;const t=this._editorView.state,n=this._getTypeSpecs(t),s=new Map,r=new Set,o=new Set;for(const[g,p]of n){const f=g.get("stylePatches");s.set(g,new Set(f.keys()));for(const m of f.keys())r.add(m)}for(const g of r)s.values().every(p=>p.has(g))&&o.add(g);const[a,l]=Tx(t),A=t.schema.marks["generic-style"],u=l.get(A)||new Set,h=this._domTool.h,d=Array.from(this._buttonToStyle.keys());this._buttonToStyle.clear();for(const g of Array.from(r).toSorted()){const p=d.length?d.pop():h("button",{type:"button"},"initial");p.textContent=g,p.disabled=!o.has(g),p.classList[u.has(g)?"add":"remove"]("active"),this._buttonToStyle.set(p,g)}this._stylesContainer.replaceChildren(...this._buttonToStyle.keys());for(const[g,p]of this._buttonToBlock){const f=t.schema.nodes[p];g.classList[a.has(f)?"add":"remove"]("active")}}destroyView(){this._editorView=null}update(e){if(e.has("nodeSpecToTypeSpec")){const t=e.get("nodeSpecToTypeSpec"),n=this._domTool.h,s=Array.from(this._buttonToBlock.keys());this._buttonToBlock.clear();for(const r of t.keys()){const o=s.length?s.shift():n("button",{type:"button"},"initial");o.textContent=r,this._buttonToBlock.set(o,r)}this._blocksContainer.replaceChildren(...this._buttonToBlock.keys()),this._editorView&&this.updateView(this._editorView)}}}const xx=new Set(["axesLocations/",bn,Rt,"stylePatches/"]);function Lx(i){const e=(()=>{const r=Es.createPrimalDraft(i);for(const[o,a]of Dd)if(!xx.has(a.prefix))if(a.prefix==at){const l=no(()=>null,a,o),A=pr(l,r.dependencies);r.set(o,A)}else if(a.prefix==Hi){const l=no(()=>null,a,o),A=dy(r.dependencies,l);r.set(o,A)}else{const l=no(()=>null,a,o);r.get(o).value=l}return r.metamorphose()})(),t=Vi.propertiesGenerator(UE,e,new Map),n=Vi.initPropertyValuesMap(t,new Map),s=new it(n);return Object.freeze(s),s}c(Lx,"_getTypeSpecDefaultsMap");class Mx extends we{static{c(this,"TypeSpecRampController")}constructor(e,t){const n=e.domTool.createElement("div",{class:"type_spec-manager"}),s=e.domTool.createElement("div",{class:"properties-manager"}),r=e.domTool.createElement("div",{class:"style_patches-manager"}),o=e.domTool.createElement("div",{class:"document-manager"}),a=e.domTool.createElement("div",{class:"node_spec-manager"}),l=new Map([...t,["type_spec-manager",n],["properties-manager",s],["style_patches-manager",r],["document-manager",o],["node_spec-manager",a]]),A=D.fromParts(".","typeSpec"),u=e.rootPath.append(...A);e.wrapper.setProtocolHandlerImplementation(...Nn.create("typeSpecProperties@")),e.wrapper.setProtocolHandlerImplementation(...Nn.create("stylePatchProperties@",{notFoundFallbackValue:null})),e.wrapper.setProtocolHandlerImplementation(...Nn.create("styleLinkProperties@")),super(e,l);const h=Lx(e.getEntry(u).dependencies),d=[[{rootPath:e.rootPath},[["stylePatchesSource","collection"]],yx,l],[{rootPath:A},[[".","typeSpec"],[e.rootPath.append("stylePatchesSource").toString(),"stylePatchesSource"],["/font","rootFont"]],xd,l,UE,la,h],[{zone:"main"},[],qt,o],[{zone:"main"},[],tt,"Styles",r],[{zone:"main"},[],tt,"TypeSpecs",n],[{zone:"type_spec-manager"},[],Cd,"Create","",[[pe.TYPE_SPEC_TYPE_SPEC_CREATE,"Type Spec","TypeSpec"]]],[{zone:"type_spec-manager"},[["typeSpec/children","activeActors"],["editingTypeSpec","editingActor"]],JF,{PATH:pe.TYPE_SPEC_TYPE_SPEC_PATH,CREATE:pe.TYPE_SPEC_TYPE_SPEC_CREATE}],[{zone:"type_spec-manager"},[["typeSpec/children","rootCollection"]],Ti,"Delete","",[pe.TYPE_SPEC_TYPE_SPEC_PATH]],[{zone:"main"},[],tt,"TypeSpec Properties",s],[{},[["editingTypeSpec","typeSpecPath"],["typeSpec/children","children"],["typeSpec","rootTypeSpec"]],ix,new Map([...l,["main",s]])],[{zone:"style_patches-manager",relativeRootPath:D.fromParts(".","stylePatchesSource")},[[".","childrenOrderedMap"],["../editingStylePatch","stylePatchPath"]],Ax,l,[],null,!0],[{zone:"style_patches-manager"},[["typeSpec/children","rootCollection"]],Ti,"Delete","",[pe.TYPE_SPEC_STYLE_PATCH_PATH,pe.TYPE_SPEC_STYLE_PATCH_LINK_PATH,pe.AXESMATH_LOCATION_VALUE_PATH]],[{zone:"style_patches-manager",relativeRootPath:D.fromParts(".","stylePatchesSource")},[[".","childrenOrderedMap"],["../editingStylePatch","stylePatchPath"]],ax,new Map([...l,["main",r]])],[{},[],Yx,new Map([...l,["main",o]]),{zone:"layout"},u,{zone:"main"}],[{zone:"main"},[],tt,"NodeSpecs",a],[{zone:"node_spec-manager"},[["./proseMirrorSchema/nodes","childrenOrderedMap"],["editingNodeSpecPath","nodeSpecPath"]],ux,new Map([...l,["main",a]]),[],"NodeSpec-Map",!0],[{zone:"node_spec-manager"},[["./proseMirrorSchema/nodes","childrenOrderedMap"],["editingNodeSpecPath","nodeSpecPath"]],lx,new Map([...l,["main",a]])],[{zone:"node_spec-manager"},[["./nodeSpecToTypeSpec","childrenOrderedMap"],["./typeSpec","sourceMap"],["./proseMirrorSchema/nodes","targetMap"]],_W,new Map([...l,["main",a]]),[],"NodeSpec to TypeSpec",!0]];this._initWidgets(d)}update(...e){this.widgetBus.wrapper.getProtocolHandlerImplementation("typeSpecProperties@").resetUpdatedLog(),this.widgetBus.wrapper.getProtocolHandlerImplementation("stylePatchProperties@").resetUpdatedLog(),this.widgetBus.wrapper.getProtocolHandlerImplementation("styleLinkProperties@").resetUpdatedLog(),super.update(...e)}initialUpdate(...e){this.widgetBus.wrapper.getProtocolHandlerImplementation("typeSpecProperties@").resetUpdatedLog(),this.widgetBus.wrapper.getProtocolHandlerImplementation("stylePatchProperties@").resetUpdatedLog(),this.widgetBus.wrapper.getProtocolHandlerImplementation("styleLinkProperties@").resetUpdatedLog(),super.initialUpdate(...e)}}const vL=Object.freeze(Object.defineProperty({__proto__:null,Controller:Mx,HierarchicalScopeTypeSpecnion:eh,LocalScopeTypeSpecnion:Vi,Model:XF,StyleLinkLiveProperties:jE,StylePatchSourceLiveProperties:KE,SyntheticValue:_n,TypeSpecLiveProperties:Fd,TypeSpecMeta:xd,UIDocument:Sx,UIDocumentElementTypeSpecDropTarget:Gx,_BaseTypeSpecnion:Fl,axisLocationsGen:Wc,fillTreeFromPaths:HE,openTypeFeaturesGen:ma,pathSpecPathsGen:ME,pathSpecValuesGen:VE,validateAttributeSpecName:Wd,validateMarkSpecName:YE,validateNodeSpecName:Yc},Symbol.toStringTag,{value:"Module"})),s0=new Map([["A-Z","ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["a-z","abcdefghijklmnopqrstuvwxyz"],["0-9","0123456789"],["custom",null]]),$f=Array.from(s0.keys()),r0=Wt.createClass("GridContentTypeModel",$f,$f.at(0)),Vx=ye.createClass("GridContentModel",["type",r0],["customText",qe]),Ld=ye.createClass("GridPropertiesModel",[nd,yl],[id,yl],...XI,...Ic,...Jo,...Pi.createWithInternalizedDependency("availableDimensionSequenceTypes",ml,IY),["font",new $t("font",ao)]),Ox=ks.createClass("TypeToolsGridModel",["properties",Ld],["content",Vx]);function Md(i,e){const t=[];console.log(`------->getPPSMapForModel=====>${e.name} in ${i}`);for(const[n,s]of e.fields.entries()){let r=Ne,o=null,a=null;e===td&&(r=rn),n==="amountValue"&&(r=rn),e===mo&&n==="type"?(r=rn,a="gridAxisType"):s===mo?(r=rn,a="gridAxisSelection"):e===Ey&&(n==="start"||n==="end")&&(r=rn,a=n),o=`${i.propertyRoot}${n}`;const l=[n,Ze.createSimpleRecord(r,n,o,a)];t.push(l),console.log(`::: ${n}: ${l[1]} (${e.name})`)}return Object.freeze(new Ze(t))}c(Md,"getPPSMapForModel");const Px=new Set(["autoOPSZ"]);function Hx(i,e){const t=[];for(const[n,s]of e.fields.entries()){let r=Ne,o=null,a=null;if(Px.has(n)?r=null:n==="axesLocations"?r="axesLocations/":n==="openTypeFeatures"?r=bn:s===yl?r=rn:s===Vt&&(r=at),r===null)continue;const l=[n,Ze.createSimpleRecord(r,n,o,a)];t.push(l)}return Object.freeze(new Ze(t))}c(Hx,"getGridPropertiesPPSMap");const So=Hx(null,Ld);console.log("GRID_PROPERTIES_PPS_MAP ...");for(const[i,e]of So)console.log(`... ${i}: ${e}`);class th extends dn{static{c(this,"UIDimensionSequence")}constructor(e,t,n,s,r){const o=e.domTool.createElement("div",{class:"ui-dimension_sequence"}),a=new Map([...t,["local",o]]);e.insertElement(o),super(e,a),this._injectable=n,this._ppsRecord=s,this._label=r;{const l=this._initialWidgets;this._initialWidgetsAmount=l.length,this._initWidgets(l)}}get _initialWidgets(){return[[{zone:"local"},[],yn,"legend",{},[this._label]],[{zone:"local"},[["availableDimensionSequenceTypes","options"],["dimensionSequenceTypeKey","value"]],vr,"ui-dimension_sequence-select","Type",(t,n)=>n.get("label").value,[!0,"(disabled)",ce.NULL],this._changeTypeHandler.bind(this)]]}_provisionWidgets(){const e=this._widgets.splice(this._initialWidgetsAmount,1/0),t=we.prototype._provisionWidgets.call(this),n=this.getEntry("."),s=n.get("instance"),r=s.hasWrapped?s.WrappedType:null;if(r!==null)if(this._ActiveInstanceType===r)this._widgets.push(...e),e.splice(0,1/0);else{const o=Md(this._ppsRecord,r),a=this._defineGenericWidgets(r,l=>r.fields.has(l),{zone:"local",rootPath:this.widgetBus.rootPath.append("instance")},o,this._injectable);this._initWidgets(a)}this._ActiveInstanceType=r;for(const o of e)this._destroyWidget(o);for(const o of this._widgets.slice(this._initialWidgetsAmount))o.widget!==null||(this._createWidget(o),t.add(o));return t}_changeTypeHandler(...e){console.log(`${this}._changeTypeHandler (${this.widgetBus.rootPath}) ...args:`,...e)}}for(const[i,e]of Object.entries(Object.getOwnPropertyDescriptors(ca.prototype)))Object.hasOwn(th.prototype,i)||Object.defineProperty(th.prototype,i,e);class o0 extends me{static{c(this,"AddOrAndDragButton")}[fn]=Lo;static TEMPLATE='<button class="add_or_drag drag_handle add_or_drag-drag_handle">(unconfigured)</button>';constructor(e,t,n,s){super(e),this._dataTransferType=t,this._dataTransferValue=n,[this.element]=this.initTemplate(s)}initTemplate(e){const t=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE),n=t.firstElementChild;return n.textContent=e,this._insertElement(n),n.setAttribute("draggable","true"),n.addEventListener("dragstart",this._dragstartHandler.bind(this)),n.addEventListener("dragend",this._dragendHandler.bind(this)),n.addEventListener("click",this._clickHandler.bind(this)),[n]}_setDragDataFN(e,t,n){e.setData(t,`${n}`),e.setData("text/plain",`[TypeRoof ${t}: ${n}]`)}_dragstartHandler(e){this._setDragDataFN(e.dataTransfer,this._dataTransferType,this._dataTransferValue),e.currentTarget.classList.add("dragging"),e.dataTransfer.effectAllowed="copy",e.dataTransfer.setDragImage(this.element,0,0)}_dragendHandler(e){e.currentTarget.classList.remove("dragging")}_clickHandler(e){return console.log(`${e}`,e),this._changeState(()=>{const t=this.getEntry("collection"),n=Kh.prototype._createNewItem.call(this,".","insert",t,this._dataTransferValue);return t.push(n)})}}class Xx extends we{static{c(this,"UIExplicitStopsLocations")}constructor(e,t){const n=new Map(t);n.set("main",e.wrapper.host),super(e,n);const s=[[{zone:"main"},[[".","collection"]],o0,pe.AXESMATH_LOCATION_VALUE_CREATE,"default","add"],[{zone:"main"},[],Ti,"Drop here to delete","",[pe.AXESMATH_LOCATION_VALUE_PATH]],[{zone:"main"},[[".","collection"]],Kh,n]];this._initWidgets(s)}}const zx=new Map([[mo,[fr,Y("settings:rootPath"),Y("zones"),Y("injectable"),Y("ppsMap"),Y("label")]],[po,[Uh,Y("settings:rootPath"),Y("settings:dependencyMapping",[".","value"]),[],!1,Y("label")]],[td,[fr,Y("settings:rootPath"),Y("zones"),Y("injectable"),Y("ppsMap"),Y("label")]],[zh,[Xx,Y("settings:rootPath"),Y("zones")]]]),Jx=new Map([[Iy,[Di,Y("settings:internalPropertyName","value"),Y("label"),Y("settings:@set",["activationTest",function(){return!this.widgetBus.getEntry("value").isEmpty}])]],[yy,[Di,Y("settings:internalPropertyName","value"),Y("label"),Y("settings:@set",["activationTest",function(){return!this.widgetBus.getEntry("value").isEmpty}])]],[vc,[Wi,Y("settings:internalPropertyName","value"),Y("label"),Y("unit"),{},Y("settings:@set",["activationTest",function(){return!this.widgetBus.getEntry("value").isEmpty}])]],[by,[Wi,Y("settings:internalPropertyName","value"),Y("label"),Y("unit"),{},Y("settings:@set",["activationTest",function(){return!this.widgetBus.getEntry("value").isEmpty}])]]]),Ux=Ry(zx,Jx,Li),Js=Symbol("_NOTDEF");function em(i,e=Js){const t=Ve(i,e===Js?Ve.NOTDEF:e);return t===e?e:t.default}c(em,"_getFallback");function io(i,e,t,n=Js){const{fullKey:s,registryFullKey:r}=e,o=i(),a=o!==null?o.typeSpecnion.getProperties():new Map;if(e.prefix===at){const[l]=zi(s,a,[null]);return l!==null?l:em(r,n)}else if(e.prefix==="axesLocations/"||e.prefix===bn){const l=`${e.prefix}${t}`,A=a.has(l)?a.get(l):n;if(A===Js)throw new Error(`KEY ERROR typeSpecGetDefaults: not found "${s}".`);return A}else if(e.prefix===Rt){const l=a.has(s)?a.get(s):n;if(l===Js)throw new Error(`KEY ERROR typeSpecGetDefaults: not found "${s}".`);return l}else if(e.prefix===rn){console.log(`DIMENSION typeToolsGridGetDefaults ${e}`);const l=a.has(s)?a.get(s):n;if(l===Js)throw new Error(`KEY ERROR typeSpecGetDefaults: not found "${s}".`);return l}else return a.has(s)?a.get(s):em(r,n)}c(io,"typeToolsGridGetDefaults");function*Vd(i){yield*yh(i,yl)}c(Vd,"getDimensionModelFields");class Kx extends we{static{c(this,"TypeTensorController")}constructor(e,t){const n=new Map(t);n.set("main",e.wrapper.host),super(e,n);const s=D.fromString(this.widgetBus.getExternalName("dimensionsHost")),r=this.widgetBus.getExternalName("@properties");this._availableDimensions=this._determineAvailableDimensions(s);const o=c(()=>!0,"requireUpdateDefaults"),a=c(()=>this.getEntry(r),"getLiveProperties"),l=io.bind(null,a),A=[[{zone:"main",rootPath:e.rootPath.parent,relativeRootPath:D.fromParts(".","content","type")},[[".","value"]],Gh,"Content",new Map(r0.enumItems.map(u=>[u,u]))],[{zone:"main",rootPath:e.rootPath.parent,relativeRootPath:D.fromParts(".","content"),activationTest:c(function(){return this.widgetBus.getEntry("type").value==="custom"},"activationTest")},[["./type","type"],["./customText","value"]],Di,"Custom"],...this._availableDimensions.map(u=>[{zone:"main",rootPath:s,relativeRootPath:D.fromParts(".",u)},[],th,n,{genericTypeToUIElement:Ux,getPPSMapForModel:Md,requireUpdateDefaults:o,getDefaults:l,updateDefaultsDependencies:[]},Ze.createSimpleRecord(rn,u),EY(u)]),[{zone:"main"},[["fontSize","value"]],ec,io.bind(null,a,Ze.createSimpleRecord(Ne,"fontSize"),"fontSize"),()=>!1,"Font Size","pt",{min:0,max:244,step:1,default:36}],...["textColor","backgroundColor"].map(u=>{const h=So.get(u);return[{relativeRootPath:D.fromParts(".",u),zone:"main"},[],Io,n,Ve(h,{label:u}).label||u,io.bind(null,a,h,u),[],()=>!1]}),[{zone:"main"},[["openTypeFeatures","openTypeFeatures"],["/font","rootFont"]],mc,n,l,()=>!1,[]],[{zone:"main"},[["fontSize","fontSize"],["./font","font"],["axesLocations","axesLocations"],["autoOPSZ","autoOPSZ"]],gn,l,So.get("axesLocations"),o],[{zone:"main"},[[".","referenceItem"],[r,"properties@"]],fd,"Grid-Properties"]];this._initWidgets(A)}_determineAvailableDimensions(e){const t=this.widgetBus.getEntry(e),n=t instanceof nn?t.WrappedType:t.constructor,s=[];for(const r of Vd(n))s.push(r);return s}}function*jx(i,e){const t=e.get("font");t!==ce.NULL&&(yield[`${Rt}font`,t.value])}c(jx,"fontGen");function*a0(i,e){const t=e.get("fontSize");t.isEmpty||(yield[`${Ne}fontSize`,t.value])}c(a0,"fontSizeGen");function l0(i,e){return!e||!(i in e)?null:e[i]}c(l0,"calculateAxisRangeLogicValueSynthetic");function*nh(i,e,t){const n=t.get("logicalValue").value;if(n==="number"){const s=t.get("numericValue").value;yield[i,s]}else{const s=[e];yield[i,new _n(l0.bind(null,n),s)]}}c(nh,"axisLocationValueGen");function qx(i,e){const t=e.axisRanges;return i in t?t[i]:null}c(qx,"calculateFontAxisRangeSynthetic");function $x(i,e=null,t=null){console.log("calculateRangeSequence start:",e,"end:",t);const n=i.get("type").value;if(n==="amount"){const s=i.get("amountValue").value;if(e===null||t===null)return new Array(s).fill(null);const r=s-1,o=t-e,a=r===0?0:o/r,l=[e];for(let A=0;A<r;A++)l.push(l.at(-1)+a);return l}if(n==="stepSize"){if(e===null||t===null)return[null];const s=i.get("stepSizeValue").value,r=e>t?-1:1,o=s*r,a=[];let l=e;do a.push(l),l+=o;while(r>=0&&l<=t||r<0&&l>=t);return a}throw new Error(`UNKNOWN VALUE for steppingType ${n}`)}c($x,"calculateRangeSequence");function eL(...i){return i}c(eL,"calculateExplicitSequence");const tm=new Map([["fontSize",{min:1,max:1500,default:36,targetKey:`${Ne}fontSize`}]]);function*nm(i,e,t,n,s){const r=s.get("type").value;if(yield[e,r],r==="font"){const o=s.get("fontAxisTagValue").value,a=[t,i];yield[t,o],yield[n,new _n(qx,a)]}else if(r==="exo"){const o=s.get("exoAxisTagValue").value,a=tm.has(o)?tm.get(o):null;yield[t,o],yield[n,a]}else throw new Error(`UNKNOWN VALUE for axisType ${r}`)}c(nm,"_dimensionAxisRangeGen");function*c0(i,e){for(const t of Vd(e.constructor)){const n=`${rn}${t}`,s=`${n}/algorithm`,r=`${n}/sequence`,o=`${Rt}font`,a=`${n}/axis/range`,l=`${n}/axis/tag`,A=`${n}/axis/type`,u=e.get(t),h=u.get("dimensionSequenceTypeKey").value;if(h===ce.NULL)continue;const d=u.get("instance").wrapped;if(yield[s,h],h==="Range"){const g=d.get("axis");yield*nm(o,A,l,a,g);const p=[];for(const y of["start","end"]){const v=d.get(y),G=`${n}/${y}`;p.push(G),yield*nh(G,a,v)}const f=d.get("stepping"),m=[...p];yield[r,new _n($x.bind(null,f),m)]}else if(h==="Explicit"){const g=d.get("axis"),p=d.get("values"),f=[];yield*nm(o,A,l,a,g);for(const[y,v]of p){const G=`${n}/values/${y}`;f.push(G),yield*nh(G,a,v)}const m=[...f];yield[r,new _n(eL,m)]}else if(h==="NULL"){const g=d.get("amountValue").value;yield[`${n}/amountValue`,g],yield[r,Array(g).fill(null)]}else console.error(`NOT IMPLEMENTED dimensionsGen don't know how to handle algorithm type "${h}".`)}}c(c0,"dimensionsGen");const A0=Object.freeze(new Et(["textAlign","direction","columnWidth"])),tL=Object.freeze([ia,jx,a0,Wc,ma,c0,tc(Ne,A0)]),nL=Object.freeze([ia,a0,Wc,ma,c0,tc(Ne,A0)]),iL=new Set(["axesLocations/",bn]);function sL(i){console.log("GRID_PROPERTIES_PPS_MAP",So);const e=(()=>{const r=Ld.createPrimalDraft(i);for(const[o,a]of So){if(iL.has(a.prefix)){console.log(`_getGridPropertiesDefaultsMap SKIP ${o} :::: ${a}`);continue}if(console.log(`_getGridPropertiesDefaultsMap TAKE ${o} :::: ${a}`),a.prefix==at){const l=io(()=>null,a,o),A=pr(l,r.dependencies);r.set(o,A)}else if(a.prefix==Hi){console.error(`_getGridPropertiesDefaultsMap GOT LEADING ${o} ${a}`);continue}else{if(a.prefix==rn&&bY.has(a.registryKey))continue;{const l=io(()=>null,a,o);console.error(`_getGridPropertiesDefaultsMap FALLBACK ${o} ${a} defaultValue:`,l),r.get(o).value=l}}}return r.metamorphose()})(),t=Vi.propertiesGenerator(nL,e,new Map),n=Vi.initPropertyValuesMap(t,new Map),s=new it(n);return Object.freeze(s),s}c(sL,"_getGridPropertiesDefaultsMap");function rL(i,e){const t=`${e}/algorithm`,n=`${e}/sequence`,s=`${e}/axis/type`,r=`${e}/axis/tag`,o=`${e}/axis/range`,a={algorithm:"NULL",sequence:[null],range:i.has(o)?i.get(o):null};if(!i.has(t))return a;const l=i.get(t),A=Object.assign({},a,{algorithm:l}),u=i.get(n);return A.sequence=Array.isArray(u)&&u.length>0?u:a.sequence,l==="NULL"||(A.axisType=i.get(s),A.axisTag=i.get(r)),A}c(rL,"getDimensionFromPropertyValuesMap");function oL(i,...e){let t=null;for(const[n,s]of e){const r=n.sequence[s];if(r!==null)if(t===null&&(t=new Map(i)),n.axisType==="font")t.set(`axesLocations/${n.axisTag}`,r);else if(n.range&&n.range.targetKey){t.set(n.range.targetKey,r);const o=`${Ne}autoOPSZ`;n.axisTag==="fontSize"&&t.has(o)&&t.get(o)&&t.set("axesLocations/opsz",r)}else console.warn(`Don't know how to apply dimension ${n.axisType} ${n.axisTag} value "${r}"`)}return t||i}c(oL,"_applyDimensions");class aL extends me{static{c(this,"UIGrid")}static TEMPLATE=`<div class="ui_type_tools_grid">
</div>`;static TEMPLATE_ROW='<div class="ui_type_tools_grid-row"></div>';static TEMPLATE_CELL='<div class="ui_type_tools_grid-cell"></div>';constructor(e){super(e),this._cellContent="(uninitialized)",this._cellElements=[],[this.element]=this._initTemplate()}_initTemplate(){const e=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE).firstElementChild;return this._insertElement(e),[e]}update(e){if(console.log(`${this}.update:`,...e.keys(),e),e.has("content")){const t=e.get("content"),n=t.get("type").value,s=n==="custom"?t.get("customText").value:s0.get(n);this._cellContent=s}if(e.has("@properties")){const t=e.get("@properties"),n=t.typeSpecnion.getProperties();console.log("propertyValuesMap:",n);const[s,r]=[nd,id].map(a=>rL(n,`${rn}${a}`));console.log("dimensionX",s),console.log("dimensionY",r);const o=[];this._cellElements.splice(0,1/0);for(let a=0,l=r.sequence.length;a<l;a++){const A=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE_ROW).firstElementChild;o.push(A);for(let u=0,h=s.sequence.length;u<h;u++){const d=this._domTool.createFragmentFromHTML(this.constructor.TEMPLATE_CELL).firstElementChild;this._cellElements.push(d),d.textContent=this._cellContent,A.append(d);const g=oL(n,[s,u],[r,a]);this._styleCell(d,g)}}this._domTool.clear(this.element),this.element.append(...o)}else if(e.has("content"))for(const t of this._cellElements)t.textContent=this._cellContent}_styleCell(e,t){const n=Ze.createSimpleRecord(Rt,"font"),s=t.get(n.fullKey);e.style.setProperty("font-family",`"${s.fullName}"`),e.style.setProperty("--units-per-em",`${s.fontObject.unitsPerEm}`),e.style.setProperty("--ascender",`${s.fontObject.ascender}`),e.style.setProperty("--descender",`${s.fontObject.descender}`),Wn(e,t,c(a=>[!0,Ve(a).default],"getDefault"),[["colors/backgroundColor","background-color"],["colors/textColor","color"]]),li(e,t)}}class lL extends we{static{c(this,"TypeToolsGridController")}constructor(e,t){const n=e.domTool.createElement("div",{class:"grid-manager"}),s=new Map([...t,["grid-manager",n]]),r=D.fromParts(".","properties"),o=e.rootPath.append(...r);e.wrapper.setProtocolHandlerImplementation(...Nn.create("typeSpecProperties@")),super(e,s);const a=sL(e.getEntry(o).dependencies),l=[[{"typeSpecProperties@":e.rootPath.toString(),relativeRootPath:D.fromParts(".","properties")},[[".","typeSpec"]],Fd,tL,null,a],[{zone:"main"},[],tt,"Grid",n,!0],[{zone:"grid-manager",relativeRootPath:D.fromParts(".","properties")},[[".","dimensionsHost"],[`typeSpecProperties@${e.rootPath.toString()}`,"@properties"]],Kx,s],[{zone:"layout"},[[`typeSpecProperties@${e.rootPath.toString()}`,"@properties"],["./content","content"]],aL]];this._initWidgets(l)}update(...e){this.widgetBus.wrapper.getProtocolHandlerImplementation("typeSpecProperties@").resetUpdatedLog(),super.update(...e)}initialUpdate(...e){this.widgetBus.wrapper.getProtocolHandlerImplementation("typeSpecProperties@").resetUpdatedLog(),super.initialUpdate(...e)}}const GL=Object.freeze(Object.defineProperty({__proto__:null,AddOrAndDragButton:o0,Controller:lL,Model:Ox,axisLocationValueGen:nh,calculateAxisRangeLogicValueSynthetic:l0,getDimensionModelFields:Vd,getPPSMapForModel:Md},Symbol.toStringTag,{value:"Module"}));export{Uo as A,gL as B,st as C,uL as D,Hk as E,ql as F,vr as G,hL as H,dL as I,e1 as J,RI as K,vI as L,jN as M,ws as N,Je as O,D as P,ln as S,GL as T,xC as U,EL as V,ks as _,we as a,gn as b,me as c,ll as d,fn as e,Nn as f,pc as g,Za as h,Ao as i,Su as j,tQ as k,Lk as l,QI as m,qt as n,yn as o,ZI as p,wI as q,SI as r,NI as s,pl as t,IL as u,bL as v,BL as w,vL as x,AL as y,tt as z};
